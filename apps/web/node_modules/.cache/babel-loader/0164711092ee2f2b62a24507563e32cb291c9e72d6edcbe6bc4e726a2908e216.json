{"ast":null,"code":"var shortenHex = require('./shorten-hex');\nvar shortenHsl = require('./shorten-hsl');\nvar shortenRgb = require('./shorten-rgb');\nvar sortSelectors = require('./sort-selectors');\nvar tidyRules = require('./tidy-rules');\nvar tidyBlock = require('./tidy-block');\nvar tidyAtRule = require('./tidy-at-rule');\nvar Hack = require('../hack');\nvar removeUnused = require('../remove-unused');\nvar restoreFromOptimizing = require('../restore-from-optimizing');\nvar wrapForOptimizing = require('../wrap-for-optimizing').all;\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\nvar Token = require('../../tokenizer/token');\nvar Marker = require('../../tokenizer/marker');\nvar formatPosition = require('../../utils/format-position');\nvar split = require('../../utils/split');\nvar serializeRules = require('../../writer/one-time').rules;\nvar IgnoreProperty = 'ignore-property';\nvar CHARSET_TOKEN = '@charset';\nvar CHARSET_REGEXP = new RegExp('^' + CHARSET_TOKEN, 'i');\nvar DEFAULT_ROUNDING_PRECISION = require('../../options/rounding-precision').DEFAULT;\nvar WHOLE_PIXEL_VALUE = /(?:^|\\s|\\()(-?\\d+)px/;\nvar TIME_VALUE = /^(\\-?[\\d\\.]+)(m?s)$/;\nvar HEX_VALUE_PATTERN = /[0-9a-f]/i;\nvar PROPERTY_NAME_PATTERN = /^(?:\\-chrome\\-|\\-[\\w\\-]+\\w|\\w[\\w\\-]+\\w|\\-\\-\\S+)$/;\nvar IMPORT_PREFIX_PATTERN = /^@import/i;\nvar QUOTED_PATTERN = /^('.*'|\".*\")$/;\nvar QUOTED_BUT_SAFE_PATTERN = /^['\"][a-zA-Z][a-zA-Z\\d\\-_]+['\"]$/;\nvar URL_PREFIX_PATTERN = /^url\\(/i;\nvar LOCAL_PREFIX_PATTERN = /^local\\(/i;\nvar VARIABLE_NAME_PATTERN = /^--\\S+$/;\nfunction isLocal(value) {\n  return LOCAL_PREFIX_PATTERN.test(value);\n}\nfunction isNegative(value) {\n  return value && value[1][0] == '-' && parseFloat(value[1]) < 0;\n}\nfunction isQuoted(value) {\n  return QUOTED_PATTERN.test(value);\n}\nfunction isUrl(value) {\n  return URL_PREFIX_PATTERN.test(value);\n}\nfunction normalizeUrl(value) {\n  return value.replace(URL_PREFIX_PATTERN, 'url(').replace(/\\\\?\\n|\\\\?\\r\\n/g, '');\n}\nfunction optimizeBackground(property) {\n  var values = property.value;\n  if (values.length == 1 && values[0][1] == 'none') {\n    values[0][1] = '0 0';\n  }\n  if (values.length == 1 && values[0][1] == 'transparent') {\n    values[0][1] = '0 0';\n  }\n}\nfunction optimizeBorderRadius(property) {\n  var values = property.value;\n  var spliceAt;\n  if (values.length == 3 && values[1][1] == '/' && values[0][1] == values[2][1]) {\n    spliceAt = 1;\n  } else if (values.length == 5 && values[2][1] == '/' && values[0][1] == values[3][1] && values[1][1] == values[4][1]) {\n    spliceAt = 2;\n  } else if (values.length == 7 && values[3][1] == '/' && values[0][1] == values[4][1] && values[1][1] == values[5][1] && values[2][1] == values[6][1]) {\n    spliceAt = 3;\n  } else if (values.length == 9 && values[4][1] == '/' && values[0][1] == values[5][1] && values[1][1] == values[6][1] && values[2][1] == values[7][1] && values[3][1] == values[8][1]) {\n    spliceAt = 4;\n  }\n  if (spliceAt) {\n    property.value.splice(spliceAt);\n    property.dirty = true;\n  }\n}\n\n/**\n * @param {string} name\n * @param {string} value\n * @param {Object} compatibility\n * @return {string}\n */\nfunction optimizeColors(name, value, compatibility) {\n  if (!value.match(/#|rgb|hsl/gi)) {\n    return shortenHex(value);\n  }\n  value = value.replace(/(rgb|hsl)a?\\((\\-?\\d+),(\\-?\\d+\\%?),(\\-?\\d+\\%?),(0*[1-9]+[0-9]*(\\.?\\d*)?)\\)/gi, function (match, colorFn, p1, p2, p3, alpha) {\n    return parseInt(alpha, 10) >= 1 ? colorFn + '(' + [p1, p2, p3].join(',') + ')' : match;\n  }).replace(/rgb\\((\\-?\\d+),(\\-?\\d+),(\\-?\\d+)\\)/gi, function (match, red, green, blue) {\n    return shortenRgb(red, green, blue);\n  }).replace(/hsl\\((-?\\d+),(-?\\d+)%?,(-?\\d+)%?\\)/gi, function (match, hue, saturation, lightness) {\n    return shortenHsl(hue, saturation, lightness);\n  }).replace(/(^|[^='\"])#([0-9a-f]{6})/gi, function (match, prefix, color, at, inputValue) {\n    var suffix = inputValue[at + match.length];\n    if (suffix && HEX_VALUE_PATTERN.test(suffix)) {\n      return match;\n    } else if (color[0] == color[1] && color[2] == color[3] && color[4] == color[5]) {\n      return (prefix + '#' + color[0] + color[2] + color[4]).toLowerCase();\n    } else {\n      return (prefix + '#' + color).toLowerCase();\n    }\n  }).replace(/(^|[^='\"])#([0-9a-f]{3})/gi, function (match, prefix, color) {\n    return prefix + '#' + color.toLowerCase();\n  }).replace(/(rgb|rgba|hsl|hsla)\\(([^\\)]+)\\)/gi, function (match, colorFunction, colorDef) {\n    var tokens = colorDef.split(',');\n    var colorFnLowercase = colorFunction && colorFunction.toLowerCase();\n    var applies = colorFnLowercase == 'hsl' && tokens.length == 3 || colorFnLowercase == 'hsla' && tokens.length == 4 || colorFnLowercase == 'rgb' && tokens.length === 3 && colorDef.indexOf('%') > 0 || colorFnLowercase == 'rgba' && tokens.length == 4 && colorDef.indexOf('%') > 0;\n    if (!applies) {\n      return match;\n    }\n    if (tokens[1].indexOf('%') == -1) {\n      tokens[1] += '%';\n    }\n    if (tokens[2].indexOf('%') == -1) {\n      tokens[2] += '%';\n    }\n    return colorFunction + '(' + tokens.join(',') + ')';\n  });\n  if (compatibility.colors.opacity && name.indexOf('background') == -1) {\n    value = value.replace(/(?:rgba|hsla)\\(0,0%?,0%?,0\\)/g, function (match) {\n      if (split(value, ',').pop().indexOf('gradient(') > -1) {\n        return match;\n      }\n      return 'transparent';\n    });\n  }\n  return shortenHex(value);\n}\nfunction optimizeFilter(property) {\n  if (property.value.length == 1) {\n    property.value[0][1] = property.value[0][1].replace(/progid:DXImageTransform\\.Microsoft\\.(Alpha|Chroma)(\\W)/, function (match, filter, suffix) {\n      return filter.toLowerCase() + suffix;\n    });\n  }\n  property.value[0][1] = property.value[0][1].replace(/,(\\S)/g, ', $1').replace(/ ?= ?/g, '=');\n}\nfunction optimizeFontWeight(property, atIndex) {\n  var value = property.value[atIndex][1];\n  if (value == 'normal') {\n    value = '400';\n  } else if (value == 'bold') {\n    value = '700';\n  }\n  property.value[atIndex][1] = value;\n}\nfunction optimizeMultipleZeros(property) {\n  var values = property.value;\n  var spliceAt;\n  if (values.length == 4 && values[0][1] === '0' && values[1][1] === '0' && values[2][1] === '0' && values[3][1] === '0') {\n    if (property.name.indexOf('box-shadow') > -1) {\n      spliceAt = 2;\n    } else {\n      spliceAt = 1;\n    }\n  }\n  if (spliceAt) {\n    property.value.splice(spliceAt);\n    property.dirty = true;\n  }\n}\nfunction optimizeOutline(property) {\n  var values = property.value;\n  if (values.length == 1 && values[0][1] == 'none') {\n    values[0][1] = '0';\n  }\n}\nfunction optimizePixelLengths(_, value, compatibility) {\n  if (!WHOLE_PIXEL_VALUE.test(value)) {\n    return value;\n  }\n  return value.replace(WHOLE_PIXEL_VALUE, function (match, val) {\n    var newValue;\n    var intVal = parseInt(val);\n    if (intVal === 0) {\n      return match;\n    }\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.pt && intVal * 3 % 4 === 0) {\n      newValue = intVal * 3 / 4 + 'pt';\n    }\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.pc && intVal % 16 === 0) {\n      newValue = intVal / 16 + 'pc';\n    }\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.in && intVal % 96 === 0) {\n      newValue = intVal / 96 + 'in';\n    }\n    if (newValue) {\n      newValue = match.substring(0, match.indexOf(val)) + newValue;\n    }\n    return newValue && newValue.length < match.length ? newValue : match;\n  });\n}\nfunction optimizePrecision(_, value, precisionOptions) {\n  if (!precisionOptions.enabled || value.indexOf('.') === -1) {\n    return value;\n  }\n  return value.replace(precisionOptions.decimalPointMatcher, '$1$2$3').replace(precisionOptions.zeroMatcher, function (match, integerPart, fractionPart, unit) {\n    var multiplier = precisionOptions.units[unit].multiplier;\n    var parsedInteger = parseInt(integerPart);\n    var integer = isNaN(parsedInteger) ? 0 : parsedInteger;\n    var fraction = parseFloat(fractionPart);\n    return Math.round((integer + fraction) * multiplier) / multiplier + unit;\n  });\n}\nfunction optimizeTimeUnits(_, value) {\n  if (!TIME_VALUE.test(value)) return value;\n  return value.replace(TIME_VALUE, function (match, val, unit) {\n    var newValue;\n    if (unit == 'ms') {\n      newValue = parseInt(val) / 1000 + 's';\n    } else if (unit == 's') {\n      newValue = parseFloat(val) * 1000 + 'ms';\n    }\n    return newValue.length < match.length ? newValue : match;\n  });\n}\nfunction optimizeUnits(name, value, unitsRegexp) {\n  if (/^(?:\\-moz\\-calc|\\-webkit\\-calc|calc|rgb|hsl|rgba|hsla)\\(/.test(value)) {\n    return value;\n  }\n  if (name == 'flex' || name == '-ms-flex' || name == '-webkit-flex' || name == 'flex-basis' || name == '-webkit-flex-basis') {\n    return value;\n  }\n  if (value.indexOf('%') > 0 && (name == 'height' || name == 'max-height' || name == 'width' || name == 'max-width')) {\n    return value;\n  }\n  return value.replace(unitsRegexp, '$1' + '0' + '$2').replace(unitsRegexp, '$1' + '0' + '$2');\n}\nfunction optimizeWhitespace(name, value) {\n  if (name.indexOf('filter') > -1 || value.indexOf(' ') == -1 || value.indexOf('expression') === 0) {\n    return value;\n  }\n  if (value.indexOf(Marker.SINGLE_QUOTE) > -1 || value.indexOf(Marker.DOUBLE_QUOTE) > -1) {\n    return value;\n  }\n  value = value.replace(/\\s+/g, ' ');\n  if (value.indexOf('calc') > -1) {\n    value = value.replace(/\\) ?\\/ ?/g, ')/ ');\n  }\n  return value.replace(/(\\(;?)\\s+/g, '$1').replace(/\\s+(;?\\))/g, '$1').replace(/, /g, ',');\n}\nfunction optimizeZeroDegUnit(_, value) {\n  if (value.indexOf('0deg') == -1) {\n    return value;\n  }\n  return value.replace(/\\(0deg\\)/g, '(0)');\n}\nfunction optimizeZeroUnits(name, value) {\n  if (value.indexOf('0') == -1) {\n    return value;\n  }\n  if (value.indexOf('-') > -1) {\n    value = value.replace(/([^\\w\\d\\-]|^)\\-0([^\\.]|$)/g, '$10$2').replace(/([^\\w\\d\\-]|^)\\-0([^\\.]|$)/g, '$10$2');\n  }\n  return value.replace(/(^|\\s)0+([1-9])/g, '$1$2').replace(/(^|\\D)\\.0+(\\D|$)/g, '$10$2').replace(/(^|\\D)\\.0+(\\D|$)/g, '$10$2').replace(/\\.([1-9]*)0+(\\D|$)/g, function (match, nonZeroPart, suffix) {\n    return (nonZeroPart.length > 0 ? '.' : '') + nonZeroPart + suffix;\n  }).replace(/(^|\\D)0\\.(\\d)/g, '$1.$2');\n}\nfunction removeQuotes(name, value) {\n  if (name == 'content' || name.indexOf('font-variation-settings') > -1 || name.indexOf('font-feature-settings') > -1 || name == 'grid' || name.indexOf('grid-') > -1) {\n    return value;\n  }\n  return QUOTED_BUT_SAFE_PATTERN.test(value) ? value.substring(1, value.length - 1) : value;\n}\nfunction removeUrlQuotes(value) {\n  return /^url\\(['\"].+['\"]\\)$/.test(value) && !/^url\\(['\"].*[\\*\\s\\(\\)'\"].*['\"]\\)$/.test(value) && !/^url\\(['\"]data:[^;]+;charset/.test(value) ? value.replace(/[\"']/g, '') : value;\n}\nfunction transformValue(propertyName, propertyValue, rule, transformCallback) {\n  var selector = serializeRules(rule);\n  var transformedValue = transformCallback(propertyName, propertyValue, selector);\n  if (transformedValue === undefined) {\n    return propertyValue;\n  } else if (transformedValue === false) {\n    return IgnoreProperty;\n  } else {\n    return transformedValue;\n  }\n}\n\n//\n\nfunction optimizeBody(rule, properties, context) {\n  var options = context.options;\n  var levelOptions = options.level[OptimizationLevel.One];\n  var property, name, type, value;\n  var valueIsUrl;\n  var propertyToken;\n  var _properties = wrapForOptimizing(properties, true);\n  propertyLoop: for (var i = 0, l = _properties.length; i < l; i++) {\n    property = _properties[i];\n    name = property.name;\n    if (!PROPERTY_NAME_PATTERN.test(name)) {\n      propertyToken = property.all[property.position];\n      context.warnings.push('Invalid property name \\'' + name + '\\' at ' + formatPosition(propertyToken[1][2][0]) + '. Ignoring.');\n      property.unused = true;\n    }\n    if (property.value.length === 0) {\n      propertyToken = property.all[property.position];\n      context.warnings.push('Empty property \\'' + name + '\\' at ' + formatPosition(propertyToken[1][2][0]) + '. Ignoring.');\n      property.unused = true;\n    }\n    if (property.hack && ((property.hack[0] == Hack.ASTERISK || property.hack[0] == Hack.UNDERSCORE) && !options.compatibility.properties.iePrefixHack || property.hack[0] == Hack.BACKSLASH && !options.compatibility.properties.ieSuffixHack || property.hack[0] == Hack.BANG && !options.compatibility.properties.ieBangHack)) {\n      property.unused = true;\n    }\n    if (levelOptions.removeNegativePaddings && name.indexOf('padding') === 0 && (isNegative(property.value[0]) || isNegative(property.value[1]) || isNegative(property.value[2]) || isNegative(property.value[3]))) {\n      property.unused = true;\n    }\n    if (!options.compatibility.properties.ieFilters && isLegacyFilter(property)) {\n      property.unused = true;\n    }\n    if (property.unused) {\n      continue;\n    }\n    if (property.block) {\n      optimizeBody(rule, property.value[0][1], context);\n      continue;\n    }\n    if (VARIABLE_NAME_PATTERN.test(name)) {\n      continue;\n    }\n    for (var j = 0, m = property.value.length; j < m; j++) {\n      type = property.value[j][0];\n      value = property.value[j][1];\n      valueIsUrl = isUrl(value);\n      if (type == Token.PROPERTY_BLOCK) {\n        property.unused = true;\n        context.warnings.push('Invalid value token at ' + formatPosition(value[0][1][2][0]) + '. Ignoring.');\n        break;\n      }\n      if (valueIsUrl && !context.validator.isUrl(value)) {\n        property.unused = true;\n        context.warnings.push('Broken URL \\'' + value + '\\' at ' + formatPosition(property.value[j][2][0]) + '. Ignoring.');\n        break;\n      }\n      if (valueIsUrl) {\n        value = levelOptions.normalizeUrls ? normalizeUrl(value) : value;\n        value = !options.compatibility.properties.urlQuotes ? removeUrlQuotes(value) : value;\n      } else if (isQuoted(value) || isLocal(value)) {\n        value = levelOptions.removeQuotes ? removeQuotes(name, value) : value;\n      } else {\n        value = levelOptions.removeWhitespace ? optimizeWhitespace(name, value) : value;\n        value = optimizePrecision(name, value, options.precision);\n        value = optimizePixelLengths(name, value, options.compatibility);\n        value = levelOptions.replaceTimeUnits ? optimizeTimeUnits(name, value) : value;\n        value = levelOptions.replaceZeroUnits ? optimizeZeroUnits(name, value) : value;\n        if (options.compatibility.properties.zeroUnits) {\n          value = optimizeZeroDegUnit(name, value);\n          value = optimizeUnits(name, value, options.unitsRegexp);\n        }\n        if (options.compatibility.properties.colors) {\n          value = optimizeColors(name, value, options.compatibility);\n        }\n      }\n      value = transformValue(name, value, rule, levelOptions.transform);\n      if (value === IgnoreProperty) {\n        property.unused = true;\n        continue propertyLoop;\n      }\n      property.value[j][1] = value;\n    }\n    if (levelOptions.replaceMultipleZeros) {\n      optimizeMultipleZeros(property);\n    }\n    if (name == 'background' && levelOptions.optimizeBackground) {\n      optimizeBackground(property);\n    } else if (name.indexOf('border') === 0 && name.indexOf('radius') > 0 && levelOptions.optimizeBorderRadius) {\n      optimizeBorderRadius(property);\n    } else if (name == 'filter' && levelOptions.optimizeFilter && options.compatibility.properties.ieFilters) {\n      optimizeFilter(property);\n    } else if (name == 'font-weight' && levelOptions.optimizeFontWeight) {\n      optimizeFontWeight(property, 0);\n    } else if (name == 'outline' && levelOptions.optimizeOutline) {\n      optimizeOutline(property);\n    }\n  }\n  restoreFromOptimizing(_properties);\n  removeUnused(_properties);\n  removeComments(properties, options);\n}\nfunction removeComments(tokens, options) {\n  var token;\n  var i;\n  for (i = 0; i < tokens.length; i++) {\n    token = tokens[i];\n    if (token[0] != Token.COMMENT) {\n      continue;\n    }\n    optimizeComment(token, options);\n    if (token[1].length === 0) {\n      tokens.splice(i, 1);\n      i--;\n    }\n  }\n}\nfunction optimizeComment(token, options) {\n  if (token[1][2] == Marker.EXCLAMATION && (options.level[OptimizationLevel.One].specialComments == 'all' || options.commentsKept < options.level[OptimizationLevel.One].specialComments)) {\n    options.commentsKept++;\n    return;\n  }\n  token[1] = [];\n}\nfunction cleanupCharsets(tokens) {\n  var hasCharset = false;\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n    if (token[0] != Token.AT_RULE) continue;\n    if (!CHARSET_REGEXP.test(token[1])) continue;\n    if (hasCharset || token[1].indexOf(CHARSET_TOKEN) == -1) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    } else {\n      hasCharset = true;\n      tokens.splice(i, 1);\n      tokens.unshift([Token.AT_RULE, token[1].replace(CHARSET_REGEXP, CHARSET_TOKEN)]);\n    }\n  }\n}\nfunction buildUnitRegexp(options) {\n  var units = ['px', 'em', 'ex', 'cm', 'mm', 'in', 'pt', 'pc', '%'];\n  var otherUnits = ['ch', 'rem', 'vh', 'vm', 'vmax', 'vmin', 'vw'];\n  otherUnits.forEach(function (unit) {\n    if (options.compatibility.units[unit]) {\n      units.push(unit);\n    }\n  });\n  return new RegExp('(^|\\\\s|\\\\(|,)0(?:' + units.join('|') + ')(\\\\W|$)', 'g');\n}\nfunction buildPrecisionOptions(roundingPrecision) {\n  var precisionOptions = {\n    matcher: null,\n    units: {}\n  };\n  var optimizable = [];\n  var unit;\n  var value;\n  for (unit in roundingPrecision) {\n    value = roundingPrecision[unit];\n    if (value != DEFAULT_ROUNDING_PRECISION) {\n      precisionOptions.units[unit] = {};\n      precisionOptions.units[unit].value = value;\n      precisionOptions.units[unit].multiplier = Math.pow(10, value);\n      optimizable.push(unit);\n    }\n  }\n  if (optimizable.length > 0) {\n    precisionOptions.enabled = true;\n    precisionOptions.decimalPointMatcher = new RegExp('(\\\\d)\\\\.($|' + optimizable.join('|') + ')($|\\\\W)', 'g');\n    precisionOptions.zeroMatcher = new RegExp('(\\\\d*)(\\\\.\\\\d+)(' + optimizable.join('|') + ')', 'g');\n  }\n  return precisionOptions;\n}\nfunction isImport(token) {\n  return IMPORT_PREFIX_PATTERN.test(token[1]);\n}\nfunction isLegacyFilter(property) {\n  var value;\n  if (property.name == 'filter' || property.name == '-ms-filter') {\n    value = property.value[0][1];\n    return value.indexOf('progid') > -1 || value.indexOf('alpha') === 0 || value.indexOf('chroma') === 0;\n  } else {\n    return false;\n  }\n}\nfunction level1Optimize(tokens, context) {\n  var options = context.options;\n  var levelOptions = options.level[OptimizationLevel.One];\n  var ie7Hack = options.compatibility.selectors.ie7Hack;\n  var adjacentSpace = options.compatibility.selectors.adjacentSpace;\n  var spaceAfterClosingBrace = options.compatibility.properties.spaceAfterClosingBrace;\n  var format = options.format;\n  var mayHaveCharset = false;\n  var afterRules = false;\n  options.unitsRegexp = options.unitsRegexp || buildUnitRegexp(options);\n  options.precision = options.precision || buildPrecisionOptions(levelOptions.roundingPrecision);\n  options.commentsKept = options.commentsKept || 0;\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n    switch (token[0]) {\n      case Token.AT_RULE:\n        token[1] = isImport(token) && afterRules ? '' : token[1];\n        token[1] = levelOptions.tidyAtRules ? tidyAtRule(token[1]) : token[1];\n        mayHaveCharset = true;\n        break;\n      case Token.AT_RULE_BLOCK:\n        optimizeBody(token[1], token[2], context);\n        afterRules = true;\n        break;\n      case Token.NESTED_BLOCK:\n        token[1] = levelOptions.tidyBlockScopes ? tidyBlock(token[1], spaceAfterClosingBrace) : token[1];\n        level1Optimize(token[2], context);\n        afterRules = true;\n        break;\n      case Token.COMMENT:\n        optimizeComment(token, options);\n        break;\n      case Token.RULE:\n        token[1] = levelOptions.tidySelectors ? tidyRules(token[1], !ie7Hack, adjacentSpace, format, context.warnings) : token[1];\n        token[1] = token[1].length > 1 ? sortSelectors(token[1], levelOptions.selectorsSortingMethod) : token[1];\n        optimizeBody(token[1], token[2], context);\n        afterRules = true;\n        break;\n    }\n    if (token[0] == Token.COMMENT && token[1].length === 0 || levelOptions.removeEmpty && (token[1].length === 0 || token[2] && token[2].length === 0)) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    }\n  }\n  if (levelOptions.cleanupCharsets && mayHaveCharset) {\n    cleanupCharsets(tokens);\n  }\n  return tokens;\n}\nmodule.exports = level1Optimize;","map":{"version":3,"names":["shortenHex","require","shortenHsl","shortenRgb","sortSelectors","tidyRules","tidyBlock","tidyAtRule","Hack","removeUnused","restoreFromOptimizing","wrapForOptimizing","all","OptimizationLevel","Token","Marker","formatPosition","split","serializeRules","rules","IgnoreProperty","CHARSET_TOKEN","CHARSET_REGEXP","RegExp","DEFAULT_ROUNDING_PRECISION","DEFAULT","WHOLE_PIXEL_VALUE","TIME_VALUE","HEX_VALUE_PATTERN","PROPERTY_NAME_PATTERN","IMPORT_PREFIX_PATTERN","QUOTED_PATTERN","QUOTED_BUT_SAFE_PATTERN","URL_PREFIX_PATTERN","LOCAL_PREFIX_PATTERN","VARIABLE_NAME_PATTERN","isLocal","value","test","isNegative","parseFloat","isQuoted","isUrl","normalizeUrl","replace","optimizeBackground","property","values","length","optimizeBorderRadius","spliceAt","splice","dirty","optimizeColors","name","compatibility","match","colorFn","p1","p2","p3","alpha","parseInt","join","red","green","blue","hue","saturation","lightness","prefix","color","at","inputValue","suffix","toLowerCase","colorFunction","colorDef","tokens","colorFnLowercase","applies","indexOf","colors","opacity","pop","optimizeFilter","filter","optimizeFontWeight","atIndex","optimizeMultipleZeros","optimizeOutline","optimizePixelLengths","_","val","newValue","intVal","properties","shorterLengthUnits","units","pt","pc","in","substring","optimizePrecision","precisionOptions","enabled","decimalPointMatcher","zeroMatcher","integerPart","fractionPart","unit","multiplier","parsedInteger","integer","isNaN","fraction","Math","round","optimizeTimeUnits","optimizeUnits","unitsRegexp","optimizeWhitespace","SINGLE_QUOTE","DOUBLE_QUOTE","optimizeZeroDegUnit","optimizeZeroUnits","nonZeroPart","removeQuotes","removeUrlQuotes","transformValue","propertyName","propertyValue","rule","transformCallback","selector","transformedValue","undefined","optimizeBody","context","options","levelOptions","level","One","type","valueIsUrl","propertyToken","_properties","propertyLoop","i","l","position","warnings","push","unused","hack","ASTERISK","UNDERSCORE","iePrefixHack","BACKSLASH","ieSuffixHack","BANG","ieBangHack","removeNegativePaddings","ieFilters","isLegacyFilter","block","j","m","PROPERTY_BLOCK","validator","normalizeUrls","urlQuotes","removeWhitespace","precision","replaceTimeUnits","replaceZeroUnits","zeroUnits","transform","replaceMultipleZeros","removeComments","token","COMMENT","optimizeComment","EXCLAMATION","specialComments","commentsKept","cleanupCharsets","hasCharset","AT_RULE","unshift","buildUnitRegexp","otherUnits","forEach","buildPrecisionOptions","roundingPrecision","matcher","optimizable","pow","isImport","level1Optimize","ie7Hack","selectors","adjacentSpace","spaceAfterClosingBrace","format","mayHaveCharset","afterRules","tidyAtRules","AT_RULE_BLOCK","NESTED_BLOCK","tidyBlockScopes","RULE","tidySelectors","selectorsSortingMethod","removeEmpty","module","exports"],"sources":["F:/landinghub-iconic/node_modules/.pnpm/clean-css@4.2.4/node_modules/clean-css/lib/optimizer/level-1/optimize.js"],"sourcesContent":["var shortenHex = require('./shorten-hex');\nvar shortenHsl = require('./shorten-hsl');\nvar shortenRgb = require('./shorten-rgb');\nvar sortSelectors = require('./sort-selectors');\nvar tidyRules = require('./tidy-rules');\nvar tidyBlock = require('./tidy-block');\nvar tidyAtRule = require('./tidy-at-rule');\n\nvar Hack = require('../hack');\nvar removeUnused = require('../remove-unused');\nvar restoreFromOptimizing = require('../restore-from-optimizing');\nvar wrapForOptimizing = require('../wrap-for-optimizing').all;\n\nvar OptimizationLevel = require('../../options/optimization-level').OptimizationLevel;\n\nvar Token = require('../../tokenizer/token');\nvar Marker = require('../../tokenizer/marker');\n\nvar formatPosition = require('../../utils/format-position');\nvar split = require('../../utils/split');\n\nvar serializeRules = require('../../writer/one-time').rules;\n\nvar IgnoreProperty = 'ignore-property';\n\nvar CHARSET_TOKEN = '@charset';\nvar CHARSET_REGEXP = new RegExp('^' + CHARSET_TOKEN, 'i');\n\nvar DEFAULT_ROUNDING_PRECISION = require('../../options/rounding-precision').DEFAULT;\n\nvar WHOLE_PIXEL_VALUE = /(?:^|\\s|\\()(-?\\d+)px/;\nvar TIME_VALUE = /^(\\-?[\\d\\.]+)(m?s)$/;\n\nvar HEX_VALUE_PATTERN = /[0-9a-f]/i;\nvar PROPERTY_NAME_PATTERN = /^(?:\\-chrome\\-|\\-[\\w\\-]+\\w|\\w[\\w\\-]+\\w|\\-\\-\\S+)$/;\nvar IMPORT_PREFIX_PATTERN = /^@import/i;\nvar QUOTED_PATTERN = /^('.*'|\".*\")$/;\nvar QUOTED_BUT_SAFE_PATTERN = /^['\"][a-zA-Z][a-zA-Z\\d\\-_]+['\"]$/;\nvar URL_PREFIX_PATTERN = /^url\\(/i;\nvar LOCAL_PREFIX_PATTERN = /^local\\(/i;\nvar VARIABLE_NAME_PATTERN = /^--\\S+$/;\n\nfunction isLocal(value){\n  return LOCAL_PREFIX_PATTERN.test(value);\n}\n\nfunction isNegative(value) {\n  return value && value[1][0] == '-' && parseFloat(value[1]) < 0;\n}\n\nfunction isQuoted(value) {\n  return QUOTED_PATTERN.test(value);\n}\n\nfunction isUrl(value) {\n  return URL_PREFIX_PATTERN.test(value);\n}\n\nfunction normalizeUrl(value) {\n  return value\n    .replace(URL_PREFIX_PATTERN, 'url(')\n    .replace(/\\\\?\\n|\\\\?\\r\\n/g, '');\n}\n\nfunction optimizeBackground(property) {\n  var values = property.value;\n\n  if (values.length == 1 && values[0][1] == 'none') {\n    values[0][1] = '0 0';\n  }\n\n  if (values.length == 1 && values[0][1] == 'transparent') {\n    values[0][1] = '0 0';\n  }\n}\n\nfunction optimizeBorderRadius(property) {\n  var values = property.value;\n  var spliceAt;\n\n  if (values.length == 3 && values[1][1] == '/' && values[0][1] == values[2][1]) {\n    spliceAt = 1;\n  } else if (values.length == 5 && values[2][1] == '/' && values[0][1] == values[3][1] && values[1][1] == values[4][1]) {\n    spliceAt = 2;\n  } else if (values.length == 7 && values[3][1] == '/' && values[0][1] == values[4][1] && values[1][1] == values[5][1] && values[2][1] == values[6][1]) {\n    spliceAt = 3;\n  } else if (values.length == 9 && values[4][1] == '/' && values[0][1] == values[5][1] && values[1][1] == values[6][1] && values[2][1] == values[7][1] && values[3][1] == values[8][1]) {\n    spliceAt = 4;\n  }\n\n  if (spliceAt) {\n    property.value.splice(spliceAt);\n    property.dirty = true;\n  }\n}\n\n/**\n * @param {string} name\n * @param {string} value\n * @param {Object} compatibility\n * @return {string}\n */\nfunction optimizeColors(name, value, compatibility) {\n  if (!value.match(/#|rgb|hsl/gi)) {\n    return shortenHex(value);\n  }\n\n  value = value\n    .replace(/(rgb|hsl)a?\\((\\-?\\d+),(\\-?\\d+\\%?),(\\-?\\d+\\%?),(0*[1-9]+[0-9]*(\\.?\\d*)?)\\)/gi, function (match, colorFn, p1, p2, p3, alpha) {\n      return (parseInt(alpha, 10) >= 1 ? colorFn + '(' + [p1,p2,p3].join(',') + ')' : match);\n    })\n    .replace(/rgb\\((\\-?\\d+),(\\-?\\d+),(\\-?\\d+)\\)/gi, function (match, red, green, blue) {\n      return shortenRgb(red, green, blue);\n    })\n    .replace(/hsl\\((-?\\d+),(-?\\d+)%?,(-?\\d+)%?\\)/gi, function (match, hue, saturation, lightness) {\n      return shortenHsl(hue, saturation, lightness);\n    })\n    .replace(/(^|[^='\"])#([0-9a-f]{6})/gi, function (match, prefix, color, at, inputValue) {\n      var suffix = inputValue[at + match.length];\n\n      if (suffix && HEX_VALUE_PATTERN.test(suffix)) {\n        return match;\n      } else if (color[0] == color[1] && color[2] == color[3] && color[4] == color[5]) {\n        return (prefix + '#' + color[0] + color[2] + color[4]).toLowerCase();\n      } else {\n        return (prefix + '#' + color).toLowerCase();\n      }\n    })\n    .replace(/(^|[^='\"])#([0-9a-f]{3})/gi, function (match, prefix, color) {\n      return prefix + '#' + color.toLowerCase();\n    })\n    .replace(/(rgb|rgba|hsl|hsla)\\(([^\\)]+)\\)/gi, function (match, colorFunction, colorDef) {\n      var tokens = colorDef.split(',');\n      var colorFnLowercase = colorFunction && colorFunction.toLowerCase();\n      var applies = (colorFnLowercase == 'hsl' && tokens.length == 3) ||\n        (colorFnLowercase == 'hsla' && tokens.length == 4) ||\n        (colorFnLowercase == 'rgb' && tokens.length === 3 && colorDef.indexOf('%') > 0) ||\n        (colorFnLowercase == 'rgba' && tokens.length == 4 && colorDef.indexOf('%') > 0);\n\n      if (!applies) {\n        return match;\n      }\n\n      if (tokens[1].indexOf('%') == -1) {\n        tokens[1] += '%';\n      }\n\n      if (tokens[2].indexOf('%') == -1) {\n        tokens[2] += '%';\n      }\n\n      return colorFunction + '(' + tokens.join(',') + ')';\n    });\n\n  if (compatibility.colors.opacity && name.indexOf('background') == -1) {\n    value = value.replace(/(?:rgba|hsla)\\(0,0%?,0%?,0\\)/g, function (match) {\n      if (split(value, ',').pop().indexOf('gradient(') > -1) {\n        return match;\n      }\n\n      return 'transparent';\n    });\n  }\n\n  return shortenHex(value);\n}\n\nfunction optimizeFilter(property) {\n  if (property.value.length == 1) {\n    property.value[0][1] = property.value[0][1].replace(/progid:DXImageTransform\\.Microsoft\\.(Alpha|Chroma)(\\W)/, function (match, filter, suffix) {\n      return filter.toLowerCase() + suffix;\n    });\n  }\n\n  property.value[0][1] = property.value[0][1]\n    .replace(/,(\\S)/g, ', $1')\n    .replace(/ ?= ?/g, '=');\n}\n\nfunction optimizeFontWeight(property, atIndex) {\n  var value = property.value[atIndex][1];\n\n  if (value == 'normal') {\n    value = '400';\n  } else if (value == 'bold') {\n    value = '700';\n  }\n\n  property.value[atIndex][1] = value;\n}\n\nfunction optimizeMultipleZeros(property) {\n  var values = property.value;\n  var spliceAt;\n\n  if (values.length == 4 && values[0][1] === '0' && values[1][1] === '0' && values[2][1] === '0' && values[3][1] === '0') {\n    if (property.name.indexOf('box-shadow') > -1) {\n      spliceAt = 2;\n    } else {\n      spliceAt = 1;\n    }\n  }\n\n  if (spliceAt) {\n    property.value.splice(spliceAt);\n    property.dirty = true;\n  }\n}\n\nfunction optimizeOutline(property) {\n  var values = property.value;\n\n  if (values.length == 1 && values[0][1] == 'none') {\n    values[0][1] = '0';\n  }\n}\n\nfunction optimizePixelLengths(_, value, compatibility) {\n  if (!WHOLE_PIXEL_VALUE.test(value)) {\n    return value;\n  }\n\n  return value.replace(WHOLE_PIXEL_VALUE, function (match, val) {\n    var newValue;\n    var intVal = parseInt(val);\n\n    if (intVal === 0) {\n      return match;\n    }\n\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.pt && intVal * 3 % 4 === 0) {\n      newValue = intVal * 3 / 4 + 'pt';\n    }\n\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.pc && intVal % 16 === 0) {\n      newValue = intVal / 16 + 'pc';\n    }\n\n    if (compatibility.properties.shorterLengthUnits && compatibility.units.in && intVal % 96 === 0) {\n      newValue = intVal / 96 + 'in';\n    }\n\n    if (newValue) {\n      newValue = match.substring(0, match.indexOf(val)) + newValue;\n    }\n\n    return newValue && newValue.length < match.length ? newValue : match;\n  });\n}\n\nfunction optimizePrecision(_, value, precisionOptions) {\n  if (!precisionOptions.enabled || value.indexOf('.') === -1) {\n    return value;\n  }\n\n  return value\n    .replace(precisionOptions.decimalPointMatcher, '$1$2$3')\n    .replace(precisionOptions.zeroMatcher, function (match, integerPart, fractionPart, unit) {\n      var multiplier = precisionOptions.units[unit].multiplier;\n      var parsedInteger = parseInt(integerPart);\n      var integer = isNaN(parsedInteger) ? 0 : parsedInteger;\n      var fraction = parseFloat(fractionPart);\n\n      return Math.round((integer + fraction) * multiplier) / multiplier + unit;\n    });\n}\n\nfunction optimizeTimeUnits(_, value) {\n  if (!TIME_VALUE.test(value))\n    return value;\n\n  return value.replace(TIME_VALUE, function (match, val, unit) {\n    var newValue;\n\n    if (unit == 'ms') {\n      newValue = parseInt(val) / 1000 + 's';\n    } else if (unit == 's') {\n      newValue = parseFloat(val) * 1000 + 'ms';\n    }\n\n    return newValue.length < match.length ? newValue : match;\n  });\n}\n\nfunction optimizeUnits(name, value, unitsRegexp) {\n  if (/^(?:\\-moz\\-calc|\\-webkit\\-calc|calc|rgb|hsl|rgba|hsla)\\(/.test(value)) {\n    return value;\n  }\n\n  if (name == 'flex' || name == '-ms-flex' || name == '-webkit-flex' || name == 'flex-basis' || name == '-webkit-flex-basis') {\n    return value;\n  }\n\n  if (value.indexOf('%') > 0 && (name == 'height' || name == 'max-height' || name == 'width' || name == 'max-width')) {\n    return value;\n  }\n\n  return value\n    .replace(unitsRegexp, '$1' + '0' + '$2')\n    .replace(unitsRegexp, '$1' + '0' + '$2');\n}\n\nfunction optimizeWhitespace(name, value) {\n  if (name.indexOf('filter') > -1 || value.indexOf(' ') == -1 || value.indexOf('expression') === 0) {\n    return value;\n  }\n\n  if (value.indexOf(Marker.SINGLE_QUOTE) > -1 || value.indexOf(Marker.DOUBLE_QUOTE) > -1) {\n    return value;\n  }\n\n  value = value.replace(/\\s+/g, ' ');\n\n  if (value.indexOf('calc') > -1) {\n    value = value.replace(/\\) ?\\/ ?/g, ')/ ');\n  }\n\n  return value\n    .replace(/(\\(;?)\\s+/g, '$1')\n    .replace(/\\s+(;?\\))/g, '$1')\n    .replace(/, /g, ',');\n}\n\nfunction optimizeZeroDegUnit(_, value) {\n  if (value.indexOf('0deg') == -1) {\n    return value;\n  }\n\n  return value.replace(/\\(0deg\\)/g, '(0)');\n}\n\nfunction optimizeZeroUnits(name, value) {\n  if (value.indexOf('0') == -1) {\n    return value;\n  }\n\n  if (value.indexOf('-') > -1) {\n    value = value\n      .replace(/([^\\w\\d\\-]|^)\\-0([^\\.]|$)/g, '$10$2')\n      .replace(/([^\\w\\d\\-]|^)\\-0([^\\.]|$)/g, '$10$2');\n  }\n\n  return value\n    .replace(/(^|\\s)0+([1-9])/g, '$1$2')\n    .replace(/(^|\\D)\\.0+(\\D|$)/g, '$10$2')\n    .replace(/(^|\\D)\\.0+(\\D|$)/g, '$10$2')\n    .replace(/\\.([1-9]*)0+(\\D|$)/g, function (match, nonZeroPart, suffix) {\n      return (nonZeroPart.length > 0 ? '.' : '') + nonZeroPart + suffix;\n    })\n    .replace(/(^|\\D)0\\.(\\d)/g, '$1.$2');\n}\n\nfunction removeQuotes(name, value) {\n  if (name == 'content' || name.indexOf('font-variation-settings') > -1 || name.indexOf('font-feature-settings') > -1 || name == 'grid' || name.indexOf('grid-') > -1) {\n    return value;\n  }\n\n  return QUOTED_BUT_SAFE_PATTERN.test(value) ?\n    value.substring(1, value.length - 1) :\n    value;\n}\n\nfunction removeUrlQuotes(value) {\n  return /^url\\(['\"].+['\"]\\)$/.test(value) && !/^url\\(['\"].*[\\*\\s\\(\\)'\"].*['\"]\\)$/.test(value) && !/^url\\(['\"]data:[^;]+;charset/.test(value) ?\n    value.replace(/[\"']/g, '') :\n    value;\n}\n\nfunction transformValue(propertyName, propertyValue, rule, transformCallback) {\n  var selector = serializeRules(rule);\n  var transformedValue = transformCallback(propertyName, propertyValue, selector);\n\n  if (transformedValue === undefined) {\n    return propertyValue;\n  } else if (transformedValue === false) {\n    return IgnoreProperty;\n  } else {\n    return transformedValue;\n  }\n}\n\n//\n\nfunction optimizeBody(rule, properties, context) {\n  var options = context.options;\n  var levelOptions = options.level[OptimizationLevel.One];\n  var property, name, type, value;\n  var valueIsUrl;\n  var propertyToken;\n  var _properties = wrapForOptimizing(properties, true);\n\n  propertyLoop:\n  for (var i = 0, l = _properties.length; i < l; i++) {\n    property = _properties[i];\n    name = property.name;\n\n    if (!PROPERTY_NAME_PATTERN.test(name)) {\n      propertyToken = property.all[property.position];\n      context.warnings.push('Invalid property name \\'' + name + '\\' at ' + formatPosition(propertyToken[1][2][0]) + '. Ignoring.');\n      property.unused = true;\n    }\n\n    if (property.value.length === 0) {\n      propertyToken = property.all[property.position];\n      context.warnings.push('Empty property \\'' + name + '\\' at ' + formatPosition(propertyToken[1][2][0]) + '. Ignoring.');\n      property.unused = true;\n    }\n\n    if (property.hack && (\n        (property.hack[0] == Hack.ASTERISK || property.hack[0] == Hack.UNDERSCORE) && !options.compatibility.properties.iePrefixHack ||\n        property.hack[0] == Hack.BACKSLASH && !options.compatibility.properties.ieSuffixHack ||\n        property.hack[0] == Hack.BANG && !options.compatibility.properties.ieBangHack)) {\n      property.unused = true;\n    }\n\n    if (levelOptions.removeNegativePaddings && name.indexOf('padding') === 0 && (isNegative(property.value[0]) || isNegative(property.value[1]) || isNegative(property.value[2]) || isNegative(property.value[3]))) {\n      property.unused = true;\n    }\n\n    if (!options.compatibility.properties.ieFilters && isLegacyFilter(property)) {\n      property.unused = true;\n    }\n\n    if (property.unused) {\n      continue;\n    }\n\n    if (property.block) {\n      optimizeBody(rule, property.value[0][1], context);\n      continue;\n    }\n\n    if (VARIABLE_NAME_PATTERN.test(name)) {\n      continue;\n    }\n\n    for (var j = 0, m = property.value.length; j < m; j++) {\n      type = property.value[j][0];\n      value = property.value[j][1];\n      valueIsUrl = isUrl(value);\n\n      if (type == Token.PROPERTY_BLOCK) {\n        property.unused = true;\n        context.warnings.push('Invalid value token at ' + formatPosition(value[0][1][2][0]) + '. Ignoring.');\n        break;\n      }\n\n      if (valueIsUrl && !context.validator.isUrl(value)) {\n        property.unused = true;\n        context.warnings.push('Broken URL \\'' + value + '\\' at ' + formatPosition(property.value[j][2][0]) + '. Ignoring.');\n        break;\n      }\n\n      if (valueIsUrl) {\n        value = levelOptions.normalizeUrls ?\n          normalizeUrl(value) :\n          value;\n        value = !options.compatibility.properties.urlQuotes ?\n          removeUrlQuotes(value) :\n          value;\n      } else if (isQuoted(value) || isLocal(value)) {\n        value = levelOptions.removeQuotes ?\n          removeQuotes(name, value) :\n          value;\n      } else {\n        value = levelOptions.removeWhitespace ?\n          optimizeWhitespace(name, value) :\n          value;\n        value = optimizePrecision(name, value, options.precision);\n        value = optimizePixelLengths(name, value, options.compatibility);\n        value = levelOptions.replaceTimeUnits ?\n          optimizeTimeUnits(name, value) :\n          value;\n        value = levelOptions.replaceZeroUnits ?\n          optimizeZeroUnits(name, value) :\n          value;\n\n        if (options.compatibility.properties.zeroUnits) {\n          value = optimizeZeroDegUnit(name, value);\n          value = optimizeUnits(name, value, options.unitsRegexp);\n        }\n\n        if (options.compatibility.properties.colors) {\n          value = optimizeColors(name, value, options.compatibility);\n        }\n      }\n\n      value = transformValue(name, value, rule, levelOptions.transform);\n\n      if (value === IgnoreProperty) {\n        property.unused = true;\n        continue propertyLoop;\n      }\n\n      property.value[j][1] = value;\n    }\n\n    if (levelOptions.replaceMultipleZeros) {\n      optimizeMultipleZeros(property);\n    }\n\n    if (name == 'background' && levelOptions.optimizeBackground) {\n      optimizeBackground(property);\n    } else if (name.indexOf('border') === 0 && name.indexOf('radius') > 0 && levelOptions.optimizeBorderRadius) {\n      optimizeBorderRadius(property);\n    } else if (name == 'filter'&& levelOptions.optimizeFilter && options.compatibility.properties.ieFilters) {\n      optimizeFilter(property);\n    } else if (name == 'font-weight' && levelOptions.optimizeFontWeight) {\n      optimizeFontWeight(property, 0);\n    } else if (name == 'outline' && levelOptions.optimizeOutline) {\n      optimizeOutline(property);\n    }\n  }\n\n  restoreFromOptimizing(_properties);\n  removeUnused(_properties);\n  removeComments(properties, options);\n}\n\nfunction removeComments(tokens, options) {\n  var token;\n  var i;\n\n  for (i = 0; i < tokens.length; i++) {\n    token = tokens[i];\n\n    if (token[0] != Token.COMMENT) {\n      continue;\n    }\n\n    optimizeComment(token, options);\n\n    if (token[1].length === 0) {\n      tokens.splice(i, 1);\n      i--;\n    }\n  }\n}\n\nfunction optimizeComment(token, options) {\n  if (token[1][2] == Marker.EXCLAMATION && (options.level[OptimizationLevel.One].specialComments == 'all' || options.commentsKept < options.level[OptimizationLevel.One].specialComments)) {\n    options.commentsKept++;\n    return;\n  }\n\n  token[1] = [];\n}\n\nfunction cleanupCharsets(tokens) {\n  var hasCharset = false;\n\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n\n    if (token[0] != Token.AT_RULE)\n      continue;\n\n    if (!CHARSET_REGEXP.test(token[1]))\n      continue;\n\n    if (hasCharset || token[1].indexOf(CHARSET_TOKEN) == -1) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    } else {\n      hasCharset = true;\n      tokens.splice(i, 1);\n      tokens.unshift([Token.AT_RULE, token[1].replace(CHARSET_REGEXP, CHARSET_TOKEN)]);\n    }\n  }\n}\n\nfunction buildUnitRegexp(options) {\n  var units = ['px', 'em', 'ex', 'cm', 'mm', 'in', 'pt', 'pc', '%'];\n  var otherUnits = ['ch', 'rem', 'vh', 'vm', 'vmax', 'vmin', 'vw'];\n\n  otherUnits.forEach(function (unit) {\n    if (options.compatibility.units[unit]) {\n      units.push(unit);\n    }\n  });\n\n  return new RegExp('(^|\\\\s|\\\\(|,)0(?:' + units.join('|') + ')(\\\\W|$)', 'g');\n}\n\nfunction buildPrecisionOptions(roundingPrecision) {\n  var precisionOptions = {\n    matcher: null,\n    units: {},\n  };\n  var optimizable = [];\n  var unit;\n  var value;\n\n  for (unit in roundingPrecision) {\n    value = roundingPrecision[unit];\n\n    if (value != DEFAULT_ROUNDING_PRECISION) {\n      precisionOptions.units[unit] = {};\n      precisionOptions.units[unit].value = value;\n      precisionOptions.units[unit].multiplier = Math.pow(10, value);\n\n      optimizable.push(unit);\n    }\n  }\n\n  if (optimizable.length > 0) {\n    precisionOptions.enabled = true;\n    precisionOptions.decimalPointMatcher = new RegExp('(\\\\d)\\\\.($|' + optimizable.join('|') + ')($|\\\\W)', 'g');\n    precisionOptions.zeroMatcher = new RegExp('(\\\\d*)(\\\\.\\\\d+)(' + optimizable.join('|') + ')', 'g');\n  }\n\n  return precisionOptions;\n}\n\nfunction isImport(token) {\n  return IMPORT_PREFIX_PATTERN.test(token[1]);\n}\n\nfunction isLegacyFilter(property) {\n  var value;\n\n  if (property.name == 'filter' || property.name == '-ms-filter') {\n    value = property.value[0][1];\n\n    return value.indexOf('progid') > -1 ||\n      value.indexOf('alpha') === 0 ||\n      value.indexOf('chroma') === 0;\n  } else {\n    return false;\n  }\n}\n\nfunction level1Optimize(tokens, context) {\n  var options = context.options;\n  var levelOptions = options.level[OptimizationLevel.One];\n  var ie7Hack = options.compatibility.selectors.ie7Hack;\n  var adjacentSpace = options.compatibility.selectors.adjacentSpace;\n  var spaceAfterClosingBrace = options.compatibility.properties.spaceAfterClosingBrace;\n  var format = options.format;\n  var mayHaveCharset = false;\n  var afterRules = false;\n\n  options.unitsRegexp = options.unitsRegexp || buildUnitRegexp(options);\n  options.precision = options.precision || buildPrecisionOptions(levelOptions.roundingPrecision);\n  options.commentsKept = options.commentsKept || 0;\n\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    var token = tokens[i];\n\n    switch (token[0]) {\n      case Token.AT_RULE:\n        token[1] = isImport(token) && afterRules ? '' : token[1];\n        token[1] = levelOptions.tidyAtRules ? tidyAtRule(token[1]) : token[1];\n        mayHaveCharset = true;\n        break;\n      case Token.AT_RULE_BLOCK:\n        optimizeBody(token[1], token[2], context);\n        afterRules = true;\n        break;\n      case Token.NESTED_BLOCK:\n        token[1] = levelOptions.tidyBlockScopes ? tidyBlock(token[1], spaceAfterClosingBrace) : token[1];\n        level1Optimize(token[2], context);\n        afterRules = true;\n        break;\n      case Token.COMMENT:\n        optimizeComment(token, options);\n        break;\n      case Token.RULE:\n        token[1] = levelOptions.tidySelectors ? tidyRules(token[1], !ie7Hack, adjacentSpace, format, context.warnings) : token[1];\n        token[1] = token[1].length > 1 ? sortSelectors(token[1], levelOptions.selectorsSortingMethod) : token[1];\n        optimizeBody(token[1], token[2], context);\n        afterRules = true;\n        break;\n    }\n\n    if (token[0] == Token.COMMENT && token[1].length === 0 || levelOptions.removeEmpty && (token[1].length === 0 || (token[2] && token[2].length === 0))) {\n      tokens.splice(i, 1);\n      i--;\n      l--;\n    }\n  }\n\n  if (levelOptions.cleanupCharsets && mayHaveCharset) {\n    cleanupCharsets(tokens);\n  }\n\n  return tokens;\n}\n\nmodule.exports = level1Optimize;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}