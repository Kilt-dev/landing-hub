{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useRef, useMemo, useCallback, useState } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport QuickEditToolkit from './QuickEditToolkit';\nimport '../../styles/CreateLanding.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  SECTION: 'section',\n  ELEMENT: 'element',\n  EXISTING_ELEMENT: 'existingElement'\n};\nconst Element = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  component,\n  index,\n  isSelected,\n  onSelectElement,\n  handleElementHover,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  updatePosition,\n  canvasRef,\n  sectionId,\n  onInlineEdit,\n  pageStructure,\n  zoomLevel,\n  viewMode\n}) => {\n  var _component$json$style, _component$json$style2;\n  _s();\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: ItemTypes.EXISTING_ELEMENT,\n    item: {\n      id: component.id,\n      sectionId,\n      json: component.json\n    },\n    end: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset && canvasRef.current && sectionId && monitor.didDrop()) {\n        var _document$getElementB;\n        const sectionRect = (_document$getElementB = document.getElementById(sectionId)) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.getBoundingClientRect();\n        if (!sectionRect) return;\n        const newX = Math.round((clientOffset.x - sectionRect.left) / (zoomLevel / 100) / 10) * 10;\n        const newY = Math.round((clientOffset.y - sectionRect.top) / (zoomLevel / 100) / 10) * 10;\n        const section = pageStructure.children.find(s => s.id === sectionId);\n        let adjustedY = newY;\n        if (section) {\n          section.elements.forEach(el => {\n            if (el.id !== component.id) {\n              var _el$json$styles$viewM, _el$json$styles$viewM2;\n              const elX = ((_el$json$styles$viewM = el.json.styles[viewMode]) === null || _el$json$styles$viewM === void 0 ? void 0 : _el$json$styles$viewM.left) || 0;\n              const elY = ((_el$json$styles$viewM2 = el.json.styles[viewMode]) === null || _el$json$styles$viewM2 === void 0 ? void 0 : _el$json$styles$viewM2.top) || 0;\n              if (Math.abs(newX - elX) < 50 && Math.abs(newY - elY) < 50) {\n                adjustedY = elY + 20;\n              }\n            }\n          });\n        }\n        updatePosition(component.id, sectionId, {\n          desktop: {\n            left: newX,\n            top: adjustedY\n          },\n          mobile: {\n            left: Math.round(newX / 2),\n            top: Math.round(adjustedY / 2)\n          }\n        });\n      }\n    },\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging()\n    })\n  }));\n  const handleMouseDown = e => {\n    e.stopPropagation();\n    onSelectElement(component);\n  };\n  const handleInlineEdit = e => {\n    if (onInlineEdit && e.target.contentEditable === 'true') {\n      onInlineEdit(component.id, sectionId, e.target.innerText);\n    }\n  };\n  const renderContent = () => {\n    var _styles$viewMode, _styles$viewMode2, _styles$viewMode3, _styles$viewMode4;\n    const {\n      type,\n      componentData = {},\n      styles = {\n        desktop: {},\n        mobile: {}\n      },\n      children = []\n    } = component.json || {};\n    const containerStyle = {\n      ...styles[viewMode],\n      position: 'absolute',\n      left: ((_styles$viewMode = styles[viewMode]) === null || _styles$viewMode === void 0 ? void 0 : _styles$viewMode.left) || 0,\n      top: ((_styles$viewMode2 = styles[viewMode]) === null || _styles$viewMode2 === void 0 ? void 0 : _styles$viewMode2.top) || 0,\n      maxWidth: '100%',\n      boxSizing: 'border-box',\n      transform: isSelected ? 'translate(-2px, -2px)' : 'none',\n      width: ((_styles$viewMode3 = styles[viewMode]) === null || _styles$viewMode3 === void 0 ? void 0 : _styles$viewMode3.width) || 'auto',\n      height: ((_styles$viewMode4 = styles[viewMode]) === null || _styles$viewMode4 === void 0 ? void 0 : _styles$viewMode4.height) || 'auto'\n    };\n    const renderChildren = () => {\n      return children.map((child, idx) => {\n        var _selectedElement;\n        return /*#__PURE__*/_jsxDEV(Element, {\n          component: {\n            id: child.id,\n            json: child\n          },\n          index: idx,\n          isSelected: isSelected && ((_selectedElement = selectedElement) === null || _selectedElement === void 0 ? void 0 : _selectedElement.id) === child.id,\n          onSelectElement: onSelectElement,\n          handleElementHover: handleElementHover,\n          onDuplicateElement: onDuplicateElement,\n          onDeleteElement: onDeleteElement,\n          onMoveElement: onMoveElement,\n          updatePosition: updatePosition,\n          canvasRef: canvasRef,\n          sectionId: sectionId,\n          onInlineEdit: onInlineEdit,\n          pageStructure: pageStructure,\n          zoomLevel: zoomLevel,\n          viewMode: viewMode\n        }, child.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this);\n      });\n    };\n    if (children.length > 0) {\n      switch (type) {\n        case 'form':\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: containerStyle,\n            className: \"lpb-form-container\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: e => e.preventDefault(),\n              onMouseDown: e => e.stopPropagation(),\n              children: [renderChildren(), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                style: {\n                  marginTop: '8px',\n                  ...styles[viewMode]\n                },\n                onMouseDown: e => e.stopPropagation(),\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this);\n        case 'button-group':\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: containerStyle,\n            className: \"lpb-button-group-container\",\n            children: renderChildren()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 29\n          }, this);\n        case 'gallery':\n        case 'carousel':\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: containerStyle,\n            className: \"lpb-gallery-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: type === 'carousel' ? 'flex' : 'flex',\n                flexWrap: type === 'gallery' ? 'wrap' : 'nowrap',\n                gap: '10px'\n              },\n              children: renderChildren()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 29\n          }, this);\n        default:\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: containerStyle,\n            className: \"lpb-container\",\n            children: [component.name || 'Unknown', renderChildren()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 29\n          }, this);\n      }\n    }\n    switch (type) {\n      case 'heading':\n        return /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: containerStyle,\n          contentEditable: true,\n          suppressContentEditableWarning: true,\n          onBlur: handleInlineEdit,\n          onMouseDown: e => e.stopPropagation(),\n          children: componentData.content || 'Tiêu đề'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }, this);\n      case 'paragraph':\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: containerStyle,\n          contentEditable: true,\n          suppressContentEditableWarning: true,\n          onBlur: handleInlineEdit,\n          onMouseDown: e => e.stopPropagation(),\n          children: componentData.content || 'Đoạn văn'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 25\n        }, this);\n      case 'button':\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          style: containerStyle,\n          contentEditable: true,\n          suppressContentEditableWarning: true,\n          onBlur: handleInlineEdit,\n          onMouseDown: e => e.stopPropagation(),\n          children: componentData.content || 'Nút'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 25\n        }, this);\n      case 'image':\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          src: componentData.src || 'https://via.placeholder.com/150',\n          alt: \"Image\",\n          style: containerStyle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }, this);\n      case 'input':\n        return /*#__PURE__*/_jsxDEV(\"input\", {\n          type: componentData.type || 'text',\n          placeholder: componentData.label || 'Input',\n          style: {\n            ...containerStyle,\n            width: '100%'\n          },\n          onMouseDown: e => e.stopPropagation()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 25\n        }, this);\n      case 'textarea':\n        return /*#__PURE__*/_jsxDEV(\"textarea\", {\n          placeholder: componentData.label || 'Textarea',\n          style: {\n            ...containerStyle,\n            width: '100%'\n          },\n          onMouseDown: e => e.stopPropagation()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 25\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: containerStyle,\n          children: component.name || 'Unknown'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 28\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drag,\n    \"data-id\": component.id,\n    className: `lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`,\n    onMouseEnter: e => handleElementHover(e, component),\n    onMouseDown: handleMouseDown,\n    style: {\n      position: 'absolute',\n      left: ((_component$json$style = component.json.styles[viewMode]) === null || _component$json$style === void 0 ? void 0 : _component$json$style.left) || 0,\n      top: ((_component$json$style2 = component.json.styles[viewMode]) === null || _component$json$style2 === void 0 ? void 0 : _component$json$style2.top) || 0,\n      zIndex: isSelected ? 10 : 1,\n      boxSizing: 'border-box',\n      ...component.json.styles[viewMode]\n    },\n    children: renderContent()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 13\n  }, this);\n}, \"wuumsFp4qAni9XRJfRhQAZjuD/k=\", false, function () {\n  return [useDrag];\n})), \"wuumsFp4qAni9XRJfRhQAZjuD/k=\", false, function () {\n  return [useDrag];\n});\n_c2 = Element;\nconst Section = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c3 = _s2(({\n  section,\n  index,\n  selectedElement,\n  onSelectElement,\n  handleElementHover,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  updatePosition,\n  addElement,\n  canvasRef,\n  moveElement,\n  onInlineEdit,\n  onSelectSection,\n  viewMode,\n  pageStructure,\n  zoomLevel\n}) => {\n  var _section$json$styles$, _section$json$styles$2, _section$json$styles$3, _section$json$styles$4, _section$json$styles$5, _section$json$compone;\n  _s2();\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\n    hover: (item, monitor) => {\n      if (!monitor.isOver({\n        shallow: true\n      })) return;\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset && canvasRef.current) {\n        var _document$getElementB2;\n        const sectionRect = (_document$getElementB2 = document.getElementById(section.id)) === null || _document$getElementB2 === void 0 ? void 0 : _document$getElementB2.getBoundingClientRect();\n        if (!sectionRect) return;\n        item.dropPosition = {\n          left: Math.round((clientOffset.x - sectionRect.left) / (zoomLevel / 100) / 10) * 10,\n          top: Math.round((clientOffset.y - sectionRect.top) / (zoomLevel / 100) / 10) * 10\n        };\n      }\n    },\n    drop: (item, monitor) => {\n      var _document$getElementB3;\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\n        return;\n      }\n      const sectionRect = (_document$getElementB3 = document.getElementById(section.id)) === null || _document$getElementB3 === void 0 ? void 0 : _document$getElementB3.getBoundingClientRect();\n      if (!sectionRect) return;\n      let position = {\n        left: Math.round((clientOffset.x - sectionRect.left) / (zoomLevel / 100) / 10) * 10,\n        top: Math.round((clientOffset.y - sectionRect.top) / (zoomLevel / 100) / 10) * 10\n      };\n      const sectionElements = section.elements || [];\n      sectionElements.forEach(el => {\n        var _item$json;\n        if (el.id !== (item.id || ((_item$json = item.json) === null || _item$json === void 0 ? void 0 : _item$json.id))) {\n          var _el$json$styles$viewM3, _el$json$styles$viewM4;\n          const elLeft = ((_el$json$styles$viewM3 = el.json.styles[viewMode]) === null || _el$json$styles$viewM3 === void 0 ? void 0 : _el$json$styles$viewM3.left) || 0;\n          const elTop = ((_el$json$styles$viewM4 = el.json.styles[viewMode]) === null || _el$json$styles$viewM4 === void 0 ? void 0 : _el$json$styles$viewM4.top) || 0;\n          if (Math.abs(position.left - elLeft) < 50 && Math.abs(position.top - elTop) < 50) {\n            position.top = elTop + 20;\n          }\n        }\n      });\n      if (item.json) {\n        // Thả element mới từ ComponentLibrary\n        addElement(section.id, {\n          id: item.id,\n          json: {\n            ...item.json,\n            styles: {\n              desktop: {\n                ...item.json.styles.desktop,\n                left: position.left,\n                top: position.top\n              },\n              mobile: {\n                ...item.json.styles.mobile,\n                left: Math.round(position.left / 2),\n                top: Math.round(position.top / 2)\n              }\n            }\n          }\n        }, section.elements.length);\n        toast.success('Đã thêm phần tử vào section!');\n      } else if (item.id) {\n        // Di chuyển element hiện có\n        updatePosition(item.id, section.id, {\n          desktop: {\n            left: position.left,\n            top: position.top\n          },\n          mobile: {\n            left: Math.round(position.left / 2),\n            top: Math.round(position.top / 2)\n          }\n        });\n        moveElement(section.id, item.id, section.elements.length);\n        toast.success('Đã di chuyển phần tử!');\n      } else {\n        toast.error('Dữ liệu thả không hợp lệ!');\n      }\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  const handleSectionClick = e => {\n    e.stopPropagation();\n    onSelectSection(section);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drop,\n    id: section.id,\n    className: `lpb-canvas-section ${isOver ? 'lpb-canvas-section-over' : ''} ${(selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id) === section.id ? 'lpb-canvas-section-selected' : ''}`,\n    style: {\n      width: ((_section$json$styles$ = section.json.styles[viewMode]) === null || _section$json$styles$ === void 0 ? void 0 : _section$json$styles$.width) || '1200px',\n      height: ((_section$json$styles$2 = section.json.styles[viewMode]) === null || _section$json$styles$2 === void 0 ? void 0 : _section$json$styles$2.height) || 'auto',\n      minHeight: ((_section$json$styles$3 = section.json.styles[viewMode]) === null || _section$json$styles$3 === void 0 ? void 0 : _section$json$styles$3.minHeight) || '200px',\n      position: 'relative',\n      margin: '0 auto 20px auto',\n      border: '1px solid #ddd',\n      padding: ((_section$json$styles$4 = section.json.styles[viewMode]) === null || _section$json$styles$4 === void 0 ? void 0 : _section$json$styles$4.padding) || '20px',\n      boxSizing: 'border-box',\n      background: ((_section$json$styles$5 = section.json.styles[viewMode]) === null || _section$json$styles$5 === void 0 ? void 0 : _section$json$styles$5.background) || '#ffffff'\n    },\n    onMouseDown: handleSectionClick,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: ((_section$json$compone = section.json.componentData) === null || _section$json$compone === void 0 ? void 0 : _section$json$compone.title) || 'Section'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-canvas-section-content\",\n      children: (section.elements || []).map((element, idx) => /*#__PURE__*/_jsxDEV(Element, {\n        component: element,\n        index: idx,\n        isSelected: (selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id) === element.id,\n        onSelectElement: onSelectElement,\n        handleElementHover: handleElementHover,\n        onDuplicateElement: onDuplicateElement,\n        onDeleteElement: onDeleteElement,\n        onMoveElement: onMoveElement,\n        updatePosition: updatePosition,\n        canvasRef: canvasRef,\n        sectionId: section.id,\n        onInlineEdit: onInlineEdit,\n        pageStructure: pageStructure,\n        zoomLevel: zoomLevel,\n        viewMode: viewMode\n      }, element.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 342,\n    columnNumber: 13\n  }, this);\n}, \"9166pYLrZ/JzF75YDim8ZjfICTM=\", false, function () {\n  return [useDrop];\n})), \"9166pYLrZ/JzF75YDim8ZjfICTM=\", false, function () {\n  return [useDrop];\n});\n_c4 = Section;\nconst Canvas = /*#__PURE__*/_s3(/*#__PURE__*/React.memo(_c5 = _s3(({\n  pageStructure,\n  selectedElement,\n  onSelectElement,\n  quickEditElement,\n  quickEditPosition,\n  onQuickEdit,\n  onCloseQuickEdit,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  viewMode,\n  addSection,\n  addElement,\n  moveElement,\n  ItemTypes,\n  zoomLevel,\n  setPageStructure,\n  updatePosition,\n  onInlineEdit\n}) => {\n  var _pageStructure$styles, _pageStructure$styles2, _pageStructure$styles3;\n  _s3();\n  const canvasRef = useRef(null);\n  const [dropIndex, setDropIndex] = useState(null);\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.SECTION],\n    hover: (item, monitor) => {\n      if (!monitor.isOver({\n        shallow: true\n      })) return;\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset && canvasRef.current) {\n        const rect = canvasRef.current.getBoundingClientRect();\n        const y = clientOffset.y - rect.top;\n        const index = Math.min(pageStructure.children.length, Math.floor(y / 200));\n        setDropIndex(index);\n        if (item.json) {\n          item.json.styles = {\n            desktop: {\n              ...item.json.styles.desktop,\n              width: '1200px',\n              height: 'auto'\n            },\n            mobile: {\n              ...item.json.styles.mobile,\n              width: '100%',\n              height: 'auto'\n            }\n          };\n        }\n      }\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\n        return;\n      }\n      const rect = canvasRef.current.getBoundingClientRect();\n      const index = Math.min(pageStructure.children.length, Math.floor((clientOffset.y - rect.top) / 200));\n      if (item.json) {\n        addSection({\n          id: item.id,\n          json: {\n            ...item.json,\n            styles: {\n              desktop: {\n                ...item.json.styles.desktop,\n                width: '1200px',\n                height: 'auto'\n              },\n              mobile: {\n                ...item.json.styles.mobile,\n                width: '100%',\n                height: 'auto'\n              }\n            }\n          },\n          elements: []\n        }, index);\n        toast.success('Đã thêm section mới!');\n      } else {\n        toast.error('Dữ liệu thả không hợp lệ!');\n      }\n      setDropIndex(null);\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  const handleElementHover = useCallback((e, component) => {\n    var _canvasRef$current;\n    if ((quickEditElement === null || quickEditElement === void 0 ? void 0 : quickEditElement.id) === component.id) return;\n    const rect = e.currentTarget.getBoundingClientRect();\n    const canvasRect = ((_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.getBoundingClientRect()) || {\n      left: 0,\n      top: 0\n    };\n    onQuickEdit(component, {\n      left: (rect.left - canvasRect.left) / (zoomLevel / 100),\n      top: (rect.top - canvasRect.top + 20) / (zoomLevel / 100)\n    });\n  }, [quickEditElement, onQuickEdit, zoomLevel]);\n  const handleSelectSection = useCallback(section => {\n    onSelectElement(section);\n  }, [onSelectElement]);\n  useHotkeys('delete', () => {\n    if (selectedElement) {\n      onDeleteElement(selectedElement);\n    }\n  }, [selectedElement, onDeleteElement]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lpb-canvas-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        canvasRef.current = node;\n        drop(node);\n      },\n      className: `lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`,\n      onMouseLeave: onCloseQuickEdit,\n      style: {\n        zoom: `${zoomLevel / 100}`,\n        position: 'relative',\n        minHeight: ((_pageStructure$styles = pageStructure.styles[viewMode]) === null || _pageStructure$styles === void 0 ? void 0 : _pageStructure$styles.minHeight) || '600px',\n        background: ((_pageStructure$styles2 = pageStructure.styles[viewMode]) === null || _pageStructure$styles2 === void 0 ? void 0 : _pageStructure$styles2.background) || '#f9fafb'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-canvas-content\",\n        children: pageStructure.children.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-canvas-empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-layer-group\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"K\\xE9o th\\u1EA3 section \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 512,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [pageStructure.children.map((section, index) => {\n            var _section$json$styles$6;\n            return /*#__PURE__*/_jsxDEV(React.Fragment, {\n              children: [dropIndex === index && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"lpb-canvas-drop-zone\",\n                style: {\n                  height: '50px',\n                  background: 'rgba(0, 128, 255, 0.1)',\n                  border: '2px dashed #0080ff',\n                  margin: '10px auto',\n                  width: ((_section$json$styles$6 = section.json.styles[viewMode]) === null || _section$json$styles$6 === void 0 ? void 0 : _section$json$styles$6.width) || '1200px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(Section, {\n                section: section,\n                index: index,\n                selectedElement: selectedElement,\n                onSelectElement: onSelectElement,\n                handleElementHover: handleElementHover,\n                onDuplicateElement: onDuplicateElement,\n                onDeleteElement: onDeleteElement,\n                onMoveElement: onMoveElement,\n                updatePosition: updatePosition,\n                addElement: addElement,\n                canvasRef: canvasRef,\n                moveElement: moveElement,\n                onInlineEdit: onInlineEdit,\n                onSelectSection: handleSelectSection,\n                viewMode: viewMode,\n                pageStructure: pageStructure,\n                zoomLevel: zoomLevel\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 532,\n                columnNumber: 41\n              }, this)]\n            }, section.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 37\n            }, this);\n          }), dropIndex === pageStructure.children.length && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lpb-canvas-drop-zone\",\n            style: {\n              height: '50px',\n              background: 'rgba(0, 128, 255, 0.1)',\n              border: '2px dashed #0080ff',\n              margin: '10px auto',\n              width: ((_pageStructure$styles3 = pageStructure.styles[viewMode]) === null || _pageStructure$styles3 === void 0 ? void 0 : _pageStructure$styles3.width) || '1200px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(QuickEditToolkit, {\n        element: quickEditElement,\n        position: quickEditPosition,\n        onEdit: () => onSelectElement(quickEditElement),\n        onDuplicate: () => onDuplicateElement(quickEditElement),\n        onDelete: () => onDeleteElement(quickEditElement),\n        onMoveUp: () => onMoveElement(quickEditElement, 'up'),\n        onMoveDown: () => onMoveElement(quickEditElement, 'down'),\n        onClose: onCloseQuickEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 495,\n    columnNumber: 13\n  }, this);\n}, \"scAB/rDIK+1X1cBUTb+EobmliG0=\", false, function () {\n  return [useDrop, useHotkeys];\n})), \"scAB/rDIK+1X1cBUTb+EobmliG0=\", false, function () {\n  return [useDrop, useHotkeys];\n});\n_c6 = Canvas;\nexport default Canvas;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"Element$React.memo\");\n$RefreshReg$(_c2, \"Element\");\n$RefreshReg$(_c3, \"Section$React.memo\");\n$RefreshReg$(_c4, \"Section\");\n$RefreshReg$(_c5, \"Canvas$React.memo\");\n$RefreshReg$(_c6, \"Canvas\");","map":{"version":3,"names":["React","useRef","useMemo","useCallback","useState","useDrop","useDrag","useHotkeys","toast","QuickEditToolkit","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemTypes","SECTION","ELEMENT","EXISTING_ELEMENT","Element","_s","memo","_c","component","index","isSelected","onSelectElement","handleElementHover","onDuplicateElement","onDeleteElement","onMoveElement","updatePosition","canvasRef","sectionId","onInlineEdit","pageStructure","zoomLevel","viewMode","_component$json$style","_component$json$style2","isDragging","drag","type","item","id","json","end","monitor","clientOffset","getClientOffset","current","didDrop","_document$getElementB","sectionRect","document","getElementById","getBoundingClientRect","newX","Math","round","x","left","newY","y","top","section","children","find","s","adjustedY","elements","forEach","el","_el$json$styles$viewM","_el$json$styles$viewM2","elX","styles","elY","abs","desktop","mobile","collect","handleMouseDown","e","stopPropagation","handleInlineEdit","target","contentEditable","innerText","renderContent","_styles$viewMode","_styles$viewMode2","_styles$viewMode3","_styles$viewMode4","componentData","containerStyle","position","maxWidth","boxSizing","transform","width","height","renderChildren","map","child","idx","_selectedElement","selectedElement","fileName","_jsxFileName","lineNumber","columnNumber","length","style","className","onSubmit","preventDefault","onMouseDown","marginTop","display","flexWrap","gap","name","suppressContentEditableWarning","onBlur","content","src","alt","placeholder","label","ref","onMouseEnter","zIndex","_c2","Section","_s2","_c3","addElement","moveElement","onSelectSection","_section$json$styles$","_section$json$styles$2","_section$json$styles$3","_section$json$styles$4","_section$json$styles$5","_section$json$compone","isOver","drop","accept","hover","shallow","_document$getElementB2","dropPosition","_document$getElementB3","error","sectionElements","_item$json","_el$json$styles$viewM3","_el$json$styles$viewM4","elLeft","elTop","success","handleSectionClick","minHeight","margin","border","padding","background","title","element","_c4","Canvas","_s3","_c5","quickEditElement","quickEditPosition","onQuickEdit","onCloseQuickEdit","addSection","setPageStructure","_pageStructure$styles","_pageStructure$styles2","_pageStructure$styles3","dropIndex","setDropIndex","rect","min","floor","_canvasRef$current","currentTarget","canvasRect","handleSelectSection","node","onMouseLeave","zoom","_section$json$styles$6","onEdit","onDuplicate","onDelete","onMoveUp","onMoveDown","onClose","_c6","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef, useMemo, useCallback, useState } from 'react';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport QuickEditToolkit from './QuickEditToolkit';\r\nimport '../../styles/CreateLanding.css';\r\n\r\nconst ItemTypes = {\r\n    SECTION: 'section',\r\n    ELEMENT: 'element',\r\n    EXISTING_ELEMENT: 'existingElement',\r\n};\r\n\r\nconst Element = React.memo(\r\n    ({\r\n         component,\r\n         index,\r\n         isSelected,\r\n         onSelectElement,\r\n         handleElementHover,\r\n         onDuplicateElement,\r\n         onDeleteElement,\r\n         onMoveElement,\r\n         updatePosition,\r\n         canvasRef,\r\n         sectionId,\r\n         onInlineEdit,\r\n         pageStructure,\r\n         zoomLevel,\r\n         viewMode,\r\n     }) => {\r\n        const [{ isDragging }, drag] = useDrag(() => ({\r\n            type: ItemTypes.EXISTING_ELEMENT,\r\n            item: { id: component.id, sectionId, json: component.json },\r\n            end: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (clientOffset && canvasRef.current && sectionId && monitor.didDrop()) {\r\n                    const sectionRect = document.getElementById(sectionId)?.getBoundingClientRect();\r\n                    if (!sectionRect) return;\r\n\r\n                    const newX = Math.round((clientOffset.x - sectionRect.left) / (zoomLevel / 100) / 10) * 10;\r\n                    const newY = Math.round((clientOffset.y - sectionRect.top) / (zoomLevel / 100) / 10) * 10;\r\n\r\n                    const section = pageStructure.children.find((s) => s.id === sectionId);\r\n                    let adjustedY = newY;\r\n                    if (section) {\r\n                        section.elements.forEach((el) => {\r\n                            if (el.id !== component.id) {\r\n                                const elX = el.json.styles[viewMode]?.left || 0;\r\n                                const elY = el.json.styles[viewMode]?.top || 0;\r\n                                if (Math.abs(newX - elX) < 50 && Math.abs(newY - elY) < 50) {\r\n                                    adjustedY = elY + 20;\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    updatePosition(component.id, sectionId, {\r\n                        desktop: { left: newX, top: adjustedY },\r\n                        mobile: { left: Math.round(newX / 2), top: Math.round(adjustedY / 2) },\r\n                    });\r\n                }\r\n            },\r\n            collect: (monitor) => ({\r\n                isDragging: !!monitor.isDragging(),\r\n            }),\r\n        }));\r\n\r\n        const handleMouseDown = (e) => {\r\n            e.stopPropagation();\r\n            onSelectElement(component);\r\n        };\r\n\r\n        const handleInlineEdit = (e) => {\r\n            if (onInlineEdit && e.target.contentEditable === 'true') {\r\n                onInlineEdit(component.id, sectionId, e.target.innerText);\r\n            }\r\n        };\r\n\r\n        const renderContent = () => {\r\n            const { type, componentData = {}, styles = { desktop: {}, mobile: {} }, children = [] } = component.json || {};\r\n            const containerStyle = {\r\n                ...styles[viewMode],\r\n                position: 'absolute',\r\n                left: styles[viewMode]?.left || 0,\r\n                top: styles[viewMode]?.top || 0,\r\n                maxWidth: '100%',\r\n                boxSizing: 'border-box',\r\n                transform: isSelected ? 'translate(-2px, -2px)' : 'none',\r\n                width: styles[viewMode]?.width || 'auto',\r\n                height: styles[viewMode]?.height || 'auto',\r\n            };\r\n\r\n            const renderChildren = () => {\r\n                return children.map((child, idx) => (\r\n                    <Element\r\n                        key={child.id}\r\n                        component={{ id: child.id, json: child }}\r\n                        index={idx}\r\n                        isSelected={isSelected && selectedElement?.id === child.id}\r\n                        onSelectElement={onSelectElement}\r\n                        handleElementHover={handleElementHover}\r\n                        onDuplicateElement={onDuplicateElement}\r\n                        onDeleteElement={onDeleteElement}\r\n                        onMoveElement={onMoveElement}\r\n                        updatePosition={updatePosition}\r\n                        canvasRef={canvasRef}\r\n                        sectionId={sectionId}\r\n                        onInlineEdit={onInlineEdit}\r\n                        pageStructure={pageStructure}\r\n                        zoomLevel={zoomLevel}\r\n                        viewMode={viewMode}\r\n                    />\r\n                ));\r\n            };\r\n\r\n            if (children.length > 0) {\r\n                switch (type) {\r\n                    case 'form':\r\n                        return (\r\n                            <div style={containerStyle} className=\"lpb-form-container\">\r\n                                <form onSubmit={(e) => e.preventDefault()} onMouseDown={(e) => e.stopPropagation()}>\r\n                                    {renderChildren()}\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        style={{ marginTop: '8px', ...styles[viewMode] }}\r\n                                        onMouseDown={(e) => e.stopPropagation()}\r\n                                    >\r\n                                        Submit\r\n                                    </button>\r\n                                </form>\r\n                            </div>\r\n                        );\r\n                    case 'button-group':\r\n                        return (\r\n                            <div style={containerStyle} className=\"lpb-button-group-container\">\r\n                                {renderChildren()}\r\n                            </div>\r\n                        );\r\n                    case 'gallery':\r\n                    case 'carousel':\r\n                        return (\r\n                            <div style={containerStyle} className=\"lpb-gallery-container\">\r\n                                <div style={{ display: type === 'carousel' ? 'flex' : 'flex', flexWrap: type === 'gallery' ? 'wrap' : 'nowrap', gap: '10px' }}>\r\n                                    {renderChildren()}\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    default:\r\n                        return (\r\n                            <div style={containerStyle} className=\"lpb-container\">\r\n                                {component.name || 'Unknown'}\r\n                                {renderChildren()}\r\n                            </div>\r\n                        );\r\n                }\r\n            }\r\n\r\n            switch (type) {\r\n                case 'heading':\r\n                    return (\r\n                        <h2\r\n                            style={containerStyle}\r\n                            contentEditable\r\n                            suppressContentEditableWarning\r\n                            onBlur={handleInlineEdit}\r\n                            onMouseDown={(e) => e.stopPropagation()}\r\n                        >\r\n                            {componentData.content || 'Tiêu đề'}\r\n                        </h2>\r\n                    );\r\n                case 'paragraph':\r\n                    return (\r\n                        <p\r\n                            style={containerStyle}\r\n                            contentEditable\r\n                            suppressContentEditableWarning\r\n                            onBlur={handleInlineEdit}\r\n                            onMouseDown={(e) => e.stopPropagation()}\r\n                        >\r\n                            {componentData.content || 'Đoạn văn'}\r\n                        </p>\r\n                    );\r\n                case 'button':\r\n                    return (\r\n                        <button\r\n                            style={containerStyle}\r\n                            contentEditable\r\n                            suppressContentEditableWarning\r\n                            onBlur={handleInlineEdit}\r\n                            onMouseDown={(e) => e.stopPropagation()}\r\n                        >\r\n                            {componentData.content || 'Nút'}\r\n                        </button>\r\n                    );\r\n                case 'image':\r\n                    return (\r\n                        <img\r\n                            src={componentData.src || 'https://via.placeholder.com/150'}\r\n                            alt=\"Image\"\r\n                            style={containerStyle}\r\n                        />\r\n                    );\r\n                case 'input':\r\n                    return (\r\n                        <input\r\n                            type={componentData.type || 'text'}\r\n                            placeholder={componentData.label || 'Input'}\r\n                            style={{ ...containerStyle, width: '100%' }}\r\n                            onMouseDown={(e) => e.stopPropagation()}\r\n                        />\r\n                    );\r\n                case 'textarea':\r\n                    return (\r\n                        <textarea\r\n                            placeholder={componentData.label || 'Textarea'}\r\n                            style={{ ...containerStyle, width: '100%' }}\r\n                            onMouseDown={(e) => e.stopPropagation()}\r\n                        />\r\n                    );\r\n                default:\r\n                    return <div style={containerStyle}>{component.name || 'Unknown'}</div>;\r\n            }\r\n        };\r\n\r\n        return (\r\n            <div\r\n                ref={drag}\r\n                data-id={component.id}\r\n                className={`lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`}\r\n                onMouseEnter={(e) => handleElementHover(e, component)}\r\n                onMouseDown={handleMouseDown}\r\n                style={{\r\n                    position: 'absolute',\r\n                    left: component.json.styles[viewMode]?.left || 0,\r\n                    top: component.json.styles[viewMode]?.top || 0,\r\n                    zIndex: isSelected ? 10 : 1,\r\n                    boxSizing: 'border-box',\r\n                    ...component.json.styles[viewMode],\r\n                }}\r\n            >\r\n                {renderContent()}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nconst Section = React.memo(\r\n    ({\r\n         section,\r\n         index,\r\n         selectedElement,\r\n         onSelectElement,\r\n         handleElementHover,\r\n         onDuplicateElement,\r\n         onDeleteElement,\r\n         onMoveElement,\r\n         updatePosition,\r\n         addElement,\r\n         canvasRef,\r\n         moveElement,\r\n         onInlineEdit,\r\n         onSelectSection,\r\n         viewMode,\r\n         pageStructure,\r\n         zoomLevel,\r\n     }) => {\r\n        const [{ isOver }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\r\n            hover: (item, monitor) => {\r\n                if (!monitor.isOver({ shallow: true })) return;\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (clientOffset && canvasRef.current) {\r\n                    const sectionRect = document.getElementById(section.id)?.getBoundingClientRect();\r\n                    if (!sectionRect) return;\r\n                    item.dropPosition = {\r\n                        left: Math.round((clientOffset.x - sectionRect.left) / (zoomLevel / 100) / 10) * 10,\r\n                        top: Math.round((clientOffset.y - sectionRect.top) / (zoomLevel / 100) / 10) * 10,\r\n                    };\r\n                }\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\r\n                    return;\r\n                }\r\n                const sectionRect = document.getElementById(section.id)?.getBoundingClientRect();\r\n                if (!sectionRect) return;\r\n\r\n                let position = {\r\n                    left: Math.round((clientOffset.x - sectionRect.left) / (zoomLevel / 100) / 10) * 10,\r\n                    top: Math.round((clientOffset.y - sectionRect.top) / (zoomLevel / 100) / 10) * 10,\r\n                };\r\n\r\n                const sectionElements = section.elements || [];\r\n                sectionElements.forEach((el) => {\r\n                    if (el.id !== (item.id || item.json?.id)) {\r\n                        const elLeft = el.json.styles[viewMode]?.left || 0;\r\n                        const elTop = el.json.styles[viewMode]?.top || 0;\r\n                        if (Math.abs(position.left - elLeft) < 50 && Math.abs(position.top - elTop) < 50) {\r\n                            position.top = elTop + 20;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (item.json) {\r\n                    // Thả element mới từ ComponentLibrary\r\n                    addElement(section.id, {\r\n                        id: item.id,\r\n                        json: {\r\n                            ...item.json,\r\n                            styles: {\r\n                                desktop: { ...item.json.styles.desktop, left: position.left, top: position.top },\r\n                                mobile: { ...item.json.styles.mobile, left: Math.round(position.left / 2), top: Math.round(position.top / 2) },\r\n                            },\r\n                        },\r\n                    }, section.elements.length);\r\n                    toast.success('Đã thêm phần tử vào section!');\r\n                } else if (item.id) {\r\n                    // Di chuyển element hiện có\r\n                    updatePosition(item.id, section.id, {\r\n                        desktop: { left: position.left, top: position.top },\r\n                        mobile: { left: Math.round(position.left / 2), top: Math.round(position.top / 2) },\r\n                    });\r\n                    moveElement(section.id, item.id, section.elements.length);\r\n                    toast.success('Đã di chuyển phần tử!');\r\n                } else {\r\n                    toast.error('Dữ liệu thả không hợp lệ!');\r\n                }\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: !!monitor.isOver(),\r\n            }),\r\n        }));\r\n\r\n        const handleSectionClick = (e) => {\r\n            e.stopPropagation();\r\n            onSelectSection(section);\r\n        };\r\n\r\n        return (\r\n            <div\r\n                ref={drop}\r\n                id={section.id}\r\n                className={`lpb-canvas-section ${isOver ? 'lpb-canvas-section-over' : ''} ${selectedElement?.id === section.id ? 'lpb-canvas-section-selected' : ''}`}\r\n                style={{\r\n                    width: section.json.styles[viewMode]?.width || '1200px',\r\n                    height: section.json.styles[viewMode]?.height || 'auto',\r\n                    minHeight: section.json.styles[viewMode]?.minHeight || '200px',\r\n                    position: 'relative',\r\n                    margin: '0 auto 20px auto',\r\n                    border: '1px solid #ddd',\r\n                    padding: section.json.styles[viewMode]?.padding || '20px',\r\n                    boxSizing: 'border-box',\r\n                    background: section.json.styles[viewMode]?.background || '#ffffff',\r\n                }}\r\n                onMouseDown={handleSectionClick}\r\n            >\r\n                <h3>{section.json.componentData?.title || 'Section'}</h3>\r\n                <div className=\"lpb-canvas-section-content\">\r\n                    {(section.elements || []).map((element, idx) => (\r\n                        <Element\r\n                            key={element.id}\r\n                            component={element}\r\n                            index={idx}\r\n                            isSelected={selectedElement?.id === element.id}\r\n                            onSelectElement={onSelectElement}\r\n                            handleElementHover={handleElementHover}\r\n                            onDuplicateElement={onDuplicateElement}\r\n                            onDeleteElement={onDeleteElement}\r\n                            onMoveElement={onMoveElement}\r\n                            updatePosition={updatePosition}\r\n                            canvasRef={canvasRef}\r\n                            sectionId={section.id}\r\n                            onInlineEdit={onInlineEdit}\r\n                            pageStructure={pageStructure}\r\n                            zoomLevel={zoomLevel}\r\n                            viewMode={viewMode}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nconst Canvas = React.memo(\r\n    ({\r\n         pageStructure,\r\n         selectedElement,\r\n         onSelectElement,\r\n         quickEditElement,\r\n         quickEditPosition,\r\n         onQuickEdit,\r\n         onCloseQuickEdit,\r\n         onDuplicateElement,\r\n         onDeleteElement,\r\n         onMoveElement,\r\n         viewMode,\r\n         addSection,\r\n         addElement,\r\n         moveElement,\r\n         ItemTypes,\r\n         zoomLevel,\r\n         setPageStructure,\r\n         updatePosition,\r\n         onInlineEdit,\r\n     }) => {\r\n        const canvasRef = useRef(null);\r\n        const [dropIndex, setDropIndex] = useState(null);\r\n\r\n        const [{ isOver }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.SECTION],\r\n            hover: (item, monitor) => {\r\n                if (!monitor.isOver({ shallow: true })) return;\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (clientOffset && canvasRef.current) {\r\n                    const rect = canvasRef.current.getBoundingClientRect();\r\n                    const y = clientOffset.y - rect.top;\r\n                    const index = Math.min(pageStructure.children.length, Math.floor(y / 200));\r\n                    setDropIndex(index);\r\n                    if (item.json) {\r\n                        item.json.styles = {\r\n                            desktop: { ...item.json.styles.desktop, width: '1200px', height: 'auto' },\r\n                            mobile: { ...item.json.styles.mobile, width: '100%', height: 'auto' },\r\n                        };\r\n                    }\r\n                }\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\r\n                    return;\r\n                }\r\n                const rect = canvasRef.current.getBoundingClientRect();\r\n                const index = Math.min(pageStructure.children.length, Math.floor((clientOffset.y - rect.top) / 200));\r\n                if (item.json) {\r\n                    addSection(\r\n                        {\r\n                            id: item.id,\r\n                            json: {\r\n                                ...item.json,\r\n                                styles: {\r\n                                    desktop: { ...item.json.styles.desktop, width: '1200px', height: 'auto' },\r\n                                    mobile: { ...item.json.styles.mobile, width: '100%', height: 'auto' },\r\n                                },\r\n                            },\r\n                            elements: [],\r\n                        },\r\n                        index\r\n                    );\r\n                    toast.success('Đã thêm section mới!');\r\n                } else {\r\n                    toast.error('Dữ liệu thả không hợp lệ!');\r\n                }\r\n                setDropIndex(null);\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: !!monitor.isOver(),\r\n            }),\r\n        }));\r\n\r\n        const handleElementHover = useCallback(\r\n            (e, component) => {\r\n                if (quickEditElement?.id === component.id) return;\r\n                const rect = e.currentTarget.getBoundingClientRect();\r\n                const canvasRect = canvasRef.current?.getBoundingClientRect() || { left: 0, top: 0 };\r\n                onQuickEdit(component, {\r\n                    left: (rect.left - canvasRect.left) / (zoomLevel / 100),\r\n                    top: (rect.top - canvasRect.top + 20) / (zoomLevel / 100),\r\n                });\r\n            },\r\n            [quickEditElement, onQuickEdit, zoomLevel]\r\n        );\r\n\r\n        const handleSelectSection = useCallback(\r\n            (section) => {\r\n                onSelectElement(section);\r\n            },\r\n            [onSelectElement]\r\n        );\r\n\r\n        useHotkeys(\r\n            'delete',\r\n            () => {\r\n                if (selectedElement) {\r\n                    onDeleteElement(selectedElement);\r\n                }\r\n            },\r\n            [selectedElement, onDeleteElement]\r\n        );\r\n\r\n        return (\r\n            <div className=\"lpb-canvas-wrapper\">\r\n                <div\r\n                    ref={(node) => {\r\n                        canvasRef.current = node;\r\n                        drop(node);\r\n                    }}\r\n                    className={`lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`}\r\n                    onMouseLeave={onCloseQuickEdit}\r\n                    style={{\r\n                        zoom: `${zoomLevel / 100}`,\r\n                        position: 'relative',\r\n                        minHeight: pageStructure.styles[viewMode]?.minHeight || '600px',\r\n                        background: pageStructure.styles[viewMode]?.background || '#f9fafb',\r\n                    }}\r\n                >\r\n                    <div className=\"lpb-canvas-content\">\r\n                        {pageStructure.children.length === 0 ? (\r\n                            <div className=\"lpb-canvas-empty-state\">\r\n                                <i className=\"fas fa-layer-group\"></i>\r\n                                <p>Kéo thả section để bắt đầu</p>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                {pageStructure.children.map((section, index) => (\r\n                                    <React.Fragment key={section.id}>\r\n                                        {dropIndex === index && (\r\n                                            <div\r\n                                                className=\"lpb-canvas-drop-zone\"\r\n                                                style={{\r\n                                                    height: '50px',\r\n                                                    background: 'rgba(0, 128, 255, 0.1)',\r\n                                                    border: '2px dashed #0080ff',\r\n                                                    margin: '10px auto',\r\n                                                    width: section.json.styles[viewMode]?.width || '1200px',\r\n                                                }}\r\n                                            />\r\n                                        )}\r\n                                        <Section\r\n                                            section={section}\r\n                                            index={index}\r\n                                            selectedElement={selectedElement}\r\n                                            onSelectElement={onSelectElement}\r\n                                            handleElementHover={handleElementHover}\r\n                                            onDuplicateElement={onDuplicateElement}\r\n                                            onDeleteElement={onDeleteElement}\r\n                                            onMoveElement={onMoveElement}\r\n                                            updatePosition={updatePosition}\r\n                                            addElement={addElement}\r\n                                            canvasRef={canvasRef}\r\n                                            moveElement={moveElement}\r\n                                            onInlineEdit={onInlineEdit}\r\n                                            onSelectSection={handleSelectSection}\r\n                                            viewMode={viewMode}\r\n                                            pageStructure={pageStructure}\r\n                                            zoomLevel={zoomLevel}\r\n                                        />\r\n                                    </React.Fragment>\r\n                                ))}\r\n                                {dropIndex === pageStructure.children.length && (\r\n                                    <div\r\n                                        className=\"lpb-canvas-drop-zone\"\r\n                                        style={{\r\n                                            height: '50px',\r\n                                            background: 'rgba(0, 128, 255, 0.1)',\r\n                                            border: '2px dashed #0080ff',\r\n                                            margin: '10px auto',\r\n                                            width: pageStructure.styles[viewMode]?.width || '1200px',\r\n                                        }}\r\n                                    />\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                    <QuickEditToolkit\r\n                        element={quickEditElement}\r\n                        position={quickEditPosition}\r\n                        onEdit={() => onSelectElement(quickEditElement)}\r\n                        onDuplicate={() => onDuplicateElement(quickEditElement)}\r\n                        onDelete={() => onDeleteElement(quickEditElement)}\r\n                        onMoveUp={() => onMoveElement(quickEditElement, 'up')}\r\n                        onMoveDown={() => onMoveElement(quickEditElement, 'down')}\r\n                        onClose={onCloseQuickEdit}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}