{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useRef, useCallback, useState, useEffect } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport Guidelines from './Guidelines';\nimport Rulers from './Rulers';\nimport SelectionOverlay from './SelectionOverlay';\nimport '../../styles/Canvas.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  ELEMENT: 'element',\n  EXISTING_ELEMENT: 'existingElement'\n};\n\n// Unified coordinate calculation function\nconst getCanvasPosition = (mouseX, mouseY, canvasRef, zoomLevel = 100) => {\n  if (!canvasRef || !canvasRef.current) {\n    console.error('Canvas ref is null in getCanvasPosition');\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  const canvasRect = canvasRef.current.getBoundingClientRect();\n  const x = (mouseX - canvasRect.left) / (zoomLevel / 100);\n  const y = (mouseY - canvasRect.top) / (zoomLevel / 100);\n  return {\n    x: Math.max(0, x),\n    y: Math.max(0, y)\n  };\n};\nconst snapToGrid = (x, y, gridSize, snapPoints = []) => {\n  if (gridSize === Infinity) return {\n    x,\n    y\n  };\n  let snappedX = Math.round(x / gridSize) * gridSize;\n  let snappedY = Math.round(y / gridSize) * gridSize;\n\n  // Snap to nearby elements (threshold 15px)\n  snapPoints.forEach(point => {\n    if (Math.abs(x - point.x) < 15) snappedX = point.x;\n    if (Math.abs(y - point.y) < 15) snappedY = point.y;\n  });\n  return {\n    x: snappedX,\n    y: snappedY\n  };\n};\nconst getElementBounds = element => {\n  var _element$position$des, _element$position$des2, _element$position$des3, _element$size, _element$position$des4, _element$size2, _element$position$des5, _element$size3, _element$position$des6, _element$size4;\n  return {\n    left: ((_element$position$des = element.position.desktop) === null || _element$position$des === void 0 ? void 0 : _element$position$des.x) || 0,\n    top: ((_element$position$des2 = element.position.desktop) === null || _element$position$des2 === void 0 ? void 0 : _element$position$des2.y) || 0,\n    right: (((_element$position$des3 = element.position.desktop) === null || _element$position$des3 === void 0 ? void 0 : _element$position$des3.x) || 0) + (((_element$size = element.size) === null || _element$size === void 0 ? void 0 : _element$size.width) || 200),\n    bottom: (((_element$position$des4 = element.position.desktop) === null || _element$position$des4 === void 0 ? void 0 : _element$position$des4.y) || 0) + (((_element$size2 = element.size) === null || _element$size2 === void 0 ? void 0 : _element$size2.height) || 50),\n    centerX: (((_element$position$des5 = element.position.desktop) === null || _element$position$des5 === void 0 ? void 0 : _element$position$des5.x) || 0) + (((_element$size3 = element.size) === null || _element$size3 === void 0 ? void 0 : _element$size3.width) || 200) / 2,\n    centerY: (((_element$position$des6 = element.position.desktop) === null || _element$position$des6 === void 0 ? void 0 : _element$position$des6.y) || 0) + (((_element$size4 = element.size) === null || _element$size4 === void 0 ? void 0 : _element$size4.height) || 50) / 2\n  };\n};\nconst Element = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  element,\n  isSelected,\n  onSelectElement,\n  onUpdatePosition,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  onContextMenu,\n  canvasRef,\n  // Pass canvasRef from parent\n  snapPoints\n}) => {\n  var _position$viewMode3, _position$viewMode4;\n  _s();\n  const {\n    id,\n    type,\n    componentData = {},\n    position = {},\n    size = {\n      width: 200,\n      height: 50\n    },\n    styles = {}\n  } = element;\n  const elementRef = useRef(null);\n  const [dragStartOffset, setDragStartOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: ItemTypes.EXISTING_ELEMENT,\n    item: () => ({\n      id,\n      isExistingElement: true,\n      dragOffset: dragStartOffset\n    }),\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging()\n    })\n  }));\n  const handleMouseDown = e => {\n    var _elementRef$current, _canvasRef$current, _position$viewMode, _position$viewMode2;\n    e.stopPropagation();\n\n    // Calculate offset from mouse to element top-left corner in canvas coordinates\n    const elementRect = (_elementRef$current = elementRef.current) === null || _elementRef$current === void 0 ? void 0 : _elementRef$current.getBoundingClientRect();\n    const canvasRect = (_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.getBoundingClientRect();\n    if (!elementRect || !canvasRect) return;\n\n    // Mouse position relative to canvas (accounting for zoom)\n    const mouseCanvasX = (e.clientX - canvasRect.left) / (zoomLevel / 100);\n    const mouseCanvasY = (e.clientY - canvasRect.top) / (zoomLevel / 100);\n\n    // Element position in canvas coordinates\n    const elementCanvasX = ((_position$viewMode = position[viewMode]) === null || _position$viewMode === void 0 ? void 0 : _position$viewMode.x) || 0;\n    const elementCanvasY = ((_position$viewMode2 = position[viewMode]) === null || _position$viewMode2 === void 0 ? void 0 : _position$viewMode2.y) || 0;\n\n    // Offset = mouse position - element position\n    const offsetX = mouseCanvasX - elementCanvasX;\n    const offsetY = mouseCanvasY - elementCanvasY;\n    setDragStartOffset({\n      x: offsetX,\n      y: offsetY\n    });\n    onSelectElement(id, e.ctrlKey);\n    console.group('Mouse Down Debug');\n    console.log('Mouse client pos:', {\n      x: e.clientX,\n      y: e.clientY\n    });\n    console.log('Canvas rect:', canvasRect);\n    console.log('Element rect:', elementRect);\n    console.log('Mouse canvas pos:', {\n      x: mouseCanvasX,\n      y: mouseCanvasY\n    });\n    console.log('Element canvas pos:', {\n      x: elementCanvasX,\n      y: elementCanvasY\n    });\n    console.log('Calculated offset:', {\n      x: offsetX,\n      y: offsetY\n    });\n    console.groupEnd();\n  };\n  const handleContextMenu = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onContextMenu(id, {\n      x: e.clientX,\n      y: e.clientY\n    });\n  };\n\n  // Store drag offset in drag item for Canvas drop handler to use\n  useEffect(() => {\n    if (isDragging) {\n      // Store offset in a global way so drop handler can access it\n      window.currentDragOffset = dragStartOffset;\n    }\n  }, [isDragging, dragStartOffset]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: node => {\n      elementRef.current = node;\n      drag(node);\n    },\n    className: `lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`,\n    style: {\n      position: 'absolute',\n      left: ((_position$viewMode3 = position[viewMode]) === null || _position$viewMode3 === void 0 ? void 0 : _position$viewMode3.x) || 0,\n      top: ((_position$viewMode4 = position[viewMode]) === null || _position$viewMode4 === void 0 ? void 0 : _position$viewMode4.y) || 0,\n      width: size.width,\n      height: size.height,\n      zIndex: position.z || 1,\n      cursor: isDragging ? 'grabbing' : 'grab',\n      opacity: isDragging ? 0.8 : 1,\n      ...styles\n    },\n    onMouseDown: handleMouseDown,\n    onContextMenu: handleContextMenu,\n    children: (() => {\n      switch (type) {\n        case 'heading':\n          return /*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              fontSize: componentData.fontSize || '1.5rem',\n              color: componentData.color || '#1f2937',\n              margin: 0,\n              userSelect: 'none'\n            },\n            children: componentData.content || 'Tiêu đề'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 33\n          }, this);\n        case 'paragraph':\n          return /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: componentData.fontSize || '1rem',\n              color: componentData.color || '#1f2937',\n              margin: 0,\n              userSelect: 'none'\n            },\n            children: componentData.content || 'Đoạn văn'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 33\n          }, this);\n        case 'button':\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              padding: '8px 16px',\n              borderRadius: '8px',\n              background: componentData.background || '#2563eb',\n              color: componentData.color || '#fff',\n              border: 'none',\n              cursor: 'pointer',\n              userSelect: 'none'\n            },\n            children: componentData.content || 'Nút'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 33\n          }, this);\n        case 'image':\n          return /*#__PURE__*/_jsxDEV(\"img\", {\n            src: componentData.src || 'https://via.placeholder.com/150',\n            alt: \"Image\",\n            style: {\n              maxWidth: '100%',\n              height: 'auto',\n              userSelect: 'none',\n              pointerEvents: 'none'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 33\n          }, this);\n        case 'form':\n          return /*#__PURE__*/_jsxDEV(\"form\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '10px',\n              userSelect: 'none'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Input\",\n              style: {\n                padding: '8px',\n                borderRadius: '8px',\n                border: '1px solid #ccc'\n              },\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              style: {\n                background: '#2563eb',\n                color: '#fff',\n                padding: '8px 16px',\n                borderRadius: '8px',\n                border: 'none'\n              },\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 33\n          }, this);\n        default:\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              userSelect: 'none'\n            },\n            children: componentData.content || 'Unknown'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 36\n          }, this);\n      }\n    })()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 13\n  }, this);\n}, \"cBE6Ao9H/FN8TOiE0G8nQje4MLA=\", false, function () {\n  return [useDrag];\n})), \"cBE6Ao9H/FN8TOiE0G8nQje4MLA=\", false, function () {\n  return [useDrag];\n});\n_c2 = Element;\nconst Canvas = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c3 = _s2(({\n  pageData,\n  selectedIds,\n  onSelectElement,\n  onUpdatePosition,\n  onUpdateSize,\n  onDeleteElement,\n  onAddElement,\n  onGroupElements,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  showGrid\n}) => {\n  var _pageData$canvas, _pageData$canvas2, _pageData$canvas3, _pageData$elements, _pageData$elements2;\n  _s2();\n  const canvasRef = useRef(null);\n  const [guidelines, setGuidelines] = useState([]);\n  const [contextMenu, setContextMenu] = useState(null);\n  const canvasBounds = {\n    width: (pageData === null || pageData === void 0 ? void 0 : (_pageData$canvas = pageData.canvas) === null || _pageData$canvas === void 0 ? void 0 : _pageData$canvas.width) || 1200,\n    height: (pageData === null || pageData === void 0 ? void 0 : (_pageData$canvas2 = pageData.canvas) === null || _pageData$canvas2 === void 0 ? void 0 : _pageData$canvas2.height) || 1000\n  };\n\n  // Generate snap points from existing elements\n  const snapPoints = pageData !== null && pageData !== void 0 && pageData.elements ? pageData.elements.map(el => {\n    const bounds = getElementBounds(el);\n    return [{\n      x: bounds.left,\n      y: bounds.top\n    }, {\n      x: bounds.right,\n      y: bounds.bottom\n    }, {\n      x: bounds.centerX,\n      y: bounds.centerY\n    }, {\n      x: bounds.left,\n      y: bounds.centerY\n    },\n    // left-center\n    {\n      x: bounds.right,\n      y: bounds.centerY\n    },\n    // right-center\n    {\n      x: bounds.centerX,\n      y: bounds.top\n    },\n    // top-center\n    {\n      x: bounds.centerX,\n      y: bounds.bottom\n    } // bottom-center\n    ];\n  }).flat() : [];\n\n  // Add canvas boundary snap points\n  snapPoints.push({\n    x: 0,\n    y: 0\n  },\n  // top-left\n  {\n    x: canvasBounds.width,\n    y: 0\n  },\n  // top-right\n  {\n    x: 0,\n    y: canvasBounds.height\n  },\n  // bottom-left\n  {\n    x: canvasBounds.width,\n    y: canvasBounds.height\n  },\n  // bottom-right\n  {\n    x: canvasBounds.width / 2,\n    y: canvasBounds.height / 2\n  } // center\n  );\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) return;\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef, zoomLevel);\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n\n      // Generate guidelines for visual feedback\n      const newGuidelines = [];\n      snapPoints.forEach(point => {\n        if (Math.abs(snapped.x - point.x) < 2) {\n          newGuidelines.push({\n            vertical: true,\n            position: point.x\n          });\n        }\n        if (Math.abs(snapped.y - point.y) < 2) {\n          newGuidelines.push({\n            vertical: false,\n            position: point.y\n          });\n        }\n      });\n      setGuidelines(newGuidelines);\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả!');\n        return;\n      }\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef, zoomLevel);\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      console.group('Drop Debug');\n      console.log('Item:', item);\n      console.log('Client Offset:', clientOffset);\n      console.log('Canvas Position:', pos);\n      console.log('Snapped Position:', snapped);\n      console.groupEnd();\n\n      // Handle new element from library\n      if (item.json && !item.isExistingElement) {\n        const newElement = {\n          id: `${item.id}-${Date.now()}`,\n          type: item.json.type,\n          componentData: item.json.componentData || {},\n          position: {\n            [viewMode]: snapped,\n            desktop: snapped,\n            tablet: snapped,\n            mobile: snapped\n          },\n          size: item.json.size || {\n            width: 200,\n            height: 50\n          },\n          styles: item.json.styles || {}\n        };\n        onAddElement(newElement);\n        toast.success('Đã thêm phần tử!');\n      }\n      // Handle existing element drag\n      else if (item.isExistingElement && item.id) {\n        console.log('Drop Debug - Item:', JSON.stringify(item, null, 2));\n\n        // Get the drag offset from the item\n        const dragOffset = item.dragOffset || {\n          x: 0,\n          y: 0\n        };\n        console.log('Drag offset:', dragOffset);\n\n        // Apply offset to get final position\n        const finalPosition = {\n          x: Math.max(0, pos.x - dragOffset.x),\n          y: Math.max(0, pos.y - dragOffset.y)\n        };\n        console.log('Final position before snap:', finalPosition);\n\n        // Apply final snapping with offset\n        const finalSnapped = snapToGrid(finalPosition.x, finalPosition.y, showGrid ? gridSize : Infinity, snapPoints);\n        console.log('Final snapped position:', finalSnapped);\n        onUpdatePosition(item.id, {\n          [viewMode]: finalSnapped\n        }, true);\n        toast.success('Đã di chuyển phần tử!');\n      }\n      setGuidelines([]);\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  const handleCanvasClick = e => {\n    // Click on empty canvas to deselect all\n    if (e.target === canvasRef.current) {\n      onSelectElement([]);\n    }\n  };\n  const handleContextMenu = (id, position) => {\n    setContextMenu({\n      id,\n      position\n    });\n  };\n  const handleKeyDown = useCallback(e => {\n    if (!selectedIds.length) return;\n    const nudgeDistance = e.shiftKey ? 10 : 1;\n    switch (e.key) {\n      case 'ArrowUp':\n        e.preventDefault();\n        selectedIds.forEach(id => {\n          const element = pageData.elements.find(el => el.id === id);\n          if (element) {\n            const currentPos = element.position[viewMode] || {\n              x: 0,\n              y: 0\n            };\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: currentPos.x,\n                y: Math.max(0, currentPos.y - nudgeDistance)\n              }\n            }, true);\n          }\n        });\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        selectedIds.forEach(id => {\n          const element = pageData.elements.find(el => el.id === id);\n          if (element) {\n            const currentPos = element.position[viewMode] || {\n              x: 0,\n              y: 0\n            };\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: currentPos.x,\n                y: currentPos.y + nudgeDistance\n              }\n            }, true);\n          }\n        });\n        break;\n      case 'ArrowLeft':\n        e.preventDefault();\n        selectedIds.forEach(id => {\n          const element = pageData.elements.find(el => el.id === id);\n          if (element) {\n            const currentPos = element.position[viewMode] || {\n              x: 0,\n              y: 0\n            };\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: Math.max(0, currentPos.x - nudgeDistance),\n                y: currentPos.y\n              }\n            }, true);\n          }\n        });\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        selectedIds.forEach(id => {\n          const element = pageData.elements.find(el => el.id === id);\n          if (element) {\n            const currentPos = element.position[viewMode] || {\n              x: 0,\n              y: 0\n            };\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: currentPos.x + nudgeDistance,\n                y: currentPos.y\n              }\n            }, true);\n          }\n        });\n        break;\n      case 'Delete':\n      case 'Backspace':\n        e.preventDefault();\n        selectedIds.forEach(id => onDeleteElement(id));\n        break;\n      case 'Escape':\n        e.preventDefault();\n        onSelectElement([]);\n        setContextMenu(null);\n        break;\n    }\n  }, [selectedIds, onUpdatePosition, onDeleteElement, onSelectElement, viewMode, pageData.elements]);\n\n  // Hotkeys\n  useHotkeys('ctrl+a', e => {\n    e.preventDefault();\n    onSelectElement(pageData.elements.map(el => el.id));\n  }, [pageData.elements, onSelectElement]);\n  useHotkeys('ctrl+g', e => {\n    e.preventDefault();\n    if (selectedIds.length > 1) {\n      onGroupElements(selectedIds);\n    }\n  }, [selectedIds, onGroupElements]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lpb-canvas-wrapper\",\n    onKeyDown: handleKeyDown,\n    tabIndex: 0,\n    style: {\n      outline: 'none'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        canvasRef.current = node;\n        drop(node);\n      },\n      className: `lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`,\n      style: {\n        position: 'relative',\n        width: canvasBounds.width,\n        height: canvasBounds.height,\n        minHeight: '100vh',\n        background: (pageData === null || pageData === void 0 ? void 0 : (_pageData$canvas3 = pageData.canvas) === null || _pageData$canvas3 === void 0 ? void 0 : _pageData$canvas3.background) || '#ffffff',\n        transform: `scale(${zoomLevel / 100})`,\n        transformOrigin: 'top left',\n        cursor: isOver ? 'copy' : 'default'\n      },\n      onClick: handleCanvasClick,\n      children: [/*#__PURE__*/_jsxDEV(Rulers, {\n        canvasWidth: canvasBounds.width,\n        canvasHeight: canvasBounds.height,\n        zoomLevel: zoomLevel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Guidelines, {\n        guidelines: guidelines,\n        zoomLevel: zoomLevel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 21\n      }, this), showGrid && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-canvas-grid\",\n        style: {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          backgroundImage: `\n                                    linear-gradient(to right, #e5e7eb 1px, transparent 1px),\n                                    linear-gradient(to bottom, #e5e7eb 1px, transparent 1px)\n                                `,\n          backgroundSize: `${gridSize}px ${gridSize}px`,\n          pointerEvents: 'none',\n          opacity: 0.5\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 25\n      }, this), pageData === null || pageData === void 0 ? void 0 : (_pageData$elements = pageData.elements) === null || _pageData$elements === void 0 ? void 0 : _pageData$elements.map(element => /*#__PURE__*/_jsxDEV(Element, {\n        element: element,\n        isSelected: selectedIds.includes(element.id),\n        onSelectElement: onSelectElement,\n        onUpdatePosition: onUpdatePosition,\n        viewMode: viewMode,\n        zoomLevel: zoomLevel,\n        gridSize: showGrid ? gridSize : Infinity,\n        onContextMenu: handleContextMenu,\n        canvasRef: canvasRef,\n        snapPoints: snapPoints\n      }, element.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 25\n      }, this)), /*#__PURE__*/_jsxDEV(SelectionOverlay, {\n        selectedElements: (pageData === null || pageData === void 0 ? void 0 : (_pageData$elements2 = pageData.elements) === null || _pageData$elements2 === void 0 ? void 0 : _pageData$elements2.filter(el => selectedIds.includes(el.id))) || [],\n        onResize: onUpdateSize,\n        zoomLevel: zoomLevel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 21\n      }, this), contextMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-context-menu\",\n        style: {\n          position: 'fixed',\n          left: contextMenu.position.x,\n          top: contextMenu.position.y,\n          background: 'white',\n          border: '1px solid #ccc',\n          borderRadius: '4px',\n          boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n          zIndex: 10000\n        },\n        onClick: () => setContextMenu(null),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-context-menu-item\",\n          style: {\n            padding: '8px 12px',\n            cursor: 'pointer',\n            borderBottom: '1px solid #eee'\n          },\n          onClick: () => {\n            onDeleteElement(contextMenu.id);\n            setContextMenu(null);\n          },\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-context-menu-item\",\n          style: {\n            padding: '8px 12px',\n            cursor: 'pointer'\n          },\n          onClick: () => {\n            onGroupElements([contextMenu.id]);\n            setContextMenu(null);\n          },\n          children: \"Group\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 481,\n    columnNumber: 13\n  }, this);\n}, \"xl1WRkoULeeuWj80qS/w/9mteBM=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys];\n})), \"xl1WRkoULeeuWj80qS/w/9mteBM=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys];\n});\n_c4 = Canvas;\nexport default Canvas;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Element$React.memo\");\n$RefreshReg$(_c2, \"Element\");\n$RefreshReg$(_c3, \"Canvas$React.memo\");\n$RefreshReg$(_c4, \"Canvas\");","map":{"version":3,"names":["React","useRef","useCallback","useState","useEffect","useDrop","useDrag","useHotkeys","toast","Guidelines","Rulers","SelectionOverlay","jsxDEV","_jsxDEV","ItemTypes","ELEMENT","EXISTING_ELEMENT","getCanvasPosition","mouseX","mouseY","canvasRef","zoomLevel","current","console","error","x","y","canvasRect","getBoundingClientRect","left","top","Math","max","snapToGrid","gridSize","snapPoints","Infinity","snappedX","round","snappedY","forEach","point","abs","getElementBounds","element","_element$position$des","_element$position$des2","_element$position$des3","_element$size","_element$position$des4","_element$size2","_element$position$des5","_element$size3","_element$position$des6","_element$size4","position","desktop","right","size","width","bottom","height","centerX","centerY","Element","_s","memo","_c","isSelected","onSelectElement","onUpdatePosition","viewMode","onContextMenu","_position$viewMode3","_position$viewMode4","id","type","componentData","styles","elementRef","dragStartOffset","setDragStartOffset","isDragging","drag","item","isExistingElement","dragOffset","collect","monitor","handleMouseDown","e","_elementRef$current","_canvasRef$current","_position$viewMode","_position$viewMode2","stopPropagation","elementRect","mouseCanvasX","clientX","mouseCanvasY","clientY","elementCanvasX","elementCanvasY","offsetX","offsetY","ctrlKey","group","log","groupEnd","handleContextMenu","preventDefault","window","currentDragOffset","ref","node","className","style","zIndex","z","cursor","opacity","onMouseDown","children","fontSize","color","margin","userSelect","content","fileName","_jsxFileName","lineNumber","columnNumber","padding","borderRadius","background","border","src","alt","maxWidth","pointerEvents","display","flexDirection","gap","placeholder","readOnly","_c2","Canvas","_s2","_c3","pageData","selectedIds","onUpdateSize","onDeleteElement","onAddElement","onGroupElements","showGrid","_pageData$canvas","_pageData$canvas2","_pageData$canvas3","_pageData$elements","_pageData$elements2","guidelines","setGuidelines","contextMenu","setContextMenu","canvasBounds","canvas","elements","map","el","bounds","flat","push","isOver","drop","accept","hover","clientOffset","getClientOffset","pos","snapped","newGuidelines","vertical","json","newElement","Date","now","tablet","mobile","success","JSON","stringify","finalPosition","finalSnapped","handleCanvasClick","target","handleKeyDown","length","nudgeDistance","shiftKey","key","find","currentPos","onKeyDown","tabIndex","outline","minHeight","transform","transformOrigin","onClick","canvasWidth","canvasHeight","backgroundImage","backgroundSize","includes","selectedElements","filter","onResize","boxShadow","borderBottom","_c4","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef, useCallback, useState, useEffect } from 'react';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport Guidelines from './Guidelines';\r\nimport Rulers from './Rulers';\r\nimport SelectionOverlay from './SelectionOverlay';\r\nimport '../../styles/Canvas.css';\r\n\r\nconst ItemTypes = {\r\n    ELEMENT: 'element',\r\n    EXISTING_ELEMENT: 'existingElement',\r\n};\r\n\r\n// Unified coordinate calculation function\r\nconst getCanvasPosition = (mouseX, mouseY, canvasRef, zoomLevel = 100) => {\r\n    if (!canvasRef || !canvasRef.current) {\r\n        console.error('Canvas ref is null in getCanvasPosition');\r\n        return { x: 0, y: 0 };\r\n    }\r\n\r\n    const canvasRect = canvasRef.current.getBoundingClientRect();\r\n    const x = (mouseX - canvasRect.left) / (zoomLevel / 100);\r\n    const y = (mouseY - canvasRect.top) / (zoomLevel / 100);\r\n\r\n    return { x: Math.max(0, x), y: Math.max(0, y) };\r\n};\r\n\r\nconst snapToGrid = (x, y, gridSize, snapPoints = []) => {\r\n    if (gridSize === Infinity) return { x, y };\r\n\r\n    let snappedX = Math.round(x / gridSize) * gridSize;\r\n    let snappedY = Math.round(y / gridSize) * gridSize;\r\n\r\n    // Snap to nearby elements (threshold 15px)\r\n    snapPoints.forEach((point) => {\r\n        if (Math.abs(x - point.x) < 15) snappedX = point.x;\r\n        if (Math.abs(y - point.y) < 15) snappedY = point.y;\r\n    });\r\n\r\n    return { x: snappedX, y: snappedY };\r\n};\r\n\r\nconst getElementBounds = (element) => ({\r\n    left: element.position.desktop?.x || 0,\r\n    top: element.position.desktop?.y || 0,\r\n    right: (element.position.desktop?.x || 0) + (element.size?.width || 200),\r\n    bottom: (element.position.desktop?.y || 0) + (element.size?.height || 50),\r\n    centerX: (element.position.desktop?.x || 0) + (element.size?.width || 200) / 2,\r\n    centerY: (element.position.desktop?.y || 0) + (element.size?.height || 50) / 2,\r\n});\r\n\r\nconst Element = React.memo(\r\n    ({\r\n         element,\r\n         isSelected,\r\n         onSelectElement,\r\n         onUpdatePosition,\r\n         viewMode,\r\n         zoomLevel,\r\n         gridSize,\r\n         onContextMenu,\r\n         canvasRef, // Pass canvasRef from parent\r\n         snapPoints,\r\n     }) => {\r\n        const { id, type, componentData = {}, position = {}, size = { width: 200, height: 50 }, styles = {} } = element;\r\n        const elementRef = useRef(null);\r\n        const [dragStartOffset, setDragStartOffset] = useState({ x: 0, y: 0 });\r\n\r\n        const [{ isDragging }, drag] = useDrag(() => ({\r\n            type: ItemTypes.EXISTING_ELEMENT,\r\n            item: () => ({\r\n                id,\r\n                isExistingElement: true,\r\n                dragOffset: dragStartOffset\r\n            }),\r\n            collect: (monitor) => ({\r\n                isDragging: !!monitor.isDragging(),\r\n            }),\r\n        }));\r\n\r\n        const handleMouseDown = (e) => {\r\n            e.stopPropagation();\r\n\r\n            // Calculate offset from mouse to element top-left corner in canvas coordinates\r\n            const elementRect = elementRef.current?.getBoundingClientRect();\r\n            const canvasRect = canvasRef.current?.getBoundingClientRect();\r\n\r\n            if (!elementRect || !canvasRect) return;\r\n\r\n            // Mouse position relative to canvas (accounting for zoom)\r\n            const mouseCanvasX = (e.clientX - canvasRect.left) / (zoomLevel / 100);\r\n            const mouseCanvasY = (e.clientY - canvasRect.top) / (zoomLevel / 100);\r\n\r\n            // Element position in canvas coordinates\r\n            const elementCanvasX = position[viewMode]?.x || 0;\r\n            const elementCanvasY = position[viewMode]?.y || 0;\r\n\r\n            // Offset = mouse position - element position\r\n            const offsetX = mouseCanvasX - elementCanvasX;\r\n            const offsetY = mouseCanvasY - elementCanvasY;\r\n\r\n            setDragStartOffset({ x: offsetX, y: offsetY });\r\n            onSelectElement(id, e.ctrlKey);\r\n\r\n            console.group('Mouse Down Debug');\r\n            console.log('Mouse client pos:', { x: e.clientX, y: e.clientY });\r\n            console.log('Canvas rect:', canvasRect);\r\n            console.log('Element rect:', elementRect);\r\n            console.log('Mouse canvas pos:', { x: mouseCanvasX, y: mouseCanvasY });\r\n            console.log('Element canvas pos:', { x: elementCanvasX, y: elementCanvasY });\r\n            console.log('Calculated offset:', { x: offsetX, y: offsetY });\r\n            console.groupEnd();\r\n        };\r\n\r\n        const handleContextMenu = (e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            onContextMenu(id, { x: e.clientX, y: e.clientY });\r\n        };\r\n\r\n        // Store drag offset in drag item for Canvas drop handler to use\r\n        useEffect(() => {\r\n            if (isDragging) {\r\n                // Store offset in a global way so drop handler can access it\r\n                window.currentDragOffset = dragStartOffset;\r\n            }\r\n        }, [isDragging, dragStartOffset]);\r\n\r\n        return (\r\n            <div\r\n                ref={(node) => {\r\n                    elementRef.current = node;\r\n                    drag(node);\r\n                }}\r\n                className={`lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`}\r\n                style={{\r\n                    position: 'absolute',\r\n                    left: position[viewMode]?.x || 0,\r\n                    top: position[viewMode]?.y || 0,\r\n                    width: size.width,\r\n                    height: size.height,\r\n                    zIndex: position.z || 1,\r\n                    cursor: isDragging ? 'grabbing' : 'grab',\r\n                    opacity: isDragging ? 0.8 : 1,\r\n                    ...styles,\r\n                }}\r\n                onMouseDown={handleMouseDown}\r\n                onContextMenu={handleContextMenu}\r\n            >\r\n                {(() => {\r\n                    switch (type) {\r\n                        case 'heading':\r\n                            return (\r\n                                <h2 style={{\r\n                                    fontSize: componentData.fontSize || '1.5rem',\r\n                                    color: componentData.color || '#1f2937',\r\n                                    margin: 0,\r\n                                    userSelect: 'none'\r\n                                }}>\r\n                                    {componentData.content || 'Tiêu đề'}\r\n                                </h2>\r\n                            );\r\n                        case 'paragraph':\r\n                            return (\r\n                                <p style={{\r\n                                    fontSize: componentData.fontSize || '1rem',\r\n                                    color: componentData.color || '#1f2937',\r\n                                    margin: 0,\r\n                                    userSelect: 'none'\r\n                                }}>\r\n                                    {componentData.content || 'Đoạn văn'}\r\n                                </p>\r\n                            );\r\n                        case 'button':\r\n                            return (\r\n                                <button style={{\r\n                                    padding: '8px 16px',\r\n                                    borderRadius: '8px',\r\n                                    background: componentData.background || '#2563eb',\r\n                                    color: componentData.color || '#fff',\r\n                                    border: 'none',\r\n                                    cursor: 'pointer',\r\n                                    userSelect: 'none'\r\n                                }}>\r\n                                    {componentData.content || 'Nút'}\r\n                                </button>\r\n                            );\r\n                        case 'image':\r\n                            return (\r\n                                <img\r\n                                    src={componentData.src || 'https://via.placeholder.com/150'}\r\n                                    alt=\"Image\"\r\n                                    style={{\r\n                                        maxWidth: '100%',\r\n                                        height: 'auto',\r\n                                        userSelect: 'none',\r\n                                        pointerEvents: 'none'\r\n                                    }}\r\n                                />\r\n                            );\r\n                        case 'form':\r\n                            return (\r\n                                <form style={{\r\n                                    display: 'flex',\r\n                                    flexDirection: 'column',\r\n                                    gap: '10px',\r\n                                    userSelect: 'none'\r\n                                }}>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Input\"\r\n                                        style={{ padding: '8px', borderRadius: '8px', border: '1px solid #ccc' }}\r\n                                        readOnly\r\n                                    />\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        style={{\r\n                                            background: '#2563eb',\r\n                                            color: '#fff',\r\n                                            padding: '8px 16px',\r\n                                            borderRadius: '8px',\r\n                                            border: 'none'\r\n                                        }}\r\n                                    >\r\n                                        Submit\r\n                                    </button>\r\n                                </form>\r\n                            );\r\n                        default:\r\n                            return <div style={{ userSelect: 'none' }}>{componentData.content || 'Unknown'}</div>;\r\n                    }\r\n                })()}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nconst Canvas = React.memo(\r\n    ({\r\n         pageData,\r\n         selectedIds,\r\n         onSelectElement,\r\n         onUpdatePosition,\r\n         onUpdateSize,\r\n         onDeleteElement,\r\n         onAddElement,\r\n         onGroupElements,\r\n         viewMode,\r\n         zoomLevel,\r\n         gridSize,\r\n         showGrid,\r\n     }) => {\r\n        const canvasRef = useRef(null);\r\n        const [guidelines, setGuidelines] = useState([]);\r\n        const [contextMenu, setContextMenu] = useState(null);\r\n\r\n        const canvasBounds = {\r\n            width: pageData?.canvas?.width || 1200,\r\n            height: pageData?.canvas?.height || 1000\r\n        };\r\n\r\n        // Generate snap points from existing elements\r\n        const snapPoints = pageData?.elements ? pageData.elements.map(el => {\r\n            const bounds = getElementBounds(el);\r\n            return [\r\n                { x: bounds.left, y: bounds.top },\r\n                { x: bounds.right, y: bounds.bottom },\r\n                { x: bounds.centerX, y: bounds.centerY },\r\n                { x: bounds.left, y: bounds.centerY }, // left-center\r\n                { x: bounds.right, y: bounds.centerY }, // right-center\r\n                { x: bounds.centerX, y: bounds.top }, // top-center\r\n                { x: bounds.centerX, y: bounds.bottom }, // bottom-center\r\n            ];\r\n        }).flat() : [];\r\n\r\n        // Add canvas boundary snap points\r\n        snapPoints.push(\r\n            { x: 0, y: 0 }, // top-left\r\n            { x: canvasBounds.width, y: 0 }, // top-right\r\n            { x: 0, y: canvasBounds.height }, // bottom-left\r\n            { x: canvasBounds.width, y: canvasBounds.height }, // bottom-right\r\n            { x: canvasBounds.width / 2, y: canvasBounds.height / 2 }, // center\r\n        );\r\n\r\n        const [{ isOver }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\r\n            hover: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) return;\r\n\r\n                const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef, zoomLevel);\r\n                const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n                // Generate guidelines for visual feedback\r\n                const newGuidelines = [];\r\n                snapPoints.forEach(point => {\r\n                    if (Math.abs(snapped.x - point.x) < 2) {\r\n                        newGuidelines.push({ vertical: true, position: point.x });\r\n                    }\r\n                    if (Math.abs(snapped.y - point.y) < 2) {\r\n                        newGuidelines.push({ vertical: false, position: point.y });\r\n                    }\r\n                });\r\n\r\n                setGuidelines(newGuidelines);\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    toast.error('Không thể xác định vị trí thả!');\r\n                    return;\r\n                }\r\n\r\n                const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef, zoomLevel);\r\n                const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n                console.group('Drop Debug');\r\n                console.log('Item:', item);\r\n                console.log('Client Offset:', clientOffset);\r\n                console.log('Canvas Position:', pos);\r\n                console.log('Snapped Position:', snapped);\r\n                console.groupEnd();\r\n\r\n                // Handle new element from library\r\n                if (item.json && !item.isExistingElement) {\r\n                    const newElement = {\r\n                        id: `${item.id}-${Date.now()}`,\r\n                        type: item.json.type,\r\n                        componentData: item.json.componentData || {},\r\n                        position: {\r\n                            [viewMode]: snapped,\r\n                            desktop: snapped,\r\n                            tablet: snapped,\r\n                            mobile: snapped\r\n                        },\r\n                        size: item.json.size || { width: 200, height: 50 },\r\n                        styles: item.json.styles || {},\r\n                    };\r\n\r\n                    onAddElement(newElement);\r\n                    toast.success('Đã thêm phần tử!');\r\n                }\r\n                // Handle existing element drag\r\n                else if (item.isExistingElement && item.id) {\r\n                    console.log('Drop Debug - Item:', JSON.stringify(item, null, 2));\r\n\r\n                    // Get the drag offset from the item\r\n                    const dragOffset = item.dragOffset || { x: 0, y: 0 };\r\n\r\n                    console.log('Drag offset:', dragOffset);\r\n\r\n                    // Apply offset to get final position\r\n                    const finalPosition = {\r\n                        x: Math.max(0, pos.x - dragOffset.x),\r\n                        y: Math.max(0, pos.y - dragOffset.y)\r\n                    };\r\n\r\n                    console.log('Final position before snap:', finalPosition);\r\n\r\n                    // Apply final snapping with offset\r\n                    const finalSnapped = snapToGrid(finalPosition.x, finalPosition.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n                    console.log('Final snapped position:', finalSnapped);\r\n\r\n                    onUpdatePosition(item.id, { [viewMode]: finalSnapped }, true);\r\n                    toast.success('Đã di chuyển phần tử!');\r\n                }\r\n\r\n                setGuidelines([]);\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: !!monitor.isOver(),\r\n            }),\r\n        }));\r\n\r\n        const handleCanvasClick = (e) => {\r\n            // Click on empty canvas to deselect all\r\n            if (e.target === canvasRef.current) {\r\n                onSelectElement([]);\r\n            }\r\n        };\r\n\r\n        const handleContextMenu = (id, position) => {\r\n            setContextMenu({ id, position });\r\n        };\r\n\r\n        const handleKeyDown = useCallback((e) => {\r\n            if (!selectedIds.length) return;\r\n\r\n            const nudgeDistance = e.shiftKey ? 10 : 1;\r\n\r\n            switch (e.key) {\r\n                case 'ArrowUp':\r\n                    e.preventDefault();\r\n                    selectedIds.forEach(id => {\r\n                        const element = pageData.elements.find(el => el.id === id);\r\n                        if (element) {\r\n                            const currentPos = element.position[viewMode] || { x: 0, y: 0 };\r\n                            onUpdatePosition(id, {\r\n                                [viewMode]: {\r\n                                    x: currentPos.x,\r\n                                    y: Math.max(0, currentPos.y - nudgeDistance)\r\n                                }\r\n                            }, true);\r\n                        }\r\n                    });\r\n                    break;\r\n                case 'ArrowDown':\r\n                    e.preventDefault();\r\n                    selectedIds.forEach(id => {\r\n                        const element = pageData.elements.find(el => el.id === id);\r\n                        if (element) {\r\n                            const currentPos = element.position[viewMode] || { x: 0, y: 0 };\r\n                            onUpdatePosition(id, {\r\n                                [viewMode]: {\r\n                                    x: currentPos.x,\r\n                                    y: currentPos.y + nudgeDistance\r\n                                }\r\n                            }, true);\r\n                        }\r\n                    });\r\n                    break;\r\n                case 'ArrowLeft':\r\n                    e.preventDefault();\r\n                    selectedIds.forEach(id => {\r\n                        const element = pageData.elements.find(el => el.id === id);\r\n                        if (element) {\r\n                            const currentPos = element.position[viewMode] || { x: 0, y: 0 };\r\n                            onUpdatePosition(id, {\r\n                                [viewMode]: {\r\n                                    x: Math.max(0, currentPos.x - nudgeDistance),\r\n                                    y: currentPos.y\r\n                                }\r\n                            }, true);\r\n                        }\r\n                    });\r\n                    break;\r\n                case 'ArrowRight':\r\n                    e.preventDefault();\r\n                    selectedIds.forEach(id => {\r\n                        const element = pageData.elements.find(el => el.id === id);\r\n                        if (element) {\r\n                            const currentPos = element.position[viewMode] || { x: 0, y: 0 };\r\n                            onUpdatePosition(id, {\r\n                                [viewMode]: {\r\n                                    x: currentPos.x + nudgeDistance,\r\n                                    y: currentPos.y\r\n                                }\r\n                            }, true);\r\n                        }\r\n                    });\r\n                    break;\r\n                case 'Delete':\r\n                case 'Backspace':\r\n                    e.preventDefault();\r\n                    selectedIds.forEach(id => onDeleteElement(id));\r\n                    break;\r\n                case 'Escape':\r\n                    e.preventDefault();\r\n                    onSelectElement([]);\r\n                    setContextMenu(null);\r\n                    break;\r\n            }\r\n        }, [selectedIds, onUpdatePosition, onDeleteElement, onSelectElement, viewMode, pageData.elements]);\r\n\r\n        // Hotkeys\r\n        useHotkeys('ctrl+a', (e) => {\r\n            e.preventDefault();\r\n            onSelectElement(pageData.elements.map(el => el.id));\r\n        }, [pageData.elements, onSelectElement]);\r\n\r\n        useHotkeys('ctrl+g', (e) => {\r\n            e.preventDefault();\r\n            if (selectedIds.length > 1) {\r\n                onGroupElements(selectedIds);\r\n            }\r\n        }, [selectedIds, onGroupElements]);\r\n\r\n        return (\r\n            <div\r\n                className=\"lpb-canvas-wrapper\"\r\n                onKeyDown={handleKeyDown}\r\n                tabIndex={0}\r\n                style={{ outline: 'none' }}\r\n            >\r\n                <div\r\n                    ref={(node) => {\r\n                        canvasRef.current = node;\r\n                        drop(node);\r\n                    }}\r\n                    className={`lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`}\r\n                    style={{\r\n                        position: 'relative',\r\n                        width: canvasBounds.width,\r\n                        height: canvasBounds.height,\r\n                        minHeight: '100vh',\r\n                        background: pageData?.canvas?.background || '#ffffff',\r\n                        transform: `scale(${zoomLevel / 100})`,\r\n                        transformOrigin: 'top left',\r\n                        cursor: isOver ? 'copy' : 'default',\r\n                    }}\r\n                    onClick={handleCanvasClick}\r\n                >\r\n                    <Rulers\r\n                        canvasWidth={canvasBounds.width}\r\n                        canvasHeight={canvasBounds.height}\r\n                        zoomLevel={zoomLevel}\r\n                    />\r\n\r\n                    <Guidelines\r\n                        guidelines={guidelines}\r\n                        zoomLevel={zoomLevel}\r\n                    />\r\n\r\n                    {showGrid && (\r\n                        <div\r\n                            className=\"lpb-canvas-grid\"\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: 0,\r\n                                left: 0,\r\n                                right: 0,\r\n                                bottom: 0,\r\n                                backgroundImage: `\r\n                                    linear-gradient(to right, #e5e7eb 1px, transparent 1px),\r\n                                    linear-gradient(to bottom, #e5e7eb 1px, transparent 1px)\r\n                                `,\r\n                                backgroundSize: `${gridSize}px ${gridSize}px`,\r\n                                pointerEvents: 'none',\r\n                                opacity: 0.5\r\n                            }}\r\n                        />\r\n                    )}\r\n\r\n                    {pageData?.elements?.map((element) => (\r\n                        <Element\r\n                            key={element.id}\r\n                            element={element}\r\n                            isSelected={selectedIds.includes(element.id)}\r\n                            onSelectElement={onSelectElement}\r\n                            onUpdatePosition={onUpdatePosition}\r\n                            viewMode={viewMode}\r\n                            zoomLevel={zoomLevel}\r\n                            gridSize={showGrid ? gridSize : Infinity}\r\n                            onContextMenu={handleContextMenu}\r\n                            canvasRef={canvasRef}\r\n                            snapPoints={snapPoints}\r\n                        />\r\n                    ))}\r\n\r\n                    <SelectionOverlay\r\n                        selectedElements={pageData?.elements?.filter(el => selectedIds.includes(el.id)) || []}\r\n                        onResize={onUpdateSize}\r\n                        zoomLevel={zoomLevel}\r\n                    />\r\n\r\n                    {contextMenu && (\r\n                        <div\r\n                            className=\"lpb-context-menu\"\r\n                            style={{\r\n                                position: 'fixed',\r\n                                left: contextMenu.position.x,\r\n                                top: contextMenu.position.y,\r\n                                background: 'white',\r\n                                border: '1px solid #ccc',\r\n                                borderRadius: '4px',\r\n                                boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\r\n                                zIndex: 10000\r\n                            }}\r\n                            onClick={() => setContextMenu(null)}\r\n                        >\r\n                            <div\r\n                                className=\"lpb-context-menu-item\"\r\n                                style={{\r\n                                    padding: '8px 12px',\r\n                                    cursor: 'pointer',\r\n                                    borderBottom: '1px solid #eee'\r\n                                }}\r\n                                onClick={() => {\r\n                                    onDeleteElement(contextMenu.id);\r\n                                    setContextMenu(null);\r\n                                }}\r\n                            >\r\n                                Delete\r\n                            </div>\r\n                            <div\r\n                                className=\"lpb-context-menu-item\"\r\n                                style={{\r\n                                    padding: '8px 12px',\r\n                                    cursor: 'pointer'\r\n                                }}\r\n                                onClick={() => {\r\n                                    onGroupElements([contextMenu.id]);\r\n                                    setContextMenu(null);\r\n                                }}\r\n                            >\r\n                                Group\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nexport default Canvas;"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACvE,SAASC,OAAO,EAAEC,OAAO,QAAQ,WAAW;AAC5C,SAASC,UAAU,QAAQ,oBAAoB;AAC/C,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,OAAO,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjC,MAAMC,SAAS,GAAG;EACdC,OAAO,EAAE,SAAS;EAClBC,gBAAgB,EAAE;AACtB,CAAC;;AAED;AACA,MAAMC,iBAAiB,GAAGA,CAACC,MAAM,EAAEC,MAAM,EAAEC,SAAS,EAAEC,SAAS,GAAG,GAAG,KAAK;EACtE,IAAI,CAACD,SAAS,IAAI,CAACA,SAAS,CAACE,OAAO,EAAE;IAClCC,OAAO,CAACC,KAAK,CAAC,yCAAyC,CAAC;IACxD,OAAO;MAAEC,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;EACzB;EAEA,MAAMC,UAAU,GAAGP,SAAS,CAACE,OAAO,CAACM,qBAAqB,CAAC,CAAC;EAC5D,MAAMH,CAAC,GAAG,CAACP,MAAM,GAAGS,UAAU,CAACE,IAAI,KAAKR,SAAS,GAAG,GAAG,CAAC;EACxD,MAAMK,CAAC,GAAG,CAACP,MAAM,GAAGQ,UAAU,CAACG,GAAG,KAAKT,SAAS,GAAG,GAAG,CAAC;EAEvD,OAAO;IAAEI,CAAC,EAAEM,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEP,CAAC,CAAC;IAAEC,CAAC,EAAEK,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEN,CAAC;EAAE,CAAC;AACnD,CAAC;AAED,MAAMO,UAAU,GAAGA,CAACR,CAAC,EAAEC,CAAC,EAAEQ,QAAQ,EAAEC,UAAU,GAAG,EAAE,KAAK;EACpD,IAAID,QAAQ,KAAKE,QAAQ,EAAE,OAAO;IAAEX,CAAC;IAAEC;EAAE,CAAC;EAE1C,IAAIW,QAAQ,GAAGN,IAAI,CAACO,KAAK,CAACb,CAAC,GAAGS,QAAQ,CAAC,GAAGA,QAAQ;EAClD,IAAIK,QAAQ,GAAGR,IAAI,CAACO,KAAK,CAACZ,CAAC,GAAGQ,QAAQ,CAAC,GAAGA,QAAQ;;EAElD;EACAC,UAAU,CAACK,OAAO,CAAEC,KAAK,IAAK;IAC1B,IAAIV,IAAI,CAACW,GAAG,CAACjB,CAAC,GAAGgB,KAAK,CAAChB,CAAC,CAAC,GAAG,EAAE,EAAEY,QAAQ,GAAGI,KAAK,CAAChB,CAAC;IAClD,IAAIM,IAAI,CAACW,GAAG,CAAChB,CAAC,GAAGe,KAAK,CAACf,CAAC,CAAC,GAAG,EAAE,EAAEa,QAAQ,GAAGE,KAAK,CAACf,CAAC;EACtD,CAAC,CAAC;EAEF,OAAO;IAAED,CAAC,EAAEY,QAAQ;IAAEX,CAAC,EAAEa;EAAS,CAAC;AACvC,CAAC;AAED,MAAMI,gBAAgB,GAAIC,OAAO;EAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,sBAAA,EAAAC,aAAA,EAAAC,sBAAA,EAAAC,cAAA,EAAAC,sBAAA,EAAAC,cAAA,EAAAC,sBAAA,EAAAC,cAAA;EAAA,OAAM;IACnCzB,IAAI,EAAE,EAAAgB,qBAAA,GAAAD,OAAO,CAACW,QAAQ,CAACC,OAAO,cAAAX,qBAAA,uBAAxBA,qBAAA,CAA0BpB,CAAC,KAAI,CAAC;IACtCK,GAAG,EAAE,EAAAgB,sBAAA,GAAAF,OAAO,CAACW,QAAQ,CAACC,OAAO,cAAAV,sBAAA,uBAAxBA,sBAAA,CAA0BpB,CAAC,KAAI,CAAC;IACrC+B,KAAK,EAAE,CAAC,EAAAV,sBAAA,GAAAH,OAAO,CAACW,QAAQ,CAACC,OAAO,cAAAT,sBAAA,uBAAxBA,sBAAA,CAA0BtB,CAAC,KAAI,CAAC,KAAK,EAAAuB,aAAA,GAAAJ,OAAO,CAACc,IAAI,cAAAV,aAAA,uBAAZA,aAAA,CAAcW,KAAK,KAAI,GAAG,CAAC;IACxEC,MAAM,EAAE,CAAC,EAAAX,sBAAA,GAAAL,OAAO,CAACW,QAAQ,CAACC,OAAO,cAAAP,sBAAA,uBAAxBA,sBAAA,CAA0BvB,CAAC,KAAI,CAAC,KAAK,EAAAwB,cAAA,GAAAN,OAAO,CAACc,IAAI,cAAAR,cAAA,uBAAZA,cAAA,CAAcW,MAAM,KAAI,EAAE,CAAC;IACzEC,OAAO,EAAE,CAAC,EAAAX,sBAAA,GAAAP,OAAO,CAACW,QAAQ,CAACC,OAAO,cAAAL,sBAAA,uBAAxBA,sBAAA,CAA0B1B,CAAC,KAAI,CAAC,IAAI,CAAC,EAAA2B,cAAA,GAAAR,OAAO,CAACc,IAAI,cAAAN,cAAA,uBAAZA,cAAA,CAAcO,KAAK,KAAI,GAAG,IAAI,CAAC;IAC9EI,OAAO,EAAE,CAAC,EAAAV,sBAAA,GAAAT,OAAO,CAACW,QAAQ,CAACC,OAAO,cAAAH,sBAAA,uBAAxBA,sBAAA,CAA0B3B,CAAC,KAAI,CAAC,IAAI,CAAC,EAAA4B,cAAA,GAAAV,OAAO,CAACc,IAAI,cAAAJ,cAAA,uBAAZA,cAAA,CAAcO,MAAM,KAAI,EAAE,IAAI;EACjF,CAAC;AAAA,CAAC;AAEF,MAAMG,OAAO,gBAAAC,EAAA,cAAGjE,KAAK,CAACkE,IAAI,CAAAC,EAAA,GAAAF,EAAA,CACtB,CAAC;EACIrB,OAAO;EACPwB,UAAU;EACVC,eAAe;EACfC,gBAAgB;EAChBC,QAAQ;EACRlD,SAAS;EACTa,QAAQ;EACRsC,aAAa;EACbpD,SAAS;EAAE;EACXe;AACJ,CAAC,KAAK;EAAA,IAAAsC,mBAAA,EAAAC,mBAAA;EAAAT,EAAA;EACH,MAAM;IAAEU,EAAE;IAAEC,IAAI;IAAEC,aAAa,GAAG,CAAC,CAAC;IAAEtB,QAAQ,GAAG,CAAC,CAAC;IAAEG,IAAI,GAAG;MAAEC,KAAK,EAAE,GAAG;MAAEE,MAAM,EAAE;IAAG,CAAC;IAAEiB,MAAM,GAAG,CAAC;EAAE,CAAC,GAAGlC,OAAO;EAC/G,MAAMmC,UAAU,GAAG9E,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAM,CAAC+E,eAAe,EAAEC,kBAAkB,CAAC,GAAG9E,QAAQ,CAAC;IAAEsB,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EAEtE,MAAM,CAAC;IAAEwD;EAAW,CAAC,EAAEC,IAAI,CAAC,GAAG7E,OAAO,CAAC,OAAO;IAC1CsE,IAAI,EAAE9D,SAAS,CAACE,gBAAgB;IAChCoE,IAAI,EAAEA,CAAA,MAAO;MACTT,EAAE;MACFU,iBAAiB,EAAE,IAAI;MACvBC,UAAU,EAAEN;IAChB,CAAC,CAAC;IACFO,OAAO,EAAGC,OAAO,KAAM;MACnBN,UAAU,EAAE,CAAC,CAACM,OAAO,CAACN,UAAU,CAAC;IACrC,CAAC;EACL,CAAC,CAAC,CAAC;EAEH,MAAMO,eAAe,GAAIC,CAAC,IAAK;IAAA,IAAAC,mBAAA,EAAAC,kBAAA,EAAAC,kBAAA,EAAAC,mBAAA;IAC3BJ,CAAC,CAACK,eAAe,CAAC,CAAC;;IAEnB;IACA,MAAMC,WAAW,IAAAL,mBAAA,GAAGZ,UAAU,CAACzD,OAAO,cAAAqE,mBAAA,uBAAlBA,mBAAA,CAAoB/D,qBAAqB,CAAC,CAAC;IAC/D,MAAMD,UAAU,IAAAiE,kBAAA,GAAGxE,SAAS,CAACE,OAAO,cAAAsE,kBAAA,uBAAjBA,kBAAA,CAAmBhE,qBAAqB,CAAC,CAAC;IAE7D,IAAI,CAACoE,WAAW,IAAI,CAACrE,UAAU,EAAE;;IAEjC;IACA,MAAMsE,YAAY,GAAG,CAACP,CAAC,CAACQ,OAAO,GAAGvE,UAAU,CAACE,IAAI,KAAKR,SAAS,GAAG,GAAG,CAAC;IACtE,MAAM8E,YAAY,GAAG,CAACT,CAAC,CAACU,OAAO,GAAGzE,UAAU,CAACG,GAAG,KAAKT,SAAS,GAAG,GAAG,CAAC;;IAErE;IACA,MAAMgF,cAAc,GAAG,EAAAR,kBAAA,GAAAtC,QAAQ,CAACgB,QAAQ,CAAC,cAAAsB,kBAAA,uBAAlBA,kBAAA,CAAoBpE,CAAC,KAAI,CAAC;IACjD,MAAM6E,cAAc,GAAG,EAAAR,mBAAA,GAAAvC,QAAQ,CAACgB,QAAQ,CAAC,cAAAuB,mBAAA,uBAAlBA,mBAAA,CAAoBpE,CAAC,KAAI,CAAC;;IAEjD;IACA,MAAM6E,OAAO,GAAGN,YAAY,GAAGI,cAAc;IAC7C,MAAMG,OAAO,GAAGL,YAAY,GAAGG,cAAc;IAE7CrB,kBAAkB,CAAC;MAAExD,CAAC,EAAE8E,OAAO;MAAE7E,CAAC,EAAE8E;IAAQ,CAAC,CAAC;IAC9CnC,eAAe,CAACM,EAAE,EAAEe,CAAC,CAACe,OAAO,CAAC;IAE9BlF,OAAO,CAACmF,KAAK,CAAC,kBAAkB,CAAC;IACjCnF,OAAO,CAACoF,GAAG,CAAC,mBAAmB,EAAE;MAAElF,CAAC,EAAEiE,CAAC,CAACQ,OAAO;MAAExE,CAAC,EAAEgE,CAAC,CAACU;IAAQ,CAAC,CAAC;IAChE7E,OAAO,CAACoF,GAAG,CAAC,cAAc,EAAEhF,UAAU,CAAC;IACvCJ,OAAO,CAACoF,GAAG,CAAC,eAAe,EAAEX,WAAW,CAAC;IACzCzE,OAAO,CAACoF,GAAG,CAAC,mBAAmB,EAAE;MAAElF,CAAC,EAAEwE,YAAY;MAAEvE,CAAC,EAAEyE;IAAa,CAAC,CAAC;IACtE5E,OAAO,CAACoF,GAAG,CAAC,qBAAqB,EAAE;MAAElF,CAAC,EAAE4E,cAAc;MAAE3E,CAAC,EAAE4E;IAAe,CAAC,CAAC;IAC5E/E,OAAO,CAACoF,GAAG,CAAC,oBAAoB,EAAE;MAAElF,CAAC,EAAE8E,OAAO;MAAE7E,CAAC,EAAE8E;IAAQ,CAAC,CAAC;IAC7DjF,OAAO,CAACqF,QAAQ,CAAC,CAAC;EACtB,CAAC;EAED,MAAMC,iBAAiB,GAAInB,CAAC,IAAK;IAC7BA,CAAC,CAACoB,cAAc,CAAC,CAAC;IAClBpB,CAAC,CAACK,eAAe,CAAC,CAAC;IACnBvB,aAAa,CAACG,EAAE,EAAE;MAAElD,CAAC,EAAEiE,CAAC,CAACQ,OAAO;MAAExE,CAAC,EAAEgE,CAAC,CAACU;IAAQ,CAAC,CAAC;EACrD,CAAC;;EAED;EACAhG,SAAS,CAAC,MAAM;IACZ,IAAI8E,UAAU,EAAE;MACZ;MACA6B,MAAM,CAACC,iBAAiB,GAAGhC,eAAe;IAC9C;EACJ,CAAC,EAAE,CAACE,UAAU,EAAEF,eAAe,CAAC,CAAC;EAEjC,oBACInE,OAAA;IACIoG,GAAG,EAAGC,IAAI,IAAK;MACXnC,UAAU,CAACzD,OAAO,GAAG4F,IAAI;MACzB/B,IAAI,CAAC+B,IAAI,CAAC;IACd,CAAE;IACFC,SAAS,EAAE,sBAAsB/C,UAAU,GAAG,6BAA6B,GAAG,EAAE,IAAIc,UAAU,GAAG,6BAA6B,GAAG,EAAE,EAAG;IACtIkC,KAAK,EAAE;MACH7D,QAAQ,EAAE,UAAU;MACpB1B,IAAI,EAAE,EAAA4C,mBAAA,GAAAlB,QAAQ,CAACgB,QAAQ,CAAC,cAAAE,mBAAA,uBAAlBA,mBAAA,CAAoBhD,CAAC,KAAI,CAAC;MAChCK,GAAG,EAAE,EAAA4C,mBAAA,GAAAnB,QAAQ,CAACgB,QAAQ,CAAC,cAAAG,mBAAA,uBAAlBA,mBAAA,CAAoBhD,CAAC,KAAI,CAAC;MAC/BiC,KAAK,EAAED,IAAI,CAACC,KAAK;MACjBE,MAAM,EAAEH,IAAI,CAACG,MAAM;MACnBwD,MAAM,EAAE9D,QAAQ,CAAC+D,CAAC,IAAI,CAAC;MACvBC,MAAM,EAAErC,UAAU,GAAG,UAAU,GAAG,MAAM;MACxCsC,OAAO,EAAEtC,UAAU,GAAG,GAAG,GAAG,CAAC;MAC7B,GAAGJ;IACP,CAAE;IACF2C,WAAW,EAAEhC,eAAgB;IAC7BjB,aAAa,EAAEqC,iBAAkB;IAAAa,QAAA,EAEhC,CAAC,MAAM;MACJ,QAAQ9C,IAAI;QACR,KAAK,SAAS;UACV,oBACI/D,OAAA;YAAIuG,KAAK,EAAE;cACPO,QAAQ,EAAE9C,aAAa,CAAC8C,QAAQ,IAAI,QAAQ;cAC5CC,KAAK,EAAE/C,aAAa,CAAC+C,KAAK,IAAI,SAAS;cACvCC,MAAM,EAAE,CAAC;cACTC,UAAU,EAAE;YAChB,CAAE;YAAAJ,QAAA,EACG7C,aAAa,CAACkD,OAAO,IAAI;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnC,CAAC;QAEb,KAAK,WAAW;UACZ,oBACItH,OAAA;YAAGuG,KAAK,EAAE;cACNO,QAAQ,EAAE9C,aAAa,CAAC8C,QAAQ,IAAI,MAAM;cAC1CC,KAAK,EAAE/C,aAAa,CAAC+C,KAAK,IAAI,SAAS;cACvCC,MAAM,EAAE,CAAC;cACTC,UAAU,EAAE;YAChB,CAAE;YAAAJ,QAAA,EACG7C,aAAa,CAACkD,OAAO,IAAI;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrC,CAAC;QAEZ,KAAK,QAAQ;UACT,oBACItH,OAAA;YAAQuG,KAAK,EAAE;cACXgB,OAAO,EAAE,UAAU;cACnBC,YAAY,EAAE,KAAK;cACnBC,UAAU,EAAEzD,aAAa,CAACyD,UAAU,IAAI,SAAS;cACjDV,KAAK,EAAE/C,aAAa,CAAC+C,KAAK,IAAI,MAAM;cACpCW,MAAM,EAAE,MAAM;cACdhB,MAAM,EAAE,SAAS;cACjBO,UAAU,EAAE;YAChB,CAAE;YAAAJ,QAAA,EACG7C,aAAa,CAACkD,OAAO,IAAI;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC;QAEjB,KAAK,OAAO;UACR,oBACItH,OAAA;YACI2H,GAAG,EAAE3D,aAAa,CAAC2D,GAAG,IAAI,iCAAkC;YAC5DC,GAAG,EAAC,OAAO;YACXrB,KAAK,EAAE;cACHsB,QAAQ,EAAE,MAAM;cAChB7E,MAAM,EAAE,MAAM;cACdiE,UAAU,EAAE,MAAM;cAClBa,aAAa,EAAE;YACnB;UAAE;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACL,CAAC;QAEV,KAAK,MAAM;UACP,oBACItH,OAAA;YAAMuG,KAAK,EAAE;cACTwB,OAAO,EAAE,MAAM;cACfC,aAAa,EAAE,QAAQ;cACvBC,GAAG,EAAE,MAAM;cACXhB,UAAU,EAAE;YAChB,CAAE;YAAAJ,QAAA,gBACE7G,OAAA;cACI+D,IAAI,EAAC,MAAM;cACXmE,WAAW,EAAC,OAAO;cACnB3B,KAAK,EAAE;gBAAEgB,OAAO,EAAE,KAAK;gBAAEC,YAAY,EAAE,KAAK;gBAAEE,MAAM,EAAE;cAAiB,CAAE;cACzES,QAAQ;YAAA;cAAAhB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACX,CAAC,eACFtH,OAAA;cACI+D,IAAI,EAAC,QAAQ;cACbwC,KAAK,EAAE;gBACHkB,UAAU,EAAE,SAAS;gBACrBV,KAAK,EAAE,MAAM;gBACbQ,OAAO,EAAE,UAAU;gBACnBC,YAAY,EAAE,KAAK;gBACnBE,MAAM,EAAE;cACZ,CAAE;cAAAb,QAAA,EACL;YAED;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACP,CAAC;QAEf;UACI,oBAAOtH,OAAA;YAAKuG,KAAK,EAAE;cAAEU,UAAU,EAAE;YAAO,CAAE;YAAAJ,QAAA,EAAE7C,aAAa,CAACkD,OAAO,IAAI;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;MAC7F;IACJ,CAAC,EAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEd,CAAC;EAAA,QAtKkC7H,OAAO;AAAA,EAuK9C,CAAC;EAAA,QAvKsCA,OAAO;AAAA,EAuK7C;AAAC2I,GAAA,GAxLIjF,OAAO;AA0Lb,MAAMkF,MAAM,gBAAAC,GAAA,cAAGnJ,KAAK,CAACkE,IAAI,CAAAkF,GAAA,GAAAD,GAAA,CACrB,CAAC;EACIE,QAAQ;EACRC,WAAW;EACXjF,eAAe;EACfC,gBAAgB;EAChBiF,YAAY;EACZC,eAAe;EACfC,YAAY;EACZC,eAAe;EACfnF,QAAQ;EACRlD,SAAS;EACTa,QAAQ;EACRyH;AACJ,CAAC,KAAK;EAAA,IAAAC,gBAAA,EAAAC,iBAAA,EAAAC,iBAAA,EAAAC,kBAAA,EAAAC,mBAAA;EAAAb,GAAA;EACH,MAAM/H,SAAS,GAAGnB,MAAM,CAAC,IAAI,CAAC;EAC9B,MAAM,CAACgK,UAAU,EAAEC,aAAa,CAAC,GAAG/J,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACgK,WAAW,EAAEC,cAAc,CAAC,GAAGjK,QAAQ,CAAC,IAAI,CAAC;EAEpD,MAAMkK,YAAY,GAAG;IACjB1G,KAAK,EAAE,CAAA0F,QAAQ,aAARA,QAAQ,wBAAAO,gBAAA,GAARP,QAAQ,CAAEiB,MAAM,cAAAV,gBAAA,uBAAhBA,gBAAA,CAAkBjG,KAAK,KAAI,IAAI;IACtCE,MAAM,EAAE,CAAAwF,QAAQ,aAARA,QAAQ,wBAAAQ,iBAAA,GAARR,QAAQ,CAAEiB,MAAM,cAAAT,iBAAA,uBAAhBA,iBAAA,CAAkBhG,MAAM,KAAI;EACxC,CAAC;;EAED;EACA,MAAM1B,UAAU,GAAGkH,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEkB,QAAQ,GAAGlB,QAAQ,CAACkB,QAAQ,CAACC,GAAG,CAACC,EAAE,IAAI;IAChE,MAAMC,MAAM,GAAG/H,gBAAgB,CAAC8H,EAAE,CAAC;IACnC,OAAO,CACH;MAAEhJ,CAAC,EAAEiJ,MAAM,CAAC7I,IAAI;MAAEH,CAAC,EAAEgJ,MAAM,CAAC5I;IAAI,CAAC,EACjC;MAAEL,CAAC,EAAEiJ,MAAM,CAACjH,KAAK;MAAE/B,CAAC,EAAEgJ,MAAM,CAAC9G;IAAO,CAAC,EACrC;MAAEnC,CAAC,EAAEiJ,MAAM,CAAC5G,OAAO;MAAEpC,CAAC,EAAEgJ,MAAM,CAAC3G;IAAQ,CAAC,EACxC;MAAEtC,CAAC,EAAEiJ,MAAM,CAAC7I,IAAI;MAAEH,CAAC,EAAEgJ,MAAM,CAAC3G;IAAQ,CAAC;IAAE;IACvC;MAAEtC,CAAC,EAAEiJ,MAAM,CAACjH,KAAK;MAAE/B,CAAC,EAAEgJ,MAAM,CAAC3G;IAAQ,CAAC;IAAE;IACxC;MAAEtC,CAAC,EAAEiJ,MAAM,CAAC5G,OAAO;MAAEpC,CAAC,EAAEgJ,MAAM,CAAC5I;IAAI,CAAC;IAAE;IACtC;MAAEL,CAAC,EAAEiJ,MAAM,CAAC5G,OAAO;MAAEpC,CAAC,EAAEgJ,MAAM,CAAC9G;IAAO,CAAC,CAAE;IAAA,CAC5C;EACL,CAAC,CAAC,CAAC+G,IAAI,CAAC,CAAC,GAAG,EAAE;;EAEd;EACAxI,UAAU,CAACyI,IAAI,CACX;IAAEnJ,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC;EAAE;EAChB;IAAED,CAAC,EAAE4I,YAAY,CAAC1G,KAAK;IAAEjC,CAAC,EAAE;EAAE,CAAC;EAAE;EACjC;IAAED,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE2I,YAAY,CAACxG;EAAO,CAAC;EAAE;EAClC;IAAEpC,CAAC,EAAE4I,YAAY,CAAC1G,KAAK;IAAEjC,CAAC,EAAE2I,YAAY,CAACxG;EAAO,CAAC;EAAE;EACnD;IAAEpC,CAAC,EAAE4I,YAAY,CAAC1G,KAAK,GAAG,CAAC;IAAEjC,CAAC,EAAE2I,YAAY,CAACxG,MAAM,GAAG;EAAE,CAAC,CAAE;EAC/D,CAAC;EAED,MAAM,CAAC;IAAEgH;EAAO,CAAC,EAAEC,IAAI,CAAC,GAAGzK,OAAO,CAAC,OAAO;IACtC0K,MAAM,EAAE,CAACjK,SAAS,CAACC,OAAO,EAAED,SAAS,CAACE,gBAAgB,CAAC;IACvDgK,KAAK,EAAEA,CAAC5F,IAAI,EAAEI,OAAO,KAAK;MACtB,MAAMyF,YAAY,GAAGzF,OAAO,CAAC0F,eAAe,CAAC,CAAC;MAC9C,IAAI,CAACD,YAAY,IAAI,CAAC7J,SAAS,CAACE,OAAO,EAAE;MAEzC,MAAM6J,GAAG,GAAGlK,iBAAiB,CAACgK,YAAY,CAACxJ,CAAC,EAAEwJ,YAAY,CAACvJ,CAAC,EAAEN,SAAS,EAAEC,SAAS,CAAC;MACnF,MAAM+J,OAAO,GAAGnJ,UAAU,CAACkJ,GAAG,CAAC1J,CAAC,EAAE0J,GAAG,CAACzJ,CAAC,EAAEiI,QAAQ,GAAGzH,QAAQ,GAAGE,QAAQ,EAAED,UAAU,CAAC;;MAEpF;MACA,MAAMkJ,aAAa,GAAG,EAAE;MACxBlJ,UAAU,CAACK,OAAO,CAACC,KAAK,IAAI;QACxB,IAAIV,IAAI,CAACW,GAAG,CAAC0I,OAAO,CAAC3J,CAAC,GAAGgB,KAAK,CAAChB,CAAC,CAAC,GAAG,CAAC,EAAE;UACnC4J,aAAa,CAACT,IAAI,CAAC;YAAEU,QAAQ,EAAE,IAAI;YAAE/H,QAAQ,EAAEd,KAAK,CAAChB;UAAE,CAAC,CAAC;QAC7D;QACA,IAAIM,IAAI,CAACW,GAAG,CAAC0I,OAAO,CAAC1J,CAAC,GAAGe,KAAK,CAACf,CAAC,CAAC,GAAG,CAAC,EAAE;UACnC2J,aAAa,CAACT,IAAI,CAAC;YAAEU,QAAQ,EAAE,KAAK;YAAE/H,QAAQ,EAAEd,KAAK,CAACf;UAAE,CAAC,CAAC;QAC9D;MACJ,CAAC,CAAC;MAEFwI,aAAa,CAACmB,aAAa,CAAC;IAChC,CAAC;IACDP,IAAI,EAAEA,CAAC1F,IAAI,EAAEI,OAAO,KAAK;MACrB,MAAMyF,YAAY,GAAGzF,OAAO,CAAC0F,eAAe,CAAC,CAAC;MAC9C,IAAI,CAACD,YAAY,IAAI,CAAC7J,SAAS,CAACE,OAAO,EAAE;QACrCd,KAAK,CAACgB,KAAK,CAAC,gCAAgC,CAAC;QAC7C;MACJ;MAEA,MAAM2J,GAAG,GAAGlK,iBAAiB,CAACgK,YAAY,CAACxJ,CAAC,EAAEwJ,YAAY,CAACvJ,CAAC,EAAEN,SAAS,EAAEC,SAAS,CAAC;MACnF,MAAM+J,OAAO,GAAGnJ,UAAU,CAACkJ,GAAG,CAAC1J,CAAC,EAAE0J,GAAG,CAACzJ,CAAC,EAAEiI,QAAQ,GAAGzH,QAAQ,GAAGE,QAAQ,EAAED,UAAU,CAAC;MAEpFZ,OAAO,CAACmF,KAAK,CAAC,YAAY,CAAC;MAC3BnF,OAAO,CAACoF,GAAG,CAAC,OAAO,EAAEvB,IAAI,CAAC;MAC1B7D,OAAO,CAACoF,GAAG,CAAC,gBAAgB,EAAEsE,YAAY,CAAC;MAC3C1J,OAAO,CAACoF,GAAG,CAAC,kBAAkB,EAAEwE,GAAG,CAAC;MACpC5J,OAAO,CAACoF,GAAG,CAAC,mBAAmB,EAAEyE,OAAO,CAAC;MACzC7J,OAAO,CAACqF,QAAQ,CAAC,CAAC;;MAElB;MACA,IAAIxB,IAAI,CAACmG,IAAI,IAAI,CAACnG,IAAI,CAACC,iBAAiB,EAAE;QACtC,MAAMmG,UAAU,GAAG;UACf7G,EAAE,EAAE,GAAGS,IAAI,CAACT,EAAE,IAAI8G,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;UAC9B9G,IAAI,EAAEQ,IAAI,CAACmG,IAAI,CAAC3G,IAAI;UACpBC,aAAa,EAAEO,IAAI,CAACmG,IAAI,CAAC1G,aAAa,IAAI,CAAC,CAAC;UAC5CtB,QAAQ,EAAE;YACN,CAACgB,QAAQ,GAAG6G,OAAO;YACnB5H,OAAO,EAAE4H,OAAO;YAChBO,MAAM,EAAEP,OAAO;YACfQ,MAAM,EAAER;UACZ,CAAC;UACD1H,IAAI,EAAE0B,IAAI,CAACmG,IAAI,CAAC7H,IAAI,IAAI;YAAEC,KAAK,EAAE,GAAG;YAAEE,MAAM,EAAE;UAAG,CAAC;UAClDiB,MAAM,EAAEM,IAAI,CAACmG,IAAI,CAACzG,MAAM,IAAI,CAAC;QACjC,CAAC;QAED2E,YAAY,CAAC+B,UAAU,CAAC;QACxBhL,KAAK,CAACqL,OAAO,CAAC,kBAAkB,CAAC;MACrC;MACA;MAAA,KACK,IAAIzG,IAAI,CAACC,iBAAiB,IAAID,IAAI,CAACT,EAAE,EAAE;QACxCpD,OAAO,CAACoF,GAAG,CAAC,oBAAoB,EAAEmF,IAAI,CAACC,SAAS,CAAC3G,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;;QAEhE;QACA,MAAME,UAAU,GAAGF,IAAI,CAACE,UAAU,IAAI;UAAE7D,CAAC,EAAE,CAAC;UAAEC,CAAC,EAAE;QAAE,CAAC;QAEpDH,OAAO,CAACoF,GAAG,CAAC,cAAc,EAAErB,UAAU,CAAC;;QAEvC;QACA,MAAM0G,aAAa,GAAG;UAClBvK,CAAC,EAAEM,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEmJ,GAAG,CAAC1J,CAAC,GAAG6D,UAAU,CAAC7D,CAAC,CAAC;UACpCC,CAAC,EAAEK,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEmJ,GAAG,CAACzJ,CAAC,GAAG4D,UAAU,CAAC5D,CAAC;QACvC,CAAC;QAEDH,OAAO,CAACoF,GAAG,CAAC,6BAA6B,EAAEqF,aAAa,CAAC;;QAEzD;QACA,MAAMC,YAAY,GAAGhK,UAAU,CAAC+J,aAAa,CAACvK,CAAC,EAAEuK,aAAa,CAACtK,CAAC,EAAEiI,QAAQ,GAAGzH,QAAQ,GAAGE,QAAQ,EAAED,UAAU,CAAC;QAE7GZ,OAAO,CAACoF,GAAG,CAAC,yBAAyB,EAAEsF,YAAY,CAAC;QAEpD3H,gBAAgB,CAACc,IAAI,CAACT,EAAE,EAAE;UAAE,CAACJ,QAAQ,GAAG0H;QAAa,CAAC,EAAE,IAAI,CAAC;QAC7DzL,KAAK,CAACqL,OAAO,CAAC,uBAAuB,CAAC;MAC1C;MAEA3B,aAAa,CAAC,EAAE,CAAC;IACrB,CAAC;IACD3E,OAAO,EAAGC,OAAO,KAAM;MACnBqF,MAAM,EAAE,CAAC,CAACrF,OAAO,CAACqF,MAAM,CAAC;IAC7B,CAAC;EACL,CAAC,CAAC,CAAC;EAEH,MAAMqB,iBAAiB,GAAIxG,CAAC,IAAK;IAC7B;IACA,IAAIA,CAAC,CAACyG,MAAM,KAAK/K,SAAS,CAACE,OAAO,EAAE;MAChC+C,eAAe,CAAC,EAAE,CAAC;IACvB;EACJ,CAAC;EAED,MAAMwC,iBAAiB,GAAGA,CAAClC,EAAE,EAAEpB,QAAQ,KAAK;IACxC6G,cAAc,CAAC;MAAEzF,EAAE;MAAEpB;IAAS,CAAC,CAAC;EACpC,CAAC;EAED,MAAM6I,aAAa,GAAGlM,WAAW,CAAEwF,CAAC,IAAK;IACrC,IAAI,CAAC4D,WAAW,CAAC+C,MAAM,EAAE;IAEzB,MAAMC,aAAa,GAAG5G,CAAC,CAAC6G,QAAQ,GAAG,EAAE,GAAG,CAAC;IAEzC,QAAQ7G,CAAC,CAAC8G,GAAG;MACT,KAAK,SAAS;QACV9G,CAAC,CAACoB,cAAc,CAAC,CAAC;QAClBwC,WAAW,CAAC9G,OAAO,CAACmC,EAAE,IAAI;UACtB,MAAM/B,OAAO,GAAGyG,QAAQ,CAACkB,QAAQ,CAACkC,IAAI,CAAChC,EAAE,IAAIA,EAAE,CAAC9F,EAAE,KAAKA,EAAE,CAAC;UAC1D,IAAI/B,OAAO,EAAE;YACT,MAAM8J,UAAU,GAAG9J,OAAO,CAACW,QAAQ,CAACgB,QAAQ,CAAC,IAAI;cAAE9C,CAAC,EAAE,CAAC;cAAEC,CAAC,EAAE;YAAE,CAAC;YAC/D4C,gBAAgB,CAACK,EAAE,EAAE;cACjB,CAACJ,QAAQ,GAAG;gBACR9C,CAAC,EAAEiL,UAAU,CAACjL,CAAC;gBACfC,CAAC,EAAEK,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE0K,UAAU,CAAChL,CAAC,GAAG4K,aAAa;cAC/C;YACJ,CAAC,EAAE,IAAI,CAAC;UACZ;QACJ,CAAC,CAAC;QACF;MACJ,KAAK,WAAW;QACZ5G,CAAC,CAACoB,cAAc,CAAC,CAAC;QAClBwC,WAAW,CAAC9G,OAAO,CAACmC,EAAE,IAAI;UACtB,MAAM/B,OAAO,GAAGyG,QAAQ,CAACkB,QAAQ,CAACkC,IAAI,CAAChC,EAAE,IAAIA,EAAE,CAAC9F,EAAE,KAAKA,EAAE,CAAC;UAC1D,IAAI/B,OAAO,EAAE;YACT,MAAM8J,UAAU,GAAG9J,OAAO,CAACW,QAAQ,CAACgB,QAAQ,CAAC,IAAI;cAAE9C,CAAC,EAAE,CAAC;cAAEC,CAAC,EAAE;YAAE,CAAC;YAC/D4C,gBAAgB,CAACK,EAAE,EAAE;cACjB,CAACJ,QAAQ,GAAG;gBACR9C,CAAC,EAAEiL,UAAU,CAACjL,CAAC;gBACfC,CAAC,EAAEgL,UAAU,CAAChL,CAAC,GAAG4K;cACtB;YACJ,CAAC,EAAE,IAAI,CAAC;UACZ;QACJ,CAAC,CAAC;QACF;MACJ,KAAK,WAAW;QACZ5G,CAAC,CAACoB,cAAc,CAAC,CAAC;QAClBwC,WAAW,CAAC9G,OAAO,CAACmC,EAAE,IAAI;UACtB,MAAM/B,OAAO,GAAGyG,QAAQ,CAACkB,QAAQ,CAACkC,IAAI,CAAChC,EAAE,IAAIA,EAAE,CAAC9F,EAAE,KAAKA,EAAE,CAAC;UAC1D,IAAI/B,OAAO,EAAE;YACT,MAAM8J,UAAU,GAAG9J,OAAO,CAACW,QAAQ,CAACgB,QAAQ,CAAC,IAAI;cAAE9C,CAAC,EAAE,CAAC;cAAEC,CAAC,EAAE;YAAE,CAAC;YAC/D4C,gBAAgB,CAACK,EAAE,EAAE;cACjB,CAACJ,QAAQ,GAAG;gBACR9C,CAAC,EAAEM,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE0K,UAAU,CAACjL,CAAC,GAAG6K,aAAa,CAAC;gBAC5C5K,CAAC,EAAEgL,UAAU,CAAChL;cAClB;YACJ,CAAC,EAAE,IAAI,CAAC;UACZ;QACJ,CAAC,CAAC;QACF;MACJ,KAAK,YAAY;QACbgE,CAAC,CAACoB,cAAc,CAAC,CAAC;QAClBwC,WAAW,CAAC9G,OAAO,CAACmC,EAAE,IAAI;UACtB,MAAM/B,OAAO,GAAGyG,QAAQ,CAACkB,QAAQ,CAACkC,IAAI,CAAChC,EAAE,IAAIA,EAAE,CAAC9F,EAAE,KAAKA,EAAE,CAAC;UAC1D,IAAI/B,OAAO,EAAE;YACT,MAAM8J,UAAU,GAAG9J,OAAO,CAACW,QAAQ,CAACgB,QAAQ,CAAC,IAAI;cAAE9C,CAAC,EAAE,CAAC;cAAEC,CAAC,EAAE;YAAE,CAAC;YAC/D4C,gBAAgB,CAACK,EAAE,EAAE;cACjB,CAACJ,QAAQ,GAAG;gBACR9C,CAAC,EAAEiL,UAAU,CAACjL,CAAC,GAAG6K,aAAa;gBAC/B5K,CAAC,EAAEgL,UAAU,CAAChL;cAClB;YACJ,CAAC,EAAE,IAAI,CAAC;UACZ;QACJ,CAAC,CAAC;QACF;MACJ,KAAK,QAAQ;MACb,KAAK,WAAW;QACZgE,CAAC,CAACoB,cAAc,CAAC,CAAC;QAClBwC,WAAW,CAAC9G,OAAO,CAACmC,EAAE,IAAI6E,eAAe,CAAC7E,EAAE,CAAC,CAAC;QAC9C;MACJ,KAAK,QAAQ;QACTe,CAAC,CAACoB,cAAc,CAAC,CAAC;QAClBzC,eAAe,CAAC,EAAE,CAAC;QACnB+F,cAAc,CAAC,IAAI,CAAC;QACpB;IACR;EACJ,CAAC,EAAE,CAACd,WAAW,EAAEhF,gBAAgB,EAAEkF,eAAe,EAAEnF,eAAe,EAAEE,QAAQ,EAAE8E,QAAQ,CAACkB,QAAQ,CAAC,CAAC;;EAElG;EACAhK,UAAU,CAAC,QAAQ,EAAGmF,CAAC,IAAK;IACxBA,CAAC,CAACoB,cAAc,CAAC,CAAC;IAClBzC,eAAe,CAACgF,QAAQ,CAACkB,QAAQ,CAACC,GAAG,CAACC,EAAE,IAAIA,EAAE,CAAC9F,EAAE,CAAC,CAAC;EACvD,CAAC,EAAE,CAAC0E,QAAQ,CAACkB,QAAQ,EAAElG,eAAe,CAAC,CAAC;EAExC9D,UAAU,CAAC,QAAQ,EAAGmF,CAAC,IAAK;IACxBA,CAAC,CAACoB,cAAc,CAAC,CAAC;IAClB,IAAIwC,WAAW,CAAC+C,MAAM,GAAG,CAAC,EAAE;MACxB3C,eAAe,CAACJ,WAAW,CAAC;IAChC;EACJ,CAAC,EAAE,CAACA,WAAW,EAAEI,eAAe,CAAC,CAAC;EAElC,oBACI7I,OAAA;IACIsG,SAAS,EAAC,oBAAoB;IAC9BwF,SAAS,EAAEP,aAAc;IACzBQ,QAAQ,EAAE,CAAE;IACZxF,KAAK,EAAE;MAAEyF,OAAO,EAAE;IAAO,CAAE;IAAAnF,QAAA,eAE3B7G,OAAA;MACIoG,GAAG,EAAGC,IAAI,IAAK;QACX9F,SAAS,CAACE,OAAO,GAAG4F,IAAI;QACxB4D,IAAI,CAAC5D,IAAI,CAAC;MACd,CAAE;MACFC,SAAS,EAAE,cAAc5C,QAAQ,KAAK,QAAQ,GAAG,mBAAmB,GAAGA,QAAQ,KAAK,QAAQ,GAAG,mBAAmB,GAAG,EAAE,EAAG;MAC1H6C,KAAK,EAAE;QACH7D,QAAQ,EAAE,UAAU;QACpBI,KAAK,EAAE0G,YAAY,CAAC1G,KAAK;QACzBE,MAAM,EAAEwG,YAAY,CAACxG,MAAM;QAC3BiJ,SAAS,EAAE,OAAO;QAClBxE,UAAU,EAAE,CAAAe,QAAQ,aAARA,QAAQ,wBAAAS,iBAAA,GAART,QAAQ,CAAEiB,MAAM,cAAAR,iBAAA,uBAAhBA,iBAAA,CAAkBxB,UAAU,KAAI,SAAS;QACrDyE,SAAS,EAAE,SAAS1L,SAAS,GAAG,GAAG,GAAG;QACtC2L,eAAe,EAAE,UAAU;QAC3BzF,MAAM,EAAEsD,MAAM,GAAG,MAAM,GAAG;MAC9B,CAAE;MACFoC,OAAO,EAAEf,iBAAkB;MAAAxE,QAAA,gBAE3B7G,OAAA,CAACH,MAAM;QACHwM,WAAW,EAAE7C,YAAY,CAAC1G,KAAM;QAChCwJ,YAAY,EAAE9C,YAAY,CAACxG,MAAO;QAClCxC,SAAS,EAAEA;MAAU;QAAA2G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,eAEFtH,OAAA,CAACJ,UAAU;QACPwJ,UAAU,EAAEA,UAAW;QACvB5I,SAAS,EAAEA;MAAU;QAAA2G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,EAEDwB,QAAQ,iBACL9I,OAAA;QACIsG,SAAS,EAAC,iBAAiB;QAC3BC,KAAK,EAAE;UACH7D,QAAQ,EAAE,UAAU;UACpBzB,GAAG,EAAE,CAAC;UACND,IAAI,EAAE,CAAC;UACP4B,KAAK,EAAE,CAAC;UACRG,MAAM,EAAE,CAAC;UACTwJ,eAAe,EAAE;AACjD;AACA;AACA,iCAAiC;UACDC,cAAc,EAAE,GAAGnL,QAAQ,MAAMA,QAAQ,IAAI;UAC7CyG,aAAa,EAAE,MAAM;UACrBnB,OAAO,EAAE;QACb;MAAE;QAAAQ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACJ,EAEAkB,QAAQ,aAARA,QAAQ,wBAAAU,kBAAA,GAARV,QAAQ,CAAEkB,QAAQ,cAAAR,kBAAA,uBAAlBA,kBAAA,CAAoBS,GAAG,CAAE5H,OAAO,iBAC7B/B,OAAA,CAACmD,OAAO;QAEJpB,OAAO,EAAEA,OAAQ;QACjBwB,UAAU,EAAEkF,WAAW,CAACgE,QAAQ,CAAC1K,OAAO,CAAC+B,EAAE,CAAE;QAC7CN,eAAe,EAAEA,eAAgB;QACjCC,gBAAgB,EAAEA,gBAAiB;QACnCC,QAAQ,EAAEA,QAAS;QACnBlD,SAAS,EAAEA,SAAU;QACrBa,QAAQ,EAAEyH,QAAQ,GAAGzH,QAAQ,GAAGE,QAAS;QACzCoC,aAAa,EAAEqC,iBAAkB;QACjCzF,SAAS,EAAEA,SAAU;QACrBe,UAAU,EAAEA;MAAW,GAVlBS,OAAO,CAAC+B,EAAE;QAAAqD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAWlB,CACJ,CAAC,eAEFtH,OAAA,CAACF,gBAAgB;QACb4M,gBAAgB,EAAE,CAAAlE,QAAQ,aAARA,QAAQ,wBAAAW,mBAAA,GAARX,QAAQ,CAAEkB,QAAQ,cAAAP,mBAAA,uBAAlBA,mBAAA,CAAoBwD,MAAM,CAAC/C,EAAE,IAAInB,WAAW,CAACgE,QAAQ,CAAC7C,EAAE,CAAC9F,EAAE,CAAC,CAAC,KAAI,EAAG;QACtF8I,QAAQ,EAAElE,YAAa;QACvBlI,SAAS,EAAEA;MAAU;QAAA2G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,EAEDgC,WAAW,iBACRtJ,OAAA;QACIsG,SAAS,EAAC,kBAAkB;QAC5BC,KAAK,EAAE;UACH7D,QAAQ,EAAE,OAAO;UACjB1B,IAAI,EAAEsI,WAAW,CAAC5G,QAAQ,CAAC9B,CAAC;UAC5BK,GAAG,EAAEqI,WAAW,CAAC5G,QAAQ,CAAC7B,CAAC;UAC3B4G,UAAU,EAAE,OAAO;UACnBC,MAAM,EAAE,gBAAgB;UACxBF,YAAY,EAAE,KAAK;UACnBqF,SAAS,EAAE,4BAA4B;UACvCrG,MAAM,EAAE;QACZ,CAAE;QACF4F,OAAO,EAAEA,CAAA,KAAM7C,cAAc,CAAC,IAAI,CAAE;QAAA1C,QAAA,gBAEpC7G,OAAA;UACIsG,SAAS,EAAC,uBAAuB;UACjCC,KAAK,EAAE;YACHgB,OAAO,EAAE,UAAU;YACnBb,MAAM,EAAE,SAAS;YACjBoG,YAAY,EAAE;UAClB,CAAE;UACFV,OAAO,EAAEA,CAAA,KAAM;YACXzD,eAAe,CAACW,WAAW,CAACxF,EAAE,CAAC;YAC/ByF,cAAc,CAAC,IAAI,CAAC;UACxB,CAAE;UAAA1C,QAAA,EACL;QAED;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACNtH,OAAA;UACIsG,SAAS,EAAC,uBAAuB;UACjCC,KAAK,EAAE;YACHgB,OAAO,EAAE,UAAU;YACnBb,MAAM,EAAE;UACZ,CAAE;UACF0F,OAAO,EAAEA,CAAA,KAAM;YACXvD,eAAe,CAAC,CAACS,WAAW,CAACxF,EAAE,CAAC,CAAC;YACjCyF,cAAc,CAAC,IAAI,CAAC;UACxB,CAAE;UAAA1C,QAAA,EACL;QAED;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACR;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEd,CAAC;EAAA,QA/T8B9H,OAAO,EAsLlCE,UAAU,EAKVA,UAAU;AAAA,EAqIlB,CAAC;EAAA,QAhUkCF,OAAO,EAsLlCE,UAAU,EAKVA,UAAU;AAAA,EAqIjB;AAACqN,GAAA,GA/WI1E,MAAM;AAiXZ,eAAeA,MAAM;AAAC,IAAA/E,EAAA,EAAA8E,GAAA,EAAAG,GAAA,EAAAwE,GAAA;AAAAC,YAAA,CAAA1J,EAAA;AAAA0J,YAAA,CAAA5E,GAAA;AAAA4E,YAAA,CAAAzE,GAAA;AAAAyE,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}