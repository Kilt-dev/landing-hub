{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\pages\\\\AuthPage.js\",\n  _s = $RefreshSig$();\n// F:\\landinghub-iconic\\apps\\web\\src\\pages\\AuthPage.js\nimport React, { useState, useContext } from 'react';\nimport { UserContext } from '../context/UserContext';\nimport { useNavigate } from 'react-router-dom';\nimport { GoogleLogin } from '@react-oauth/google';\nimport jwtDecode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthPage = () => {\n  _s();\n  const {\n    setUser\n  } = useContext(UserContext);\n  const navigate = useNavigate();\n  const [error, setError] = useState(null);\n  const handleGoogleSuccess = credentialResponse => {\n    const decoded = jwtDecode(credentialResponse.credential);\n    const userData = {\n      role: decoded.role || 'user',\n      // Giả định role từ token, cần backend cung cấp\n      name: decoded.name,\n      userId: decoded.sub\n    };\n    localStorage.setItem('token', credentialResponse.credential); // Lưu token\n    setUser(userData); // Cập nhật context\n    // Reload trang để cập nhật role\n    window.location.href = '/dashboard'; // Điều hướng và reload\n  };\n  const handleGoogleFailure = error => {\n    console.error('Google Login Failed:', error);\n    setError('Đăng nhập thất bại. Vui lòng thử lại.');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u0110\\u0103ng Nh\\u1EADp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(GoogleLogin, {\n      onSuccess: handleGoogleSuccess,\n      onError: handleGoogleFailure\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthPage, \"SNtZomvI9OeWlp6gTKAr60RHCMM=\", false, function () {\n  return [useNavigate];\n});\n_c = AuthPage;\nexport default AuthPage;\nvar _c;\n$RefreshReg$(_c, \"AuthPage\");","map":{"version":3,"names":["React","useState","useContext","UserContext","useNavigate","GoogleLogin","jwtDecode","jsxDEV","_jsxDEV","AuthPage","_s","setUser","navigate","error","setError","handleGoogleSuccess","credentialResponse","decoded","credential","userData","role","name","userId","sub","localStorage","setItem","window","location","href","handleGoogleFailure","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","onSuccess","onError","_c","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/pages/AuthPage.js"],"sourcesContent":["// F:\\landinghub-iconic\\apps\\web\\src\\pages\\AuthPage.js\r\nimport React, { useState, useContext } from 'react';\r\nimport { UserContext } from '../context/UserContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { GoogleLogin } from '@react-oauth/google';\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nconst AuthPage = () => {\r\n    const { setUser } = useContext(UserContext);\r\n    const navigate = useNavigate();\r\n    const [error, setError] = useState(null);\r\n\r\n    const handleGoogleSuccess = (credentialResponse) => {\r\n        const decoded = jwtDecode(credentialResponse.credential);\r\n        const userData = {\r\n            role: decoded.role || 'user', // Giả định role từ token, cần backend cung cấp\r\n            name: decoded.name,\r\n            userId: decoded.sub,\r\n        };\r\n        localStorage.setItem('token', credentialResponse.credential); // Lưu token\r\n        setUser(userData); // Cập nhật context\r\n        // Reload trang để cập nhật role\r\n        window.location.href = '/dashboard'; // Điều hướng và reload\r\n    };\r\n\r\n    const handleGoogleFailure = (error) => {\r\n        console.error('Google Login Failed:', error);\r\n        setError('Đăng nhập thất bại. Vui lòng thử lại.');\r\n    };\r\n\r\n    return (\r\n        <div className=\"auth-container\">\r\n            <h1>Đăng Nhập</h1>\r\n            {error && <p style={{ color: 'red' }}>{error}</p>}\r\n            <GoogleLogin\r\n                onSuccess={handleGoogleSuccess}\r\n                onError={handleGoogleFailure}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AuthPage;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AACnD,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,WAAW,QAAQ,qBAAqB;AACjD,OAAOC,SAAS,MAAM,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnC,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnB,MAAM;IAAEC;EAAQ,CAAC,GAAGT,UAAU,CAACC,WAAW,CAAC;EAC3C,MAAMS,QAAQ,GAAGR,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMc,mBAAmB,GAAIC,kBAAkB,IAAK;IAChD,MAAMC,OAAO,GAAGX,SAAS,CAACU,kBAAkB,CAACE,UAAU,CAAC;IACxD,MAAMC,QAAQ,GAAG;MACbC,IAAI,EAAEH,OAAO,CAACG,IAAI,IAAI,MAAM;MAAE;MAC9BC,IAAI,EAAEJ,OAAO,CAACI,IAAI;MAClBC,MAAM,EAAEL,OAAO,CAACM;IACpB,CAAC;IACDC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAET,kBAAkB,CAACE,UAAU,CAAC,CAAC,CAAC;IAC9DP,OAAO,CAACQ,QAAQ,CAAC,CAAC,CAAC;IACnB;IACAO,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,YAAY,CAAC,CAAC;EACzC,CAAC;EAED,MAAMC,mBAAmB,GAAIhB,KAAK,IAAK;IACnCiB,OAAO,CAACjB,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CC,QAAQ,CAAC,uCAAuC,CAAC;EACrD,CAAC;EAED,oBACIN,OAAA;IAAKuB,SAAS,EAAC,gBAAgB;IAAAC,QAAA,gBAC3BxB,OAAA;MAAAwB,QAAA,EAAI;IAAS;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACjBvB,KAAK,iBAAIL,OAAA;MAAG6B,KAAK,EAAE;QAAEC,KAAK,EAAE;MAAM,CAAE;MAAAN,QAAA,EAAEnB;IAAK;MAAAoB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACjD5B,OAAA,CAACH,WAAW;MACRkC,SAAS,EAAExB,mBAAoB;MAC/ByB,OAAO,EAAEX;IAAoB;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACD,CAAC;AAEd,CAAC;AAAC1B,EAAA,CAjCID,QAAQ;EAAA,QAEOL,WAAW;AAAA;AAAAqC,EAAA,GAF1BhC,QAAQ;AAmCd,eAAeA,QAAQ;AAAC,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}