{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useRef } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { ItemTypes } from './ItemTypes';\nimport '../styles/Canvas.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChildElement = ({\n  parentId,\n  id,\n  type,\n  componentData = {},\n  position = {\n    desktop: {\n      x: 0,\n      y: 0\n    },\n    tablet: {\n      x: 0,\n      y: 0\n    },\n    mobile: {\n      x: 0,\n      y: 0\n    }\n  },\n  size = {\n    width: 100,\n    height: 50\n  },\n  styles = {},\n  isSelected,\n  onSelectChild,\n  viewMode\n}) => {\n  _s();\n  var _position$viewMode, _position$viewMode2;\n  const ref = useRef(null);\n  const [{\n    isDragging\n  }, drag] = useDrag({\n    type: ItemTypes.CHILD_ELEMENT,\n    item: {\n      id,\n      parentId,\n      type,\n      position\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n  const elementStyles = {\n    position: 'absolute',\n    left: (position === null || position === void 0 ? void 0 : (_position$viewMode = position[viewMode]) === null || _position$viewMode === void 0 ? void 0 : _position$viewMode.x) || 0,\n    top: (position === null || position === void 0 ? void 0 : (_position$viewMode2 = position[viewMode]) === null || _position$viewMode2 === void 0 ? void 0 : _position$viewMode2.y) || 0,\n    width: (size === null || size === void 0 ? void 0 : size.width) || 100,\n    height: (size === null || size === void 0 ? void 0 : size.height) || 50,\n    border: isSelected ? '2px solid #6366f1' : '1px solid #e2e8f0',\n    backgroundColor: styles['background-color'] || '#ffffff',\n    borderRadius: styles['border-radius'] || '8px',\n    boxShadow: styles['box-shadow'] || '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n    padding: styles.padding || '8px',\n    opacity: isDragging ? 0.5 : 1,\n    zIndex: isDragging ? 1000 : 1,\n    ...styles\n  };\n  const handleClick = e => {\n    e.stopPropagation();\n    onSelectChild(parentId, id);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drag,\n    style: elementStyles,\n    onClick: handleClick,\n    className: \"lpb-child-element\",\n    children: [type === 'heading' && /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: componentData.content || 'Tiêu đề'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 36\n    }, this), type === 'paragraph' && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: componentData.content || 'Đoạn văn'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 38\n    }, this), type === 'button' && /*#__PURE__*/_jsxDEV(\"button\", {\n      children: componentData.content || 'Nút'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 35\n    }, this), type === 'image' && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: componentData.src || '',\n      alt: \"\",\n      style: {\n        width: '100%',\n        height: '100%',\n        objectFit: 'cover'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }, this), type === 'form' && /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [componentData.title && /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: componentData.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 45\n      }, this), (componentData.fields || [componentData.placeholder || 'Input']).map((field, index) => /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: field,\n        style: {\n          padding: '8px',\n          borderRadius: '8px',\n          border: '1px solid #ccc',\n          marginBottom: '10px',\n          width: '100%',\n          boxSizing: 'border-box'\n        }\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 25\n      }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: {\n          background: '#2563eb',\n          color: '#fff',\n          padding: '8px 16px',\n          borderRadius: '8px',\n          border: 'none',\n          cursor: 'pointer'\n        },\n        children: componentData.buttonText || 'Submit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n_s(ChildElement, \"SAotHx5N7ORcDCKJxIYnUEpUB64=\", false, function () {\n  return [useDrag];\n});\n_c = ChildElement;\nconst Element = ({\n  id,\n  type,\n  componentData = {},\n  position = {\n    desktop: {\n      x: 0,\n      y: 0\n    },\n    tablet: {\n      x: 0,\n      y: 0\n    },\n    mobile: {\n      x: 0,\n      y: 0\n    }\n  },\n  size = {\n    width: 100,\n    height: 100\n  },\n  styles = {},\n  children = [],\n  onSelectElement,\n  onSelectChild,\n  selectedIds = [],\n  // Default to empty array to prevent undefined\n  selectedChildId,\n  onUpdatePosition,\n  onUpdateSize,\n  onAddChild,\n  onUpdateChildPosition,\n  onMoveChild,\n  viewMode\n}) => {\n  _s2();\n  var _position$viewMode3, _position$viewMode4;\n  const ref = useRef(null);\n  const [{\n    isDragging\n  }, drag] = useDrag({\n    type: ItemTypes.ELEMENT,\n    item: {\n      id,\n      type,\n      json: {\n        id,\n        type,\n        componentData,\n        position,\n        size,\n        styles,\n        children\n      }\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  });\n  const [{\n    canDrop,\n    isOver\n  }, drop] = useDrop({\n    accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT, ItemTypes.EXISTING_ELEMENT],\n    drop: (item, monitor) => {\n      const delta = monitor.getDifferenceFromInitialOffset();\n      const clientOffset = monitor.getClientOffset();\n      if (!delta || !clientOffset) return undefined;\n      const parentRect = ref.current.getBoundingClientRect();\n      const zoom = 1; // Adjust based on zoomLevel if needed\n      const snapped = {\n        x: Math.round((clientOffset.x - parentRect.left) / zoom / 10) * 10,\n        y: Math.round((clientOffset.y - parentRect.top) / zoom / 10) * 10\n      };\n      if (monitor.getItemType() === ItemTypes.ELEMENT) {\n        const newId = `${item.id}-${Date.now()}`;\n        const newChild = {\n          id: newId,\n          type: item.json.type,\n          componentData: item.json.componentData || {},\n          position: {\n            [viewMode]: snapped,\n            desktop: snapped,\n            tablet: snapped,\n            mobile: snapped\n          },\n          size: item.json.size || {\n            width: 200,\n            height: 50\n          },\n          styles: item.json.styles || {},\n          children: []\n        };\n        onAddChild(id, newChild);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        onUpdateChildPosition(item.parentId, item.id, snapped);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      } else if (monitor.getItemType() === ItemTypes.EXISTING_ELEMENT) {\n        onMoveChild(item.parentId, item.id, id, snapped);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      }\n      return undefined;\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  });\n  drag(drop(ref));\n  const isSelected = selectedIds.includes(id); // Safe because selectedIds defaults to []\n  const elementStyles = {\n    position: 'absolute',\n    left: (position === null || position === void 0 ? void 0 : (_position$viewMode3 = position[viewMode]) === null || _position$viewMode3 === void 0 ? void 0 : _position$viewMode3.x) || 0,\n    top: (position === null || position === void 0 ? void 0 : (_position$viewMode4 = position[viewMode]) === null || _position$viewMode4 === void 0 ? void 0 : _position$viewMode4.y) || 0,\n    width: (size === null || size === void 0 ? void 0 : size.width) || 100,\n    height: (size === null || size === void 0 ? void 0 : size.height) || 100,\n    border: isSelected ? '2px solid #6366f1' : '1px solid #e2e8f0',\n    backgroundColor: styles['background-color'] || '#ffffff',\n    borderRadius: styles['border-radius'] || '8px',\n    boxShadow: styles['box-shadow'] || '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n    opacity: isDragging ? 0.5 : 1,\n    zIndex: isDragging ? 1000 : 1,\n    ...styles\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    style: elementStyles,\n    onClick: e => {\n      e.stopPropagation();\n      onSelectElement(id, e.ctrlKey);\n    },\n    className: \"lpb-canvas-element\",\n    children: type === 'section' && (componentData === null || componentData === void 0 ? void 0 : componentData.structure) === 'ladi-standard' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ladi-section-background\",\n        style: {\n          backgroundColor: componentData.backgroundColor || 'transparent',\n          backgroundImage: componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ladi-overlay\",\n        style: {\n          backgroundColor: componentData.overlayColor || 'transparent',\n          opacity: componentData.overlayOpacity || 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ladi-container\",\n        style: {\n          padding: componentData.padding || '20px'\n        },\n        children: children.map(child => /*#__PURE__*/_jsxDEV(ChildElement, {\n          parentId: id,\n          ...child,\n          isSelected: selectedChildId === child.id,\n          onSelectChild: onSelectChild,\n          viewMode: viewMode\n        }, child.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : children.map(child => /*#__PURE__*/_jsxDEV(ChildElement, {\n      parentId: id,\n      ...child,\n      isSelected: selectedChildId === child.id,\n      onSelectChild: onSelectChild,\n      viewMode: viewMode\n    }, child.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 21\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 193,\n    columnNumber: 9\n  }, this);\n};\n_s2(Element, \"pE5F7DJvHFOGTxP5AzI5Tgt7yUc=\", false, function () {\n  return [useDrag, useDrop];\n});\n_c2 = Element;\nconst Canvas = ({\n  pageData,\n  selectedIds = [],\n  // Default to empty array\n  onSelectElement,\n  onUpdatePosition,\n  onUpdateSize,\n  onDeleteElement,\n  onAddElement,\n  onGroupElements,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  showGrid,\n  onEditElement,\n  onDuplicateElement,\n  onMoveElementUp,\n  onMoveElementDown,\n  onSelectChild,\n  selectedChildId,\n  onAddChild,\n  onUpdateChildPosition,\n  onMoveChild,\n  onUpdateChildren\n}) => {\n  _s3();\n  const ref = useRef(null);\n  const [{\n    isOver\n  }, drop] = useDrop({\n    accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT, ItemTypes.EXISTING_ELEMENT],\n    drop: (item, monitor) => {\n      const delta = monitor.getDifferenceFromInitialOffset();\n      const clientOffset = monitor.getClientOffset();\n      if (!delta || !clientOffset) return undefined;\n      const parentRect = ref.current.getBoundingClientRect();\n      const snapped = {\n        x: Math.round((clientOffset.x - parentRect.left) / (zoomLevel / 100) / gridSize) * gridSize,\n        y: Math.round((clientOffset.y - parentRect.top) / (zoomLevel / 100) / gridSize) * gridSize\n      };\n      if (monitor.getItemType() === ItemTypes.ELEMENT) {\n        const newElement = {\n          ...item.json,\n          id: `${item.id}-${Date.now()}`,\n          position: {\n            [viewMode]: snapped,\n            desktop: snapped,\n            tablet: snapped,\n            mobile: snapped\n          }\n        };\n        onAddElement(newElement);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        onMoveChild(item.parentId, item.id, null, snapped);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      } else if (monitor.getItemType() === ItemTypes.EXISTING_ELEMENT) {\n        onUpdatePosition(item.id, {\n          [viewMode]: snapped\n        });\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      }\n      return undefined;\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      canDrop: monitor.canDrop()\n    })\n  });\n  const canvasStyles = {\n    width: pageData.canvas.width,\n    minHeight: '100vh',\n    background: pageData.canvas.background || '#ffffff',\n    position: 'relative',\n    transform: `scale(${zoomLevel / 100})`,\n    transformOrigin: 'top left',\n    margin: '0 auto',\n    border: isOver ? '2px dashed #6366f1' : '1px solid #e2e8f0'\n  };\n  const gridStyles = showGrid ? {\n    backgroundImage: `linear-gradient(to right, #e2e8f0 ${gridSize}px, transparent ${gridSize}px), linear-gradient(to bottom, #e2e8f0 ${gridSize}px, transparent ${gridSize}px)`,\n    backgroundSize: `${gridSize}px ${gridSize}px`\n  } : {};\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lpb-canvas-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: drop,\n      style: {\n        ...canvasStyles,\n        ...gridStyles\n      },\n      className: \"lpb-canvas\",\n      children: pageData.elements.map(element => /*#__PURE__*/_jsxDEV(Element, {\n        ...element,\n        selectedIds: selectedIds,\n        onSelectElement: onSelectElement,\n        onSelectChild: onSelectChild,\n        selectedChildId: selectedChildId,\n        onUpdatePosition: onUpdatePosition,\n        onUpdateSize: onUpdateSize,\n        onAddChild: onAddChild,\n        onUpdateChildPosition: onUpdateChildPosition,\n        onMoveChild: onMoveChild,\n        viewMode: viewMode\n      }, element.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 337,\n    columnNumber: 9\n  }, this);\n};\n_s3(Canvas, \"NRX8QuXEpY71ljRn6x7WoTegO/w=\", false, function () {\n  return [useDrop];\n});\n_c3 = Canvas;\nexport default Canvas;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ChildElement\");\n$RefreshReg$(_c2, \"Element\");\n$RefreshReg$(_c3, \"Canvas\");","map":{"version":3,"names":["React","useRef","useDrag","useDrop","ItemTypes","jsxDEV","_jsxDEV","Fragment","_Fragment","ChildElement","parentId","id","type","componentData","position","desktop","x","y","tablet","mobile","size","width","height","styles","isSelected","onSelectChild","viewMode","_s","_position$viewMode","_position$viewMode2","ref","isDragging","drag","CHILD_ELEMENT","item","collect","monitor","elementStyles","left","top","border","backgroundColor","borderRadius","boxShadow","padding","opacity","zIndex","handleClick","e","stopPropagation","style","onClick","className","children","content","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","objectFit","title","fields","placeholder","map","field","index","marginBottom","boxSizing","background","color","cursor","buttonText","_c","Element","onSelectElement","selectedIds","selectedChildId","onUpdatePosition","onUpdateSize","onAddChild","onUpdateChildPosition","onMoveChild","_s2","_position$viewMode3","_position$viewMode4","ELEMENT","json","canDrop","isOver","drop","accept","EXISTING_ELEMENT","delta","getDifferenceFromInitialOffset","clientOffset","getClientOffset","undefined","parentRect","current","getBoundingClientRect","zoom","snapped","Math","round","getItemType","newId","Date","now","newChild","moved","newPosition","includes","ctrlKey","structure","backgroundImage","backgroundSize","backgroundPosition","overlayColor","overlayOpacity","child","_c2","Canvas","pageData","onDeleteElement","onAddElement","onGroupElements","zoomLevel","gridSize","showGrid","onEditElement","onDuplicateElement","onMoveElementUp","onMoveElementDown","onUpdateChildren","_s3","newElement","canvasStyles","canvas","minHeight","transform","transformOrigin","margin","gridStyles","elements","element","_c3","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef } from 'react';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\nimport { ItemTypes } from './ItemTypes';\r\nimport '../styles/Canvas.css';\r\n\r\nconst ChildElement = ({\r\n                          parentId,\r\n                          id,\r\n                          type,\r\n                          componentData = {},\r\n                          position = { desktop: { x: 0, y: 0 }, tablet: { x: 0, y: 0 }, mobile: { x: 0, y: 0 } },\r\n                          size = { width: 100, height: 50 },\r\n                          styles = {},\r\n                          isSelected,\r\n                          onSelectChild,\r\n                          viewMode,\r\n                      }) => {\r\n    const ref = useRef(null);\r\n\r\n    const [{ isDragging }, drag] = useDrag({\r\n        type: ItemTypes.CHILD_ELEMENT,\r\n        item: { id, parentId, type, position },\r\n        collect: (monitor) => ({\r\n            isDragging: monitor.isDragging(),\r\n        }),\r\n    });\r\n\r\n    const elementStyles = {\r\n        position: 'absolute',\r\n        left: position?.[viewMode]?.x || 0,\r\n        top: position?.[viewMode]?.y || 0,\r\n        width: size?.width || 100,\r\n        height: size?.height || 50,\r\n        border: isSelected ? '2px solid #6366f1' : '1px solid #e2e8f0',\r\n        backgroundColor: styles['background-color'] || '#ffffff',\r\n        borderRadius: styles['border-radius'] || '8px',\r\n        boxShadow: styles['box-shadow'] || '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n        padding: styles.padding || '8px',\r\n        opacity: isDragging ? 0.5 : 1,\r\n        zIndex: isDragging ? 1000 : 1,\r\n        ...styles,\r\n    };\r\n\r\n    const handleClick = (e) => {\r\n        e.stopPropagation();\r\n        onSelectChild(parentId, id);\r\n    };\r\n\r\n    return (\r\n        <div ref={drag} style={elementStyles} onClick={handleClick} className=\"lpb-child-element\">\r\n            {type === 'heading' && <h2>{componentData.content || 'Tiêu đề'}</h2>}\r\n            {type === 'paragraph' && <p>{componentData.content || 'Đoạn văn'}</p>}\r\n            {type === 'button' && <button>{componentData.content || 'Nút'}</button>}\r\n            {type === 'image' && (\r\n                <img\r\n                    src={componentData.src || ''}\r\n                    alt=\"\"\r\n                    style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                />\r\n            )}\r\n            {type === 'form' && (\r\n                <form>\r\n                    {componentData.title && <h3>{componentData.title}</h3>}\r\n                    {(componentData.fields || [componentData.placeholder || 'Input']).map((field, index) => (\r\n                        <input\r\n                            key={index}\r\n                            type=\"text\"\r\n                            placeholder={field}\r\n                            style={{\r\n                                padding: '8px',\r\n                                borderRadius: '8px',\r\n                                border: '1px solid #ccc',\r\n                                marginBottom: '10px',\r\n                                width: '100%',\r\n                                boxSizing: 'border-box',\r\n                            }}\r\n                        />\r\n                    ))}\r\n                    <button\r\n                        type=\"submit\"\r\n                        style={{\r\n                            background: '#2563eb',\r\n                            color: '#fff',\r\n                            padding: '8px 16px',\r\n                            borderRadius: '8px',\r\n                            border: 'none',\r\n                            cursor: 'pointer',\r\n                        }}\r\n                    >\r\n                        {componentData.buttonText || 'Submit'}\r\n                    </button>\r\n                </form>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Element = ({\r\n                     id,\r\n                     type,\r\n                     componentData = {},\r\n                     position = { desktop: { x: 0, y: 0 }, tablet: { x: 0, y: 0 }, mobile: { x: 0, y: 0 } },\r\n                     size = { width: 100, height: 100 },\r\n                     styles = {},\r\n                     children = [],\r\n                     onSelectElement,\r\n                     onSelectChild,\r\n                     selectedIds = [], // Default to empty array to prevent undefined\r\n                     selectedChildId,\r\n                     onUpdatePosition,\r\n                     onUpdateSize,\r\n                     onAddChild,\r\n                     onUpdateChildPosition,\r\n                     onMoveChild,\r\n                     viewMode,\r\n                 }) => {\r\n    const ref = useRef(null);\r\n\r\n    const [{ isDragging }, drag] = useDrag({\r\n        type: ItemTypes.ELEMENT,\r\n        item: { id, type, json: { id, type, componentData, position, size, styles, children } },\r\n        collect: (monitor) => ({\r\n            isDragging: monitor.isDragging(),\r\n        }),\r\n    });\r\n\r\n    const [{ canDrop, isOver }, drop] = useDrop({\r\n        accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT, ItemTypes.EXISTING_ELEMENT],\r\n        drop: (item, monitor) => {\r\n            const delta = monitor.getDifferenceFromInitialOffset();\r\n            const clientOffset = monitor.getClientOffset();\r\n            if (!delta || !clientOffset) return undefined;\r\n\r\n            const parentRect = ref.current.getBoundingClientRect();\r\n            const zoom = 1; // Adjust based on zoomLevel if needed\r\n            const snapped = {\r\n                x: Math.round((clientOffset.x - parentRect.left) / zoom / 10) * 10,\r\n                y: Math.round((clientOffset.y - parentRect.top) / zoom / 10) * 10,\r\n            };\r\n\r\n            if (monitor.getItemType() === ItemTypes.ELEMENT) {\r\n                const newId = `${item.id}-${Date.now()}`;\r\n                const newChild = {\r\n                    id: newId,\r\n                    type: item.json.type,\r\n                    componentData: item.json.componentData || {},\r\n                    position: {\r\n                        [viewMode]: snapped,\r\n                        desktop: snapped,\r\n                        tablet: snapped,\r\n                        mobile: snapped,\r\n                    },\r\n                    size: item.json.size || { width: 200, height: 50 },\r\n                    styles: item.json.styles || {},\r\n                    children: [],\r\n                };\r\n                onAddChild(id, newChild);\r\n                return { moved: true, newPosition: snapped };\r\n            } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                onUpdateChildPosition(item.parentId, item.id, snapped);\r\n                return { moved: true, newPosition: snapped };\r\n            } else if (monitor.getItemType() === ItemTypes.EXISTING_ELEMENT) {\r\n                onMoveChild(item.parentId, item.id, id, snapped);\r\n                return { moved: true, newPosition: snapped };\r\n            }\r\n            return undefined;\r\n        },\r\n        collect: (monitor) => ({\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop(),\r\n        }),\r\n    });\r\n\r\n    drag(drop(ref));\r\n\r\n    const isSelected = selectedIds.includes(id); // Safe because selectedIds defaults to []\r\n    const elementStyles = {\r\n        position: 'absolute',\r\n        left: position?.[viewMode]?.x || 0,\r\n        top: position?.[viewMode]?.y || 0,\r\n        width: size?.width || 100,\r\n        height: size?.height || 100,\r\n        border: isSelected ? '2px solid #6366f1' : '1px solid #e2e8f0',\r\n        backgroundColor: styles['background-color'] || '#ffffff',\r\n        borderRadius: styles['border-radius'] || '8px',\r\n        boxShadow: styles['box-shadow'] || '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n        opacity: isDragging ? 0.5 : 1,\r\n        zIndex: isDragging ? 1000 : 1,\r\n        ...styles,\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={ref}\r\n            style={elementStyles}\r\n            onClick={(e) => {\r\n                e.stopPropagation();\r\n                onSelectElement(id, e.ctrlKey);\r\n            }}\r\n            className=\"lpb-canvas-element\"\r\n        >\r\n            {type === 'section' && componentData?.structure === 'ladi-standard' ? (\r\n                <>\r\n                    <div\r\n                        className=\"ladi-section-background\"\r\n                        style={{\r\n                            backgroundColor: componentData.backgroundColor || 'transparent',\r\n                            backgroundImage: componentData.backgroundImage\r\n                                ? `url(${componentData.backgroundImage})`\r\n                                : 'none',\r\n                            backgroundSize: 'cover',\r\n                            backgroundPosition: 'center',\r\n                        }}\r\n                    />\r\n                    <div\r\n                        className=\"ladi-overlay\"\r\n                        style={{\r\n                            backgroundColor: componentData.overlayColor || 'transparent',\r\n                            opacity: componentData.overlayOpacity || 0,\r\n                        }}\r\n                    />\r\n                    <div className=\"ladi-container\" style={{ padding: componentData.padding || '20px' }}>\r\n                        {children.map((child) => (\r\n                            <ChildElement\r\n                                key={child.id}\r\n                                parentId={id}\r\n                                {...child}\r\n                                isSelected={selectedChildId === child.id}\r\n                                onSelectChild={onSelectChild}\r\n                                viewMode={viewMode}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                </>\r\n            ) : (\r\n                children.map((child) => (\r\n                    <ChildElement\r\n                        key={child.id}\r\n                        parentId={id}\r\n                        {...child}\r\n                        isSelected={selectedChildId === child.id}\r\n                        onSelectChild={onSelectChild}\r\n                        viewMode={viewMode}\r\n                    />\r\n                ))\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Canvas = ({\r\n                    pageData,\r\n                    selectedIds = [], // Default to empty array\r\n                    onSelectElement,\r\n                    onUpdatePosition,\r\n                    onUpdateSize,\r\n                    onDeleteElement,\r\n                    onAddElement,\r\n                    onGroupElements,\r\n                    viewMode,\r\n                    zoomLevel,\r\n                    gridSize,\r\n                    showGrid,\r\n                    onEditElement,\r\n                    onDuplicateElement,\r\n                    onMoveElementUp,\r\n                    onMoveElementDown,\r\n                    onSelectChild,\r\n                    selectedChildId,\r\n                    onAddChild,\r\n                    onUpdateChildPosition,\r\n                    onMoveChild,\r\n                    onUpdateChildren,\r\n                }) => {\r\n    const ref = useRef(null);\r\n\r\n    const [{ isOver }, drop] = useDrop({\r\n        accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT, ItemTypes.EXISTING_ELEMENT],\r\n        drop: (item, monitor) => {\r\n            const delta = monitor.getDifferenceFromInitialOffset();\r\n            const clientOffset = monitor.getClientOffset();\r\n            if (!delta || !clientOffset) return undefined;\r\n\r\n            const parentRect = ref.current.getBoundingClientRect();\r\n            const snapped = {\r\n                x: Math.round((clientOffset.x - parentRect.left) / (zoomLevel / 100) / gridSize) * gridSize,\r\n                y: Math.round((clientOffset.y - parentRect.top) / (zoomLevel / 100) / gridSize) * gridSize,\r\n            };\r\n\r\n            if (monitor.getItemType() === ItemTypes.ELEMENT) {\r\n                const newElement = {\r\n                    ...item.json,\r\n                    id: `${item.id}-${Date.now()}`,\r\n                    position: {\r\n                        [viewMode]: snapped,\r\n                        desktop: snapped,\r\n                        tablet: snapped,\r\n                        mobile: snapped,\r\n                    },\r\n                };\r\n                onAddElement(newElement);\r\n                return { moved: true, newPosition: snapped };\r\n            } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                onMoveChild(item.parentId, item.id, null, snapped);\r\n                return { moved: true, newPosition: snapped };\r\n            } else if (monitor.getItemType() === ItemTypes.EXISTING_ELEMENT) {\r\n                onUpdatePosition(item.id, { [viewMode]: snapped });\r\n                return { moved: true, newPosition: snapped };\r\n            }\r\n            return undefined;\r\n        },\r\n        collect: (monitor) => ({\r\n            isOver: monitor.isOver(),\r\n            canDrop: monitor.canDrop(),\r\n        }),\r\n    });\r\n\r\n    const canvasStyles = {\r\n        width: pageData.canvas.width,\r\n        minHeight: '100vh',\r\n        background: pageData.canvas.background || '#ffffff',\r\n        position: 'relative',\r\n        transform: `scale(${zoomLevel / 100})`,\r\n        transformOrigin: 'top left',\r\n        margin: '0 auto',\r\n        border: isOver ? '2px dashed #6366f1' : '1px solid #e2e8f0',\r\n    };\r\n\r\n    const gridStyles = showGrid\r\n        ? {\r\n            backgroundImage: `linear-gradient(to right, #e2e8f0 ${gridSize}px, transparent ${gridSize}px), linear-gradient(to bottom, #e2e8f0 ${gridSize}px, transparent ${gridSize}px)`,\r\n            backgroundSize: `${gridSize}px ${gridSize}px`,\r\n        }\r\n        : {};\r\n\r\n    return (\r\n        <div className=\"lpb-canvas-container\">\r\n            <div ref={drop} style={{ ...canvasStyles, ...gridStyles }} className=\"lpb-canvas\">\r\n                {pageData.elements.map((element) => (\r\n                    <Element\r\n                        key={element.id}\r\n                        {...element}\r\n                        selectedIds={selectedIds}\r\n                        onSelectElement={onSelectElement}\r\n                        onSelectChild={onSelectChild}\r\n                        selectedChildId={selectedChildId}\r\n                        onUpdatePosition={onUpdatePosition}\r\n                        onUpdateSize={onUpdateSize}\r\n                        onAddChild={onAddChild}\r\n                        onUpdateChildPosition={onUpdateChildPosition}\r\n                        onMoveChild={onMoveChild}\r\n                        viewMode={viewMode}\r\n                    />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}