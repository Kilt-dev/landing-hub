{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\Page.content.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { UserContext } from '../context/UserContext';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport CreateLanding from './CreateLanding'; // ‚úÖ IMPORT EDITOR\nimport PagesList from './PagesList'; // ‚úÖ IMPORT LIST\nimport DogLoader from '../components/Loader';\nimport '../styles/pages.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PageContent = () => {\n  _s();\n  const {\n    user\n  } = useContext(UserContext);\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const pageId = searchParams.get('id');\n  const [loading, setLoading] = useState(true);\n  const [pages, setPages] = useState([]);\n  const [error, setError] = useState('');\n\n  // ‚úÖ CHECK: C√≥ ID ‚Üí Render EDITOR, Kh√¥ng ‚Üí Render LIST\n  if (pageId) {\n    console.log('üÜî EDITOR MODE - Page ID:', pageId); // DEBUG\n    return /*#__PURE__*/_jsxDEV(CreateLanding, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 16\n    }, this); // ‚úÖ RENDER BUILDER\n  }\n\n  // LIST MODE\n  useEffect(() => {\n    const loadPages = async () => {\n      if (!(user !== null && user !== void 0 && user.role)) {\n        setLoading(false);\n        return;\n      }\n      try {\n        setLoading(true);\n        const token = localStorage.getItem('token');\n        const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/pages`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setPages(response.data || []);\n        setError('');\n      } catch (err) {\n        console.error('Error loading pages:', err);\n        setError('Kh√¥ng th·ªÉ t·∫£i danh s√°ch trang');\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadPages();\n  }, [user]);\n  if (loading) return /*#__PURE__*/_jsxDEV(DogLoader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pages-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pages-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uD83D\\uDCC4 Qu\\u1EA3n L\\xFD Landing Pages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"T\\u1EA1o, ch\\u1EC9nh s\\u1EEDa v\\xE0 tri\\u1EC3n khai landing page chuy\\xEAn nghi\\u1EC7p\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fas fa-exclamation-circle\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), error]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(PagesList, {\n      pages: pages,\n      onEdit: id => navigate(`/pages?id=${id}`) // ‚úÖ NAV ƒê√öNG\n      ,\n      onDelete: async id => {\n        if (window.confirm('X√≥a trang n√†y?')) {\n          try {\n            const token = localStorage.getItem('token');\n            await axios.delete(`${process.env.REACT_APP_API_URL}/api/pages/${id}`, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            setPages(pages.filter(p => p.id !== id));\n            toast.success('ƒê√£ x√≥a trang!');\n          } catch (err) {\n            toast.error('L·ªói x√≥a trang');\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pages-actions\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-primary\",\n        onClick: () => navigate('/templates'),\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-rocket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), \" Ch\\u1ECDn Template\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-secondary\",\n        onClick: () => navigate('/pages/create') // T·∫†O M·ªöI KH√îNG ID\n        ,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-plus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }, this), \" T\\u1EA1o Trang M\\u1EDBi\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(PageContent, \"h+i59L0Dyy0plQhLuSd9X50UcJs=\", false, function () {\n  return [useSearchParams, useNavigate];\n});\n_c = PageContent;\nexport default PageContent;\nvar _c;\n$RefreshReg$(_c, \"PageContent\");","map":{"version":3,"names":["React","useState","useEffect","useContext","UserContext","useSearchParams","useNavigate","axios","CreateLanding","PagesList","DogLoader","jsxDEV","_jsxDEV","PageContent","_s","user","searchParams","navigate","pageId","get","loading","setLoading","pages","setPages","error","setError","console","log","fileName","_jsxFileName","lineNumber","columnNumber","loadPages","role","token","localStorage","getItem","response","process","env","REACT_APP_API_URL","headers","Authorization","data","err","className","children","onEdit","id","onDelete","window","confirm","delete","filter","p","toast","success","onClick","_c","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/Page.content.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { UserContext } from '../context/UserContext';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport CreateLanding from './CreateLanding'; // ‚úÖ IMPORT EDITOR\r\nimport PagesList from './PagesList'; // ‚úÖ IMPORT LIST\r\nimport DogLoader from '../components/Loader';\r\nimport '../styles/pages.css';\r\n\r\nconst PageContent = () => {\r\n    const { user } = useContext(UserContext);\r\n    const [searchParams] = useSearchParams();\r\n    const navigate = useNavigate();\r\n    const pageId = searchParams.get('id');\r\n    const [loading, setLoading] = useState(true);\r\n    const [pages, setPages] = useState([]);\r\n    const [error, setError] = useState('');\r\n\r\n    // ‚úÖ CHECK: C√≥ ID ‚Üí Render EDITOR, Kh√¥ng ‚Üí Render LIST\r\n    if (pageId) {\r\n        console.log('üÜî EDITOR MODE - Page ID:', pageId); // DEBUG\r\n        return <CreateLanding />; // ‚úÖ RENDER BUILDER\r\n    }\r\n\r\n    // LIST MODE\r\n    useEffect(() => {\r\n        const loadPages = async () => {\r\n            if (!user?.role) {\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            try {\r\n                setLoading(true);\r\n                const token = localStorage.getItem('token');\r\n                const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/pages`, {\r\n                    headers: { Authorization: `Bearer ${token}` }\r\n                });\r\n                setPages(response.data || []);\r\n                setError('');\r\n            } catch (err) {\r\n                console.error('Error loading pages:', err);\r\n                setError('Kh√¥ng th·ªÉ t·∫£i danh s√°ch trang');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadPages();\r\n    }, [user]);\r\n\r\n    if (loading) return <DogLoader />;\r\n\r\n    return (\r\n        <div className=\"pages-container\">\r\n            <div className=\"pages-header\">\r\n                <h1>üìÑ Qu·∫£n L√Ω Landing Pages</h1>\r\n                <p>T·∫°o, ch·ªânh s·ª≠a v√† tri·ªÉn khai landing page chuy√™n nghi·ªáp</p>\r\n            </div>\r\n\r\n            {error && (\r\n                <div className=\"error-message\">\r\n                    <i className=\"fas fa-exclamation-circle\"></i>\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            <PagesList\r\n                pages={pages}\r\n                onEdit={(id) => navigate(`/pages?id=${id}`)} // ‚úÖ NAV ƒê√öNG\r\n                onDelete={async (id) => {\r\n                    if (window.confirm('X√≥a trang n√†y?')) {\r\n                        try {\r\n                            const token = localStorage.getItem('token');\r\n                            await axios.delete(`${process.env.REACT_APP_API_URL}/api/pages/${id}`, {\r\n                                headers: { Authorization: `Bearer ${token}` }\r\n                            });\r\n                            setPages(pages.filter(p => p.id !== id));\r\n                            toast.success('ƒê√£ x√≥a trang!');\r\n                        } catch (err) {\r\n                            toast.error('L·ªói x√≥a trang');\r\n                        }\r\n                    }\r\n                }}\r\n            />\r\n\r\n            <div className=\"pages-actions\">\r\n                <button\r\n                    className=\"btn-primary\"\r\n                    onClick={() => navigate('/templates')}\r\n                >\r\n                    <i className=\"fas fa-rocket\"></i> Ch·ªçn Template\r\n                </button>\r\n                <button\r\n                    className=\"btn-secondary\"\r\n                    onClick={() => navigate('/pages/create')} // T·∫†O M·ªöI KH√îNG ID\r\n                >\r\n                    <i className=\"fas fa-plus\"></i> T·∫°o Trang M·ªõi\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PageContent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}