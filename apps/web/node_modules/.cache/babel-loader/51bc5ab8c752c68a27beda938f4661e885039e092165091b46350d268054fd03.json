{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\CreateLanding.js\",\n  _s = $RefreshSig$();\nimport React, { useReducer, useCallback, useRef, useEffect } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Toolbar from './create-page/Toolbar';\nimport ComponentLibrary from './create-page/ComponentLibrary';\nimport Canvas from './create-page/Canvas';\nimport PropertiesPanel from './create-page/PropertiesPanel';\nimport '../styles/CreateLanding.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  pageData: {\n    canvas: {\n      width: 1200,\n      height: 'auto',\n      background: '#ffffff'\n    },\n    elements: []\n  },\n  selectedIds: [],\n  history: [],\n  historyIndex: -1,\n  viewMode: 'desktop',\n  zoomLevel: 100,\n  gridSize: 8,\n  showGrid: true,\n  leftSidebarCollapsed: false,\n  rightSidebarCollapsed: false\n};\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_ELEMENT':\n      const newElement = {\n        ...action.payload,\n        id: `${action.payload.id}-${Date.now()}`,\n        position: {\n          desktop: action.payload.position.desktop,\n          tablet: action.payload.position.tablet,\n          mobile: action.payload.position.mobile\n        }\n      };\n      const newPageDataAdd = {\n        ...state.pageData,\n        elements: [...state.pageData.elements, newElement]\n      };\n      return {\n        ...state,\n        pageData: newPageDataAdd,\n        history: [...state.history.slice(0, state.historyIndex + 1), newPageDataAdd],\n        historyIndex: state.historyIndex + 1,\n        selectedIds: [newElement.id]\n      };\n    case 'UPDATE_POSITION':\n      console.group('Reducer UPDATE_POSITION');\n      console.log('IDs:', action.payload.ids);\n      console.log('Position data:', action.payload.position);\n      console.log('Mode:', action.payload.mode);\n      console.log('Current viewMode:', state.viewMode);\n      const newPageDataPos = {\n        ...state.pageData,\n        elements: state.pageData.elements.map(el => {\n          var _action$payload$posit, _action$payload$posit2;\n          if (action.payload.ids.includes(el.id)) {\n            const currentPos = el.position[state.viewMode] || {\n              x: 0,\n              y: 0\n            };\n            let newPosition;\n\n            // Xử lý theo mode\n            switch (action.payload.mode) {\n              case 'absolute':\n                // Absolute mode - ghi đè trực tiếp\n                newPosition = {\n                  ...el.position,\n                  ...action.payload.position\n                };\n                console.log(`Element ${el.id} - Absolute mode:`, newPosition);\n                break;\n              case 'replace':\n                // Replace mode - thay thế toàn bộ position object\n                newPosition = action.payload.position;\n                console.log(`Element ${el.id} - Replace mode:`, newPosition);\n                break;\n              default:\n                // Delta mode - cộng dồn (cho keyboard navigation)\n                newPosition = {\n                  ...el.position,\n                  [state.viewMode]: {\n                    x: currentPos.x + (((_action$payload$posit = action.payload.position[state.viewMode]) === null || _action$payload$posit === void 0 ? void 0 : _action$payload$posit.x) || 0),\n                    y: currentPos.y + (((_action$payload$posit2 = action.payload.position[state.viewMode]) === null || _action$payload$posit2 === void 0 ? void 0 : _action$payload$posit2.y) || 0)\n                  }\n                };\n                console.log(`Element ${el.id} - Delta mode:`, newPosition);\n                break;\n            }\n            return {\n              ...el,\n              position: newPosition\n            };\n          }\n          return el;\n        })\n      };\n      console.log('Updated pageData elements:', newPageDataPos.elements.map(el => ({\n        id: el.id,\n        position: el.position\n      })));\n      console.groupEnd();\n      return {\n        ...state,\n        pageData: newPageDataPos,\n        history: [...state.history.slice(0, state.historyIndex + 1), newPageDataPos],\n        historyIndex: state.historyIndex + 1\n      };\n    case 'UPDATE_SIZE':\n      const newPageDataSize = {\n        ...state.pageData,\n        elements: state.pageData.elements.map(el => el.id === action.payload.id ? {\n          ...el,\n          size: action.payload.size\n        } : el)\n      };\n      return {\n        ...state,\n        pageData: newPageDataSize,\n        history: [...state.history.slice(0, state.historyIndex + 1), newPageDataSize],\n        historyIndex: state.historyIndex + 1\n      };\n    case 'DELETE_ELEMENT':\n      const newPageDataDel = {\n        ...state.pageData,\n        elements: state.pageData.elements.filter(el => !action.payload.includes(el.id))\n      };\n      return {\n        ...state,\n        pageData: newPageDataDel,\n        history: [...state.history.slice(0, state.historyIndex + 1), newPageDataDel],\n        historyIndex: state.historyIndex + 1,\n        selectedIds: state.selectedIds.filter(id => !action.payload.includes(id))\n      };\n    case 'SELECT_ELEMENT':\n      return {\n        ...state,\n        selectedIds: action.payload\n      };\n    case 'GROUP_ELEMENTS':\n      const groupId = `group-${Date.now()}`;\n      const newPageDataGroup = {\n        ...state.pageData,\n        elements: [...state.pageData.elements.filter(el => !action.payload.includes(el.id)), {\n          id: groupId,\n          type: 'group',\n          position: {\n            desktop: {\n              x: 0,\n              y: 0\n            },\n            tablet: {\n              x: 0,\n              y: 0\n            },\n            mobile: {\n              x: 0,\n              y: 0\n            }\n          },\n          size: {\n            width: 300,\n            height: 200\n          },\n          children: action.payload\n        }]\n      };\n      return {\n        ...state,\n        pageData: newPageDataGroup,\n        history: [...state.history.slice(0, state.historyIndex + 1), newPageDataGroup],\n        historyIndex: state.historyIndex + 1,\n        selectedIds: [groupId]\n      };\n    case 'UNDO':\n      if (state.historyIndex <= 0) return state;\n      return {\n        ...state,\n        pageData: state.history[state.historyIndex - 1],\n        historyIndex: state.historyIndex - 1\n      };\n    case 'REDO':\n      if (state.historyIndex >= state.history.length - 1) return state;\n      return {\n        ...state,\n        pageData: state.history[state.historyIndex + 1],\n        historyIndex: state.historyIndex + 1\n      };\n    case 'SET_VIEW_MODE':\n      return {\n        ...state,\n        viewMode: action.payload\n      };\n    case 'SET_ZOOM':\n      return {\n        ...state,\n        zoomLevel: action.payload\n      };\n    case 'TOGGLE_GRID':\n      return {\n        ...state,\n        showGrid: !state.showGrid\n      };\n    case 'SET_GRID_SIZE':\n      return {\n        ...state,\n        gridSize: action.payload\n      };\n    case 'TOGGLE_SIDEBAR':\n      return {\n        ...state,\n        [action.payload.side === 'left' ? 'leftSidebarCollapsed' : 'rightSidebarCollapsed']: !state[action.payload.side === 'left' ? 'leftSidebarCollapsed' : 'rightSidebarCollapsed']\n      };\n    default:\n      return state;\n  }\n};\nconst CreateLandingPage = () => {\n  _s();\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const {\n    pageData,\n    selectedIds,\n    history,\n    historyIndex,\n    viewMode,\n    zoomLevel,\n    gridSize,\n    showGrid,\n    leftSidebarCollapsed,\n    rightSidebarCollapsed\n  } = state;\n  const fileInputRef = useRef(null);\n  const addElement = useCallback(element => {\n    dispatch({\n      type: 'ADD_ELEMENT',\n      payload: element\n    });\n    toast.success('Đã thêm phần tử!');\n  }, []);\n\n  // Updated updatePosition function để support mode parameter\n  const updatePosition = useCallback((ids, position, mode = 'delta') => {\n    console.group('Parent updatePosition called');\n    console.log('IDs:', ids);\n    console.log('Position:', position);\n    console.log('Mode:', mode);\n    console.groupEnd();\n\n    // Đảm bảo ids luôn là array\n    const idsArray = Array.isArray(ids) ? ids : [ids];\n    dispatch({\n      type: 'UPDATE_POSITION',\n      payload: {\n        ids: idsArray,\n        position,\n        mode\n      }\n    });\n\n    // Chỉ hiện toast nếu không phải absolute mode (để tránh spam khi drag)\n    if (mode !== 'absolute') {\n      toast.success('Đã cập nhật vị trí!');\n    }\n  }, []);\n  const updateSize = useCallback((id, size) => {\n    dispatch({\n      type: 'UPDATE_SIZE',\n      payload: {\n        id,\n        size\n      }\n    });\n    toast.success('Đã cập nhật kích thước!');\n  }, []);\n  const deleteElement = useCallback(ids => {\n    dispatch({\n      type: 'DELETE_ELEMENT',\n      payload: ids\n    });\n    toast.success('Đã xóa phần tử!');\n  }, []);\n  const selectElement = useCallback(ids => {\n    dispatch({\n      type: 'SELECT_ELEMENT',\n      payload: ids\n    });\n  }, []);\n  const groupElements = useCallback(ids => {\n    dispatch({\n      type: 'GROUP_ELEMENTS',\n      payload: ids\n    });\n    toast.success('Đã nhóm phần tử!');\n  }, []);\n  const undo = useCallback(() => {\n    dispatch({\n      type: 'UNDO'\n    });\n    toast.info('Đã hoàn tác!');\n  }, []);\n  const redo = useCallback(() => {\n    dispatch({\n      type: 'REDO'\n    });\n    toast.info('Đã khôi phục!');\n  }, []);\n  const handleZoom = useCallback(direction => {\n    dispatch({\n      type: 'SET_ZOOM',\n      payload: direction === 'in' ? Math.min(200, zoomLevel + 10) : Math.max(50, zoomLevel - 10)\n    });\n  }, [zoomLevel]);\n  const handleSave = useCallback(() => {\n    localStorage.setItem('landing-page-builder', JSON.stringify({\n      pageData,\n      viewMode,\n      zoomLevel\n    }));\n    toast.success('Đã lưu trang!');\n  }, [pageData, viewMode, zoomLevel]);\n  useEffect(() => {\n    const autoSave = setTimeout(() => {\n      if (pageData.elements.length > 0) {\n        localStorage.setItem('landing-page-builder-autosave', JSON.stringify({\n          pageData,\n          viewMode,\n          zoomLevel\n        }));\n        toast.info('Đã tự động lưu!');\n      }\n    }, 30000);\n    return () => clearTimeout(autoSave);\n  }, [pageData, viewMode, zoomLevel]);\n  useHotkeys('ctrl+s', handleSave, [handleSave]);\n  useHotkeys('ctrl+z', undo, [undo]);\n  useHotkeys('ctrl+shift+z', redo, [redo]);\n  useHotkeys('ctrl+d', () => {\n    selectedIds.forEach(id => {\n      const element = pageData.elements.find(el => el.id === id);\n      if (element) {\n        addElement({\n          ...element,\n          id: `${element.id}-copy-${Date.now()}`,\n          position: {\n            desktop: {\n              x: element.position.desktop.x + 20,\n              y: element.position.desktop.y + 20\n            },\n            tablet: {\n              x: element.position.tablet.x + 20,\n              y: element.position.tablet.y + 20\n            },\n            mobile: {\n              x: element.position.mobile.x + 20,\n              y: element.position.mobile.y + 20\n            }\n          }\n        });\n      }\n    });\n  }, [selectedIds, pageData.elements, addElement]);\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\",\n        crossOrigin: \"anonymous\",\n        referrerPolicy: \"no-referrer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {\n        position: \"top-right\",\n        autoClose: 3000,\n        hideProgressBar: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Toolbar, {\n        onSave: handleSave,\n        onUndo: undo,\n        onRedo: redo,\n        canUndo: historyIndex > 0,\n        canRedo: historyIndex < history.length - 1,\n        viewMode: viewMode,\n        onViewModeChange: mode => dispatch({\n          type: 'SET_VIEW_MODE',\n          payload: mode\n        }),\n        onZoom: handleZoom,\n        onToggleGrid: () => dispatch({\n          type: 'TOGGLE_GRID'\n        }),\n        showGrid: showGrid,\n        gridSize: gridSize,\n        onSetGridSize: size => dispatch({\n          type: 'SET_GRID_SIZE',\n          payload: size\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-main-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: `lpb-sidebar-left ${leftSidebarCollapsed ? 'lpb-sidebar-collapsed' : ''}`,\n          children: /*#__PURE__*/_jsxDEV(ComponentLibrary, {\n            isCollapsed: leftSidebarCollapsed,\n            onToggle: () => dispatch({\n              type: 'TOGGLE_SIDEBAR',\n              payload: {\n                side: 'left'\n              }\n            }),\n            onAddElement: addElement\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-canvas-container\",\n          children: /*#__PURE__*/_jsxDEV(Canvas, {\n            pageData: pageData,\n            selectedIds: selectedIds,\n            onSelectElement: selectElement,\n            onUpdatePosition: updatePosition,\n            onUpdateSize: updateSize,\n            onDeleteElement: deleteElement,\n            onAddElement: addElement,\n            onGroupElements: groupElements,\n            viewMode: viewMode,\n            zoomLevel: zoomLevel,\n            gridSize: gridSize,\n            showGrid: showGrid\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `lpb-sidebar-right ${rightSidebarCollapsed ? 'lpb-sidebar-collapsed' : ''}`,\n          children: /*#__PURE__*/_jsxDEV(PropertiesPanel, {\n            selectedElements: pageData.elements.filter(el => selectedIds.includes(el.id)),\n            onUpdateElement: (id, updates) => dispatch({\n              type: 'UPDATE_SIZE',\n              payload: {\n                id,\n                size: updates.size\n              }\n            }),\n            isCollapsed: rightSidebarCollapsed,\n            onToggle: () => dispatch({\n              type: 'TOGGLE_SIDEBAR',\n              payload: {\n                side: 'right'\n              }\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 300,\n    columnNumber: 9\n  }, this);\n};\n_s(CreateLandingPage, \"XJfnHOuHVOJFyr310YDekiUuJws=\", false, function () {\n  return [useHotkeys, useHotkeys, useHotkeys, useHotkeys];\n});\n_c = CreateLandingPage;\nexport default CreateLandingPage;\nvar _c;\n$RefreshReg$(_c, \"CreateLandingPage\");","map":{"version":3,"names":["React","useReducer","useCallback","useRef","useEffect","DndProvider","HTML5Backend","useHotkeys","ToastContainer","toast","Toolbar","ComponentLibrary","Canvas","PropertiesPanel","jsxDEV","_jsxDEV","initialState","pageData","canvas","width","height","background","elements","selectedIds","history","historyIndex","viewMode","zoomLevel","gridSize","showGrid","leftSidebarCollapsed","rightSidebarCollapsed","reducer","state","action","type","newElement","payload","id","Date","now","position","desktop","tablet","mobile","newPageDataAdd","slice","console","group","log","ids","mode","newPageDataPos","map","el","_action$payload$posit","_action$payload$posit2","includes","currentPos","x","y","newPosition","groupEnd","newPageDataSize","size","newPageDataDel","filter","groupId","newPageDataGroup","children","length","side","CreateLandingPage","_s","dispatch","fileInputRef","addElement","element","success","updatePosition","idsArray","Array","isArray","updateSize","deleteElement","selectElement","groupElements","undo","info","redo","handleZoom","direction","Math","min","max","handleSave","localStorage","setItem","JSON","stringify","autoSave","setTimeout","clearTimeout","forEach","find","backend","className","rel","href","crossOrigin","referrerPolicy","fileName","_jsxFileName","lineNumber","columnNumber","autoClose","hideProgressBar","onSave","onUndo","onRedo","canUndo","canRedo","onViewModeChange","onZoom","onToggleGrid","onSetGridSize","isCollapsed","onToggle","onAddElement","onSelectElement","onUpdatePosition","onUpdateSize","onDeleteElement","onGroupElements","selectedElements","onUpdateElement","updates","_c","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/CreateLanding.js"],"sourcesContent":["import React, { useReducer, useCallback, useRef, useEffect } from 'react';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Toolbar from './create-page/Toolbar';\r\nimport ComponentLibrary from './create-page/ComponentLibrary';\r\nimport Canvas from './create-page/Canvas';\r\nimport PropertiesPanel from './create-page/PropertiesPanel';\r\nimport '../styles/CreateLanding.css';\r\n\r\nconst initialState = {\r\n    pageData: {\r\n        canvas: { width: 1200, height: 'auto', background: '#ffffff' },\r\n        elements: [],\r\n    },\r\n    selectedIds: [],\r\n    history: [],\r\n    historyIndex: -1,\r\n    viewMode: 'desktop',\r\n    zoomLevel: 100,\r\n    gridSize: 8,\r\n    showGrid: true,\r\n    leftSidebarCollapsed: false,\r\n    rightSidebarCollapsed: false,\r\n};\r\n\r\nconst reducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'ADD_ELEMENT':\r\n            const newElement = {\r\n                ...action.payload,\r\n                id: `${action.payload.id}-${Date.now()}`,\r\n                position: {\r\n                    desktop: action.payload.position.desktop,\r\n                    tablet: action.payload.position.tablet,\r\n                    mobile: action.payload.position.mobile,\r\n                },\r\n            };\r\n            const newPageDataAdd = {\r\n                ...state.pageData,\r\n                elements: [...state.pageData.elements, newElement],\r\n            };\r\n            return {\r\n                ...state,\r\n                pageData: newPageDataAdd,\r\n                history: [...state.history.slice(0, state.historyIndex + 1), newPageDataAdd],\r\n                historyIndex: state.historyIndex + 1,\r\n                selectedIds: [newElement.id],\r\n            };\r\n\r\n        case 'UPDATE_POSITION':\r\n            console.group('Reducer UPDATE_POSITION');\r\n            console.log('IDs:', action.payload.ids);\r\n            console.log('Position data:', action.payload.position);\r\n            console.log('Mode:', action.payload.mode);\r\n            console.log('Current viewMode:', state.viewMode);\r\n\r\n            const newPageDataPos = {\r\n                ...state.pageData,\r\n                elements: state.pageData.elements.map((el) => {\r\n                    if (action.payload.ids.includes(el.id)) {\r\n                        const currentPos = el.position[state.viewMode] || { x: 0, y: 0 };\r\n                        let newPosition;\r\n\r\n                        // Xử lý theo mode\r\n                        switch (action.payload.mode) {\r\n                            case 'absolute':\r\n                                // Absolute mode - ghi đè trực tiếp\r\n                                newPosition = {\r\n                                    ...el.position,\r\n                                    ...action.payload.position\r\n                                };\r\n                                console.log(`Element ${el.id} - Absolute mode:`, newPosition);\r\n                                break;\r\n\r\n                            case 'replace':\r\n                                // Replace mode - thay thế toàn bộ position object\r\n                                newPosition = action.payload.position;\r\n                                console.log(`Element ${el.id} - Replace mode:`, newPosition);\r\n                                break;\r\n\r\n                            default:\r\n                                // Delta mode - cộng dồn (cho keyboard navigation)\r\n                                newPosition = {\r\n                                    ...el.position,\r\n                                    [state.viewMode]: {\r\n                                        x: currentPos.x + (action.payload.position[state.viewMode]?.x || 0),\r\n                                        y: currentPos.y + (action.payload.position[state.viewMode]?.y || 0),\r\n                                    }\r\n                                };\r\n                                console.log(`Element ${el.id} - Delta mode:`, newPosition);\r\n                                break;\r\n                        }\r\n\r\n                        return { ...el, position: newPosition };\r\n                    }\r\n                    return el;\r\n                })\r\n            };\r\n\r\n            console.log('Updated pageData elements:', newPageDataPos.elements.map(el => ({ id: el.id, position: el.position })));\r\n            console.groupEnd();\r\n\r\n            return {\r\n                ...state,\r\n                pageData: newPageDataPos,\r\n                history: [...state.history.slice(0, state.historyIndex + 1), newPageDataPos],\r\n                historyIndex: state.historyIndex + 1,\r\n            };\r\n\r\n        case 'UPDATE_SIZE':\r\n            const newPageDataSize = {\r\n                ...state.pageData,\r\n                elements: state.pageData.elements.map((el) =>\r\n                    el.id === action.payload.id ? { ...el, size: action.payload.size } : el\r\n                ),\r\n            };\r\n            return {\r\n                ...state,\r\n                pageData: newPageDataSize,\r\n                history: [...state.history.slice(0, state.historyIndex + 1), newPageDataSize],\r\n                historyIndex: state.historyIndex + 1,\r\n            };\r\n        case 'DELETE_ELEMENT':\r\n            const newPageDataDel = {\r\n                ...state.pageData,\r\n                elements: state.pageData.elements.filter((el) => !action.payload.includes(el.id)),\r\n            };\r\n            return {\r\n                ...state,\r\n                pageData: newPageDataDel,\r\n                history: [...state.history.slice(0, state.historyIndex + 1), newPageDataDel],\r\n                historyIndex: state.historyIndex + 1,\r\n                selectedIds: state.selectedIds.filter((id) => !action.payload.includes(id)),\r\n            };\r\n        case 'SELECT_ELEMENT':\r\n            return { ...state, selectedIds: action.payload };\r\n        case 'GROUP_ELEMENTS':\r\n            const groupId = `group-${Date.now()}`;\r\n            const newPageDataGroup = {\r\n                ...state.pageData,\r\n                elements: [\r\n                    ...state.pageData.elements.filter((el) => !action.payload.includes(el.id)),\r\n                    {\r\n                        id: groupId,\r\n                        type: 'group',\r\n                        position: {\r\n                            desktop: { x: 0, y: 0 },\r\n                            tablet: { x: 0, y: 0 },\r\n                            mobile: { x: 0, y: 0 },\r\n                        },\r\n                        size: { width: 300, height: 200 },\r\n                        children: action.payload,\r\n                    },\r\n                ],\r\n            };\r\n            return {\r\n                ...state,\r\n                pageData: newPageDataGroup,\r\n                history: [...state.history.slice(0, state.historyIndex + 1), newPageDataGroup],\r\n                historyIndex: state.historyIndex + 1,\r\n                selectedIds: [groupId],\r\n            };\r\n        case 'UNDO':\r\n            if (state.historyIndex <= 0) return state;\r\n            return {\r\n                ...state,\r\n                pageData: state.history[state.historyIndex - 1],\r\n                historyIndex: state.historyIndex - 1,\r\n            };\r\n        case 'REDO':\r\n            if (state.historyIndex >= state.history.length - 1) return state;\r\n            return {\r\n                ...state,\r\n                pageData: state.history[state.historyIndex + 1],\r\n                historyIndex: state.historyIndex + 1,\r\n            };\r\n        case 'SET_VIEW_MODE':\r\n            return { ...state, viewMode: action.payload };\r\n        case 'SET_ZOOM':\r\n            return { ...state, zoomLevel: action.payload };\r\n        case 'TOGGLE_GRID':\r\n            return { ...state, showGrid: !state.showGrid };\r\n        case 'SET_GRID_SIZE':\r\n            return { ...state, gridSize: action.payload };\r\n        case 'TOGGLE_SIDEBAR':\r\n            return {\r\n                ...state,\r\n                [action.payload.side === 'left' ? 'leftSidebarCollapsed' : 'rightSidebarCollapsed']:\r\n                    !state[action.payload.side === 'left' ? 'leftSidebarCollapsed' : 'rightSidebarCollapsed'],\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nconst CreateLandingPage = () => {\r\n    const [state, dispatch] = useReducer(reducer, initialState);\r\n    const { pageData, selectedIds, history, historyIndex, viewMode, zoomLevel, gridSize, showGrid, leftSidebarCollapsed, rightSidebarCollapsed } = state;\r\n    const fileInputRef = useRef(null);\r\n\r\n    const addElement = useCallback((element) => {\r\n        dispatch({ type: 'ADD_ELEMENT', payload: element });\r\n        toast.success('Đã thêm phần tử!');\r\n    }, []);\r\n\r\n    // Updated updatePosition function để support mode parameter\r\n    const updatePosition = useCallback((ids, position, mode = 'delta') => {\r\n        console.group('Parent updatePosition called');\r\n        console.log('IDs:', ids);\r\n        console.log('Position:', position);\r\n        console.log('Mode:', mode);\r\n        console.groupEnd();\r\n\r\n        // Đảm bảo ids luôn là array\r\n        const idsArray = Array.isArray(ids) ? ids : [ids];\r\n\r\n        dispatch({\r\n            type: 'UPDATE_POSITION',\r\n            payload: { ids: idsArray, position, mode }\r\n        });\r\n\r\n        // Chỉ hiện toast nếu không phải absolute mode (để tránh spam khi drag)\r\n        if (mode !== 'absolute') {\r\n            toast.success('Đã cập nhật vị trí!');\r\n        }\r\n    }, []);\r\n\r\n    const updateSize = useCallback((id, size) => {\r\n        dispatch({ type: 'UPDATE_SIZE', payload: { id, size } });\r\n        toast.success('Đã cập nhật kích thước!');\r\n    }, []);\r\n\r\n    const deleteElement = useCallback((ids) => {\r\n        dispatch({ type: 'DELETE_ELEMENT', payload: ids });\r\n        toast.success('Đã xóa phần tử!');\r\n    }, []);\r\n\r\n    const selectElement = useCallback((ids) => {\r\n        dispatch({ type: 'SELECT_ELEMENT', payload: ids });\r\n    }, []);\r\n\r\n    const groupElements = useCallback((ids) => {\r\n        dispatch({ type: 'GROUP_ELEMENTS', payload: ids });\r\n        toast.success('Đã nhóm phần tử!');\r\n    }, []);\r\n\r\n    const undo = useCallback(() => {\r\n        dispatch({ type: 'UNDO' });\r\n        toast.info('Đã hoàn tác!');\r\n    }, []);\r\n\r\n    const redo = useCallback(() => {\r\n        dispatch({ type: 'REDO' });\r\n        toast.info('Đã khôi phục!');\r\n    }, []);\r\n\r\n    const handleZoom = useCallback((direction) => {\r\n        dispatch({ type: 'SET_ZOOM', payload: direction === 'in' ? Math.min(200, zoomLevel + 10) : Math.max(50, zoomLevel - 10) });\r\n    }, [zoomLevel]);\r\n\r\n    const handleSave = useCallback(() => {\r\n        localStorage.setItem('landing-page-builder', JSON.stringify({ pageData, viewMode, zoomLevel }));\r\n        toast.success('Đã lưu trang!');\r\n    }, [pageData, viewMode, zoomLevel]);\r\n\r\n    useEffect(() => {\r\n        const autoSave = setTimeout(() => {\r\n            if (pageData.elements.length > 0) {\r\n                localStorage.setItem('landing-page-builder-autosave', JSON.stringify({ pageData, viewMode, zoomLevel }));\r\n                toast.info('Đã tự động lưu!');\r\n            }\r\n        }, 30000);\r\n        return () => clearTimeout(autoSave);\r\n    }, [pageData, viewMode, zoomLevel]);\r\n\r\n    useHotkeys('ctrl+s', handleSave, [handleSave]);\r\n    useHotkeys('ctrl+z', undo, [undo]);\r\n    useHotkeys('ctrl+shift+z', redo, [redo]);\r\n    useHotkeys('ctrl+d', () => {\r\n        selectedIds.forEach((id) => {\r\n            const element = pageData.elements.find((el) => el.id === id);\r\n            if (element) {\r\n                addElement({\r\n                    ...element,\r\n                    id: `${element.id}-copy-${Date.now()}`,\r\n                    position: {\r\n                        desktop: { x: element.position.desktop.x + 20, y: element.position.desktop.y + 20 },\r\n                        tablet: { x: element.position.tablet.x + 20, y: element.position.tablet.y + 20 },\r\n                        mobile: { x: element.position.mobile.x + 20, y: element.position.mobile.y + 20 },\r\n                    },\r\n                });\r\n            }\r\n        });\r\n    }, [selectedIds, pageData.elements, addElement]);\r\n\r\n    return (\r\n        <DndProvider backend={HTML5Backend}>\r\n            <div className=\"lpb-container\">\r\n                <link\r\n                    rel=\"stylesheet\"\r\n                    href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\"\r\n                    crossOrigin=\"anonymous\"\r\n                    referrerPolicy=\"no-referrer\"\r\n                />\r\n                <ToastContainer position=\"top-right\" autoClose={3000} hideProgressBar />\r\n                <Toolbar\r\n                    onSave={handleSave}\r\n                    onUndo={undo}\r\n                    onRedo={redo}\r\n                    canUndo={historyIndex > 0}\r\n                    canRedo={historyIndex < history.length - 1}\r\n                    viewMode={viewMode}\r\n                    onViewModeChange={(mode) => dispatch({ type: 'SET_VIEW_MODE', payload: mode })}\r\n                    onZoom={handleZoom}\r\n                    onToggleGrid={() => dispatch({ type: 'TOGGLE_GRID' })}\r\n                    showGrid={showGrid}\r\n                    gridSize={gridSize}\r\n                    onSetGridSize={(size) => dispatch({ type: 'SET_GRID_SIZE', payload: size })}\r\n                />\r\n                <div className=\"lpb-main-content\">\r\n                    <div className={`lpb-sidebar-left ${leftSidebarCollapsed ? 'lpb-sidebar-collapsed' : ''}`}>\r\n                        <ComponentLibrary\r\n                            isCollapsed={leftSidebarCollapsed}\r\n                            onToggle={() => dispatch({ type: 'TOGGLE_SIDEBAR', payload: { side: 'left' } })}\r\n                            onAddElement={addElement}\r\n                        />\r\n                    </div>\r\n                    <div className=\"lpb-canvas-container\">\r\n                        <Canvas\r\n                            pageData={pageData}\r\n                            selectedIds={selectedIds}\r\n                            onSelectElement={selectElement}\r\n                            onUpdatePosition={updatePosition}\r\n                            onUpdateSize={updateSize}\r\n                            onDeleteElement={deleteElement}\r\n                            onAddElement={addElement}\r\n                            onGroupElements={groupElements}\r\n                            viewMode={viewMode}\r\n                            zoomLevel={zoomLevel}\r\n                            gridSize={gridSize}\r\n                            showGrid={showGrid}\r\n                        />\r\n                    </div>\r\n                    <div className={`lpb-sidebar-right ${rightSidebarCollapsed ? 'lpb-sidebar-collapsed' : ''}`}>\r\n                        <PropertiesPanel\r\n                            selectedElements={pageData.elements.filter((el) => selectedIds.includes(el.id))}\r\n                            onUpdateElement={(id, updates) => dispatch({ type: 'UPDATE_SIZE', payload: { id, size: updates.size } })}\r\n                            isCollapsed={rightSidebarCollapsed}\r\n                            onToggle={() => dispatch({ type: 'TOGGLE_SIDEBAR', payload: { side: 'right' } })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </DndProvider>\r\n    );\r\n};\r\n\r\nexport default CreateLandingPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}