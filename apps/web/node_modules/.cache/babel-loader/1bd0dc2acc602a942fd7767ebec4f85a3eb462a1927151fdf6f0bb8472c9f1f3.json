{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Element.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useRef, useCallback, useEffect } from 'react';\nimport { useDrag, useDrop } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { toast } from 'react-toastify';\nimport { X, Eye, EyeOff } from 'lucide-react';\nimport { ItemTypes, getCanvasPosition, snapToGrid, getElementBounds, renderComponentContent } from './helpers';\nimport SelectionOverlay from './SelectionOverlay';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ChildElement = ({\n  child,\n  parentId,\n  isSelected,\n  onSelectChild,\n  onUpdateChildPosition,\n  onMoveChild,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  showGrid,\n  setDragPreview,\n  onDeleteChild\n}) => {\n  _s();\n  var _child$position$viewM, _child$position$viewM2, _child$size, _child$size2;\n  const childRef = useRef(null);\n  const [{\n    isDragging\n  }, drag, preview] = useDrag(() => ({\n    type: ItemTypes.CHILD_ELEMENT,\n    item: {\n      childId: child.id,\n      parentId\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  }));\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.CHILD_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !childRef.current) return;\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, childRef.current, zoomLevel);\n      const snapPoints = [];\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      setDragPreview({\n        id: item.childId,\n        x: snapped.x,\n        y: snapped.y,\n        size: child.size || {\n          width: 200,\n          height: 50\n        },\n        type: child.type,\n        componentData: child.componentData,\n        styles: child.styles,\n        children: []\n      });\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !childRef.current) return {\n        moved: false\n      };\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, childRef.current, zoomLevel);\n      const snapPoints = [];\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      if (item.childId !== child.id) {\n        onMoveChild(item.parentId, item.childId, parentId, snapped);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      }\n      return {\n        moved: false\n      };\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver()\n    })\n  }));\n  useEffect(() => {\n    preview(getEmptyImage(), {\n      captureDraggingState: true\n    });\n  }, [preview]);\n  const handleSelectChild = useCallback(e => {\n    if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\n    onSelectChild(parentId, child.id);\n  }, [onSelectChild, parentId, child.id]);\n  const handleMouseDown = useCallback(e => {\n    if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\n    if (child.locked) return;\n    handleSelectChild(e);\n    const startX = e.clientX;\n    const startY = e.clientY;\n    const initialPos = child.position[viewMode] || {\n      x: 0,\n      y: 0\n    };\n    const handleMouseMove = moveEvent => {\n      if (!moveEvent) return;\n      const deltaX = (moveEvent.clientX - startX) / (zoomLevel / 100);\n      const deltaY = (moveEvent.clientY - startY) / (zoomLevel / 100);\n      const newPos = {\n        x: Math.max(0, initialPos.x + deltaX),\n        y: Math.max(0, initialPos.y + deltaY)\n      };\n      const snapped = snapToGrid(newPos.x, newPos.y, showGrid ? gridSize : Infinity, []);\n      onUpdateChildPosition(parentId, child.id, {\n        [viewMode]: snapped\n      }, 'absolute');\n    };\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [child, viewMode, zoomLevel, gridSize, showGrid, onUpdateChildPosition, parentId, handleSelectChild]);\n  const style = {\n    position: 'absolute',\n    transform: `translate(${((_child$position$viewM = child.position[viewMode]) === null || _child$position$viewM === void 0 ? void 0 : _child$position$viewM.x) || 0}px, ${((_child$position$viewM2 = child.position[viewMode]) === null || _child$position$viewM2 === void 0 ? void 0 : _child$position$viewM2.y) || 0}px)`,\n    width: ((_child$size = child.size) === null || _child$size === void 0 ? void 0 : _child$size.width) || 200,\n    height: ((_child$size2 = child.size) === null || _child$size2 === void 0 ? void 0 : _child$size2.height) || 50,\n    opacity: isDragging ? 0.5 : child.locked ? 0.7 : 1,\n    cursor: child.locked ? 'not-allowed' : 'move',\n    zIndex: child.type === 'popup' || child.type === 'modal' ? 10000 : 1,\n    ...child.styles\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: node => {\n      childRef.current = node;\n      drag(drop(node));\n    },\n    className: `lpb-child-element ${isSelected ? 'lpb-selected' : ''} ${isOver ? 'lpb-over' : ''} lpb-element-${child.type}`,\n    style: style,\n    onClick: handleSelectChild,\n    onMouseDown: handleMouseDown,\n    children: [renderComponentContent(child.type, child.componentData, child.styles, child.children || []), isSelected && /*#__PURE__*/_jsxDEV(SelectionOverlay, {\n      element: child,\n      onDelete: () => onDeleteChild(parentId, child.id),\n      isChild: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 9\n  }, this);\n};\n_s(ChildElement, \"CyDIwCzjNDCjGZSKSjxcCgqeBz4=\", false, function () {\n  return [useDrag, useDrop];\n});\n_c = ChildElement;\nexport const Element = ({\n  element,\n  isSelected,\n  onSelectElement,\n  onUpdatePosition,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  onContextMenu,\n  canvasBounds,\n  canvasRef,\n  onSelectChild,\n  selectedChildId,\n  onAddChild,\n  onUpdateChildPosition,\n  onMoveChild,\n  showGrid,\n  setDragPreview,\n  visiblePopups,\n  onClosePopup,\n  onSaveTemplate,\n  onToggleVisibility,\n  onEditElement,\n  onDuplicateElement,\n  onMoveElementUp,\n  onMoveElementDown,\n  onDeleteElement,\n  onDeleteChild\n}) => {\n  _s2();\n  var _element$position$vie, _element$position$vie2, _element$size, _element$size2, _element$children5;\n  const elementRef = useRef(null);\n  const [{\n    isDragging\n  }, drag, preview] = useDrag(() => ({\n    type: ItemTypes.EXISTING_ELEMENT,\n    item: {\n      id: element.id,\n      type: element.type\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    }),\n    canDrag: () => !element.locked && element.type !== 'section' && element.type !== 'popup' && element.type !== 'modal'\n  }));\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT, ItemTypes.CHILD_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !elementRef.current) return;\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, elementRef.current, zoomLevel);\n      const snapPoints = [];\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      if (monitor.getItemType() === ItemTypes.EXISTING_ELEMENT && item.id !== element.id) {\n        setDragPreview({\n          id: item.id,\n          x: snapped.x,\n          y: snapped.y,\n          size: element.size || {\n            width: 200,\n            height: 50\n          },\n          type: element.type,\n          componentData: element.componentData,\n          styles: element.styles,\n          children: element.children || []\n        });\n      } else if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\n        setDragPreview({\n          id: 'preview',\n          x: snapped.x,\n          y: snapped.y,\n          size: item.json.size || {\n            width: 200,\n            height: 50\n          },\n          type: item.json.type,\n          componentData: item.json.componentData,\n          styles: item.json.styles,\n          children: item.json.children || []\n        });\n      } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        var _element$children, _element$children$fin, _element$children2, _element$children2$fi, _element$children3, _element$children3$fi, _element$children4, _element$children4$fi;\n        setDragPreview({\n          id: item.childId,\n          x: snapped.x,\n          y: snapped.y,\n          size: ((_element$children = element.children) === null || _element$children === void 0 ? void 0 : (_element$children$fin = _element$children.find(child => child.id === item.childId)) === null || _element$children$fin === void 0 ? void 0 : _element$children$fin.size) || {\n            width: 200,\n            height: 50\n          },\n          type: (_element$children2 = element.children) === null || _element$children2 === void 0 ? void 0 : (_element$children2$fi = _element$children2.find(child => child.id === item.childId)) === null || _element$children2$fi === void 0 ? void 0 : _element$children2$fi.type,\n          componentData: (_element$children3 = element.children) === null || _element$children3 === void 0 ? void 0 : (_element$children3$fi = _element$children3.find(child => child.id === item.childId)) === null || _element$children3$fi === void 0 ? void 0 : _element$children3$fi.componentData,\n          styles: (_element$children4 = element.children) === null || _element$children4 === void 0 ? void 0 : (_element$children4$fi = _element$children4.find(child => child.id === item.childId)) === null || _element$children4$fi === void 0 ? void 0 : _element$children4$fi.styles,\n          children: []\n        });\n      }\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !elementRef.current) return {\n        moved: false\n      };\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, elementRef.current, zoomLevel);\n      const snapPoints = [];\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        onMoveChild(item.parentId, item.childId, element.id, snapped);\n        return {\n          moved: true,\n          parentId: element.id,\n          newPosition: snapped\n        };\n      } else if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\n        var _item$json$componentD, _item$json$componentD2;\n        const newChild = {\n          id: `${item.json.type}-${Date.now()}`,\n          type: item.json.type,\n          componentData: {\n            ...item.json.componentData,\n            title: ((_item$json$componentD = item.json.componentData) === null || _item$json$componentD === void 0 ? void 0 : _item$json$componentD.title) || 'Thành phần mới'\n          },\n          position: {\n            [viewMode]: snapped\n          },\n          size: item.json.size || {\n            width: 200,\n            height: 50\n          },\n          styles: item.json.styles || {},\n          children: item.json.children || []\n        };\n        onAddChild(element.id, newChild);\n        toast.success(`Đã thêm ${((_item$json$componentD2 = item.json.componentData) === null || _item$json$componentD2 === void 0 ? void 0 : _item$json$componentD2.title) || 'thành phần'} vào section!`, {\n          position: 'bottom-right',\n          autoClose: 2000\n        });\n        return {\n          moved: true,\n          parentId: element.id,\n          newPosition: snapped\n        };\n      } else if (monitor.getItemType() === ItemTypes.EXISTING_ELEMENT && item.id !== element.id) {\n        onUpdatePosition(item.id, {\n          [viewMode]: snapped\n        }, 'absolute');\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      }\n      return {\n        moved: false\n      };\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver()\n    })\n  }));\n  useEffect(() => {\n    preview(getEmptyImage(), {\n      captureDraggingState: true\n    });\n  }, [preview]);\n  const handleSelect = useCallback(e => {\n    if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\n    onSelectElement([element.id], e.ctrlKey);\n  }, [onSelectElement, element.id]);\n  const handleMouseDown = useCallback(e => {\n    if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\n    if (element.locked || element.type === 'section' || element.type === 'popup' || element.type === 'modal') return;\n    handleSelect(e);\n    const startX = e.clientX;\n    const startY = e.clientY;\n    const initialPos = element.position[viewMode] || {\n      x: 0,\n      y: 0\n    };\n    const handleMouseMove = moveEvent => {\n      if (!moveEvent) return;\n      const deltaX = (moveEvent.clientX - startX) / (zoomLevel / 100);\n      const deltaY = (moveEvent.clientY - startY) / (zoomLevel / 100);\n      const newPos = {\n        x: Math.max(0, initialPos.x + deltaX),\n        y: Math.max(0, initialPos.y + deltaY)\n      };\n      const snapped = snapToGrid(newPos.x, newPos.y, showGrid ? gridSize : Infinity, []);\n      onUpdatePosition(element.id, {\n        [viewMode]: snapped\n      }, 'absolute');\n    };\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [element, viewMode, zoomLevel, gridSize, showGrid, onUpdatePosition, handleSelect]);\n  const handleContextMenu = useCallback(e => {\n    if (e && typeof e.preventDefault === 'function') e.preventDefault();\n    if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\n    const bounds = elementRef.current.getBoundingClientRect();\n    onContextMenu(element.id, {\n      x: e.clientX - bounds.left,\n      y: e.clientY - bounds.top\n    });\n  }, [onContextMenu, element.id]);\n  const style = {\n    position: element.type === 'section' || element.type === 'popup' || element.type === 'modal' ? 'absolute' : 'absolute',\n    transform: `translate(${((_element$position$vie = element.position[viewMode]) === null || _element$position$vie === void 0 ? void 0 : _element$position$vie.x) || 0}px, ${((_element$position$vie2 = element.position[viewMode]) === null || _element$position$vie2 === void 0 ? void 0 : _element$position$vie2.y) || 0}px)`,\n    width: ((_element$size = element.size) === null || _element$size === void 0 ? void 0 : _element$size.width) || (viewMode === 'mobile' ? 375 : 1200),\n    height: ((_element$size2 = element.size) === null || _element$size2 === void 0 ? void 0 : _element$size2.height) || 400,\n    opacity: isDragging ? 0.5 : element.locked ? 0.7 : element.visible !== false ? 1 : 0,\n    cursor: element.locked ? 'not-allowed' : element.type === 'section' || element.type === 'popup' || element.type === 'modal' ? 'default' : 'move',\n    zIndex: element.type === 'popup' || element.type === 'modal' ? 10000 : element.type === 'section' ? 1 : 10,\n    ...element.styles\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: node => {\n      elementRef.current = node;\n      if (element.type !== 'section' && element.type !== 'popup' && element.type !== 'modal') {\n        drag(drop(node));\n      } else {\n        drop(node);\n      }\n    },\n    className: `lpb-element ${isSelected ? 'lpb-selected' : ''} ${isOver ? 'lpb-over' : ''} lpb-element-${element.type}`,\n    style: style,\n    onClick: handleSelect,\n    onMouseDown: element.type === 'section' || element.type === 'popup' || element.type === 'modal' ? handleSelect : handleMouseDown,\n    onContextMenu: handleContextMenu,\n    children: [(element.type === 'popup' || element.type === 'modal') && visiblePopups.includes(element.id) && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => onClosePopup(element.id, e),\n      style: {\n        position: 'absolute',\n        top: 10,\n        right: 10,\n        background: '#fff',\n        border: '1px solid #e5e7eb',\n        borderRadius: '50%',\n        width: 24,\n        height: 24,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        cursor: 'pointer',\n        zIndex: 10001\n      },\n      children: /*#__PURE__*/_jsxDEV(X, {\n        size: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 17\n    }, this), renderComponentContent(element.type, element.componentData, element.styles, element.children || []), (_element$children5 = element.children) === null || _element$children5 === void 0 ? void 0 : _element$children5.map(child => /*#__PURE__*/_jsxDEV(ChildElement, {\n      child: child,\n      parentId: element.id,\n      isSelected: selectedChildId === child.id,\n      onSelectChild: onSelectChild,\n      onUpdateChildPosition: onUpdateChildPosition,\n      onMoveChild: onMoveChild,\n      viewMode: viewMode,\n      zoomLevel: zoomLevel,\n      gridSize: gridSize,\n      showGrid: showGrid,\n      setDragPreview: setDragPreview,\n      onDeleteChild: onDeleteChild\n    }, child.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 17\n    }, this)), isSelected && /*#__PURE__*/_jsxDEV(SelectionOverlay, {\n      element: element,\n      onEdit: onEditElement,\n      onDuplicate: onDuplicateElement,\n      onMoveUp: onMoveElementUp,\n      onMoveDown: onMoveElementDown,\n      onDelete: () => onDeleteElement(element.id),\n      onSaveTemplate: () => onSaveTemplate(element),\n      onToggleVisibility: () => onToggleVisibility(element.id),\n      isVisible: element.visible !== false\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 341,\n    columnNumber: 9\n  }, this);\n};\n_s2(Element, \"46fZ9//mbHts3nl7Zwxna+je9+8=\", false, function () {\n  return [useDrag, useDrop];\n});\n_c2 = Element;\nvar _c, _c2;\n$RefreshReg$(_c, \"ChildElement\");\n$RefreshReg$(_c2, \"Element\");","map":{"version":3,"names":["React","useRef","useCallback","useEffect","useDrag","useDrop","getEmptyImage","toast","X","Eye","EyeOff","ItemTypes","getCanvasPosition","snapToGrid","getElementBounds","renderComponentContent","SelectionOverlay","jsxDEV","_jsxDEV","ChildElement","child","parentId","isSelected","onSelectChild","onUpdateChildPosition","onMoveChild","viewMode","zoomLevel","gridSize","showGrid","setDragPreview","onDeleteChild","_s","_child$position$viewM","_child$position$viewM2","_child$size","_child$size2","childRef","isDragging","drag","preview","type","CHILD_ELEMENT","item","childId","id","collect","monitor","isOver","drop","accept","hover","clientOffset","getClientOffset","current","pos","x","y","snapPoints","snapped","Infinity","size","width","height","componentData","styles","children","moved","newPosition","captureDraggingState","handleSelectChild","e","stopPropagation","handleMouseDown","locked","startX","clientX","startY","clientY","initialPos","position","handleMouseMove","moveEvent","deltaX","deltaY","newPos","Math","max","handleMouseUp","document","removeEventListener","addEventListener","style","transform","opacity","cursor","zIndex","ref","node","className","onClick","onMouseDown","element","onDelete","isChild","fileName","_jsxFileName","lineNumber","columnNumber","_c","Element","onSelectElement","onUpdatePosition","onContextMenu","canvasBounds","canvasRef","selectedChildId","onAddChild","visiblePopups","onClosePopup","onSaveTemplate","onToggleVisibility","onEditElement","onDuplicateElement","onMoveElementUp","onMoveElementDown","onDeleteElement","_s2","_element$position$vie","_element$position$vie2","_element$size","_element$size2","_element$children5","elementRef","EXISTING_ELEMENT","canDrag","ELEMENT","getItemType","json","_element$children","_element$children$fin","_element$children2","_element$children2$fi","_element$children3","_element$children3$fi","_element$children4","_element$children4$fi","find","_item$json$componentD","_item$json$componentD2","newChild","Date","now","title","success","autoClose","handleSelect","ctrlKey","handleContextMenu","preventDefault","bounds","getBoundingClientRect","left","top","visible","includes","right","background","border","borderRadius","display","alignItems","justifyContent","map","onEdit","onDuplicate","onMoveUp","onMoveDown","isVisible","_c2","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Element.js"],"sourcesContent":["import React, { useRef, useCallback, useEffect } from 'react';\r\nimport { useDrag, useDrop } from 'react-dnd';\r\nimport { getEmptyImage } from 'react-dnd-html5-backend';\r\nimport { toast } from 'react-toastify';\r\nimport { X, Eye, EyeOff } from 'lucide-react';\r\nimport { ItemTypes, getCanvasPosition, snapToGrid, getElementBounds, renderComponentContent } from './helpers';\r\nimport SelectionOverlay from './SelectionOverlay';\r\n\r\nexport const ChildElement = ({\r\n                                 child,\r\n                                 parentId,\r\n                                 isSelected,\r\n                                 onSelectChild,\r\n                                 onUpdateChildPosition,\r\n                                 onMoveChild,\r\n                                 viewMode,\r\n                                 zoomLevel,\r\n                                 gridSize,\r\n                                 showGrid,\r\n                                 setDragPreview,\r\n                                 onDeleteChild,\r\n                             }) => {\r\n    const childRef = useRef(null);\r\n\r\n    const [{ isDragging }, drag, preview] = useDrag(() => ({\r\n        type: ItemTypes.CHILD_ELEMENT,\r\n        item: { childId: child.id, parentId },\r\n        collect: (monitor) => ({\r\n            isDragging: monitor.isDragging(),\r\n        }),\r\n    }));\r\n\r\n    const [{ isOver }, drop] = useDrop(() => ({\r\n        accept: [ItemTypes.CHILD_ELEMENT],\r\n        hover: (item, monitor) => {\r\n            const clientOffset = monitor.getClientOffset();\r\n            if (!clientOffset || !childRef.current) return;\r\n\r\n            const pos = getCanvasPosition(clientOffset.x, clientOffset.y, childRef.current, zoomLevel);\r\n            const snapPoints = [];\r\n            const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n            setDragPreview({\r\n                id: item.childId,\r\n                x: snapped.x,\r\n                y: snapped.y,\r\n                size: child.size || { width: 200, height: 50 },\r\n                type: child.type,\r\n                componentData: child.componentData,\r\n                styles: child.styles,\r\n                children: [],\r\n            });\r\n        },\r\n        drop: (item, monitor) => {\r\n            const clientOffset = monitor.getClientOffset();\r\n            if (!clientOffset || !childRef.current) return { moved: false };\r\n\r\n            const pos = getCanvasPosition(clientOffset.x, clientOffset.y, childRef.current, zoomLevel);\r\n            const snapPoints = [];\r\n            const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n            if (item.childId !== child.id) {\r\n                onMoveChild(item.parentId, item.childId, parentId, snapped);\r\n                return { moved: true, newPosition: snapped };\r\n            }\r\n            return { moved: false };\r\n        },\r\n        collect: (monitor) => ({\r\n            isOver: monitor.isOver(),\r\n        }),\r\n    }));\r\n\r\n    useEffect(() => {\r\n        preview(getEmptyImage(), { captureDraggingState: true });\r\n    }, [preview]);\r\n\r\n    const handleSelectChild = useCallback(\r\n        (e) => {\r\n            if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\r\n            onSelectChild(parentId, child.id);\r\n        },\r\n        [onSelectChild, parentId, child.id]\r\n    );\r\n\r\n    const handleMouseDown = useCallback(\r\n        (e) => {\r\n            if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\r\n            if (child.locked) return;\r\n\r\n            handleSelectChild(e);\r\n            const startX = e.clientX;\r\n            const startY = e.clientY;\r\n            const initialPos = child.position[viewMode] || { x: 0, y: 0 };\r\n\r\n            const handleMouseMove = (moveEvent) => {\r\n                if (!moveEvent) return;\r\n                const deltaX = (moveEvent.clientX - startX) / (zoomLevel / 100);\r\n                const deltaY = (moveEvent.clientY - startY) / (zoomLevel / 100);\r\n                const newPos = {\r\n                    x: Math.max(0, initialPos.x + deltaX),\r\n                    y: Math.max(0, initialPos.y + deltaY),\r\n                };\r\n                const snapped = snapToGrid(newPos.x, newPos.y, showGrid ? gridSize : Infinity, []);\r\n                onUpdateChildPosition(parentId, child.id, { [viewMode]: snapped }, 'absolute');\r\n            };\r\n\r\n            const handleMouseUp = () => {\r\n                document.removeEventListener('mousemove', handleMouseMove);\r\n                document.removeEventListener('mouseup', handleMouseUp);\r\n            };\r\n\r\n            document.addEventListener('mousemove', handleMouseMove);\r\n            document.addEventListener('mouseup', handleMouseUp);\r\n        },\r\n        [child, viewMode, zoomLevel, gridSize, showGrid, onUpdateChildPosition, parentId, handleSelectChild]\r\n    );\r\n\r\n    const style = {\r\n        position: 'absolute',\r\n        transform: `translate(${child.position[viewMode]?.x || 0}px, ${child.position[viewMode]?.y || 0}px)`,\r\n        width: child.size?.width || 200,\r\n        height: child.size?.height || 50,\r\n        opacity: isDragging ? 0.5 : child.locked ? 0.7 : 1,\r\n        cursor: child.locked ? 'not-allowed' : 'move',\r\n        zIndex: child.type === 'popup' || child.type === 'modal' ? 10000 : 1,\r\n        ...child.styles,\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={(node) => {\r\n                childRef.current = node;\r\n                drag(drop(node));\r\n            }}\r\n            className={`lpb-child-element ${isSelected ? 'lpb-selected' : ''} ${isOver ? 'lpb-over' : ''} lpb-element-${child.type}`}\r\n            style={style}\r\n            onClick={handleSelectChild}\r\n            onMouseDown={handleMouseDown}\r\n        >\r\n            {renderComponentContent(child.type, child.componentData, child.styles, child.children || [])}\r\n            {isSelected && (\r\n                <SelectionOverlay\r\n                    element={child}\r\n                    onDelete={() => onDeleteChild(parentId, child.id)}\r\n                    isChild\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const Element = ({\r\n                            element,\r\n                            isSelected,\r\n                            onSelectElement,\r\n                            onUpdatePosition,\r\n                            viewMode,\r\n                            zoomLevel,\r\n                            gridSize,\r\n                            onContextMenu,\r\n                            canvasBounds,\r\n                            canvasRef,\r\n                            onSelectChild,\r\n                            selectedChildId,\r\n                            onAddChild,\r\n                            onUpdateChildPosition,\r\n                            onMoveChild,\r\n                            showGrid,\r\n                            setDragPreview,\r\n                            visiblePopups,\r\n                            onClosePopup,\r\n                            onSaveTemplate,\r\n                            onToggleVisibility,\r\n                            onEditElement,\r\n                            onDuplicateElement,\r\n                            onMoveElementUp,\r\n                            onMoveElementDown,\r\n                            onDeleteElement,\r\n                            onDeleteChild,\r\n                        }) => {\r\n    const elementRef = useRef(null);\r\n    const [{ isDragging }, drag, preview] = useDrag(() => ({\r\n        type: ItemTypes.EXISTING_ELEMENT,\r\n        item: { id: element.id, type: element.type },\r\n        collect: (monitor) => ({\r\n            isDragging: monitor.isDragging(),\r\n        }),\r\n        canDrag: () => !element.locked && element.type !== 'section' && element.type !== 'popup' && element.type !== 'modal',\r\n    }));\r\n\r\n    const [{ isOver }, drop] = useDrop(() => ({\r\n        accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT, ItemTypes.CHILD_ELEMENT],\r\n        hover: (item, monitor) => {\r\n            const clientOffset = monitor.getClientOffset();\r\n            if (!clientOffset || !elementRef.current) return;\r\n\r\n            const pos = getCanvasPosition(clientOffset.x, clientOffset.y, elementRef.current, zoomLevel);\r\n            const snapPoints = [];\r\n            const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n            if (monitor.getItemType() === ItemTypes.EXISTING_ELEMENT && item.id !== element.id) {\r\n                setDragPreview({\r\n                    id: item.id,\r\n                    x: snapped.x,\r\n                    y: snapped.y,\r\n                    size: element.size || { width: 200, height: 50 },\r\n                    type: element.type,\r\n                    componentData: element.componentData,\r\n                    styles: element.styles,\r\n                    children: element.children || [],\r\n                });\r\n            } else if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\r\n                setDragPreview({\r\n                    id: 'preview',\r\n                    x: snapped.x,\r\n                    y: snapped.y,\r\n                    size: item.json.size || { width: 200, height: 50 },\r\n                    type: item.json.type,\r\n                    componentData: item.json.componentData,\r\n                    styles: item.json.styles,\r\n                    children: item.json.children || [],\r\n                });\r\n            } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                setDragPreview({\r\n                    id: item.childId,\r\n                    x: snapped.x,\r\n                    y: snapped.y,\r\n                    size: element.children?.find((child) => child.id === item.childId)?.size || { width: 200, height: 50 },\r\n                    type: element.children?.find((child) => child.id === item.childId)?.type,\r\n                    componentData: element.children?.find((child) => child.id === item.childId)?.componentData,\r\n                    styles: element.children?.find((child) => child.id === item.childId)?.styles,\r\n                    children: [],\r\n                });\r\n            }\r\n        },\r\n        drop: (item, monitor) => {\r\n            const clientOffset = monitor.getClientOffset();\r\n            if (!clientOffset || !elementRef.current) return { moved: false };\r\n\r\n            const pos = getCanvasPosition(clientOffset.x, clientOffset.y, elementRef.current, zoomLevel);\r\n            const snapPoints = [];\r\n            const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n            if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                onMoveChild(item.parentId, item.childId, element.id, snapped);\r\n                return { moved: true, parentId: element.id, newPosition: snapped };\r\n            } else if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\r\n                const newChild = {\r\n                    id: `${item.json.type}-${Date.now()}`,\r\n                    type: item.json.type,\r\n                    componentData: { ...item.json.componentData, title: item.json.componentData?.title || 'Thành phần mới' },\r\n                    position: { [viewMode]: snapped },\r\n                    size: item.json.size || { width: 200, height: 50 },\r\n                    styles: item.json.styles || {},\r\n                    children: item.json.children || [],\r\n                };\r\n                onAddChild(element.id, newChild);\r\n                toast.success(`Đã thêm ${item.json.componentData?.title || 'thành phần'} vào section!`, {\r\n                    position: 'bottom-right',\r\n                    autoClose: 2000,\r\n                });\r\n                return { moved: true, parentId: element.id, newPosition: snapped };\r\n            } else if (monitor.getItemType() === ItemTypes.EXISTING_ELEMENT && item.id !== element.id) {\r\n                onUpdatePosition(item.id, { [viewMode]: snapped }, 'absolute');\r\n                return { moved: true, newPosition: snapped };\r\n            }\r\n            return { moved: false };\r\n        },\r\n        collect: (monitor) => ({\r\n            isOver: monitor.isOver(),\r\n        }),\r\n    }));\r\n\r\n    useEffect(() => {\r\n        preview(getEmptyImage(), { captureDraggingState: true });\r\n    }, [preview]);\r\n\r\n    const handleSelect = useCallback(\r\n        (e) => {\r\n            if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\r\n            onSelectElement([element.id], e.ctrlKey);\r\n        },\r\n        [onSelectElement, element.id]\r\n    );\r\n\r\n    const handleMouseDown = useCallback(\r\n        (e) => {\r\n            if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\r\n            if (element.locked || element.type === 'section' || element.type === 'popup' || element.type === 'modal') return;\r\n\r\n            handleSelect(e);\r\n            const startX = e.clientX;\r\n            const startY = e.clientY;\r\n            const initialPos = element.position[viewMode] || { x: 0, y: 0 };\r\n\r\n            const handleMouseMove = (moveEvent) => {\r\n                if (!moveEvent) return;\r\n                const deltaX = (moveEvent.clientX - startX) / (zoomLevel / 100);\r\n                const deltaY = (moveEvent.clientY - startY) / (zoomLevel / 100);\r\n                const newPos = {\r\n                    x: Math.max(0, initialPos.x + deltaX),\r\n                    y: Math.max(0, initialPos.y + deltaY),\r\n                };\r\n                const snapped = snapToGrid(newPos.x, newPos.y, showGrid ? gridSize : Infinity, []);\r\n                onUpdatePosition(element.id, { [viewMode]: snapped }, 'absolute');\r\n            };\r\n\r\n            const handleMouseUp = () => {\r\n                document.removeEventListener('mousemove', handleMouseMove);\r\n                document.removeEventListener('mouseup', handleMouseUp);\r\n            };\r\n\r\n            document.addEventListener('mousemove', handleMouseMove);\r\n            document.addEventListener('mouseup', handleMouseUp);\r\n        },\r\n        [element, viewMode, zoomLevel, gridSize, showGrid, onUpdatePosition, handleSelect]\r\n    );\r\n\r\n    const handleContextMenu = useCallback(\r\n        (e) => {\r\n            if (e && typeof e.preventDefault === 'function') e.preventDefault();\r\n            if (e && typeof e.stopPropagation === 'function') e.stopPropagation();\r\n            const bounds = elementRef.current.getBoundingClientRect();\r\n            onContextMenu(element.id, { x: e.clientX - bounds.left, y: e.clientY - bounds.top });\r\n        },\r\n        [onContextMenu, element.id]\r\n    );\r\n\r\n    const style = {\r\n        position: element.type === 'section' || element.type === 'popup' || element.type === 'modal' ? 'absolute' : 'absolute',\r\n        transform: `translate(${element.position[viewMode]?.x || 0}px, ${element.position[viewMode]?.y || 0}px)`,\r\n        width: element.size?.width || (viewMode === 'mobile' ? 375 : 1200),\r\n        height: element.size?.height || 400,\r\n        opacity: isDragging ? 0.5 : element.locked ? 0.7 : element.visible !== false ? 1 : 0,\r\n        cursor: element.locked ? 'not-allowed' : element.type === 'section' || element.type === 'popup' || element.type === 'modal' ? 'default' : 'move',\r\n        zIndex: element.type === 'popup' || element.type === 'modal' ? 10000 : element.type === 'section' ? 1 : 10,\r\n        ...element.styles,\r\n    };\r\n\r\n    return (\r\n        <div\r\n            ref={(node) => {\r\n                elementRef.current = node;\r\n                if (element.type !== 'section' && element.type !== 'popup' && element.type !== 'modal') {\r\n                    drag(drop(node));\r\n                } else {\r\n                    drop(node);\r\n                }\r\n            }}\r\n            className={`lpb-element ${isSelected ? 'lpb-selected' : ''} ${isOver ? 'lpb-over' : ''} lpb-element-${element.type}`}\r\n            style={style}\r\n            onClick={handleSelect}\r\n            onMouseDown={element.type === 'section' || element.type === 'popup' || element.type === 'modal' ? handleSelect : handleMouseDown}\r\n            onContextMenu={handleContextMenu}\r\n        >\r\n            {(element.type === 'popup' || element.type === 'modal') && visiblePopups.includes(element.id) && (\r\n                <button\r\n                    onClick={(e) => onClosePopup(element.id, e)}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: 10,\r\n                        right: 10,\r\n                        background: '#fff',\r\n                        border: '1px solid #e5e7eb',\r\n                        borderRadius: '50%',\r\n                        width: 24,\r\n                        height: 24,\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        cursor: 'pointer',\r\n                        zIndex: 10001,\r\n                    }}\r\n                >\r\n                    <X size={16} />\r\n                </button>\r\n            )}\r\n            {renderComponentContent(element.type, element.componentData, element.styles, element.children || [])}\r\n            {element.children?.map((child) => (\r\n                <ChildElement\r\n                    key={child.id}\r\n                    child={child}\r\n                    parentId={element.id}\r\n                    isSelected={selectedChildId === child.id}\r\n                    onSelectChild={onSelectChild}\r\n                    onUpdateChildPosition={onUpdateChildPosition}\r\n                    onMoveChild={onMoveChild}\r\n                    viewMode={viewMode}\r\n                    zoomLevel={zoomLevel}\r\n                    gridSize={gridSize}\r\n                    showGrid={showGrid}\r\n                    setDragPreview={setDragPreview}\r\n                    onDeleteChild={onDeleteChild}\r\n                />\r\n            ))}\r\n            {isSelected && (\r\n                <SelectionOverlay\r\n                    element={element}\r\n                    onEdit={onEditElement}\r\n                    onDuplicate={onDuplicateElement}\r\n                    onMoveUp={onMoveElementUp}\r\n                    onMoveDown={onMoveElementDown}\r\n                    onDelete={() => onDeleteElement(element.id)}\r\n                    onSaveTemplate={() => onSaveTemplate(element)}\r\n                    onToggleVisibility={() => onToggleVisibility(element.id)}\r\n                    isVisible={element.visible !== false}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAC7D,SAASC,OAAO,EAAEC,OAAO,QAAQ,WAAW;AAC5C,SAASC,aAAa,QAAQ,yBAAyB;AACvD,SAASC,KAAK,QAAQ,gBAAgB;AACtC,SAASC,CAAC,EAAEC,GAAG,EAAEC,MAAM,QAAQ,cAAc;AAC7C,SAASC,SAAS,EAAEC,iBAAiB,EAAEC,UAAU,EAAEC,gBAAgB,EAAEC,sBAAsB,QAAQ,WAAW;AAC9G,OAAOC,gBAAgB,MAAM,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElD,OAAO,MAAMC,YAAY,GAAGA,CAAC;EACIC,KAAK;EACLC,QAAQ;EACRC,UAAU;EACVC,aAAa;EACbC,qBAAqB;EACrBC,WAAW;EACXC,QAAQ;EACRC,SAAS;EACTC,QAAQ;EACRC,QAAQ;EACRC,cAAc;EACdC;AACJ,CAAC,KAAK;EAAAC,EAAA;EAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,WAAA,EAAAC,YAAA;EAC/B,MAAMC,QAAQ,GAAGpC,MAAM,CAAC,IAAI,CAAC;EAE7B,MAAM,CAAC;IAAEqC;EAAW,CAAC,EAAEC,IAAI,EAAEC,OAAO,CAAC,GAAGpC,OAAO,CAAC,OAAO;IACnDqC,IAAI,EAAE9B,SAAS,CAAC+B,aAAa;IAC7BC,IAAI,EAAE;MAAEC,OAAO,EAAExB,KAAK,CAACyB,EAAE;MAAExB;IAAS,CAAC;IACrCyB,OAAO,EAAGC,OAAO,KAAM;MACnBT,UAAU,EAAES,OAAO,CAACT,UAAU,CAAC;IACnC,CAAC;EACL,CAAC,CAAC,CAAC;EAEH,MAAM,CAAC;IAAEU;EAAO,CAAC,EAAEC,IAAI,CAAC,GAAG5C,OAAO,CAAC,OAAO;IACtC6C,MAAM,EAAE,CAACvC,SAAS,CAAC+B,aAAa,CAAC;IACjCS,KAAK,EAAEA,CAACR,IAAI,EAAEI,OAAO,KAAK;MACtB,MAAMK,YAAY,GAAGL,OAAO,CAACM,eAAe,CAAC,CAAC;MAC9C,IAAI,CAACD,YAAY,IAAI,CAACf,QAAQ,CAACiB,OAAO,EAAE;MAExC,MAAMC,GAAG,GAAG3C,iBAAiB,CAACwC,YAAY,CAACI,CAAC,EAAEJ,YAAY,CAACK,CAAC,EAAEpB,QAAQ,CAACiB,OAAO,EAAE3B,SAAS,CAAC;MAC1F,MAAM+B,UAAU,GAAG,EAAE;MACrB,MAAMC,OAAO,GAAG9C,UAAU,CAAC0C,GAAG,CAACC,CAAC,EAAED,GAAG,CAACE,CAAC,EAAE5B,QAAQ,GAAGD,QAAQ,GAAGgC,QAAQ,EAAEF,UAAU,CAAC;MAEpF5B,cAAc,CAAC;QACXe,EAAE,EAAEF,IAAI,CAACC,OAAO;QAChBY,CAAC,EAAEG,OAAO,CAACH,CAAC;QACZC,CAAC,EAAEE,OAAO,CAACF,CAAC;QACZI,IAAI,EAAEzC,KAAK,CAACyC,IAAI,IAAI;UAAEC,KAAK,EAAE,GAAG;UAAEC,MAAM,EAAE;QAAG,CAAC;QAC9CtB,IAAI,EAAErB,KAAK,CAACqB,IAAI;QAChBuB,aAAa,EAAE5C,KAAK,CAAC4C,aAAa;QAClCC,MAAM,EAAE7C,KAAK,CAAC6C,MAAM;QACpBC,QAAQ,EAAE;MACd,CAAC,CAAC;IACN,CAAC;IACDjB,IAAI,EAAEA,CAACN,IAAI,EAAEI,OAAO,KAAK;MACrB,MAAMK,YAAY,GAAGL,OAAO,CAACM,eAAe,CAAC,CAAC;MAC9C,IAAI,CAACD,YAAY,IAAI,CAACf,QAAQ,CAACiB,OAAO,EAAE,OAAO;QAAEa,KAAK,EAAE;MAAM,CAAC;MAE/D,MAAMZ,GAAG,GAAG3C,iBAAiB,CAACwC,YAAY,CAACI,CAAC,EAAEJ,YAAY,CAACK,CAAC,EAAEpB,QAAQ,CAACiB,OAAO,EAAE3B,SAAS,CAAC;MAC1F,MAAM+B,UAAU,GAAG,EAAE;MACrB,MAAMC,OAAO,GAAG9C,UAAU,CAAC0C,GAAG,CAACC,CAAC,EAAED,GAAG,CAACE,CAAC,EAAE5B,QAAQ,GAAGD,QAAQ,GAAGgC,QAAQ,EAAEF,UAAU,CAAC;MAEpF,IAAIf,IAAI,CAACC,OAAO,KAAKxB,KAAK,CAACyB,EAAE,EAAE;QAC3BpB,WAAW,CAACkB,IAAI,CAACtB,QAAQ,EAAEsB,IAAI,CAACC,OAAO,EAAEvB,QAAQ,EAAEsC,OAAO,CAAC;QAC3D,OAAO;UAAEQ,KAAK,EAAE,IAAI;UAAEC,WAAW,EAAET;QAAQ,CAAC;MAChD;MACA,OAAO;QAAEQ,KAAK,EAAE;MAAM,CAAC;IAC3B,CAAC;IACDrB,OAAO,EAAGC,OAAO,KAAM;MACnBC,MAAM,EAAED,OAAO,CAACC,MAAM,CAAC;IAC3B,CAAC;EACL,CAAC,CAAC,CAAC;EAEH7C,SAAS,CAAC,MAAM;IACZqC,OAAO,CAAClC,aAAa,CAAC,CAAC,EAAE;MAAE+D,oBAAoB,EAAE;IAAK,CAAC,CAAC;EAC5D,CAAC,EAAE,CAAC7B,OAAO,CAAC,CAAC;EAEb,MAAM8B,iBAAiB,GAAGpE,WAAW,CAChCqE,CAAC,IAAK;IACH,IAAIA,CAAC,IAAI,OAAOA,CAAC,CAACC,eAAe,KAAK,UAAU,EAAED,CAAC,CAACC,eAAe,CAAC,CAAC;IACrEjD,aAAa,CAACF,QAAQ,EAAED,KAAK,CAACyB,EAAE,CAAC;EACrC,CAAC,EACD,CAACtB,aAAa,EAAEF,QAAQ,EAAED,KAAK,CAACyB,EAAE,CACtC,CAAC;EAED,MAAM4B,eAAe,GAAGvE,WAAW,CAC9BqE,CAAC,IAAK;IACH,IAAIA,CAAC,IAAI,OAAOA,CAAC,CAACC,eAAe,KAAK,UAAU,EAAED,CAAC,CAACC,eAAe,CAAC,CAAC;IACrE,IAAIpD,KAAK,CAACsD,MAAM,EAAE;IAElBJ,iBAAiB,CAACC,CAAC,CAAC;IACpB,MAAMI,MAAM,GAAGJ,CAAC,CAACK,OAAO;IACxB,MAAMC,MAAM,GAAGN,CAAC,CAACO,OAAO;IACxB,MAAMC,UAAU,GAAG3D,KAAK,CAAC4D,QAAQ,CAACtD,QAAQ,CAAC,IAAI;MAAE8B,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;IAE7D,MAAMwB,eAAe,GAAIC,SAAS,IAAK;MACnC,IAAI,CAACA,SAAS,EAAE;MAChB,MAAMC,MAAM,GAAG,CAACD,SAAS,CAACN,OAAO,GAAGD,MAAM,KAAKhD,SAAS,GAAG,GAAG,CAAC;MAC/D,MAAMyD,MAAM,GAAG,CAACF,SAAS,CAACJ,OAAO,GAAGD,MAAM,KAAKlD,SAAS,GAAG,GAAG,CAAC;MAC/D,MAAM0D,MAAM,GAAG;QACX7B,CAAC,EAAE8B,IAAI,CAACC,GAAG,CAAC,CAAC,EAAER,UAAU,CAACvB,CAAC,GAAG2B,MAAM,CAAC;QACrC1B,CAAC,EAAE6B,IAAI,CAACC,GAAG,CAAC,CAAC,EAAER,UAAU,CAACtB,CAAC,GAAG2B,MAAM;MACxC,CAAC;MACD,MAAMzB,OAAO,GAAG9C,UAAU,CAACwE,MAAM,CAAC7B,CAAC,EAAE6B,MAAM,CAAC5B,CAAC,EAAE5B,QAAQ,GAAGD,QAAQ,GAAGgC,QAAQ,EAAE,EAAE,CAAC;MAClFpC,qBAAqB,CAACH,QAAQ,EAAED,KAAK,CAACyB,EAAE,EAAE;QAAE,CAACnB,QAAQ,GAAGiC;MAAQ,CAAC,EAAE,UAAU,CAAC;IAClF,CAAC;IAED,MAAM6B,aAAa,GAAGA,CAAA,KAAM;MACxBC,QAAQ,CAACC,mBAAmB,CAAC,WAAW,EAAET,eAAe,CAAC;MAC1DQ,QAAQ,CAACC,mBAAmB,CAAC,SAAS,EAAEF,aAAa,CAAC;IAC1D,CAAC;IAEDC,QAAQ,CAACE,gBAAgB,CAAC,WAAW,EAAEV,eAAe,CAAC;IACvDQ,QAAQ,CAACE,gBAAgB,CAAC,SAAS,EAAEH,aAAa,CAAC;EACvD,CAAC,EACD,CAACpE,KAAK,EAAEM,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,QAAQ,EAAEL,qBAAqB,EAAEH,QAAQ,EAAEiD,iBAAiB,CACvG,CAAC;EAED,MAAMsB,KAAK,GAAG;IACVZ,QAAQ,EAAE,UAAU;IACpBa,SAAS,EAAE,aAAa,EAAA5D,qBAAA,GAAAb,KAAK,CAAC4D,QAAQ,CAACtD,QAAQ,CAAC,cAAAO,qBAAA,uBAAxBA,qBAAA,CAA0BuB,CAAC,KAAI,CAAC,OAAO,EAAAtB,sBAAA,GAAAd,KAAK,CAAC4D,QAAQ,CAACtD,QAAQ,CAAC,cAAAQ,sBAAA,uBAAxBA,sBAAA,CAA0BuB,CAAC,KAAI,CAAC,KAAK;IACpGK,KAAK,EAAE,EAAA3B,WAAA,GAAAf,KAAK,CAACyC,IAAI,cAAA1B,WAAA,uBAAVA,WAAA,CAAY2B,KAAK,KAAI,GAAG;IAC/BC,MAAM,EAAE,EAAA3B,YAAA,GAAAhB,KAAK,CAACyC,IAAI,cAAAzB,YAAA,uBAAVA,YAAA,CAAY2B,MAAM,KAAI,EAAE;IAChC+B,OAAO,EAAExD,UAAU,GAAG,GAAG,GAAGlB,KAAK,CAACsD,MAAM,GAAG,GAAG,GAAG,CAAC;IAClDqB,MAAM,EAAE3E,KAAK,CAACsD,MAAM,GAAG,aAAa,GAAG,MAAM;IAC7CsB,MAAM,EAAE5E,KAAK,CAACqB,IAAI,KAAK,OAAO,IAAIrB,KAAK,CAACqB,IAAI,KAAK,OAAO,GAAG,KAAK,GAAG,CAAC;IACpE,GAAGrB,KAAK,CAAC6C;EACb,CAAC;EAED,oBACI/C,OAAA;IACI+E,GAAG,EAAGC,IAAI,IAAK;MACX7D,QAAQ,CAACiB,OAAO,GAAG4C,IAAI;MACvB3D,IAAI,CAACU,IAAI,CAACiD,IAAI,CAAC,CAAC;IACpB,CAAE;IACFC,SAAS,EAAE,qBAAqB7E,UAAU,GAAG,cAAc,GAAG,EAAE,IAAI0B,MAAM,GAAG,UAAU,GAAG,EAAE,gBAAgB5B,KAAK,CAACqB,IAAI,EAAG;IACzHmD,KAAK,EAAEA,KAAM;IACbQ,OAAO,EAAE9B,iBAAkB;IAC3B+B,WAAW,EAAE5B,eAAgB;IAAAP,QAAA,GAE5BnD,sBAAsB,CAACK,KAAK,CAACqB,IAAI,EAAErB,KAAK,CAAC4C,aAAa,EAAE5C,KAAK,CAAC6C,MAAM,EAAE7C,KAAK,CAAC8C,QAAQ,IAAI,EAAE,CAAC,EAC3F5C,UAAU,iBACPJ,OAAA,CAACF,gBAAgB;MACbsF,OAAO,EAAElF,KAAM;MACfmF,QAAQ,EAAEA,CAAA,KAAMxE,aAAa,CAACV,QAAQ,EAAED,KAAK,CAACyB,EAAE,CAAE;MAClD2D,OAAO;IAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACJ;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAAC5E,EAAA,CA7IWb,YAAY;EAAA,QAgBmBf,OAAO,EAQpBC,OAAO;AAAA;AAAAwG,EAAA,GAxBzB1F,YAAY;AA+IzB,OAAO,MAAM2F,OAAO,GAAGA,CAAC;EACIR,OAAO;EACPhF,UAAU;EACVyF,eAAe;EACfC,gBAAgB;EAChBtF,QAAQ;EACRC,SAAS;EACTC,QAAQ;EACRqF,aAAa;EACbC,YAAY;EACZC,SAAS;EACT5F,aAAa;EACb6F,eAAe;EACfC,UAAU;EACV7F,qBAAqB;EACrBC,WAAW;EACXI,QAAQ;EACRC,cAAc;EACdwF,aAAa;EACbC,YAAY;EACZC,cAAc;EACdC,kBAAkB;EAClBC,aAAa;EACbC,kBAAkB;EAClBC,eAAe;EACfC,iBAAiB;EACjBC,eAAe;EACf/F;AACJ,CAAC,KAAK;EAAAgG,GAAA;EAAA,IAAAC,qBAAA,EAAAC,sBAAA,EAAAC,aAAA,EAAAC,cAAA,EAAAC,kBAAA;EAC1B,MAAMC,UAAU,GAAGpI,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAM,CAAC;IAAEqC;EAAW,CAAC,EAAEC,IAAI,EAAEC,OAAO,CAAC,GAAGpC,OAAO,CAAC,OAAO;IACnDqC,IAAI,EAAE9B,SAAS,CAAC2H,gBAAgB;IAChC3F,IAAI,EAAE;MAAEE,EAAE,EAAEyD,OAAO,CAACzD,EAAE;MAAEJ,IAAI,EAAE6D,OAAO,CAAC7D;IAAK,CAAC;IAC5CK,OAAO,EAAGC,OAAO,KAAM;MACnBT,UAAU,EAAES,OAAO,CAACT,UAAU,CAAC;IACnC,CAAC,CAAC;IACFiG,OAAO,EAAEA,CAAA,KAAM,CAACjC,OAAO,CAAC5B,MAAM,IAAI4B,OAAO,CAAC7D,IAAI,KAAK,SAAS,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,IAAI6D,OAAO,CAAC7D,IAAI,KAAK;EACjH,CAAC,CAAC,CAAC;EAEH,MAAM,CAAC;IAAEO;EAAO,CAAC,EAAEC,IAAI,CAAC,GAAG5C,OAAO,CAAC,OAAO;IACtC6C,MAAM,EAAE,CAACvC,SAAS,CAAC6H,OAAO,EAAE7H,SAAS,CAAC2H,gBAAgB,EAAE3H,SAAS,CAAC+B,aAAa,CAAC;IAChFS,KAAK,EAAEA,CAACR,IAAI,EAAEI,OAAO,KAAK;MACtB,MAAMK,YAAY,GAAGL,OAAO,CAACM,eAAe,CAAC,CAAC;MAC9C,IAAI,CAACD,YAAY,IAAI,CAACiF,UAAU,CAAC/E,OAAO,EAAE;MAE1C,MAAMC,GAAG,GAAG3C,iBAAiB,CAACwC,YAAY,CAACI,CAAC,EAAEJ,YAAY,CAACK,CAAC,EAAE4E,UAAU,CAAC/E,OAAO,EAAE3B,SAAS,CAAC;MAC5F,MAAM+B,UAAU,GAAG,EAAE;MACrB,MAAMC,OAAO,GAAG9C,UAAU,CAAC0C,GAAG,CAACC,CAAC,EAAED,GAAG,CAACE,CAAC,EAAE5B,QAAQ,GAAGD,QAAQ,GAAGgC,QAAQ,EAAEF,UAAU,CAAC;MAEpF,IAAIX,OAAO,CAAC0F,WAAW,CAAC,CAAC,KAAK9H,SAAS,CAAC2H,gBAAgB,IAAI3F,IAAI,CAACE,EAAE,KAAKyD,OAAO,CAACzD,EAAE,EAAE;QAChFf,cAAc,CAAC;UACXe,EAAE,EAAEF,IAAI,CAACE,EAAE;UACXW,CAAC,EAAEG,OAAO,CAACH,CAAC;UACZC,CAAC,EAAEE,OAAO,CAACF,CAAC;UACZI,IAAI,EAAEyC,OAAO,CAACzC,IAAI,IAAI;YAAEC,KAAK,EAAE,GAAG;YAAEC,MAAM,EAAE;UAAG,CAAC;UAChDtB,IAAI,EAAE6D,OAAO,CAAC7D,IAAI;UAClBuB,aAAa,EAAEsC,OAAO,CAACtC,aAAa;UACpCC,MAAM,EAAEqC,OAAO,CAACrC,MAAM;UACtBC,QAAQ,EAAEoC,OAAO,CAACpC,QAAQ,IAAI;QAClC,CAAC,CAAC;MACN,CAAC,MAAM,IAAInB,OAAO,CAAC0F,WAAW,CAAC,CAAC,KAAK9H,SAAS,CAAC6H,OAAO,IAAI7F,IAAI,CAAC+F,IAAI,EAAE;QACjE5G,cAAc,CAAC;UACXe,EAAE,EAAE,SAAS;UACbW,CAAC,EAAEG,OAAO,CAACH,CAAC;UACZC,CAAC,EAAEE,OAAO,CAACF,CAAC;UACZI,IAAI,EAAElB,IAAI,CAAC+F,IAAI,CAAC7E,IAAI,IAAI;YAAEC,KAAK,EAAE,GAAG;YAAEC,MAAM,EAAE;UAAG,CAAC;UAClDtB,IAAI,EAAEE,IAAI,CAAC+F,IAAI,CAACjG,IAAI;UACpBuB,aAAa,EAAErB,IAAI,CAAC+F,IAAI,CAAC1E,aAAa;UACtCC,MAAM,EAAEtB,IAAI,CAAC+F,IAAI,CAACzE,MAAM;UACxBC,QAAQ,EAAEvB,IAAI,CAAC+F,IAAI,CAACxE,QAAQ,IAAI;QACpC,CAAC,CAAC;MACN,CAAC,MAAM,IAAInB,OAAO,CAAC0F,WAAW,CAAC,CAAC,KAAK9H,SAAS,CAAC+B,aAAa,EAAE;QAAA,IAAAiG,iBAAA,EAAAC,qBAAA,EAAAC,kBAAA,EAAAC,qBAAA,EAAAC,kBAAA,EAAAC,qBAAA,EAAAC,kBAAA,EAAAC,qBAAA;QAC1DpH,cAAc,CAAC;UACXe,EAAE,EAAEF,IAAI,CAACC,OAAO;UAChBY,CAAC,EAAEG,OAAO,CAACH,CAAC;UACZC,CAAC,EAAEE,OAAO,CAACF,CAAC;UACZI,IAAI,EAAE,EAAA8E,iBAAA,GAAArC,OAAO,CAACpC,QAAQ,cAAAyE,iBAAA,wBAAAC,qBAAA,GAAhBD,iBAAA,CAAkBQ,IAAI,CAAE/H,KAAK,IAAKA,KAAK,CAACyB,EAAE,KAAKF,IAAI,CAACC,OAAO,CAAC,cAAAgG,qBAAA,uBAA5DA,qBAAA,CAA8D/E,IAAI,KAAI;YAAEC,KAAK,EAAE,GAAG;YAAEC,MAAM,EAAE;UAAG,CAAC;UACtGtB,IAAI,GAAAoG,kBAAA,GAAEvC,OAAO,CAACpC,QAAQ,cAAA2E,kBAAA,wBAAAC,qBAAA,GAAhBD,kBAAA,CAAkBM,IAAI,CAAE/H,KAAK,IAAKA,KAAK,CAACyB,EAAE,KAAKF,IAAI,CAACC,OAAO,CAAC,cAAAkG,qBAAA,uBAA5DA,qBAAA,CAA8DrG,IAAI;UACxEuB,aAAa,GAAA+E,kBAAA,GAAEzC,OAAO,CAACpC,QAAQ,cAAA6E,kBAAA,wBAAAC,qBAAA,GAAhBD,kBAAA,CAAkBI,IAAI,CAAE/H,KAAK,IAAKA,KAAK,CAACyB,EAAE,KAAKF,IAAI,CAACC,OAAO,CAAC,cAAAoG,qBAAA,uBAA5DA,qBAAA,CAA8DhF,aAAa;UAC1FC,MAAM,GAAAgF,kBAAA,GAAE3C,OAAO,CAACpC,QAAQ,cAAA+E,kBAAA,wBAAAC,qBAAA,GAAhBD,kBAAA,CAAkBE,IAAI,CAAE/H,KAAK,IAAKA,KAAK,CAACyB,EAAE,KAAKF,IAAI,CAACC,OAAO,CAAC,cAAAsG,qBAAA,uBAA5DA,qBAAA,CAA8DjF,MAAM;UAC5EC,QAAQ,EAAE;QACd,CAAC,CAAC;MACN;IACJ,CAAC;IACDjB,IAAI,EAAEA,CAACN,IAAI,EAAEI,OAAO,KAAK;MACrB,MAAMK,YAAY,GAAGL,OAAO,CAACM,eAAe,CAAC,CAAC;MAC9C,IAAI,CAACD,YAAY,IAAI,CAACiF,UAAU,CAAC/E,OAAO,EAAE,OAAO;QAAEa,KAAK,EAAE;MAAM,CAAC;MAEjE,MAAMZ,GAAG,GAAG3C,iBAAiB,CAACwC,YAAY,CAACI,CAAC,EAAEJ,YAAY,CAACK,CAAC,EAAE4E,UAAU,CAAC/E,OAAO,EAAE3B,SAAS,CAAC;MAC5F,MAAM+B,UAAU,GAAG,EAAE;MACrB,MAAMC,OAAO,GAAG9C,UAAU,CAAC0C,GAAG,CAACC,CAAC,EAAED,GAAG,CAACE,CAAC,EAAE5B,QAAQ,GAAGD,QAAQ,GAAGgC,QAAQ,EAAEF,UAAU,CAAC;MAEpF,IAAIX,OAAO,CAAC0F,WAAW,CAAC,CAAC,KAAK9H,SAAS,CAAC+B,aAAa,EAAE;QACnDjB,WAAW,CAACkB,IAAI,CAACtB,QAAQ,EAAEsB,IAAI,CAACC,OAAO,EAAE0D,OAAO,CAACzD,EAAE,EAAEc,OAAO,CAAC;QAC7D,OAAO;UAAEQ,KAAK,EAAE,IAAI;UAAE9C,QAAQ,EAAEiF,OAAO,CAACzD,EAAE;UAAEuB,WAAW,EAAET;QAAQ,CAAC;MACtE,CAAC,MAAM,IAAIZ,OAAO,CAAC0F,WAAW,CAAC,CAAC,KAAK9H,SAAS,CAAC6H,OAAO,IAAI7F,IAAI,CAAC+F,IAAI,EAAE;QAAA,IAAAU,qBAAA,EAAAC,sBAAA;QACjE,MAAMC,QAAQ,GAAG;UACbzG,EAAE,EAAE,GAAGF,IAAI,CAAC+F,IAAI,CAACjG,IAAI,IAAI8G,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE;UACrC/G,IAAI,EAAEE,IAAI,CAAC+F,IAAI,CAACjG,IAAI;UACpBuB,aAAa,EAAE;YAAE,GAAGrB,IAAI,CAAC+F,IAAI,CAAC1E,aAAa;YAAEyF,KAAK,EAAE,EAAAL,qBAAA,GAAAzG,IAAI,CAAC+F,IAAI,CAAC1E,aAAa,cAAAoF,qBAAA,uBAAvBA,qBAAA,CAAyBK,KAAK,KAAI;UAAiB,CAAC;UACxGzE,QAAQ,EAAE;YAAE,CAACtD,QAAQ,GAAGiC;UAAQ,CAAC;UACjCE,IAAI,EAAElB,IAAI,CAAC+F,IAAI,CAAC7E,IAAI,IAAI;YAAEC,KAAK,EAAE,GAAG;YAAEC,MAAM,EAAE;UAAG,CAAC;UAClDE,MAAM,EAAEtB,IAAI,CAAC+F,IAAI,CAACzE,MAAM,IAAI,CAAC,CAAC;UAC9BC,QAAQ,EAAEvB,IAAI,CAAC+F,IAAI,CAACxE,QAAQ,IAAI;QACpC,CAAC;QACDmD,UAAU,CAACf,OAAO,CAACzD,EAAE,EAAEyG,QAAQ,CAAC;QAChC/I,KAAK,CAACmJ,OAAO,CAAC,WAAW,EAAAL,sBAAA,GAAA1G,IAAI,CAAC+F,IAAI,CAAC1E,aAAa,cAAAqF,sBAAA,uBAAvBA,sBAAA,CAAyBI,KAAK,KAAI,YAAY,eAAe,EAAE;UACpFzE,QAAQ,EAAE,cAAc;UACxB2E,SAAS,EAAE;QACf,CAAC,CAAC;QACF,OAAO;UAAExF,KAAK,EAAE,IAAI;UAAE9C,QAAQ,EAAEiF,OAAO,CAACzD,EAAE;UAAEuB,WAAW,EAAET;QAAQ,CAAC;MACtE,CAAC,MAAM,IAAIZ,OAAO,CAAC0F,WAAW,CAAC,CAAC,KAAK9H,SAAS,CAAC2H,gBAAgB,IAAI3F,IAAI,CAACE,EAAE,KAAKyD,OAAO,CAACzD,EAAE,EAAE;QACvFmE,gBAAgB,CAACrE,IAAI,CAACE,EAAE,EAAE;UAAE,CAACnB,QAAQ,GAAGiC;QAAQ,CAAC,EAAE,UAAU,CAAC;QAC9D,OAAO;UAAEQ,KAAK,EAAE,IAAI;UAAEC,WAAW,EAAET;QAAQ,CAAC;MAChD;MACA,OAAO;QAAEQ,KAAK,EAAE;MAAM,CAAC;IAC3B,CAAC;IACDrB,OAAO,EAAGC,OAAO,KAAM;MACnBC,MAAM,EAAED,OAAO,CAACC,MAAM,CAAC;IAC3B,CAAC;EACL,CAAC,CAAC,CAAC;EAEH7C,SAAS,CAAC,MAAM;IACZqC,OAAO,CAAClC,aAAa,CAAC,CAAC,EAAE;MAAE+D,oBAAoB,EAAE;IAAK,CAAC,CAAC;EAC5D,CAAC,EAAE,CAAC7B,OAAO,CAAC,CAAC;EAEb,MAAMoH,YAAY,GAAG1J,WAAW,CAC3BqE,CAAC,IAAK;IACH,IAAIA,CAAC,IAAI,OAAOA,CAAC,CAACC,eAAe,KAAK,UAAU,EAAED,CAAC,CAACC,eAAe,CAAC,CAAC;IACrEuC,eAAe,CAAC,CAACT,OAAO,CAACzD,EAAE,CAAC,EAAE0B,CAAC,CAACsF,OAAO,CAAC;EAC5C,CAAC,EACD,CAAC9C,eAAe,EAAET,OAAO,CAACzD,EAAE,CAChC,CAAC;EAED,MAAM4B,eAAe,GAAGvE,WAAW,CAC9BqE,CAAC,IAAK;IACH,IAAIA,CAAC,IAAI,OAAOA,CAAC,CAACC,eAAe,KAAK,UAAU,EAAED,CAAC,CAACC,eAAe,CAAC,CAAC;IACrE,IAAI8B,OAAO,CAAC5B,MAAM,IAAI4B,OAAO,CAAC7D,IAAI,KAAK,SAAS,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,EAAE;IAE1GmH,YAAY,CAACrF,CAAC,CAAC;IACf,MAAMI,MAAM,GAAGJ,CAAC,CAACK,OAAO;IACxB,MAAMC,MAAM,GAAGN,CAAC,CAACO,OAAO;IACxB,MAAMC,UAAU,GAAGuB,OAAO,CAACtB,QAAQ,CAACtD,QAAQ,CAAC,IAAI;MAAE8B,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;IAE/D,MAAMwB,eAAe,GAAIC,SAAS,IAAK;MACnC,IAAI,CAACA,SAAS,EAAE;MAChB,MAAMC,MAAM,GAAG,CAACD,SAAS,CAACN,OAAO,GAAGD,MAAM,KAAKhD,SAAS,GAAG,GAAG,CAAC;MAC/D,MAAMyD,MAAM,GAAG,CAACF,SAAS,CAACJ,OAAO,GAAGD,MAAM,KAAKlD,SAAS,GAAG,GAAG,CAAC;MAC/D,MAAM0D,MAAM,GAAG;QACX7B,CAAC,EAAE8B,IAAI,CAACC,GAAG,CAAC,CAAC,EAAER,UAAU,CAACvB,CAAC,GAAG2B,MAAM,CAAC;QACrC1B,CAAC,EAAE6B,IAAI,CAACC,GAAG,CAAC,CAAC,EAAER,UAAU,CAACtB,CAAC,GAAG2B,MAAM;MACxC,CAAC;MACD,MAAMzB,OAAO,GAAG9C,UAAU,CAACwE,MAAM,CAAC7B,CAAC,EAAE6B,MAAM,CAAC5B,CAAC,EAAE5B,QAAQ,GAAGD,QAAQ,GAAGgC,QAAQ,EAAE,EAAE,CAAC;MAClFoD,gBAAgB,CAACV,OAAO,CAACzD,EAAE,EAAE;QAAE,CAACnB,QAAQ,GAAGiC;MAAQ,CAAC,EAAE,UAAU,CAAC;IACrE,CAAC;IAED,MAAM6B,aAAa,GAAGA,CAAA,KAAM;MACxBC,QAAQ,CAACC,mBAAmB,CAAC,WAAW,EAAET,eAAe,CAAC;MAC1DQ,QAAQ,CAACC,mBAAmB,CAAC,SAAS,EAAEF,aAAa,CAAC;IAC1D,CAAC;IAEDC,QAAQ,CAACE,gBAAgB,CAAC,WAAW,EAAEV,eAAe,CAAC;IACvDQ,QAAQ,CAACE,gBAAgB,CAAC,SAAS,EAAEH,aAAa,CAAC;EACvD,CAAC,EACD,CAACc,OAAO,EAAE5E,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,EAAEC,QAAQ,EAAEmF,gBAAgB,EAAE4C,YAAY,CACrF,CAAC;EAED,MAAME,iBAAiB,GAAG5J,WAAW,CAChCqE,CAAC,IAAK;IACH,IAAIA,CAAC,IAAI,OAAOA,CAAC,CAACwF,cAAc,KAAK,UAAU,EAAExF,CAAC,CAACwF,cAAc,CAAC,CAAC;IACnE,IAAIxF,CAAC,IAAI,OAAOA,CAAC,CAACC,eAAe,KAAK,UAAU,EAAED,CAAC,CAACC,eAAe,CAAC,CAAC;IACrE,MAAMwF,MAAM,GAAG3B,UAAU,CAAC/E,OAAO,CAAC2G,qBAAqB,CAAC,CAAC;IACzDhD,aAAa,CAACX,OAAO,CAACzD,EAAE,EAAE;MAAEW,CAAC,EAAEe,CAAC,CAACK,OAAO,GAAGoF,MAAM,CAACE,IAAI;MAAEzG,CAAC,EAAEc,CAAC,CAACO,OAAO,GAAGkF,MAAM,CAACG;IAAI,CAAC,CAAC;EACxF,CAAC,EACD,CAAClD,aAAa,EAAEX,OAAO,CAACzD,EAAE,CAC9B,CAAC;EAED,MAAM+C,KAAK,GAAG;IACVZ,QAAQ,EAAEsB,OAAO,CAAC7D,IAAI,KAAK,SAAS,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,GAAG,UAAU,GAAG,UAAU;IACtHoD,SAAS,EAAE,aAAa,EAAAmC,qBAAA,GAAA1B,OAAO,CAACtB,QAAQ,CAACtD,QAAQ,CAAC,cAAAsG,qBAAA,uBAA1BA,qBAAA,CAA4BxE,CAAC,KAAI,CAAC,OAAO,EAAAyE,sBAAA,GAAA3B,OAAO,CAACtB,QAAQ,CAACtD,QAAQ,CAAC,cAAAuG,sBAAA,uBAA1BA,sBAAA,CAA4BxE,CAAC,KAAI,CAAC,KAAK;IACxGK,KAAK,EAAE,EAAAoE,aAAA,GAAA5B,OAAO,CAACzC,IAAI,cAAAqE,aAAA,uBAAZA,aAAA,CAAcpE,KAAK,MAAKpC,QAAQ,KAAK,QAAQ,GAAG,GAAG,GAAG,IAAI,CAAC;IAClEqC,MAAM,EAAE,EAAAoE,cAAA,GAAA7B,OAAO,CAACzC,IAAI,cAAAsE,cAAA,uBAAZA,cAAA,CAAcpE,MAAM,KAAI,GAAG;IACnC+B,OAAO,EAAExD,UAAU,GAAG,GAAG,GAAGgE,OAAO,CAAC5B,MAAM,GAAG,GAAG,GAAG4B,OAAO,CAAC8D,OAAO,KAAK,KAAK,GAAG,CAAC,GAAG,CAAC;IACpFrE,MAAM,EAAEO,OAAO,CAAC5B,MAAM,GAAG,aAAa,GAAG4B,OAAO,CAAC7D,IAAI,KAAK,SAAS,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,GAAG,SAAS,GAAG,MAAM;IAChJuD,MAAM,EAAEM,OAAO,CAAC7D,IAAI,KAAK,OAAO,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,GAAG,KAAK,GAAG6D,OAAO,CAAC7D,IAAI,KAAK,SAAS,GAAG,CAAC,GAAG,EAAE;IAC1G,GAAG6D,OAAO,CAACrC;EACf,CAAC;EAED,oBACI/C,OAAA;IACI+E,GAAG,EAAGC,IAAI,IAAK;MACXmC,UAAU,CAAC/E,OAAO,GAAG4C,IAAI;MACzB,IAAII,OAAO,CAAC7D,IAAI,KAAK,SAAS,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,EAAE;QACpFF,IAAI,CAACU,IAAI,CAACiD,IAAI,CAAC,CAAC;MACpB,CAAC,MAAM;QACHjD,IAAI,CAACiD,IAAI,CAAC;MACd;IACJ,CAAE;IACFC,SAAS,EAAE,eAAe7E,UAAU,GAAG,cAAc,GAAG,EAAE,IAAI0B,MAAM,GAAG,UAAU,GAAG,EAAE,gBAAgBsD,OAAO,CAAC7D,IAAI,EAAG;IACrHmD,KAAK,EAAEA,KAAM;IACbQ,OAAO,EAAEwD,YAAa;IACtBvD,WAAW,EAAEC,OAAO,CAAC7D,IAAI,KAAK,SAAS,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,GAAGmH,YAAY,GAAGnF,eAAgB;IACjIwC,aAAa,EAAE6C,iBAAkB;IAAA5F,QAAA,GAEhC,CAACoC,OAAO,CAAC7D,IAAI,KAAK,OAAO,IAAI6D,OAAO,CAAC7D,IAAI,KAAK,OAAO,KAAK6E,aAAa,CAAC+C,QAAQ,CAAC/D,OAAO,CAACzD,EAAE,CAAC,iBACzF3B,OAAA;MACIkF,OAAO,EAAG7B,CAAC,IAAKgD,YAAY,CAACjB,OAAO,CAACzD,EAAE,EAAE0B,CAAC,CAAE;MAC5CqB,KAAK,EAAE;QACHZ,QAAQ,EAAE,UAAU;QACpBmF,GAAG,EAAE,EAAE;QACPG,KAAK,EAAE,EAAE;QACTC,UAAU,EAAE,MAAM;QAClBC,MAAM,EAAE,mBAAmB;QAC3BC,YAAY,EAAE,KAAK;QACnB3G,KAAK,EAAE,EAAE;QACTC,MAAM,EAAE,EAAE;QACV2G,OAAO,EAAE,MAAM;QACfC,UAAU,EAAE,QAAQ;QACpBC,cAAc,EAAE,QAAQ;QACxB7E,MAAM,EAAE,SAAS;QACjBC,MAAM,EAAE;MACZ,CAAE;MAAA9B,QAAA,eAEFhD,OAAA,CAACV,CAAC;QAACqD,IAAI,EAAE;MAAG;QAAA4C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACX,CACX,EACA7F,sBAAsB,CAACuF,OAAO,CAAC7D,IAAI,EAAE6D,OAAO,CAACtC,aAAa,EAAEsC,OAAO,CAACrC,MAAM,EAAEqC,OAAO,CAACpC,QAAQ,IAAI,EAAE,CAAC,GAAAkE,kBAAA,GACnG9B,OAAO,CAACpC,QAAQ,cAAAkE,kBAAA,uBAAhBA,kBAAA,CAAkByC,GAAG,CAAEzJ,KAAK,iBACzBF,OAAA,CAACC,YAAY;MAETC,KAAK,EAAEA,KAAM;MACbC,QAAQ,EAAEiF,OAAO,CAACzD,EAAG;MACrBvB,UAAU,EAAE8F,eAAe,KAAKhG,KAAK,CAACyB,EAAG;MACzCtB,aAAa,EAAEA,aAAc;MAC7BC,qBAAqB,EAAEA,qBAAsB;MAC7CC,WAAW,EAAEA,WAAY;MACzBC,QAAQ,EAAEA,QAAS;MACnBC,SAAS,EAAEA,SAAU;MACrBC,QAAQ,EAAEA,QAAS;MACnBC,QAAQ,EAAEA,QAAS;MACnBC,cAAc,EAAEA,cAAe;MAC/BC,aAAa,EAAEA;IAAc,GAZxBX,KAAK,CAACyB,EAAE;MAAA4D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAahB,CACJ,CAAC,EACDtF,UAAU,iBACPJ,OAAA,CAACF,gBAAgB;MACbsF,OAAO,EAAEA,OAAQ;MACjBwE,MAAM,EAAEpD,aAAc;MACtBqD,WAAW,EAAEpD,kBAAmB;MAChCqD,QAAQ,EAAEpD,eAAgB;MAC1BqD,UAAU,EAAEpD,iBAAkB;MAC9BtB,QAAQ,EAAEA,CAAA,KAAMuB,eAAe,CAACxB,OAAO,CAACzD,EAAE,CAAE;MAC5C2E,cAAc,EAAEA,CAAA,KAAMA,cAAc,CAAClB,OAAO,CAAE;MAC9CmB,kBAAkB,EAAEA,CAAA,KAAMA,kBAAkB,CAACnB,OAAO,CAACzD,EAAE,CAAE;MACzDqI,SAAS,EAAE5E,OAAO,CAAC8D,OAAO,KAAK;IAAM;MAAA3D,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxC,CACJ;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAACmB,GAAA,CAnQWjB,OAAO;EAAA,QA8BwB1G,OAAO,EASpBC,OAAO;AAAA;AAAA8K,GAAA,GAvCzBrE,OAAO;AAAA,IAAAD,EAAA,EAAAsE,GAAA;AAAAC,YAAA,CAAAvE,EAAA;AAAAuE,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}