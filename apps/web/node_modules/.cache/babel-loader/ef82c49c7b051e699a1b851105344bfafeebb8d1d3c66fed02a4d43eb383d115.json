{"ast":null,"code":"// web/src/utils/pageUtils.js\n\nexport const CSS_VARIABLES = {\n  '--primary': '#6366f1',\n  '--primary-dark': '#4f46e5',\n  '--primary-light': '#a5b4fc',\n  '--secondary': '#f1f5f9',\n  '--accent': '#06b6d4',\n  '--success': '#10b981',\n  '--warning': '#f59e0b',\n  '--danger': '#ef4444',\n  '--dark': '#1e293b',\n  '--light': '#f8fafc',\n  '--white': '#ffffff',\n  '--text-primary': '#334155',\n  '--text-secondary': '#64748b',\n  '--text-light': '#94a3b8',\n  '--text-inverse': '#ffffff',\n  '--border-color': '#e2e8f0',\n  '--border-radius': '8px',\n  '--border-radius-lg': '12px',\n  '--border-radius-xl': '16px',\n  '--shadow-sm': '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\n  '--shadow': '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n  '--shadow-lg': '0 10px 15px -3px rgba(0, 0, 0, 0.1)',\n  '--shadow-xl': '0 20px 25px -5px rgba(0, 0, 0, 0.1)',\n  '--canvas-desktop': '1200px'\n};\n\n// Hàm parse style từ chuỗi CSS\nexport const parseStyles = styleString => {\n  if (!styleString) return {};\n  return styleString.split(';').reduce((acc, style) => {\n    const [key, value] = style.split(':').map(s => s.trim());\n    if (key && value) {\n      const camelKey = key.replace(/-([a-z])/g, g => g[1].toUpperCase());\n      acc[camelKey] = value;\n    }\n    return acc;\n  }, {});\n};\n\n// Hàm parse data attribute từ HTML\nconst parseDataAttribute = (node, attr) => {\n  try {\n    const data = node.getAttribute(attr);\n    return data ? JSON.parse(data) : {};\n  } catch (error) {\n    console.error(`Error parsing ${attr}:`, error);\n    return {};\n  }\n};\n\n// Hàm parse HTML thành pageData\nexport const parseHTMLToPageData = html => {\n  try {\n    console.log('Parsing HTML from S3:', html);\n\n    // Sử dụng DOMParser để parse HTML trong browser\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    const pageContainer = doc.querySelector('.lpb-canvas') || doc.querySelector('.page-container');\n\n    // Fallback nếu không tìm thấy container\n    if (!pageContainer) {\n      console.warn('No .lpb-canvas or .page-container found in HTML');\n      // Fallback cho toast nếu chưa định nghĩa\n      if (typeof toast !== 'undefined') {\n        toast.warn('HTML không chứa .lpb-canvas hoặc .page-container. Khởi tạo trang trống.');\n      } else {\n        console.warn('Toast not defined, falling back to console');\n      }\n      return {\n        canvas: {\n          width: parseInt(CSS_VARIABLES['--canvas-desktop']) || 1200,\n          background: CSS_VARIABLES['--white'] || '#ffffff'\n        },\n        elements: [],\n        visiblePopups: []\n      };\n    }\n\n    // Lấy dữ liệu canvas\n    const canvasStyles = parseStyles(pageContainer.getAttribute('style') || '');\n    const canvasData = {\n      width: parseFloat(canvasStyles.width) || parseInt(CSS_VARIABLES['--canvas-desktop']) || 1200,\n      background: canvasStyles.background || CSS_VARIABLES['--white'] || '#ffffff'\n    };\n    const elements = [];\n    const visiblePopups = [];\n\n    // Duyệt qua các section và canvas elements\n    pageContainer.querySelectorAll('.lpb-element, .lpb-section, .lpb-popup').forEach((elementNode, index) => {\n      const type = elementNode.getAttribute('data-type') || 'section';\n      const id = elementNode.getAttribute('id') || `element-${index}-${Date.now()}`;\n      const styles = parseStyles(elementNode.getAttribute('style') || '');\n      const componentData = parseDataAttribute(elementNode, 'data-component-data') || {};\n\n      // Lấy vị trí\n      const position = {\n        desktop: {\n          x: parseFloat(styles.left) || 0,\n          y: parseFloat(styles.top) || 0\n        },\n        tablet: {\n          x: parseFloat(styles.left) || 0,\n          y: parseFloat(styles.top) || 0\n        },\n        mobile: {\n          x: parseFloat(styles.left) || 0,\n          y: parseFloat(styles.top) || 0\n        }\n      };\n\n      // Lấy kích thước\n      const size = {\n        width: parseFloat(styles.width) || (type === 'section' ? 800 : 200),\n        height: parseFloat(styles.height) || (type === 'section' ? 600 : 50)\n      };\n      const children = [];\n\n      // Xử lý popup\n      if (type === 'popup') {\n        visiblePopups.push(id);\n        elementNode.querySelectorAll('.lpb-element').forEach((child, childIndex) => {\n          const childType = child.getAttribute('data-type') || child.tagName.toLowerCase();\n          const childId = `child-${index}-${childIndex}-${Date.now()}`;\n          const childStyles = parseStyles(child.getAttribute('style') || '');\n          const childComponentData = parseDataAttribute(child, 'data-component-data') || {};\n          const childPosition = {\n            desktop: {\n              x: parseFloat(childStyles.left) || 0,\n              y: parseFloat(childStyles.top) || 0\n            },\n            tablet: {\n              x: parseFloat(childStyles.left) || 0,\n              y: parseFloat(childStyles.top) || 0\n            },\n            mobile: {\n              x: parseFloat(childStyles.left) || 0,\n              y: parseFloat(childStyles.top) || 0\n            }\n          };\n          const childSize = {\n            width: parseFloat(childStyles.width) || 200,\n            height: parseFloat(childStyles.height) || 50\n          };\n          children.push({\n            id: childId,\n            type: childType,\n            componentData: {\n              content: child.textContent.trim() || '',\n              ...childComponentData\n            },\n            styles: childStyles,\n            position: childPosition,\n            size: childSize\n          });\n        });\n      } else {\n        // Xử lý children trong section hoặc container\n        const containerNode = elementNode.querySelector('.ladi-container') || elementNode;\n        containerNode.querySelectorAll('.lpb-element').forEach((child, childIndex) => {\n          const childType = child.getAttribute('data-type') || child.tagName.toLowerCase();\n          const childId = `child-${index}-${childIndex}-${Date.now()}`;\n          const childStyles = parseStyles(child.getAttribute('style') || '');\n          const childComponentData = parseDataAttribute(child, 'data-component-data') || {};\n          const childPosition = {\n            desktop: {\n              x: parseFloat(childStyles.left) || 0,\n              y: parseFloat(childStyles.top) || 0\n            },\n            tablet: {\n              x: parseFloat(childStyles.left) || 0,\n              y: parseFloat(childStyles.top) || 0\n            },\n            mobile: {\n              x: parseFloat(childStyles.left) || 0,\n              y: parseFloat(childStyles.top) || 0\n            }\n          };\n          const childSize = {\n            width: parseFloat(childStyles.width) || 200,\n            height: parseFloat(childStyles.height) || 50\n          };\n          switch (childType) {\n            case 'heading':\n            case 'h1':\n            case 'h2':\n            case 'h3':\n            case 'h4':\n            case 'h5':\n            case 'h6':\n              children.push({\n                id: childId,\n                type: 'heading',\n                componentData: {\n                  content: child.textContent.trim() || 'Tiêu đề',\n                  level: childType,\n                  ...childComponentData\n                },\n                styles: {\n                  fontSize: childStyles.fontSize || '1.5rem',\n                  color: childStyles.color || CSS_VARIABLES['--text-primary'] || '#1f2937',\n                  ...childStyles\n                },\n                position: childPosition,\n                size: childSize\n              });\n              break;\n            case 'paragraph':\n            case 'p':\n              children.push({\n                id: childId,\n                type: 'paragraph',\n                componentData: {\n                  content: child.textContent.trim() || 'Đoạn văn',\n                  ...childComponentData\n                },\n                styles: {\n                  fontSize: childStyles.fontSize || '1rem',\n                  color: childStyles.color || CSS_VARIABLES['--text-secondary'] || '#4b5563',\n                  ...childStyles\n                },\n                position: childPosition,\n                size: childSize\n              });\n              break;\n            case 'button':\n              children.push({\n                id: childId,\n                type: 'button',\n                componentData: {\n                  content: child.textContent.trim() || 'Nút',\n                  ...childComponentData\n                },\n                styles: {\n                  background: childStyles.background || CSS_VARIABLES['--primary'] || '#2563eb',\n                  color: childStyles.color || CSS_VARIABLES['--text-inverse'] || '#ffffff',\n                  borderRadius: childStyles.borderRadius || CSS_VARIABLES['--border-radius'] || '8px',\n                  padding: childStyles.padding || '8px 16px',\n                  ...childStyles\n                },\n                position: childPosition,\n                size: childSize\n              });\n              break;\n            default:\n              console.warn(`Unknown child type: ${childType}`);\n              break;\n          }\n        });\n      }\n      elements.push({\n        id,\n        type,\n        componentData: {\n          ...componentData,\n          backgroundColor: styles.backgroundColor || componentData.backgroundColor || '#ffffff'\n        },\n        position,\n        size,\n        styles: {\n          ...styles,\n          borderRadius: styles.borderRadius || CSS_VARIABLES['--border-radius'] || '8px',\n          boxShadow: styles.boxShadow || CSS_VARIABLES['--shadow'] || 'none',\n          zIndex: styles.zIndex || (type === 'section' ? 1 : 10)\n        },\n        children\n      });\n    });\n    const pageData = {\n      canvas: canvasData,\n      elements,\n      visiblePopups\n    };\n    console.log('Parsed pageData:', JSON.stringify(pageData, null, 2));\n    return pageData;\n  } catch (error) {\n    console.error('Error parsing HTML:', error);\n    if (typeof toast !== 'undefined') {\n      toast.error('Lỗi khi phân tích nội dung trang: ' + error.message);\n    } else {\n      console.error('Toast not defined, error:', error.message);\n    }\n    return {\n      canvas: {\n        width: parseInt(CSS_VARIABLES['--canvas-desktop']) || 1200,\n        background: CSS_VARIABLES['--white'] || '#ffffff'\n      },\n      elements: [],\n      visiblePopups: []\n    };\n  }\n};\n\n// Hàm render pageData thành HTML tĩnh\nexport const renderStaticHTML = pageData => {\n  var _pageData$canvas, _pageData$canvas2;\n  console.log('Rendering static HTML with pageData:', JSON.stringify(pageData, null, 2));\n  const canvasWidth = ((_pageData$canvas = pageData.canvas) === null || _pageData$canvas === void 0 ? void 0 : _pageData$canvas.width) || '1200px';\n  const canvasBackground = ((_pageData$canvas2 = pageData.canvas) === null || _pageData$canvas2 === void 0 ? void 0 : _pageData$canvas2.background) || '#ffffff';\n  let html = `\n<!DOCTYPE html>\n<html lang=\"vi\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Landing Page</title>\n    <style>\n        :root {\n            --primary: ${CSS_VARIABLES['--primary']};\n            --primary-dark: ${CSS_VARIABLES['--primary-dark']};\n            --primary-light: ${CSS_VARIABLES['--primary-light']};\n            --secondary: ${CSS_VARIABLES['--secondary']};\n            --accent: ${CSS_VARIABLES['--accent']};\n            --success: ${CSS_VARIABLES['--success']};\n            --warning: ${CSS_VARIABLES['--warning']};\n            --danger: ${CSS_VARIABLES['--danger']};\n            --dark: ${CSS_VARIABLES['--dark']};\n            --light: ${CSS_VARIABLES['--light']};\n            --white: ${CSS_VARIABLES['--white']};\n            --text-primary: ${CSS_VARIABLES['--text-primary']};\n            --text-secondary: ${CSS_VARIABLES['--text-secondary']};\n            --text-light: ${CSS_VARIABLES['--text-light']};\n            --text-inverse: ${CSS_VARIABLES['--text-inverse']};\n            --border-color: ${CSS_VARIABLES['--border-color']};\n            --border-radius: ${CSS_VARIABLES['--border-radius']};\n            --border-radius-lg: ${CSS_VARIABLES['--border-radius-lg']};\n            --border-radius-xl: ${CSS_VARIABLES['--border-radius-xl']};\n            --shadow-sm: ${CSS_VARIABLES['--shadow-sm']};\n            --shadow: ${CSS_VARIABLES['--shadow']};\n            --shadow-lg: ${CSS_VARIABLES['--shadow-lg']};\n            --shadow-xl: ${CSS_VARIABLES['--shadow-xl']};\n            --canvas-desktop: ${CSS_VARIABLES['--canvas-desktop']};\n            --transition: all 0.3s ease;\n        }\n        body {\n            font-family: 'Inter', Arial, sans-serif;\n            margin: 0;\n            padding: 0;\n            background: ${canvasBackground};\n            min-height: 100vh;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        .lpb-canvas {\n            position: relative;\n            width: ${canvasWidth};\n            min-height: 600px;\n            margin: 0 auto;\n            background: ${canvasBackground};\n            border-radius: 20px;\n            padding: 60px;\n            box-shadow: var(--shadow);\n            text-align: center;\n        }\n        .lpb-section {\n            width: 100%;\n            position: relative;\n        }\n        .ladi-section-background {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            z-index: 0;\n        }\n        .ladi-container {\n            position: relative;\n            z-index: 1;\n            padding: 20px;\n        }\n        .lpb-heading {\n            font-size: 48px;\n            font-weight: 700;\n            color: var(--text-primary);\n            margin-bottom: 20px;\n        }\n        .lpb-paragraph {\n            font-size: 18px;\n            line-height: 1.6;\n            color: var(--text-secondary);\n            margin-bottom: 20px;\n        }\n        .lpb-button {\n            padding: 12px 24px;\n            background: var(--primary);\n            color: var(--text-inverse);\n            border: none;\n            border-radius: var(--border-radius);\n            cursor: pointer;\n            font-size: 16px;\n            font-weight: 600;\n            transition: var(--transition);\n        }\n        .lpb-button:hover {\n            background: var(--primary-dark);\n            transform: translateY(-2px);\n        }\n        .lpb-button:active {\n            transform: translateY(0);\n        }\n        .lpb-popup {\n            display: none;\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            z-index: 9999;\n            background: var(--white);\n            border-radius: var(--border-radius);\n            box-shadow: var(--shadow);\n        }\n        .lpb-popup.visible {\n            display: block;\n        }\n        .lpb-popup-overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(0, 0, 0, 0.5);\n            z-index: 9998;\n        }\n        .lpb-popup-content {\n            padding: 30px;\n            max-width: 600px;\n            max-height: 80vh;\n            overflow-y: auto;\n        }\n        .lpb-popup-close {\n            position: absolute;\n            top: 10px;\n            right: 10px;\n            background: none;\n            border: none;\n            font-size: 1.2rem;\n            cursor: pointer;\n        }\n        @media (max-width: 768px) {\n            .lpb-canvas {\n                width: 100%;\n                padding: 20px;\n            }\n            .lpb-heading {\n                font-size: 32px;\n            }\n            .lpb-paragraph {\n                font-size: 16px;\n            }\n        }\n    </style>\n    <script>\n        window.LPB = {\n            openPopup(popupId) {\n                const popup = document.getElementById(popupId);\n                if (popup) {\n                    popup.classList.add('visible');\n                    document.body.style.overflow = 'hidden';\n                }\n            },\n            closePopup(popupId) {\n                const popup = document.getElementById(popupId);\n                if (popup) {\n                    popup.classList.remove('visible');\n                    document.body.style.overflow = '';\n                }\n            },\n            handleButtonClick(eventType, data, elementId) {\n                if (eventType === 'popup') {\n                    this.openPopup(data.popupId);\n                }\n            }\n        };\n        document.addEventListener('DOMContentLoaded', () => {\n            document.querySelectorAll('.lpb-popup').forEach(popup => {\n                const popupId = popup.id;\n                const closeBtn = popup.querySelector('.lpb-popup-close');\n                if (closeBtn) {\n                    closeBtn.addEventListener('click', () => window.LPB.closePopup(popupId));\n                }\n            });\n        });\n    </script>\n</head>\n<body>\n    <div class=\"lpb-canvas\">\n`;\n  const renderElement = (element, isChild = false) => {\n    var _componentData$events, _componentData$events2, _componentData$events3, _componentData$events4;\n    const {\n      id,\n      type,\n      componentData = {},\n      position = {},\n      size = {},\n      styles = {},\n      children = []\n    } = element;\n    const positionStyles = position.desktop ? `left: ${position.desktop.x || 0}px; top: ${position.desktop.y || 0}px;` : '';\n    const sizeStyles = size ? `width: ${size.width || 200}px; height: ${size.height || 50}px;` : '';\n    const cssStyles = styles ? Object.entries(styles).map(([key, value]) => `${key}: ${value};`).join(' ') : '';\n    const elementClass = isChild ? `lpb-element lpb-${type}` : `lpb-element lpb-${type}`;\n    const elementPosition = isChild ? `position: relative; ${positionStyles}` : `position: absolute; ${positionStyles}`;\n    let elementHtml = `<div id=\"${id}\" class=\"${elementClass}\" style=\"${elementPosition} ${sizeStyles} ${cssStyles}\" data-type=\"${type}\" data-component-data='${JSON.stringify(componentData)}'>`;\n    switch (type) {\n      case 'section':\n        elementHtml += `\n                    <div class=\"ladi-section\" style=\"width: 100%; height: 100%; position: relative;\">\n                        <div class=\"ladi-section-background\" style=\"background-color: ${componentData.backgroundColor || '#ffffff'};\"></div>\n                        <div class=\"ladi-container\" style=\"position: relative; z-index: 1; padding: ${componentData.padding || '20px'};\">\n                `;\n        children.forEach(child => {\n          elementHtml += renderElement(child, true);\n        });\n        elementHtml += `</div></div>`;\n        break;\n      case 'heading':\n        const headingLevel = componentData.level || 'h1';\n        elementHtml += `<${headingLevel} style=\"font-size: ${componentData.fontSize || '48px'}; color: ${componentData.color || '#1f2937'}; font-weight: ${componentData.fontWeight || '700'}; margin-bottom: 20px;\">${componentData.content || 'Tiêu đề'}</${headingLevel}>`;\n        break;\n      case 'paragraph':\n        elementHtml += `<p style=\"font-size: ${componentData.fontSize || '18px'}; color: ${componentData.color || '#4b5563'}; line-height: 1.6; margin-bottom: 20px;\">${componentData.content || 'Đoạn văn'}</p>`;\n        break;\n      case 'button':\n        elementHtml += `<button style=\"padding: ${componentData.padding || '12px 24px'}; background: ${componentData.background || '#2563eb'}; color: ${componentData.color || '#ffffff'}; border: none; border-radius: ${componentData.borderRadius || '8px'}; cursor: pointer; font-size: ${componentData.fontSize || '16px'}; font-weight: 600; transition: all 0.3s ease;\" onclick=\"LPB.handleButtonClick('${((_componentData$events = componentData.events) === null || _componentData$events === void 0 ? void 0 : (_componentData$events2 = _componentData$events.onClick) === null || _componentData$events2 === void 0 ? void 0 : _componentData$events2.type) || ''}', ${JSON.stringify(((_componentData$events3 = componentData.events) === null || _componentData$events3 === void 0 ? void 0 : (_componentData$events4 = _componentData$events3.onClick) === null || _componentData$events4 === void 0 ? void 0 : _componentData$events4.params) || {})}, '${id}')\">${componentData.content || 'Nút'}</button>`;\n        break;\n      case 'popup':\n        elementHtml += `\n                    <div class=\"lpb-popup\" style=\"display: none;\">\n                        <div class=\"lpb-popup-overlay\" onclick=\"LPB.closePopup('${id}')\"></div>\n                        <div class=\"lpb-popup-content\" style=\"padding: ${componentData.padding || '30px'};\">\n                            ${children.map(child => renderElement(child, true)).join('')}\n                            <button class=\"lpb-popup-close\">✕</button>\n                        </div>\n                    </div>`;\n        break;\n      default:\n        elementHtml += `<div>Unknown type: ${type}</div>`;\n        break;\n    }\n    elementHtml += `</div>`;\n    return elementHtml;\n  };\n  pageData.elements.forEach(element => {\n    html += renderElement(element);\n  });\n  html += `\n    </div>\n</body>\n</html>`;\n  return html;\n};","map":{"version":3,"names":["CSS_VARIABLES","parseStyles","styleString","split","reduce","acc","style","key","value","map","s","trim","camelKey","replace","g","toUpperCase","parseDataAttribute","node","attr","data","getAttribute","JSON","parse","error","console","parseHTMLToPageData","html","log","parser","DOMParser","doc","parseFromString","pageContainer","querySelector","warn","toast","canvas","width","parseInt","background","elements","visiblePopups","canvasStyles","canvasData","parseFloat","querySelectorAll","forEach","elementNode","index","type","id","Date","now","styles","componentData","position","desktop","x","left","y","top","tablet","mobile","size","height","children","push","child","childIndex","childType","tagName","toLowerCase","childId","childStyles","childComponentData","childPosition","childSize","content","textContent","containerNode","level","fontSize","color","borderRadius","padding","backgroundColor","boxShadow","zIndex","pageData","stringify","message","renderStaticHTML","_pageData$canvas","_pageData$canvas2","canvasWidth","canvasBackground","renderElement","element","isChild","_componentData$events","_componentData$events2","_componentData$events3","_componentData$events4","positionStyles","sizeStyles","cssStyles","Object","entries","join","elementClass","elementPosition","elementHtml","headingLevel","fontWeight","events","onClick","params"],"sources":["F:/landinghub-iconic/apps/web/src/utils/pageUtils.js"],"sourcesContent":["// web/src/utils/pageUtils.js\r\n\r\nexport const CSS_VARIABLES = {\r\n    '--primary': '#6366f1',\r\n    '--primary-dark': '#4f46e5',\r\n    '--primary-light': '#a5b4fc',\r\n    '--secondary': '#f1f5f9',\r\n    '--accent': '#06b6d4',\r\n    '--success': '#10b981',\r\n    '--warning': '#f59e0b',\r\n    '--danger': '#ef4444',\r\n    '--dark': '#1e293b',\r\n    '--light': '#f8fafc',\r\n    '--white': '#ffffff',\r\n    '--text-primary': '#334155',\r\n    '--text-secondary': '#64748b',\r\n    '--text-light': '#94a3b8',\r\n    '--text-inverse': '#ffffff',\r\n    '--border-color': '#e2e8f0',\r\n    '--border-radius': '8px',\r\n    '--border-radius-lg': '12px',\r\n    '--border-radius-xl': '16px',\r\n    '--shadow-sm': '0 1px 2px 0 rgba(0, 0, 0, 0.05)',\r\n    '--shadow': '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n    '--shadow-lg': '0 10px 15px -3px rgba(0, 0, 0, 0.1)',\r\n    '--shadow-xl': '0 20px 25px -5px rgba(0, 0, 0, 0.1)',\r\n    '--canvas-desktop': '1200px',\r\n};\r\n\r\n// Hàm parse style từ chuỗi CSS\r\nexport const parseStyles = (styleString) => {\r\n    if (!styleString) return {};\r\n    return styleString.split(';').reduce((acc, style) => {\r\n        const [key, value] = style.split(':').map(s => s.trim());\r\n        if (key && value) {\r\n            const camelKey = key.replace(/-([a-z])/g, (g) => g[1].toUpperCase());\r\n            acc[camelKey] = value;\r\n        }\r\n        return acc;\r\n    }, {});\r\n};\r\n\r\n// Hàm parse data attribute từ HTML\r\nconst parseDataAttribute = (node, attr) => {\r\n    try {\r\n        const data = node.getAttribute(attr);\r\n        return data ? JSON.parse(data) : {};\r\n    } catch (error) {\r\n        console.error(`Error parsing ${attr}:`, error);\r\n        return {};\r\n    }\r\n};\r\n\r\n// Hàm parse HTML thành pageData\r\nexport const parseHTMLToPageData = (html) => {\r\n    try {\r\n        console.log('Parsing HTML from S3:', html);\r\n\r\n        // Sử dụng DOMParser để parse HTML trong browser\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(html, 'text/html');\r\n        const pageContainer = doc.querySelector('.lpb-canvas') || doc.querySelector('.page-container');\r\n\r\n        // Fallback nếu không tìm thấy container\r\n        if (!pageContainer) {\r\n            console.warn('No .lpb-canvas or .page-container found in HTML');\r\n            // Fallback cho toast nếu chưa định nghĩa\r\n            if (typeof toast !== 'undefined') {\r\n                toast.warn('HTML không chứa .lpb-canvas hoặc .page-container. Khởi tạo trang trống.');\r\n            } else {\r\n                console.warn('Toast not defined, falling back to console');\r\n            }\r\n            return {\r\n                canvas: {\r\n                    width: parseInt(CSS_VARIABLES['--canvas-desktop']) || 1200,\r\n                    background: CSS_VARIABLES['--white'] || '#ffffff',\r\n                },\r\n                elements: [],\r\n                visiblePopups: [],\r\n            };\r\n        }\r\n\r\n        // Lấy dữ liệu canvas\r\n        const canvasStyles = parseStyles(pageContainer.getAttribute('style') || '');\r\n        const canvasData = {\r\n            width: parseFloat(canvasStyles.width) || parseInt(CSS_VARIABLES['--canvas-desktop']) || 1200,\r\n            background: canvasStyles.background || CSS_VARIABLES['--white'] || '#ffffff',\r\n        };\r\n\r\n        const elements = [];\r\n        const visiblePopups = [];\r\n\r\n        // Duyệt qua các section và canvas elements\r\n        pageContainer.querySelectorAll('.lpb-element, .lpb-section, .lpb-popup').forEach((elementNode, index) => {\r\n            const type = elementNode.getAttribute('data-type') || 'section';\r\n            const id = elementNode.getAttribute('id') || `element-${index}-${Date.now()}`;\r\n            const styles = parseStyles(elementNode.getAttribute('style') || '');\r\n            const componentData = parseDataAttribute(elementNode, 'data-component-data') || {};\r\n\r\n            // Lấy vị trí\r\n            const position = {\r\n                desktop: {\r\n                    x: parseFloat(styles.left) || 0,\r\n                    y: parseFloat(styles.top) || 0,\r\n                },\r\n                tablet: {\r\n                    x: parseFloat(styles.left) || 0,\r\n                    y: parseFloat(styles.top) || 0,\r\n                },\r\n                mobile: {\r\n                    x: parseFloat(styles.left) || 0,\r\n                    y: parseFloat(styles.top) || 0,\r\n                },\r\n            };\r\n\r\n            // Lấy kích thước\r\n            const size = {\r\n                width: parseFloat(styles.width) || (type === 'section' ? 800 : 200),\r\n                height: parseFloat(styles.height) || (type === 'section' ? 600 : 50),\r\n            };\r\n\r\n            const children = [];\r\n\r\n            // Xử lý popup\r\n            if (type === 'popup') {\r\n                visiblePopups.push(id);\r\n                elementNode.querySelectorAll('.lpb-element').forEach((child, childIndex) => {\r\n                    const childType = child.getAttribute('data-type') || child.tagName.toLowerCase();\r\n                    const childId = `child-${index}-${childIndex}-${Date.now()}`;\r\n                    const childStyles = parseStyles(child.getAttribute('style') || '');\r\n                    const childComponentData = parseDataAttribute(child, 'data-component-data') || {};\r\n\r\n                    const childPosition = {\r\n                        desktop: { x: parseFloat(childStyles.left) || 0, y: parseFloat(childStyles.top) || 0 },\r\n                        tablet: { x: parseFloat(childStyles.left) || 0, y: parseFloat(childStyles.top) || 0 },\r\n                        mobile: { x: parseFloat(childStyles.left) || 0, y: parseFloat(childStyles.top) || 0 },\r\n                    };\r\n\r\n                    const childSize = {\r\n                        width: parseFloat(childStyles.width) || 200,\r\n                        height: parseFloat(childStyles.height) || 50,\r\n                    };\r\n\r\n                    children.push({\r\n                        id: childId,\r\n                        type: childType,\r\n                        componentData: {\r\n                            content: child.textContent.trim() || '',\r\n                            ...childComponentData,\r\n                        },\r\n                        styles: childStyles,\r\n                        position: childPosition,\r\n                        size: childSize,\r\n                    });\r\n                });\r\n            } else {\r\n                // Xử lý children trong section hoặc container\r\n                const containerNode = elementNode.querySelector('.ladi-container') || elementNode;\r\n                containerNode.querySelectorAll('.lpb-element').forEach((child, childIndex) => {\r\n                    const childType = child.getAttribute('data-type') || child.tagName.toLowerCase();\r\n                    const childId = `child-${index}-${childIndex}-${Date.now()}`;\r\n                    const childStyles = parseStyles(child.getAttribute('style') || '');\r\n                    const childComponentData = parseDataAttribute(child, 'data-component-data') || {};\r\n\r\n                    const childPosition = {\r\n                        desktop: { x: parseFloat(childStyles.left) || 0, y: parseFloat(childStyles.top) || 0 },\r\n                        tablet: { x: parseFloat(childStyles.left) || 0, y: parseFloat(childStyles.top) || 0 },\r\n                        mobile: { x: parseFloat(childStyles.left) || 0, y: parseFloat(childStyles.top) || 0 },\r\n                    };\r\n\r\n                    const childSize = {\r\n                        width: parseFloat(childStyles.width) || 200,\r\n                        height: parseFloat(childStyles.height) || 50,\r\n                    };\r\n\r\n                    switch (childType) {\r\n                        case 'heading':\r\n                        case 'h1':\r\n                        case 'h2':\r\n                        case 'h3':\r\n                        case 'h4':\r\n                        case 'h5':\r\n                        case 'h6':\r\n                            children.push({\r\n                                id: childId,\r\n                                type: 'heading',\r\n                                componentData: {\r\n                                    content: child.textContent.trim() || 'Tiêu đề',\r\n                                    level: childType,\r\n                                    ...childComponentData,\r\n                                },\r\n                                styles: {\r\n                                    fontSize: childStyles.fontSize || '1.5rem',\r\n                                    color: childStyles.color || CSS_VARIABLES['--text-primary'] || '#1f2937',\r\n                                    ...childStyles,\r\n                                },\r\n                                position: childPosition,\r\n                                size: childSize,\r\n                            });\r\n                            break;\r\n                        case 'paragraph':\r\n                        case 'p':\r\n                            children.push({\r\n                                id: childId,\r\n                                type: 'paragraph',\r\n                                componentData: {\r\n                                    content: child.textContent.trim() || 'Đoạn văn',\r\n                                    ...childComponentData,\r\n                                },\r\n                                styles: {\r\n                                    fontSize: childStyles.fontSize || '1rem',\r\n                                    color: childStyles.color || CSS_VARIABLES['--text-secondary'] || '#4b5563',\r\n                                    ...childStyles,\r\n                                },\r\n                                position: childPosition,\r\n                                size: childSize,\r\n                            });\r\n                            break;\r\n                        case 'button':\r\n                            children.push({\r\n                                id: childId,\r\n                                type: 'button',\r\n                                componentData: {\r\n                                    content: child.textContent.trim() || 'Nút',\r\n                                    ...childComponentData,\r\n                                },\r\n                                styles: {\r\n                                    background: childStyles.background || CSS_VARIABLES['--primary'] || '#2563eb',\r\n                                    color: childStyles.color || CSS_VARIABLES['--text-inverse'] || '#ffffff',\r\n                                    borderRadius: childStyles.borderRadius || CSS_VARIABLES['--border-radius'] || '8px',\r\n                                    padding: childStyles.padding || '8px 16px',\r\n                                    ...childStyles,\r\n                                },\r\n                                position: childPosition,\r\n                                size: childSize,\r\n                            });\r\n                            break;\r\n                        default:\r\n                            console.warn(`Unknown child type: ${childType}`);\r\n                            break;\r\n                    }\r\n                });\r\n            }\r\n\r\n            elements.push({\r\n                id,\r\n                type,\r\n                componentData: {\r\n                    ...componentData,\r\n                    backgroundColor: styles.backgroundColor || componentData.backgroundColor || '#ffffff',\r\n                },\r\n                position,\r\n                size,\r\n                styles: {\r\n                    ...styles,\r\n                    borderRadius: styles.borderRadius || CSS_VARIABLES['--border-radius'] || '8px',\r\n                    boxShadow: styles.boxShadow || CSS_VARIABLES['--shadow'] || 'none',\r\n                    zIndex: styles.zIndex || (type === 'section' ? 1 : 10),\r\n                },\r\n                children,\r\n            });\r\n        });\r\n\r\n        const pageData = { canvas: canvasData, elements, visiblePopups };\r\n        console.log('Parsed pageData:', JSON.stringify(pageData, null, 2));\r\n        return pageData;\r\n    } catch (error) {\r\n        console.error('Error parsing HTML:', error);\r\n        if (typeof toast !== 'undefined') {\r\n            toast.error('Lỗi khi phân tích nội dung trang: ' + error.message);\r\n        } else {\r\n            console.error('Toast not defined, error:', error.message);\r\n        }\r\n        return {\r\n            canvas: {\r\n                width: parseInt(CSS_VARIABLES['--canvas-desktop']) || 1200,\r\n                background: CSS_VARIABLES['--white'] || '#ffffff',\r\n            },\r\n            elements: [],\r\n            visiblePopups: [],\r\n        };\r\n    }\r\n};\r\n\r\n// Hàm render pageData thành HTML tĩnh\r\nexport const renderStaticHTML = (pageData) => {\r\n    console.log('Rendering static HTML with pageData:', JSON.stringify(pageData, null, 2));\r\n\r\n    const canvasWidth = pageData.canvas?.width || '1200px';\r\n    const canvasBackground = pageData.canvas?.background || '#ffffff';\r\n\r\n    let html = `\r\n<!DOCTYPE html>\r\n<html lang=\"vi\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Landing Page</title>\r\n    <style>\r\n        :root {\r\n            --primary: ${CSS_VARIABLES['--primary']};\r\n            --primary-dark: ${CSS_VARIABLES['--primary-dark']};\r\n            --primary-light: ${CSS_VARIABLES['--primary-light']};\r\n            --secondary: ${CSS_VARIABLES['--secondary']};\r\n            --accent: ${CSS_VARIABLES['--accent']};\r\n            --success: ${CSS_VARIABLES['--success']};\r\n            --warning: ${CSS_VARIABLES['--warning']};\r\n            --danger: ${CSS_VARIABLES['--danger']};\r\n            --dark: ${CSS_VARIABLES['--dark']};\r\n            --light: ${CSS_VARIABLES['--light']};\r\n            --white: ${CSS_VARIABLES['--white']};\r\n            --text-primary: ${CSS_VARIABLES['--text-primary']};\r\n            --text-secondary: ${CSS_VARIABLES['--text-secondary']};\r\n            --text-light: ${CSS_VARIABLES['--text-light']};\r\n            --text-inverse: ${CSS_VARIABLES['--text-inverse']};\r\n            --border-color: ${CSS_VARIABLES['--border-color']};\r\n            --border-radius: ${CSS_VARIABLES['--border-radius']};\r\n            --border-radius-lg: ${CSS_VARIABLES['--border-radius-lg']};\r\n            --border-radius-xl: ${CSS_VARIABLES['--border-radius-xl']};\r\n            --shadow-sm: ${CSS_VARIABLES['--shadow-sm']};\r\n            --shadow: ${CSS_VARIABLES['--shadow']};\r\n            --shadow-lg: ${CSS_VARIABLES['--shadow-lg']};\r\n            --shadow-xl: ${CSS_VARIABLES['--shadow-xl']};\r\n            --canvas-desktop: ${CSS_VARIABLES['--canvas-desktop']};\r\n            --transition: all 0.3s ease;\r\n        }\r\n        body {\r\n            font-family: 'Inter', Arial, sans-serif;\r\n            margin: 0;\r\n            padding: 0;\r\n            background: ${canvasBackground};\r\n            min-height: 100vh;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: center;\r\n        }\r\n        .lpb-canvas {\r\n            position: relative;\r\n            width: ${canvasWidth};\r\n            min-height: 600px;\r\n            margin: 0 auto;\r\n            background: ${canvasBackground};\r\n            border-radius: 20px;\r\n            padding: 60px;\r\n            box-shadow: var(--shadow);\r\n            text-align: center;\r\n        }\r\n        .lpb-section {\r\n            width: 100%;\r\n            position: relative;\r\n        }\r\n        .ladi-section-background {\r\n            position: absolute;\r\n            top: 0;\r\n            left: 0;\r\n            width: 100%;\r\n            height: 100%;\r\n            z-index: 0;\r\n        }\r\n        .ladi-container {\r\n            position: relative;\r\n            z-index: 1;\r\n            padding: 20px;\r\n        }\r\n        .lpb-heading {\r\n            font-size: 48px;\r\n            font-weight: 700;\r\n            color: var(--text-primary);\r\n            margin-bottom: 20px;\r\n        }\r\n        .lpb-paragraph {\r\n            font-size: 18px;\r\n            line-height: 1.6;\r\n            color: var(--text-secondary);\r\n            margin-bottom: 20px;\r\n        }\r\n        .lpb-button {\r\n            padding: 12px 24px;\r\n            background: var(--primary);\r\n            color: var(--text-inverse);\r\n            border: none;\r\n            border-radius: var(--border-radius);\r\n            cursor: pointer;\r\n            font-size: 16px;\r\n            font-weight: 600;\r\n            transition: var(--transition);\r\n        }\r\n        .lpb-button:hover {\r\n            background: var(--primary-dark);\r\n            transform: translateY(-2px);\r\n        }\r\n        .lpb-button:active {\r\n            transform: translateY(0);\r\n        }\r\n        .lpb-popup {\r\n            display: none;\r\n            position: fixed;\r\n            top: 50%;\r\n            left: 50%;\r\n            transform: translate(-50%, -50%);\r\n            z-index: 9999;\r\n            background: var(--white);\r\n            border-radius: var(--border-radius);\r\n            box-shadow: var(--shadow);\r\n        }\r\n        .lpb-popup.visible {\r\n            display: block;\r\n        }\r\n        .lpb-popup-overlay {\r\n            position: fixed;\r\n            top: 0;\r\n            left: 0;\r\n            right: 0;\r\n            bottom: 0;\r\n            background: rgba(0, 0, 0, 0.5);\r\n            z-index: 9998;\r\n        }\r\n        .lpb-popup-content {\r\n            padding: 30px;\r\n            max-width: 600px;\r\n            max-height: 80vh;\r\n            overflow-y: auto;\r\n        }\r\n        .lpb-popup-close {\r\n            position: absolute;\r\n            top: 10px;\r\n            right: 10px;\r\n            background: none;\r\n            border: none;\r\n            font-size: 1.2rem;\r\n            cursor: pointer;\r\n        }\r\n        @media (max-width: 768px) {\r\n            .lpb-canvas {\r\n                width: 100%;\r\n                padding: 20px;\r\n            }\r\n            .lpb-heading {\r\n                font-size: 32px;\r\n            }\r\n            .lpb-paragraph {\r\n                font-size: 16px;\r\n            }\r\n        }\r\n    </style>\r\n    <script>\r\n        window.LPB = {\r\n            openPopup(popupId) {\r\n                const popup = document.getElementById(popupId);\r\n                if (popup) {\r\n                    popup.classList.add('visible');\r\n                    document.body.style.overflow = 'hidden';\r\n                }\r\n            },\r\n            closePopup(popupId) {\r\n                const popup = document.getElementById(popupId);\r\n                if (popup) {\r\n                    popup.classList.remove('visible');\r\n                    document.body.style.overflow = '';\r\n                }\r\n            },\r\n            handleButtonClick(eventType, data, elementId) {\r\n                if (eventType === 'popup') {\r\n                    this.openPopup(data.popupId);\r\n                }\r\n            }\r\n        };\r\n        document.addEventListener('DOMContentLoaded', () => {\r\n            document.querySelectorAll('.lpb-popup').forEach(popup => {\r\n                const popupId = popup.id;\r\n                const closeBtn = popup.querySelector('.lpb-popup-close');\r\n                if (closeBtn) {\r\n                    closeBtn.addEventListener('click', () => window.LPB.closePopup(popupId));\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n</head>\r\n<body>\r\n    <div class=\"lpb-canvas\">\r\n`;\r\n\r\n    const renderElement = (element, isChild = false) => {\r\n        const { id, type, componentData = {}, position = {}, size = {}, styles = {}, children = [] } = element;\r\n        const positionStyles = position.desktop ? `left: ${position.desktop.x || 0}px; top: ${position.desktop.y || 0}px;` : '';\r\n        const sizeStyles = size ? `width: ${size.width || 200}px; height: ${size.height || 50}px;` : '';\r\n        const cssStyles = styles ? Object.entries(styles).map(([key, value]) => `${key}: ${value};`).join(' ') : '';\r\n        const elementClass = isChild ? `lpb-element lpb-${type}` : `lpb-element lpb-${type}`;\r\n        const elementPosition = isChild ? `position: relative; ${positionStyles}` : `position: absolute; ${positionStyles}`;\r\n\r\n        let elementHtml = `<div id=\"${id}\" class=\"${elementClass}\" style=\"${elementPosition} ${sizeStyles} ${cssStyles}\" data-type=\"${type}\" data-component-data='${JSON.stringify(componentData)}'>`;\r\n\r\n        switch (type) {\r\n            case 'section':\r\n                elementHtml += `\r\n                    <div class=\"ladi-section\" style=\"width: 100%; height: 100%; position: relative;\">\r\n                        <div class=\"ladi-section-background\" style=\"background-color: ${componentData.backgroundColor || '#ffffff'};\"></div>\r\n                        <div class=\"ladi-container\" style=\"position: relative; z-index: 1; padding: ${componentData.padding || '20px'};\">\r\n                `;\r\n                children.forEach((child) => {\r\n                    elementHtml += renderElement(child, true);\r\n                });\r\n                elementHtml += `</div></div>`;\r\n                break;\r\n            case 'heading':\r\n                const headingLevel = componentData.level || 'h1';\r\n                elementHtml += `<${headingLevel} style=\"font-size: ${componentData.fontSize || '48px'}; color: ${componentData.color || '#1f2937'}; font-weight: ${componentData.fontWeight || '700'}; margin-bottom: 20px;\">${componentData.content || 'Tiêu đề'}</${headingLevel}>`;\r\n                break;\r\n            case 'paragraph':\r\n                elementHtml += `<p style=\"font-size: ${componentData.fontSize || '18px'}; color: ${componentData.color || '#4b5563'}; line-height: 1.6; margin-bottom: 20px;\">${componentData.content || 'Đoạn văn'}</p>`;\r\n                break;\r\n            case 'button':\r\n                elementHtml += `<button style=\"padding: ${componentData.padding || '12px 24px'}; background: ${componentData.background || '#2563eb'}; color: ${componentData.color || '#ffffff'}; border: none; border-radius: ${componentData.borderRadius || '8px'}; cursor: pointer; font-size: ${componentData.fontSize || '16px'}; font-weight: 600; transition: all 0.3s ease;\" onclick=\"LPB.handleButtonClick('${componentData.events?.onClick?.type || ''}', ${JSON.stringify(componentData.events?.onClick?.params || {})}, '${id}')\">${componentData.content || 'Nút'}</button>`;\r\n                break;\r\n            case 'popup':\r\n                elementHtml += `\r\n                    <div class=\"lpb-popup\" style=\"display: none;\">\r\n                        <div class=\"lpb-popup-overlay\" onclick=\"LPB.closePopup('${id}')\"></div>\r\n                        <div class=\"lpb-popup-content\" style=\"padding: ${componentData.padding || '30px'};\">\r\n                            ${children.map(child => renderElement(child, true)).join('')}\r\n                            <button class=\"lpb-popup-close\">✕</button>\r\n                        </div>\r\n                    </div>`;\r\n                break;\r\n            default:\r\n                elementHtml += `<div>Unknown type: ${type}</div>`;\r\n                break;\r\n        }\r\n\r\n        elementHtml += `</div>`;\r\n        return elementHtml;\r\n    };\r\n\r\n    pageData.elements.forEach((element) => {\r\n        html += renderElement(element);\r\n    });\r\n\r\n    html += `\r\n    </div>\r\n</body>\r\n</html>`;\r\n    return html;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}