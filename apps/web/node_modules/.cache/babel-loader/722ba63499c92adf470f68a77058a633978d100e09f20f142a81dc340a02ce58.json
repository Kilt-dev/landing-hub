{"ast":null,"code":"// utils/eventController.js (Tạo mới theo yêu cầu)\nclass EventController {\n  constructor() {\n    this.subscribers = {}; // { eventName: [callbacks] }\n    this.cache = new Map(); // For future API cache, but empty for now since no API\n  }\n\n  // Subscribe to an event\n  subscribe(eventName, callback) {\n    if (!this.subscribers[eventName]) {\n      this.subscribers[eventName] = [];\n    }\n    this.subscribers[eventName].push(callback);\n    return () => this.unsubscribe(eventName, callback); // Return unsubscribe function\n  }\n\n  // Unsubscribe from an event\n  unsubscribe(eventName, callback) {\n    if (this.subscribers[eventName]) {\n      this.subscribers[eventName] = this.subscribers[eventName].filter(cb => cb !== callback);\n    }\n  }\n\n  // Dispatch an event with payload\n  dispatch(eventName, payload = {}) {\n    if (this.subscribers[eventName]) {\n      this.subscribers[eventName].forEach(callback => callback(payload));\n    }\n  }\n\n  // Handle specific event types (frontend only: popup, navigate, scrollToSection, closePopup)\n  handleEvent(config, elementId, isCanvas = false) {\n    const {\n      type\n    } = config;\n    switch (type) {\n      case 'openPopup':\n        if (config.popupId) {\n          // Publish to open popup\n          this.dispatch('popup-open', {\n            popupId: config.popupId,\n            elementId\n          });\n          if (isCanvas) {\n            toast.info(`Mô phỏng: Mở popup \"${config.popupId}\"`, {\n              position: 'bottom-right',\n              autoClose: 2000\n            });\n          }\n        }\n        break;\n      case 'closePopup':\n        // Close current or specific popup\n        const targetPopupId = config.popupId || elementId; // Default to self if no id\n        this.dispatch('popup-close', {\n          popupId: targetPopupId,\n          elementId\n        });\n        if (isCanvas) {\n          toast.info(`Mô phỏng: Đóng popup \"${targetPopupId}\"`, {\n            position: 'bottom-right',\n            autoClose: 2000\n          });\n        }\n        break;\n      case 'navigate':\n        if (config.url) {\n          if (isCanvas) {\n            toast.info(`Mô phỏng: Điều hướng đến ${config.url}`, {\n              position: 'bottom-right',\n              autoClose: 2000\n            });\n          } else {\n            window.open(config.url, config.newTab ? '_blank' : '_self');\n          }\n        }\n        break;\n      case 'scrollToSection':\n        if (config.sectionId) {\n          const sectionElement = document.querySelector(`[data-element-id=\"${config.sectionId}\"]`);\n          if (sectionElement) {\n            sectionElement.scrollIntoView({\n              behavior: config.smooth !== false ? 'smooth' : 'auto',\n              block: 'start'\n            });\n            if (isCanvas) {\n              toast.info(`Mô phỏng: Cuộn đến section \"${config.sectionId}\"`, {\n                position: 'bottom-right',\n                autoClose: 2000\n              });\n            }\n          } else {\n            toast.error('Không tìm thấy section để cuộn đến');\n          }\n        }\n        break;\n      case 'none':\n      default:\n        // No action\n        break;\n    }\n  }\n\n  // Prefetch (empty for now, since no API; can add hover effects later)\n  prefetch(config) {\n    // Placeholder for future prefetch (e.g., onHover)\n    if (config.prefetch && config.type === 'openPopup') {\n      // Could pre-load popup content here if needed\n      console.log('Prefetching popup:', config.popupId);\n    }\n  }\n}\n\n// Singleton instance\nconst eventController = new EventController();\nexport default eventController;","map":{"version":3,"names":["EventController","constructor","subscribers","cache","Map","subscribe","eventName","callback","push","unsubscribe","filter","cb","dispatch","payload","forEach","handleEvent","config","elementId","isCanvas","type","popupId","toast","info","position","autoClose","targetPopupId","url","window","open","newTab","sectionId","sectionElement","document","querySelector","scrollIntoView","behavior","smooth","block","error","prefetch","console","log","eventController"],"sources":["F:/landinghub-iconic/apps/web/src/utils/EventController.js"],"sourcesContent":["// utils/eventController.js (Tạo mới theo yêu cầu)\r\nclass EventController {\r\n    constructor() {\r\n        this.subscribers = {}; // { eventName: [callbacks] }\r\n        this.cache = new Map(); // For future API cache, but empty for now since no API\r\n    }\r\n\r\n    // Subscribe to an event\r\n    subscribe(eventName, callback) {\r\n        if (!this.subscribers[eventName]) {\r\n            this.subscribers[eventName] = [];\r\n        }\r\n        this.subscribers[eventName].push(callback);\r\n        return () => this.unsubscribe(eventName, callback); // Return unsubscribe function\r\n    }\r\n\r\n    // Unsubscribe from an event\r\n    unsubscribe(eventName, callback) {\r\n        if (this.subscribers[eventName]) {\r\n            this.subscribers[eventName] = this.subscribers[eventName].filter(cb => cb !== callback);\r\n        }\r\n    }\r\n\r\n    // Dispatch an event with payload\r\n    dispatch(eventName, payload = {}) {\r\n        if (this.subscribers[eventName]) {\r\n            this.subscribers[eventName].forEach(callback => callback(payload));\r\n        }\r\n    }\r\n\r\n    // Handle specific event types (frontend only: popup, navigate, scrollToSection, closePopup)\r\n    handleEvent(config, elementId, isCanvas = false) {\r\n        const { type } = config;\r\n        switch (type) {\r\n            case 'openPopup':\r\n                if (config.popupId) {\r\n                    // Publish to open popup\r\n                    this.dispatch('popup-open', { popupId: config.popupId, elementId });\r\n                    if (isCanvas) {\r\n                        toast.info(`Mô phỏng: Mở popup \"${config.popupId}\"`, { position: 'bottom-right', autoClose: 2000 });\r\n                    }\r\n                }\r\n                break;\r\n            case 'closePopup':\r\n                // Close current or specific popup\r\n                const targetPopupId = config.popupId || elementId; // Default to self if no id\r\n                this.dispatch('popup-close', { popupId: targetPopupId, elementId });\r\n                if (isCanvas) {\r\n                    toast.info(`Mô phỏng: Đóng popup \"${targetPopupId}\"`, { position: 'bottom-right', autoClose: 2000 });\r\n                }\r\n                break;\r\n            case 'navigate':\r\n                if (config.url) {\r\n                    if (isCanvas) {\r\n                        toast.info(`Mô phỏng: Điều hướng đến ${config.url}`, { position: 'bottom-right', autoClose: 2000 });\r\n                    } else {\r\n                        window.open(config.url, config.newTab ? '_blank' : '_self');\r\n                    }\r\n                }\r\n                break;\r\n            case 'scrollToSection':\r\n                if (config.sectionId) {\r\n                    const sectionElement = document.querySelector(`[data-element-id=\"${config.sectionId}\"]`);\r\n                    if (sectionElement) {\r\n                        sectionElement.scrollIntoView({ behavior: config.smooth !== false ? 'smooth' : 'auto', block: 'start' });\r\n                        if (isCanvas) {\r\n                            toast.info(`Mô phỏng: Cuộn đến section \"${config.sectionId}\"`, { position: 'bottom-right', autoClose: 2000 });\r\n                        }\r\n                    } else {\r\n                        toast.error('Không tìm thấy section để cuộn đến');\r\n                    }\r\n                }\r\n                break;\r\n            case 'none':\r\n            default:\r\n                // No action\r\n                break;\r\n        }\r\n    }\r\n\r\n    // Prefetch (empty for now, since no API; can add hover effects later)\r\n    prefetch(config) {\r\n        // Placeholder for future prefetch (e.g., onHover)\r\n        if (config.prefetch && config.type === 'openPopup') {\r\n            // Could pre-load popup content here if needed\r\n            console.log('Prefetching popup:', config.popupId);\r\n        }\r\n    }\r\n}\r\n\r\n// Singleton instance\r\nconst eventController = new EventController();\r\nexport default eventController;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}