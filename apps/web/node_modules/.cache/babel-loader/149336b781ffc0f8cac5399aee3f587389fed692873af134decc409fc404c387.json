{"ast":null,"code":"// CSS variables for consistent styling\nconst CSS_VARIABLES = {\n  '--canvas-desktop': '1200px',\n  '--canvas-mobile': '375px',\n  '--white': '#ffffff',\n  '--border-radius': '4px',\n  '--shadow': '0 2px 8px rgba(0, 0, 0, 0.15)',\n  '--primary-color': '#2563eb'\n};\n\n// Utility to convert camelCase to kebab-case\nconst toKebabCase = str => str.replace(/[A-Z]/g, m => `-${m.toLowerCase()}`);\n\n// Utility to parse HTML string to page data structure\nconst parseHTMLToPageData = html => {\n  try {\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, 'text/html');\n    const canvasElement = doc.querySelector('.lpb-canvas');\n    if (!canvasElement) {\n      return {\n        canvas: {\n          width: parseInt(CSS_VARIABLES['--canvas-desktop']),\n          background: CSS_VARIABLES['--white']\n        },\n        elements: [],\n        visiblePopups: []\n      };\n    }\n    const elements = [];\n    const visiblePopups = [];\n    const canvasStyles = window.getComputedStyle(canvasElement);\n    const canvas = {\n      width: parseInt(canvasStyles.width) || parseInt(CSS_VARIABLES['--canvas-desktop']),\n      height: parseInt(canvasStyles.height) || 1000,\n      background: canvasStyles.backgroundColor || CSS_VARIABLES['--white']\n    };\n    const parseElement = (el, parentId = null) => {\n      const element = {\n        id: el.id || `element-${Date.now()}`,\n        type: el.dataset.type || 'section',\n        componentData: JSON.parse(el.dataset.componentData || '{}'),\n        position: {\n          desktop: {\n            x: parseFloat(el.style.left) || 0,\n            y: parseFloat(el.style.top) || 0\n          },\n          tablet: {\n            x: 0,\n            y: 0\n          },\n          mobile: {\n            x: 0,\n            y: 0\n          }\n        },\n        size: {\n          width: parseInt(el.style.width) || el.offsetWidth || 1200,\n          height: parseInt(el.style.height) || el.offsetHeight || 400\n        },\n        styles: {\n          backgroundColor: el.style.backgroundColor || '',\n          borderRadius: el.style.borderRadius || '',\n          boxShadow: el.style.boxShadow || '',\n          margin: el.style.margin || '0',\n          padding: el.style.padding || '0',\n          zIndex: parseInt(el.style.zIndex) || 1,\n          ':hover': el.dataset.hoverStyles ? JSON.parse(el.dataset.hoverStyles) : {},\n          ':active': el.dataset.activeStyles ? JSON.parse(el.dataset.activeStyles) : {}\n        },\n        visible: el.style.display !== 'none',\n        locked: el.dataset.locked === 'true',\n        children: []\n      };\n      if (el.dataset.type === 'popup' || el.dataset.type === 'modal') {\n        if (element.visible) visiblePopups.push(element.id);\n      }\n      const childElements = el.querySelectorAll(':scope > [data-type]');\n      childElements.forEach(child => {\n        element.children.push(parseElement(child, element.id));\n      });\n      return element;\n    };\n    const rootElements = doc.querySelectorAll('.lpb-canvas > [data-type]');\n    rootElements.forEach(el => {\n      elements.push(parseElement(el));\n    });\n    return {\n      canvas,\n      elements,\n      visiblePopups\n    };\n  } catch (error) {\n    console.error('Error parsing HTML to page data:', error);\n    return {\n      canvas: {\n        width: parseInt(CSS_VARIABLES['--canvas-desktop']),\n        background: CSS_VARIABLES['--white']\n      },\n      elements: [],\n      visiblePopups: []\n    };\n  }\n};\n\n// Utility to generate static HTML from page data\nconst renderStaticHTML = (pageData, viewMode = 'desktop') => {\n  try {\n    const {\n      canvas,\n      elements,\n      visiblePopups\n    } = pageData;\n    const canvasWidth = viewMode === 'mobile' ? parseInt(CSS_VARIABLES['--canvas-mobile']) : parseInt(CSS_VARIABLES['--canvas-desktop']);\n    const canvasHeight = canvas.height || 1000;\n\n    // Calculate canvas height based on sections\n    const calculatedHeight = elements.filter(el => el.type === 'section').reduce((maxY, el) => {\n      var _el$position, _el$position$viewMode, _el$size;\n      const y = ((_el$position = el.position) === null || _el$position === void 0 ? void 0 : (_el$position$viewMode = _el$position[viewMode]) === null || _el$position$viewMode === void 0 ? void 0 : _el$position$viewMode.y) || 0;\n      const height = ((_el$size = el.size) === null || _el$size === void 0 ? void 0 : _el$size.height) || 400;\n      return Math.max(maxY, y + height);\n    }, canvasHeight);\n\n    // Base HTML structure\n    let html = `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Landing Page Preview</title>\n    <style>\n        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }\n        .lpb-canvas { \n            position: relative; \n            width: ${canvasWidth}px; \n            height: ${calculatedHeight}px; \n            background: ${canvas.background || CSS_VARIABLES['--white']}; \n            margin: 0 auto; \n            overflow: hidden; \n        }\n        .lpb-element { position: absolute; box-sizing: border-box; }\n        .lpb-child-element { position: absolute; box-sizing: border-box; }\n        .lpb-section { width: 100%; }\n        .lpb-popup, .lpb-modal { \n            display: none; \n            background: ${CSS_VARIABLES['--white']}; \n            border-radius: ${CSS_VARIABLES['--border-radius']}; \n            box-shadow: ${CSS_VARIABLES['--shadow']}; \n        }\n        .lpb-popup.visible, .lpb-modal.visible { display: block; }\n        .lpb-heading { font-size: 2rem; font-weight: bold; }\n        .lpb-paragraph { font-size: 1rem; line-height: 1.5; }\n        .lpb-button { \n            padding: 10px 20px; \n            background: ${CSS_VARIABLES['--primary-color']}; \n            color: white; \n            border: none; \n            border-radius: 4px; \n            cursor: pointer; \n            transition: all 0.3s ease; \n        }\n        .lpb-image { object-fit: cover; max-width: 100%; }\n        .lpb-icon { font-size: 24px; }\n        .lpb-gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; }\n        .lpb-gallery img { width: 100%; height: 100%; object-fit: cover; }\n        .lpb-form { display: flex; flex-direction: column; gap: 10px; }\n        .lpb-form input { padding: 8px; border: 1px solid #ccc; border-radius: 8px; }\n        .lpb-divider { border: none; height: 2px; }\n        .lpb-spacer { width: 100%; }\n        .lpb-card { padding: 20px; background: #ffffff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }\n        .lpb-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }\n        .lpb-list { list-style-type: none; padding: 0; }\n    </style>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\">\n    <script>\n        function togglePopup(popupId) {\n            const popup = document.getElementById(popupId);\n            if (popup) {\n                popup.classList.toggle('visible');\n            }\n        }\n        function handleButtonClick(eventType, data, elementId) {\n            if (eventType === 'navigate') {\n                window.location.href = data.url;\n            } else if (eventType === 'triggerApi') {\n                console.log('Trigger API:', data.apiUrl);\n            } else if (eventType === 'submitForm') {\n                console.log('Submit form to:', data.apiUrl);\n            } else if (eventType === 'popup') {\n                togglePopup(data.popupId);\n            }\n        }\n        function handleGalleryClick(imageUrl, index) {\n            console.log('Open lightbox for image:', imageUrl, 'at index:', index);\n        }\n    </script>\n</head>\n<body>\n    <div class=\"lpb-canvas\">\n`;\n\n    // Process styles for pseudo-classes and keyframes\n    const processStyles = (styles, className) => {\n      let cssString = `.${className} { `;\n      const keyframes = {};\n      Object.entries(styles).forEach(([key, value]) => {\n        if (key.startsWith(':')) {\n          cssString += `.${className}${key} { `;\n          Object.entries(value).forEach(([prop, val]) => {\n            cssString += `${toKebabCase(prop)}: ${val}; `;\n          });\n          cssString += '} ';\n        } else if (key.startsWith('@keyframes')) {\n          keyframes[key] = value;\n        } else {\n          cssString += `${toKebabCase(key)}: ${value}; `;\n        }\n      });\n      Object.entries(keyframes).forEach(([key, frames]) => {\n        cssString += `${key} { `;\n        Object.entries(frames).forEach(([percentage, props]) => {\n          cssString += `${percentage} { `;\n          Object.entries(props).forEach(([prop, val]) => {\n            cssString += `${toKebabCase(prop)}: ${val}; `;\n          });\n          cssString += '} ';\n        });\n        cssString += '} ';\n      });\n      return cssString;\n    };\n\n    // Render elements\n    elements.forEach(element => {\n      var _position$viewMode, _position$viewMode2, _componentData$events, _componentData$size, _componentData$size2, _componentData$events2, _componentData$size3, _componentData$size4, _componentData$events3;\n      const {\n        id,\n        type,\n        position,\n        size,\n        styles,\n        componentData,\n        children,\n        visible,\n        locked\n      } = element;\n      const isPopup = type === 'popup' || type === 'modal';\n      const isVisible = visible && (!isPopup || visiblePopups.includes(id));\n      const uniqueClass = `element-${id}`;\n      const elementClass = `lpb-element lpb-${type} ${uniqueClass} ${isVisible ? 'visible' : ''}`;\n      const elementStyles = `\n                left: ${((_position$viewMode = position[viewMode]) === null || _position$viewMode === void 0 ? void 0 : _position$viewMode.x) || 0}px;\n                top: ${((_position$viewMode2 = position[viewMode]) === null || _position$viewMode2 === void 0 ? void 0 : _position$viewMode2.y) || 0}px;\n                width: ${size.width}px;\n                height: ${size.height}px;\n                ${styles.backgroundColor ? `background-color: ${styles.backgroundColor};` : ''}\n                ${styles.borderRadius ? `border-radius: ${styles.borderRadius};` : ''}\n                ${styles.boxShadow ? `box-shadow: ${styles.boxShadow};` : ''}\n                ${styles.margin ? `margin: ${styles.margin};` : ''}\n                ${styles.padding ? `padding: ${styles.padding};` : ''}\n                z-index: ${styles.zIndex || 1};\n                ${locked ? 'pointer-events: none;' : ''}\n                ${styles.display ? `display: ${styles.display};` : ''}\n                ${styles.alignItems ? `align-items: ${styles.alignItems};` : ''}\n                ${styles.justifyContent ? `justify-content: ${styles.justifyContent};` : ''}\n                ${styles.transition ? `transition: ${styles.transition};` : ''}\n            `.trim();\n\n      // Generate CSS for pseudo-classes and keyframes\n      const cssStyles = processStyles(styles, uniqueClass);\n\n      // Generate content based on element type\n      let content = '';\n      switch (type) {\n        case 'section':\n          if (componentData.structure === 'ladi-standard') {\n            content = `\n                            <div class=\"ladi-section-background\" style=\"background-color: ${componentData.backgroundColor || 'transparent'}; background-image: ${componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none'}; background-size: cover; background-position: center; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 0;\"></div>\n                            <div class=\"ladi-overlay\" style=\"background-color: ${componentData.overlayColor || 'transparent'}; opacity: ${componentData.overlayOpacity || 0}; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 0;\"></div>\n                            <div class=\"ladi-container\" style=\"position: relative; z-index: 1; padding: ${componentData.padding || '20px'}; width: 100%; height: 100%;\">\n                        `;\n          } else {\n            content = `\n                            <div style=\"display: ${componentData.layoutType || 'flex'}; flex-direction: ${componentData.direction || 'column'}; gap: ${componentData.gap || '10px'}; padding: ${componentData.padding || '0'}; background: ${componentData.background || 'transparent'};\">\n                                ${componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') ? `<h2 style=\"font-size: ${componentData.titleFontSize || '1.8rem'}; margin: ${componentData.titleMargin || '0'}; color: ${componentData.titleColor || '#1f2937'}; font-weight: ${componentData.titleFontWeight || '700'};\">${componentData.title}</h2>` : ''}\n                                ${componentData.subtitle && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') ? `<p style=\"font-size: ${componentData.subtitleFontSize || '1.2rem'}; margin: ${componentData.subtitleMargin || '0'}; color: ${componentData.subtitleColor || '#4b5563'};\">${componentData.subtitle}</p>` : ''}\n                                ${componentData.content && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') ? `<p style=\"font-size: ${componentData.contentFontSize || '1rem'}; margin: ${componentData.contentMargin || '0'}; color: ${componentData.contentColor || '#4b5563'};\">${componentData.content}</p>` : ''}\n                                ${componentData.features && Array.isArray(componentData.features) && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'list') ? `<ul style=\"list-style: none; padding: ${componentData.featuresPadding || '0'}; margin: ${componentData.featuresMargin || '0'}; display: flex; flex-direction: ${componentData.featuresDirection || 'column'}; gap: ${componentData.featuresGap || '8px'};\">${componentData.features.map((feature, idx) => `<li style=\"font-size: ${componentData.featureFontSize || '1rem'}; color: ${componentData.featureColor || '#1f2937'};\">${feature}</li>`).join('')}</ul>` : ''}\n                                ${componentData.ctaText && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') ? `<button style=\"padding: ${componentData.ctaPadding || '10px 20px'}; border-radius: ${componentData.ctaBorderRadius || '8px'}; background: ${componentData.ctaBackground || '#2563eb'}; color: ${componentData.ctaColor || '#fff'}; border: ${componentData.ctaBorder || 'none'}; cursor: pointer; font-size: ${componentData.ctaFontSize || '1rem'}; font-weight: ${componentData.ctaFontWeight || '600'};\">${componentData.ctaText}</button>` : ''}\n                                ${componentData.contact && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') ? `<p style=\"font-size: ${componentData.contactFontSize || '0.9rem'}; margin: ${componentData.contactMargin || '0'}; color: ${componentData.contactColor || '#4b5563'};\">${componentData.contact}</p>` : ''}\n                            </div>\n                        `;\n          }\n          break;\n        case 'heading':\n          content = `<h${componentData.level || 2} style=\"font-size: ${componentData.fontSize || '2rem'}; color: ${componentData.color || '#1f2937'}; margin: ${componentData.margin || '0'}; font-weight: ${componentData.fontWeight || '700'}; text-align: ${componentData.textAlign || 'left'}; line-height: ${componentData.lineHeight || '1.4'};\">${componentData.content || 'Heading'}</h${componentData.level || 2}>`;\n          break;\n        case 'paragraph':\n          content = `<p style=\"font-size: ${componentData.fontSize || '1rem'}; color: ${componentData.color || '#1f2937'}; margin: ${componentData.margin || '0'}; font-weight: ${componentData.fontWeight || '400'}; line-height: ${componentData.lineHeight || '1.6'}; text-align: ${componentData.textAlign || 'left'};\">${componentData.content || 'Paragraph'}</p>`;\n          break;\n        case 'button':\n          const action = ((_componentData$events = componentData.events) === null || _componentData$events === void 0 ? void 0 : _componentData$events.onClick) || {};\n          const actionAttr = action.type === 'popup' && action.popupId ? `onclick=\"togglePopup('${action.popupId}')\"` : action.type === 'navigate' && action.url ? `onclick=\"handleButtonClick('navigate', { url: '${action.url}' }, '${id}')\"` : action.type === 'triggerApi' && action.apiUrl ? `onclick=\"handleButtonClick('triggerApi', { apiUrl: '${action.apiUrl}' }, '${id}')\"` : action.type === 'submitForm' && action.apiUrl ? `onclick=\"handleButtonClick('submitForm', { apiUrl: '${action.apiUrl}' }, '${id}')\"` : '';\n          content = `<button class=\"lpb-button ${uniqueClass}\" ${actionAttr} style=\"padding: ${styles.padding || componentData.padding || '10px 20px'}; border-radius: ${styles.borderRadius || componentData.borderRadius || '4px'}; background: ${styles.background || componentData.background || CSS_VARIABLES['--primary-color']}; color: ${styles.color || componentData.color || '#fff'}; border: ${styles.border || componentData.border || 'none'}; font-size: ${styles.fontSize || componentData.fontSize || '1rem'}; font-weight: ${styles.fontWeight || componentData.fontWeight || '600'}; text-align: ${styles.textAlign || componentData.textAlign || 'center'}; display: ${styles.display || 'inline-flex'}; align-items: ${styles.alignItems || 'center'}; justify-content: ${styles.justifyContent || 'center'}; transition: ${styles.transition || 'all 0.3s ease'}; width: ${styles.width || 'auto'}; min-width: ${styles.minWidth || 'fit-content'}; white-space: nowrap;\">${componentData.content || 'Button'}</button>`;\n          break;\n        case 'image':\n          content = `<img src=\"${componentData.src || 'https://via.placeholder.com/150'}\" alt=\"${componentData.alt || 'Image'}\" class=\"lpb-image\" style=\"max-width: ${componentData.maxWidth || '100%'}; height: ${componentData.height || 'auto'}; border-radius: ${componentData.borderRadius || '0'};\" loading=\"lazy\">`;\n          break;\n        case 'icon':\n          const isSvg = componentData.icon && componentData.icon.startsWith('<svg');\n          content = isSvg ? `<div class=\"lpb-icon ${uniqueClass}\" style=\"width: ${((_componentData$size = componentData.size) === null || _componentData$size === void 0 ? void 0 : _componentData$size.width) || styles.width || '50px'}; height: ${((_componentData$size2 = componentData.size) === null || _componentData$size2 === void 0 ? void 0 : _componentData$size2.height) || styles.height || '50px'}; display: ${styles.display || 'flex'}; align-items: ${styles.alignItems || 'center'}; justify-content: ${styles.justifyContent || 'center'};\" ${(_componentData$events2 = componentData.events) !== null && _componentData$events2 !== void 0 && _componentData$events2.onClick ? `onclick=\"handleButtonClick('${componentData.events.onClick.type}', ${JSON.stringify(componentData.events.onClick)}, '${id}')\"` : ''}>${componentData.icon}</div>` : `<i class=\"${componentData.icon || 'fas fa-star'} lpb-icon ${uniqueClass}\" style=\"font-size: ${styles.fontSize || '24px'}; width: ${((_componentData$size3 = componentData.size) === null || _componentData$size3 === void 0 ? void 0 : _componentData$size3.width) || styles.width || '50px'}; height: ${((_componentData$size4 = componentData.size) === null || _componentData$size4 === void 0 ? void 0 : _componentData$size4.height) || styles.height || '50px'}; display: ${styles.display || 'flex'}; align-items: ${styles.alignItems || 'center'}; justify-content: ${styles.justifyContent || 'center'};\" ${(_componentData$events3 = componentData.events) !== null && _componentData$events3 !== void 0 && _componentData$events3.onClick ? `onclick=\"handleButtonClick('${componentData.events.onClick.type}', ${JSON.stringify(componentData.events.onClick)}, '${id}')\"` : ''}></i>`;\n          break;\n        case 'gallery':\n          const animation = componentData.animation || {};\n          const galleryClass = `gallery-${id}`;\n          let animationCSS = '';\n          if (animation.type) {\n            var _componentData$events4, _componentData$events5;\n            const animationName = `${animation.type}-${galleryClass}`;\n            animationCSS = `\n                            @keyframes ${animationName} {\n                                ${animation.type === 'fadeIn' ? `\n                                    from { opacity: 0; }\n                                    to { opacity: 1; }\n                                ` : animation.type === 'fadeInUp' ? `\n                                    from { opacity: 0; transform: translateY(20px); }\n                                    to { opacity: 1; transform: translateY(0); }\n                                ` : animation.type === 'slideInRight' ? `\n                                    from { transform: translateX(100%); }\n                                    to { transform: translateX(0); }\n                                ` : animation.type === 'bounceIn' ? `\n                                    0% { opacity: 0; transform: scale(0.3); }\n                                    50% { opacity: 1; transform: scale(1.05); }\n                                    70% { transform: scale(0.9); }\n                                    100% { transform: scale(1); }\n                                ` : ''}\n                            }\n                            .${galleryClass} { animation: ${animationName} ${animation.duration || 800}ms ease-out ${animation.delay || 0}ms; }\n                            .${galleryClass} div:hover { transform: ${((_componentData$events4 = componentData.events) === null || _componentData$events4 === void 0 ? void 0 : (_componentData$events5 = _componentData$events4.onHover) === null || _componentData$events5 === void 0 ? void 0 : _componentData$events5.type) === 'zoomIn' ? 'scale(1.05)' : 'none'}; }\n                        `;\n          }\n          content = `<div class=\"lpb-gallery ${galleryClass}\" style=\"display: ${styles.display || 'grid'}; grid-template-columns: ${styles.gridTemplateColumns || 'repeat(auto-fill, minmax(150px, 1fr))'}; gap: ${styles.gap || '10px'}; width: 100%;\">${(componentData.images || []).map((img, idx) => `<div style=\"position: relative; overflow: hidden; border-radius: ${styles.borderRadius || '8px'}; aspect-ratio: 1 / 1; cursor: pointer; transition: transform 0.3s ease;\" onclick=\"handleGalleryClick('${img}', ${idx})\"><img src=\"${img || 'https://via.placeholder.com/150'}\" alt=\"Gallery ${idx + 1}\" style=\"width: 100%; height: 100%; object-fit: cover;\" loading=\"lazy\"></div>`).join('')}</div>`;\n          html += `<style>${animationCSS}</style>`;\n          break;\n        case 'form':\n          content = `<div class=\"lpb-form\" style=\"display: flex; flex-direction: ${componentData.direction || 'column'}; gap: ${componentData.gap || '10px'}; padding: ${styles.padding || '0'}; background: ${styles.background || 'transparent'};\">\n                        ${componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') ? `<h3 style=\"font-size: ${componentData.titleFontSize || '1.2rem'}; margin: ${componentData.titleMargin || '0'}; color: ${componentData.titleColor || '#1f2937'}; font-weight: ${componentData.titleFontWeight || '600'};\">${componentData.title}</h3>` : ''}\n                        ${(componentData.fields || []).map((field, idx) => `<input type=\"${field.type || 'text'}\" placeholder=\"${field.placeholder || field.label || 'Nhập...'}\" style=\"padding: ${field.padding || '8px'}; border-radius: ${field.borderRadius || '8px'}; border: ${field.border || '1px solid #ccc'}; font-size: ${field.fontSize || '1rem'};\">`).join('')}\n                        ${componentData.buttonText && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') ? `<button type=\"submit\" style=\"background: ${componentData.buttonBackground || '#2563eb'}; color: ${componentData.buttonColor || '#fff'}; padding: ${componentData.buttonPadding || '8px 16px'}; border-radius: ${componentData.buttonBorderRadius || '8px'}; border: ${componentData.buttonBorder || 'none'}; cursor: pointer; font-size: ${componentData.buttonFontSize || '1rem'}; font-weight: ${componentData.buttonFontWeight || '600'};\">${componentData.buttonText || 'Gửi'}</button>` : ''}\n                    </div>`;\n          break;\n        case 'divider':\n          content = `<hr class=\"lpb-divider\" style=\"border: none; background: ${componentData.color || '#e5e7eb'}; height: ${componentData.thickness || '2px'}; width: ${componentData.width || '100%'}; margin: ${componentData.margin || '0'};\" />`;\n          break;\n        case 'spacer':\n          content = `<div class=\"lpb-spacer\" style=\"background: ${componentData.background || 'transparent'}; height: ${componentData.height || '40px'}; width: ${componentData.width || '100%'};\"></div>`;\n          break;\n        case 'card':\n          content = `<div class=\"lpb-card\" style=\"padding: ${componentData.padding || '20px'}; background: ${componentData.background || '#ffffff'}; border-radius: ${componentData.borderRadius || '8px'}; box-shadow: ${componentData.boxShadow || '0 2px 8px rgba(0,0,0,0.1)'};\">\n                        ${componentData.title ? `<h3 style=\"font-size: ${componentData.titleFontSize || '1.2rem'}; margin: ${componentData.titleMargin || '0'}; color: ${componentData.titleColor || '#1f2937'};\">${componentData.title}</h3>` : ''}\n                        ${componentData.content ? `<p style=\"font-size: ${componentData.contentFontSize || '1rem'}; margin: ${componentData.contentMargin || '10px 0 0'}; color: ${componentData.contentColor || '#4b5563'};\">${componentData.content}</p>` : ''}\n                    </div>`;\n          break;\n        case 'grid':\n          content = `<div class=\"lpb-grid\" style=\"display: grid; grid-template-columns: ${componentData.columns ? `repeat(${componentData.columns}, 1fr)` : 'repeat(2, 1fr)'}; gap: ${componentData.gap || '20px'};\">\n                        ${(componentData.items || []).map((item, idx) => `\n                            <div style=\"background: ${componentData.itemBackground || '#ffffff'}; border-radius: ${componentData.itemBorderRadius || '8px'}; padding: ${componentData.itemPadding || '10px'};\">\n                                ${item.image ? `<img src=\"${item.image}\" alt=\"${item.title || 'Product'}\" style=\"max-width: 100%; height: auto;\" />` : ''}\n                                ${item.title ? `<h4 style=\"font-size: ${componentData.titleFontSize || '1rem'}; margin: ${componentData.titleMargin || '10px 0 0'}; color: ${componentData.titleColor || '#1f2937'};\">${item.title}</h4>` : ''}\n                                ${item.price ? `<p style=\"font-size: ${componentData.priceFontSize || '0.9rem'}; margin: ${componentData.priceMargin || '5px 0 0'}; color: ${componentData.priceColor || '#4b5563'};\">${item.price}</p>` : ''}\n                            </div>\n                        `).join('')}\n                    </div>`;\n          break;\n        case 'list':\n          content = `<ul class=\"lpb-list\" style=\"list-style-type: ${componentData.listStyleType || 'none'}; padding: ${componentData.padding || '0'};\">\n                        ${(componentData.items || []).map((item, idx) => `<li style=\"font-size: ${componentData.itemFontSize || '1rem'}; margin: ${componentData.itemMargin || '5px 0'}; color: ${componentData.itemColor || '#1f2937'};\">${item.title || item}</li>`).join('')}\n                    </ul>`;\n          break;\n        case 'popup':\n        case 'modal':\n          content = `<div style=\"display: flex; flex-direction: ${componentData.direction || 'column'}; gap: ${componentData.gap || '10px'}; text-align: ${componentData.textAlign || 'center'}; padding: ${componentData.padding || '20px'}; background: ${componentData.background || 'rgba(255, 255, 255, 0.9)'}; border-radius: ${componentData.borderRadius || '12px'};\">\n                        ${componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') ? `<h3 style=\"font-size: ${componentData.titleFontSize || '1.5rem'}; margin: ${componentData.titleMargin || '0'}; color: ${componentData.titleColor || '#1f2937'}; font-weight: ${componentData.titleFontWeight || '600'};\">${componentData.title}</h3>` : ''}\n                        ${componentData.content && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') ? `<p style=\"font-size: ${componentData.contentFontSize || '1rem'}; margin: ${componentData.contentMargin || '0'}; color: ${componentData.contentColor || '#4b5563'};\">${componentData.content}</p>` : ''}\n                        ${type === 'modal' && componentData.closeButton && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') ? `<button style=\"padding: ${componentData.buttonPadding || '8px 16px'}; border-radius: ${componentData.buttonBorderRadius || '8px'}; background: ${componentData.buttonBackground || '#6b7280'}; color: ${componentData.buttonColor || '#fff'}; border: ${componentData.buttonBorder || 'none'}; cursor: pointer; align-self: flex-end; font-size: ${componentData.buttonFontSize || '1rem'}; font-weight: ${componentData.buttonFontWeight || '600'};\" onclick=\"togglePopup('${id}')\">${componentData.buttonText || 'Đóng'}</button>` : ''}\n                        ${type === 'popup' && componentData.buttonText && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') ? `<button style=\"padding: ${componentData.buttonPadding || '10px 20px'}; border-radius: ${componentData.buttonBorderRadius || '8px'}; background: ${componentData.buttonBackground || '#2563eb'}; color: ${componentData.buttonColor || '#fff'}; border: ${componentData.buttonBorder || 'none'}; cursor: pointer; font-size: ${componentData.buttonFontSize || '1rem'}; font-weight: ${componentData.buttonFontWeight || '600'};\">${componentData.buttonText}</button>` : ''}\n                    </div>`;\n          break;\n        default:\n          content = `<div style=\"color: ${componentData.errorColor || '#ff0000'}; padding: 10px; border: 1px dashed #ff0000; border-radius: 4px;\">Unknown Component: ${type}</div>`;\n          break;\n      }\n\n      // Start element HTML\n      html += `\n        <style>${cssStyles}</style>\n        <div id=\"${id}\" class=\"${elementClass}\" data-type=\"${type}\" data-component-data='${JSON.stringify(componentData)}' style=\"${elementStyles}\">\n            ${content}\n`;\n\n      // Render children\n      if (children && children.length > 0) {\n        children.forEach(child => {\n          var _child$position$viewM, _child$position$viewM2, _child$componentData$, _child$componentData$2, _child$componentData$3, _child$componentData$4, _child$componentData$5, _child$componentData$6, _child$componentData$7;\n          const childClass = `child-${child.id}`;\n          const childStyles = `\n                        left: ${((_child$position$viewM = child.position[viewMode]) === null || _child$position$viewM === void 0 ? void 0 : _child$position$viewM.x) || 0}px;\n                        top: ${((_child$position$viewM2 = child.position[viewMode]) === null || _child$position$viewM2 === void 0 ? void 0 : _child$position$viewM2.y) || 0}px;\n                        width: ${child.size.width}px;\n                        height: ${child.size.height}px;\n                        ${child.styles.backgroundColor ? `background-color: ${child.styles.backgroundColor};` : ''}\n                        ${child.styles.borderRadius ? `border-radius: ${child.styles.borderRadius};` : ''}\n                        ${child.styles.boxShadow ? `box-shadow: ${child.styles.boxShadow};` : ''}\n                        ${child.styles.margin ? `margin: ${child.styles.margin};` : ''}\n                        ${child.styles.padding ? `padding: ${child.styles.padding};` : ''}\n                        z-index: ${child.styles.zIndex || 2};\n                        ${child.locked ? 'pointer-events: none;' : ''}\n                        ${child.styles.display ? `display: ${child.styles.display};` : ''}\n                        ${child.styles.alignItems ? `align-items: ${child.styles.alignItems};` : ''}\n                        ${child.styles.justifyContent ? `justify-content: ${child.styles.justifyContent};` : ''}\n                        ${child.styles.transition ? `transition: ${child.styles.transition};` : ''}\n                    `.trim();\n          let childContent = '';\n          switch (child.type) {\n            case 'heading':\n              childContent = `<h${child.componentData.level || 2} style=\"font-size: ${child.componentData.fontSize || '1.5rem'}; color: ${child.componentData.color || '#1f2937'}; margin: ${child.componentData.margin || '0'}; font-weight: ${child.componentData.fontWeight || '700'}; text-align: ${child.componentData.textAlign || 'left'}; line-height: ${child.componentData.lineHeight || '1.4'};\">${child.componentData.content || 'Child Heading'}</h${child.componentData.level || 2}>`;\n              break;\n            case 'paragraph':\n              childContent = `<p style=\"font-size: ${child.componentData.fontSize || '1rem'}; color: ${child.componentData.color || '#1f2937'}; margin: ${child.componentData.margin || '0'}; font-weight: ${child.componentData.fontWeight || '400'}; line-height: ${child.componentData.lineHeight || '1.6'}; text-align: ${child.componentData.textAlign || 'left'};\">${child.componentData.content || 'Child Paragraph'}</p>`;\n              break;\n            case 'button':\n              const action = ((_child$componentData$ = child.componentData.events) === null || _child$componentData$ === void 0 ? void 0 : _child$componentData$.onClick) || {};\n              const actionAttr = action.type === 'popup' && action.popupId ? `onclick=\"togglePopup('${action.popupId}')\"` : action.type === 'navigate' && action.url ? `onclick=\"handleButtonClick('navigate', { url: '${action.url}' }, '${child.id}')\"` : action.type === 'triggerApi' && action.apiUrl ? `onclick=\"handleButtonClick('triggerApi', { apiUrl: '${action.apiUrl}' }, '${child.id}')\"` : action.type === 'submitForm' && action.apiUrl ? `onclick=\"handleButtonClick('submitForm', { apiUrl: '${action.apiUrl}' }, '${child.id}')\"` : '';\n              childContent = `<button class=\"lpb-button ${childClass}\" ${actionAttr} style=\"padding: ${child.styles.padding || child.componentData.padding || '10px 20px'}; border-radius: ${child.styles.borderRadius || child.componentData.borderRadius || '4px'}; background: ${child.styles.background || child.componentData.background || CSS_VARIABLES['--primary-color']}; color: ${child.styles.color || child.componentData.color || '#fff'}; border: ${child.styles.border || child.componentData.border || 'none'}; font-size: ${child.styles.fontSize || child.componentData.fontSize || '1rem'}; font-weight: ${child.styles.fontWeight || child.componentData.fontWeight || '600'}; text-align: ${child.styles.textAlign || child.componentData.textAlign || 'center'}; display: ${child.styles.display || 'inline-flex'}; align-items: ${child.styles.alignItems || 'center'}; justify-content: ${child.styles.justifyContent || 'center'}; transition: ${child.styles.transition || 'all 0.3s ease'}; width: ${child.styles.width || 'auto'}; min-width: ${child.styles.minWidth || 'fit-content'}; white-space: nowrap;\">${child.componentData.content || 'Child Button'}</button>`;\n              break;\n            case 'image':\n              childContent = `<img src=\"${child.componentData.src || 'https://via.placeholder.com/150'}\" alt=\"${child.componentData.alt || 'Child Image'}\" class=\"lpb-image\" style=\"max-width: ${child.componentData.maxWidth || '100%'}; height: ${child.componentData.height || 'auto'}; border-radius: ${child.componentData.borderRadius || '0'};\" loading=\"lazy\">`;\n              break;\n            case 'icon':\n              const isSvg = child.componentData.icon && child.componentData.icon.startsWith('<svg');\n              childContent = isSvg ? `<div class=\"lpb-icon ${childClass}\" style=\"width: ${((_child$componentData$2 = child.componentData.size) === null || _child$componentData$2 === void 0 ? void 0 : _child$componentData$2.width) || child.styles.width || '50px'}; height: ${((_child$componentData$3 = child.componentData.size) === null || _child$componentData$3 === void 0 ? void 0 : _child$componentData$3.height) || child.styles.height || '50px'}; display: ${child.styles.display || 'flex'}; align-items: ${child.styles.alignItems || 'center'}; justify-content: ${child.styles.justifyContent || 'center'};\" ${(_child$componentData$4 = child.componentData.events) !== null && _child$componentData$4 !== void 0 && _child$componentData$4.onClick ? `onclick=\"handleButtonClick('${child.componentData.events.onClick.type}', ${JSON.stringify(child.componentData.events.onClick)}, '${child.id}')\"` : ''}>${child.componentData.icon}</div>` : `<i class=\"${child.componentData.icon || 'fas fa-star'} lpb-icon ${childClass}\" style=\"font-size: ${child.styles.fontSize || '24px'}; width: ${((_child$componentData$5 = child.componentData.size) === null || _child$componentData$5 === void 0 ? void 0 : _child$componentData$5.width) || child.styles.width || '50px'}; height: ${((_child$componentData$6 = child.componentData.size) === null || _child$componentData$6 === void 0 ? void 0 : _child$componentData$6.height) || child.styles.height || '50px'}; display: ${child.styles.display || 'flex'}; align-items: ${child.styles.alignItems || 'center'}; justify-content: ${child.styles.justifyContent || 'center'};\" ${(_child$componentData$7 = child.componentData.events) !== null && _child$componentData$7 !== void 0 && _child$componentData$7.onClick ? `onclick=\"handleButtonClick('${child.componentData.events.onClick.type}', ${JSON.stringify(child.componentData.events.onClick)}, '${child.id}')\"` : ''}></i>`;\n              break;\n            case 'gallery':\n              const animation = child.componentData.animation || {};\n              const galleryClass = `gallery-${child.id}`;\n              let animationCSS = '';\n              if (animation.type) {\n                var _child$componentData$8, _child$componentData$9;\n                const animationName = `${animation.type}-${galleryClass}`;\n                animationCSS = `\n                                    @keyframes ${animationName} {\n                                        ${animation.type === 'fadeIn' ? `\n                                            from { opacity: 0; }\n                                            to { opacity: 1; }\n                                        ` : animation.type === 'fadeInUp' ? `\n                                            from { opacity: 0; transform: translateY(20px); }\n                                            to { opacity: 1; transform: translateY(0); }\n                                        ` : animation.type === 'slideInRight' ? `\n                                            from { transform: translateX(100%); }\n                                            to { transform: translateX(0); }\n                                        ` : animation.type === 'bounceIn' ? `\n                                            0% { opacity: 0; transform: scale(0.3); }\n                                            50% { opacity: 1; transform: scale(1.05); }\n                                            70% { transform: scale(0.9); }\n                                            100% { transform: scale(1); }\n                                        ` : ''}\n                                    }\n                                    .${galleryClass} { animation: ${animationName} ${animation.duration || 800}ms ease-out ${animation.delay || 0}ms; }\n                                    .${galleryClass} div:hover { transform: ${((_child$componentData$8 = child.componentData.events) === null || _child$componentData$8 === void 0 ? void 0 : (_child$componentData$9 = _child$componentData$8.onHover) === null || _child$componentData$9 === void 0 ? void 0 : _child$componentData$9.type) === 'zoomIn' ? 'scale(1.05)' : 'none'}; }\n                                `;\n              }\n              childContent = `<div class=\"lpb-gallery ${galleryClass}\" style=\"display: ${child.styles.display || 'grid'}; grid-template-columns: ${child.styles.gridTemplateColumns || 'repeat(auto-fill, minmax(150px, 1fr))'}; gap: ${child.styles.gap || '10px'}; width: 100%;\">${(child.componentData.images || []).map((img, idx) => `<div style=\"position: relative; overflow: hidden; border-radius: ${child.styles.borderRadius || '8px'}; aspect-ratio: 1 / 1; cursor: pointer; transition: transform 0.3s ease;\" onclick=\"handleGalleryClick('${img}', ${idx})\"><img src=\"${img || 'https://via.placeholder.com/150'}\" alt=\"Gallery ${idx + 1}\" style=\"width: 100%; height: 100%; object-fit: cover;\" loading=\"lazy\"></div>`).join('')}</div>`;\n              html += `<style>${animationCSS}</style>`;\n              break;\n            default:\n              childContent = `<div style=\"color: ${child.componentData.errorColor || '#ff0000'}; padding: 10px; border: 1px dashed #ff0000; border-radius: 4px;\">Unknown Child Component: ${child.type}</div>`;\n              break;\n          }\n          html += `\n            <style>${processStyles(child.styles, childClass)}</style>\n            <div id=\"${child.id}\" class=\"lpb-child-element lpb-${child.type} ${childClass}\" data-type=\"${child.type}\" data-component-data='${JSON.stringify(child.componentData)}' style=\"${childStyles}\">\n                ${childContent}\n            </div>\n`;\n        });\n      }\n\n      // Close section container for ladi-standard sections\n      if (type === 'section' && componentData.structure === 'ladi-standard') {\n        content += `</div>`;\n      }\n\n      // Close element div\n      html += `\n        </div>\n`;\n    });\n\n    // Close HTML\n    html += `\n    </div>\n</body>\n</html>\n`;\n    return html;\n  } catch (error) {\n    console.error('Error rendering static HTML:', error);\n    return '<div>Error rendering page</div>';\n  }\n};\nexport { CSS_VARIABLES, parseHTMLToPageData, renderStaticHTML };","map":{"version":3,"names":["CSS_VARIABLES","toKebabCase","str","replace","m","toLowerCase","parseHTMLToPageData","html","parser","DOMParser","doc","parseFromString","canvasElement","querySelector","canvas","width","parseInt","background","elements","visiblePopups","canvasStyles","window","getComputedStyle","height","backgroundColor","parseElement","el","parentId","element","id","Date","now","type","dataset","componentData","JSON","parse","position","desktop","x","parseFloat","style","left","y","top","tablet","mobile","size","offsetWidth","offsetHeight","styles","borderRadius","boxShadow","margin","padding","zIndex","hoverStyles","activeStyles","visible","display","locked","children","push","childElements","querySelectorAll","forEach","child","rootElements","error","console","renderStaticHTML","pageData","viewMode","canvasWidth","canvasHeight","calculatedHeight","filter","reduce","maxY","_el$position","_el$position$viewMode","_el$size","Math","max","processStyles","className","cssString","keyframes","Object","entries","key","value","startsWith","prop","val","frames","percentage","props","_position$viewMode","_position$viewMode2","_componentData$events","_componentData$size","_componentData$size2","_componentData$events2","_componentData$size3","_componentData$size4","_componentData$events3","isPopup","isVisible","includes","uniqueClass","elementClass","elementStyles","alignItems","justifyContent","transition","trim","cssStyles","content","structure","backgroundImage","overlayColor","overlayOpacity","layoutType","direction","gap","title","some","titleFontSize","titleMargin","titleColor","titleFontWeight","subtitle","subtitleFontSize","subtitleMargin","subtitleColor","contentFontSize","contentMargin","contentColor","features","Array","isArray","featuresPadding","featuresMargin","featuresDirection","featuresGap","map","feature","idx","featureFontSize","featureColor","join","ctaText","ctaPadding","ctaBorderRadius","ctaBackground","ctaColor","ctaBorder","ctaFontSize","ctaFontWeight","contact","contactFontSize","contactMargin","contactColor","level","fontSize","color","fontWeight","textAlign","lineHeight","action","events","onClick","actionAttr","popupId","url","apiUrl","border","minWidth","src","alt","maxWidth","isSvg","icon","stringify","animation","galleryClass","animationCSS","_componentData$events4","_componentData$events5","animationName","duration","delay","onHover","gridTemplateColumns","images","img","fields","field","placeholder","label","buttonText","buttonBackground","buttonColor","buttonPadding","buttonBorderRadius","buttonBorder","buttonFontSize","buttonFontWeight","thickness","columns","items","item","itemBackground","itemBorderRadius","itemPadding","image","price","priceFontSize","priceMargin","priceColor","listStyleType","itemFontSize","itemMargin","itemColor","closeButton","errorColor","length","_child$position$viewM","_child$position$viewM2","_child$componentData$","_child$componentData$2","_child$componentData$3","_child$componentData$4","_child$componentData$5","_child$componentData$6","_child$componentData$7","childClass","childStyles","childContent","_child$componentData$8","_child$componentData$9"],"sources":["F:/landinghub-iconic/apps/web/src/utils/pageUtils.js"],"sourcesContent":["// CSS variables for consistent styling\r\nconst CSS_VARIABLES = {\r\n    '--canvas-desktop': '1200px',\r\n    '--canvas-mobile': '375px',\r\n    '--white': '#ffffff',\r\n    '--border-radius': '4px',\r\n    '--shadow': '0 2px 8px rgba(0, 0, 0, 0.15)',\r\n    '--primary-color': '#2563eb',\r\n};\r\n\r\n// Utility to convert camelCase to kebab-case\r\nconst toKebabCase = (str) => str.replace(/[A-Z]/g, (m) => `-${m.toLowerCase()}`);\r\n\r\n// Utility to parse HTML string to page data structure\r\nconst parseHTMLToPageData = (html) => {\r\n    try {\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(html, 'text/html');\r\n        const canvasElement = doc.querySelector('.lpb-canvas');\r\n        if (!canvasElement) {\r\n            return {\r\n                canvas: {\r\n                    width: parseInt(CSS_VARIABLES['--canvas-desktop']),\r\n                    background: CSS_VARIABLES['--white'],\r\n                },\r\n                elements: [],\r\n                visiblePopups: [],\r\n            };\r\n        }\r\n\r\n        const elements = [];\r\n        const visiblePopups = [];\r\n        const canvasStyles = window.getComputedStyle(canvasElement);\r\n        const canvas = {\r\n            width: parseInt(canvasStyles.width) || parseInt(CSS_VARIABLES['--canvas-desktop']),\r\n            height: parseInt(canvasStyles.height) || 1000,\r\n            background: canvasStyles.backgroundColor || CSS_VARIABLES['--white'],\r\n        };\r\n\r\n        const parseElement = (el, parentId = null) => {\r\n            const element = {\r\n                id: el.id || `element-${Date.now()}`,\r\n                type: el.dataset.type || 'section',\r\n                componentData: JSON.parse(el.dataset.componentData || '{}'),\r\n                position: {\r\n                    desktop: {\r\n                        x: parseFloat(el.style.left) || 0,\r\n                        y: parseFloat(el.style.top) || 0,\r\n                    },\r\n                    tablet: { x: 0, y: 0 },\r\n                    mobile: { x: 0, y: 0 },\r\n                },\r\n                size: {\r\n                    width: parseInt(el.style.width) || el.offsetWidth || 1200,\r\n                    height: parseInt(el.style.height) || el.offsetHeight || 400,\r\n                },\r\n                styles: {\r\n                    backgroundColor: el.style.backgroundColor || '',\r\n                    borderRadius: el.style.borderRadius || '',\r\n                    boxShadow: el.style.boxShadow || '',\r\n                    margin: el.style.margin || '0',\r\n                    padding: el.style.padding || '0',\r\n                    zIndex: parseInt(el.style.zIndex) || 1,\r\n                    ':hover': el.dataset.hoverStyles ? JSON.parse(el.dataset.hoverStyles) : {},\r\n                    ':active': el.dataset.activeStyles ? JSON.parse(el.dataset.activeStyles) : {},\r\n                },\r\n                visible: el.style.display !== 'none',\r\n                locked: el.dataset.locked === 'true',\r\n                children: [],\r\n            };\r\n\r\n            if (el.dataset.type === 'popup' || el.dataset.type === 'modal') {\r\n                if (element.visible) visiblePopups.push(element.id);\r\n            }\r\n\r\n            const childElements = el.querySelectorAll(':scope > [data-type]');\r\n            childElements.forEach((child) => {\r\n                element.children.push(parseElement(child, element.id));\r\n            });\r\n\r\n            return element;\r\n        };\r\n\r\n        const rootElements = doc.querySelectorAll('.lpb-canvas > [data-type]');\r\n        rootElements.forEach((el) => {\r\n            elements.push(parseElement(el));\r\n        });\r\n\r\n        return { canvas, elements, visiblePopups };\r\n    } catch (error) {\r\n        console.error('Error parsing HTML to page data:', error);\r\n        return {\r\n            canvas: {\r\n                width: parseInt(CSS_VARIABLES['--canvas-desktop']),\r\n                background: CSS_VARIABLES['--white'],\r\n            },\r\n            elements: [],\r\n            visiblePopups: [],\r\n        };\r\n    }\r\n};\r\n\r\n// Utility to generate static HTML from page data\r\nconst renderStaticHTML = (pageData, viewMode = 'desktop') => {\r\n    try {\r\n        const { canvas, elements, visiblePopups } = pageData;\r\n        const canvasWidth = viewMode === 'mobile' ? parseInt(CSS_VARIABLES['--canvas-mobile']) : parseInt(CSS_VARIABLES['--canvas-desktop']);\r\n        const canvasHeight = canvas.height || 1000;\r\n\r\n        // Calculate canvas height based on sections\r\n        const calculatedHeight = elements\r\n            .filter((el) => el.type === 'section')\r\n            .reduce((maxY, el) => {\r\n                const y = el.position?.[viewMode]?.y || 0;\r\n                const height = el.size?.height || 400;\r\n                return Math.max(maxY, y + height);\r\n            }, canvasHeight);\r\n\r\n        // Base HTML structure\r\n        let html = `\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Landing Page Preview</title>\r\n    <style>\r\n        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }\r\n        .lpb-canvas { \r\n            position: relative; \r\n            width: ${canvasWidth}px; \r\n            height: ${calculatedHeight}px; \r\n            background: ${canvas.background || CSS_VARIABLES['--white']}; \r\n            margin: 0 auto; \r\n            overflow: hidden; \r\n        }\r\n        .lpb-element { position: absolute; box-sizing: border-box; }\r\n        .lpb-child-element { position: absolute; box-sizing: border-box; }\r\n        .lpb-section { width: 100%; }\r\n        .lpb-popup, .lpb-modal { \r\n            display: none; \r\n            background: ${CSS_VARIABLES['--white']}; \r\n            border-radius: ${CSS_VARIABLES['--border-radius']}; \r\n            box-shadow: ${CSS_VARIABLES['--shadow']}; \r\n        }\r\n        .lpb-popup.visible, .lpb-modal.visible { display: block; }\r\n        .lpb-heading { font-size: 2rem; font-weight: bold; }\r\n        .lpb-paragraph { font-size: 1rem; line-height: 1.5; }\r\n        .lpb-button { \r\n            padding: 10px 20px; \r\n            background: ${CSS_VARIABLES['--primary-color']}; \r\n            color: white; \r\n            border: none; \r\n            border-radius: 4px; \r\n            cursor: pointer; \r\n            transition: all 0.3s ease; \r\n        }\r\n        .lpb-image { object-fit: cover; max-width: 100%; }\r\n        .lpb-icon { font-size: 24px; }\r\n        .lpb-gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; }\r\n        .lpb-gallery img { width: 100%; height: 100%; object-fit: cover; }\r\n        .lpb-form { display: flex; flex-direction: column; gap: 10px; }\r\n        .lpb-form input { padding: 8px; border: 1px solid #ccc; border-radius: 8px; }\r\n        .lpb-divider { border: none; height: 2px; }\r\n        .lpb-spacer { width: 100%; }\r\n        .lpb-card { padding: 20px; background: #ffffff; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }\r\n        .lpb-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }\r\n        .lpb-list { list-style-type: none; padding: 0; }\r\n    </style>\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\">\r\n    <script>\r\n        function togglePopup(popupId) {\r\n            const popup = document.getElementById(popupId);\r\n            if (popup) {\r\n                popup.classList.toggle('visible');\r\n            }\r\n        }\r\n        function handleButtonClick(eventType, data, elementId) {\r\n            if (eventType === 'navigate') {\r\n                window.location.href = data.url;\r\n            } else if (eventType === 'triggerApi') {\r\n                console.log('Trigger API:', data.apiUrl);\r\n            } else if (eventType === 'submitForm') {\r\n                console.log('Submit form to:', data.apiUrl);\r\n            } else if (eventType === 'popup') {\r\n                togglePopup(data.popupId);\r\n            }\r\n        }\r\n        function handleGalleryClick(imageUrl, index) {\r\n            console.log('Open lightbox for image:', imageUrl, 'at index:', index);\r\n        }\r\n    </script>\r\n</head>\r\n<body>\r\n    <div class=\"lpb-canvas\">\r\n`;\r\n\r\n        // Process styles for pseudo-classes and keyframes\r\n        const processStyles = (styles, className) => {\r\n            let cssString = `.${className} { `;\r\n            const keyframes = {};\r\n\r\n            Object.entries(styles).forEach(([key, value]) => {\r\n                if (key.startsWith(':')) {\r\n                    cssString += `.${className}${key} { `;\r\n                    Object.entries(value).forEach(([prop, val]) => {\r\n                        cssString += `${toKebabCase(prop)}: ${val}; `;\r\n                    });\r\n                    cssString += '} ';\r\n                } else if (key.startsWith('@keyframes')) {\r\n                    keyframes[key] = value;\r\n                } else {\r\n                    cssString += `${toKebabCase(key)}: ${value}; `;\r\n                }\r\n            });\r\n\r\n            Object.entries(keyframes).forEach(([key, frames]) => {\r\n                cssString += `${key} { `;\r\n                Object.entries(frames).forEach(([percentage, props]) => {\r\n                    cssString += `${percentage} { `;\r\n                    Object.entries(props).forEach(([prop, val]) => {\r\n                        cssString += `${toKebabCase(prop)}: ${val}; `;\r\n                    });\r\n                    cssString += '} ';\r\n                });\r\n                cssString += '} ';\r\n            });\r\n\r\n            return cssString;\r\n        };\r\n\r\n        // Render elements\r\n        elements.forEach((element) => {\r\n            const { id, type, position, size, styles, componentData, children, visible, locked } = element;\r\n            const isPopup = type === 'popup' || type === 'modal';\r\n            const isVisible = visible && (!isPopup || visiblePopups.includes(id));\r\n            const uniqueClass = `element-${id}`;\r\n            const elementClass = `lpb-element lpb-${type} ${uniqueClass} ${isVisible ? 'visible' : ''}`;\r\n            const elementStyles = `\r\n                left: ${position[viewMode]?.x || 0}px;\r\n                top: ${position[viewMode]?.y || 0}px;\r\n                width: ${size.width}px;\r\n                height: ${size.height}px;\r\n                ${styles.backgroundColor ? `background-color: ${styles.backgroundColor};` : ''}\r\n                ${styles.borderRadius ? `border-radius: ${styles.borderRadius};` : ''}\r\n                ${styles.boxShadow ? `box-shadow: ${styles.boxShadow};` : ''}\r\n                ${styles.margin ? `margin: ${styles.margin};` : ''}\r\n                ${styles.padding ? `padding: ${styles.padding};` : ''}\r\n                z-index: ${styles.zIndex || 1};\r\n                ${locked ? 'pointer-events: none;' : ''}\r\n                ${styles.display ? `display: ${styles.display};` : ''}\r\n                ${styles.alignItems ? `align-items: ${styles.alignItems};` : ''}\r\n                ${styles.justifyContent ? `justify-content: ${styles.justifyContent};` : ''}\r\n                ${styles.transition ? `transition: ${styles.transition};` : ''}\r\n            `.trim();\r\n\r\n            // Generate CSS for pseudo-classes and keyframes\r\n            const cssStyles = processStyles(styles, uniqueClass);\r\n\r\n            // Generate content based on element type\r\n            let content = '';\r\n            switch (type) {\r\n                case 'section':\r\n                    if (componentData.structure === 'ladi-standard') {\r\n                        content = `\r\n                            <div class=\"ladi-section-background\" style=\"background-color: ${componentData.backgroundColor || 'transparent'}; background-image: ${componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none'}; background-size: cover; background-position: center; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 0;\"></div>\r\n                            <div class=\"ladi-overlay\" style=\"background-color: ${componentData.overlayColor || 'transparent'}; opacity: ${componentData.overlayOpacity || 0}; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: 0;\"></div>\r\n                            <div class=\"ladi-container\" style=\"position: relative; z-index: 1; padding: ${componentData.padding || '20px'}; width: 100%; height: 100%;\">\r\n                        `;\r\n                    } else {\r\n                        content = `\r\n                            <div style=\"display: ${componentData.layoutType || 'flex'}; flex-direction: ${componentData.direction || 'column'}; gap: ${componentData.gap || '10px'}; padding: ${componentData.padding || '0'}; background: ${componentData.background || 'transparent'};\">\r\n                                ${componentData.title && !children.some((child) => child?.type === 'heading') ? `<h2 style=\"font-size: ${componentData.titleFontSize || '1.8rem'}; margin: ${componentData.titleMargin || '0'}; color: ${componentData.titleColor || '#1f2937'}; font-weight: ${componentData.titleFontWeight || '700'};\">${componentData.title}</h2>` : ''}\r\n                                ${componentData.subtitle && !children.some((child) => child?.type === 'paragraph') ? `<p style=\"font-size: ${componentData.subtitleFontSize || '1.2rem'}; margin: ${componentData.subtitleMargin || '0'}; color: ${componentData.subtitleColor || '#4b5563'};\">${componentData.subtitle}</p>` : ''}\r\n                                ${componentData.content && !children.some((child) => child?.type === 'paragraph') ? `<p style=\"font-size: ${componentData.contentFontSize || '1rem'}; margin: ${componentData.contentMargin || '0'}; color: ${componentData.contentColor || '#4b5563'};\">${componentData.content}</p>` : ''}\r\n                                ${componentData.features && Array.isArray(componentData.features) && !children.some((child) => child?.type === 'list') ? `<ul style=\"list-style: none; padding: ${componentData.featuresPadding || '0'}; margin: ${componentData.featuresMargin || '0'}; display: flex; flex-direction: ${componentData.featuresDirection || 'column'}; gap: ${componentData.featuresGap || '8px'};\">${componentData.features.map((feature, idx) => `<li style=\"font-size: ${componentData.featureFontSize || '1rem'}; color: ${componentData.featureColor || '#1f2937'};\">${feature}</li>`).join('')}</ul>` : ''}\r\n                                ${componentData.ctaText && !children.some((child) => child?.type === 'button') ? `<button style=\"padding: ${componentData.ctaPadding || '10px 20px'}; border-radius: ${componentData.ctaBorderRadius || '8px'}; background: ${componentData.ctaBackground || '#2563eb'}; color: ${componentData.ctaColor || '#fff'}; border: ${componentData.ctaBorder || 'none'}; cursor: pointer; font-size: ${componentData.ctaFontSize || '1rem'}; font-weight: ${componentData.ctaFontWeight || '600'};\">${componentData.ctaText}</button>` : ''}\r\n                                ${componentData.contact && !children.some((child) => child?.type === 'paragraph') ? `<p style=\"font-size: ${componentData.contactFontSize || '0.9rem'}; margin: ${componentData.contactMargin || '0'}; color: ${componentData.contactColor || '#4b5563'};\">${componentData.contact}</p>` : ''}\r\n                            </div>\r\n                        `;\r\n                    }\r\n                    break;\r\n                case 'heading':\r\n                    content = `<h${componentData.level || 2} style=\"font-size: ${componentData.fontSize || '2rem'}; color: ${componentData.color || '#1f2937'}; margin: ${componentData.margin || '0'}; font-weight: ${componentData.fontWeight || '700'}; text-align: ${componentData.textAlign || 'left'}; line-height: ${componentData.lineHeight || '1.4'};\">${componentData.content || 'Heading'}</h${componentData.level || 2}>`;\r\n                    break;\r\n                case 'paragraph':\r\n                    content = `<p style=\"font-size: ${componentData.fontSize || '1rem'}; color: ${componentData.color || '#1f2937'}; margin: ${componentData.margin || '0'}; font-weight: ${componentData.fontWeight || '400'}; line-height: ${componentData.lineHeight || '1.6'}; text-align: ${componentData.textAlign || 'left'};\">${componentData.content || 'Paragraph'}</p>`;\r\n                    break;\r\n                case 'button':\r\n                    const action = componentData.events?.onClick || {};\r\n                    const actionAttr = action.type === 'popup' && action.popupId\r\n                        ? `onclick=\"togglePopup('${action.popupId}')\"`\r\n                        : action.type === 'navigate' && action.url\r\n                            ? `onclick=\"handleButtonClick('navigate', { url: '${action.url}' }, '${id}')\"`\r\n                            : action.type === 'triggerApi' && action.apiUrl\r\n                                ? `onclick=\"handleButtonClick('triggerApi', { apiUrl: '${action.apiUrl}' }, '${id}')\"`\r\n                                : action.type === 'submitForm' && action.apiUrl\r\n                                    ? `onclick=\"handleButtonClick('submitForm', { apiUrl: '${action.apiUrl}' }, '${id}')\"`\r\n                                    : '';\r\n                    content = `<button class=\"lpb-button ${uniqueClass}\" ${actionAttr} style=\"padding: ${styles.padding || componentData.padding || '10px 20px'}; border-radius: ${styles.borderRadius || componentData.borderRadius || '4px'}; background: ${styles.background || componentData.background || CSS_VARIABLES['--primary-color']}; color: ${styles.color || componentData.color || '#fff'}; border: ${styles.border || componentData.border || 'none'}; font-size: ${styles.fontSize || componentData.fontSize || '1rem'}; font-weight: ${styles.fontWeight || componentData.fontWeight || '600'}; text-align: ${styles.textAlign || componentData.textAlign || 'center'}; display: ${styles.display || 'inline-flex'}; align-items: ${styles.alignItems || 'center'}; justify-content: ${styles.justifyContent || 'center'}; transition: ${styles.transition || 'all 0.3s ease'}; width: ${styles.width || 'auto'}; min-width: ${styles.minWidth || 'fit-content'}; white-space: nowrap;\">${componentData.content || 'Button'}</button>`;\r\n                    break;\r\n                case 'image':\r\n                    content = `<img src=\"${componentData.src || 'https://via.placeholder.com/150'}\" alt=\"${componentData.alt || 'Image'}\" class=\"lpb-image\" style=\"max-width: ${componentData.maxWidth || '100%'}; height: ${componentData.height || 'auto'}; border-radius: ${componentData.borderRadius || '0'};\" loading=\"lazy\">`;\r\n                    break;\r\n                case 'icon':\r\n                    const isSvg = componentData.icon && componentData.icon.startsWith('<svg');\r\n                    content = isSvg\r\n                        ? `<div class=\"lpb-icon ${uniqueClass}\" style=\"width: ${componentData.size?.width || styles.width || '50px'}; height: ${componentData.size?.height || styles.height || '50px'}; display: ${styles.display || 'flex'}; align-items: ${styles.alignItems || 'center'}; justify-content: ${styles.justifyContent || 'center'};\" ${componentData.events?.onClick ? `onclick=\"handleButtonClick('${componentData.events.onClick.type}', ${JSON.stringify(componentData.events.onClick)}, '${id}')\"` : ''}>${componentData.icon}</div>`\r\n                        : `<i class=\"${componentData.icon || 'fas fa-star'} lpb-icon ${uniqueClass}\" style=\"font-size: ${styles.fontSize || '24px'}; width: ${componentData.size?.width || styles.width || '50px'}; height: ${componentData.size?.height || styles.height || '50px'}; display: ${styles.display || 'flex'}; align-items: ${styles.alignItems || 'center'}; justify-content: ${styles.justifyContent || 'center'};\" ${componentData.events?.onClick ? `onclick=\"handleButtonClick('${componentData.events.onClick.type}', ${JSON.stringify(componentData.events.onClick)}, '${id}')\"` : ''}></i>`;\r\n                    break;\r\n                case 'gallery':\r\n                    const animation = componentData.animation || {};\r\n                    const galleryClass = `gallery-${id}`;\r\n                    let animationCSS = '';\r\n                    if (animation.type) {\r\n                        const animationName = `${animation.type}-${galleryClass}`;\r\n                        animationCSS = `\r\n                            @keyframes ${animationName} {\r\n                                ${animation.type === 'fadeIn' ? `\r\n                                    from { opacity: 0; }\r\n                                    to { opacity: 1; }\r\n                                ` : animation.type === 'fadeInUp' ? `\r\n                                    from { opacity: 0; transform: translateY(20px); }\r\n                                    to { opacity: 1; transform: translateY(0); }\r\n                                ` : animation.type === 'slideInRight' ? `\r\n                                    from { transform: translateX(100%); }\r\n                                    to { transform: translateX(0); }\r\n                                ` : animation.type === 'bounceIn' ? `\r\n                                    0% { opacity: 0; transform: scale(0.3); }\r\n                                    50% { opacity: 1; transform: scale(1.05); }\r\n                                    70% { transform: scale(0.9); }\r\n                                    100% { transform: scale(1); }\r\n                                ` : ''}\r\n                            }\r\n                            .${galleryClass} { animation: ${animationName} ${animation.duration || 800}ms ease-out ${animation.delay || 0}ms; }\r\n                            .${galleryClass} div:hover { transform: ${componentData.events?.onHover?.type === 'zoomIn' ? 'scale(1.05)' : 'none'}; }\r\n                        `;\r\n                    }\r\n                    content = `<div class=\"lpb-gallery ${galleryClass}\" style=\"display: ${styles.display || 'grid'}; grid-template-columns: ${styles.gridTemplateColumns || 'repeat(auto-fill, minmax(150px, 1fr))'}; gap: ${styles.gap || '10px'}; width: 100%;\">${(componentData.images || []).map((img, idx) => `<div style=\"position: relative; overflow: hidden; border-radius: ${styles.borderRadius || '8px'}; aspect-ratio: 1 / 1; cursor: pointer; transition: transform 0.3s ease;\" onclick=\"handleGalleryClick('${img}', ${idx})\"><img src=\"${img || 'https://via.placeholder.com/150'}\" alt=\"Gallery ${idx + 1}\" style=\"width: 100%; height: 100%; object-fit: cover;\" loading=\"lazy\"></div>`).join('')}</div>`;\r\n                    html += `<style>${animationCSS}</style>`;\r\n                    break;\r\n                case 'form':\r\n                    content = `<div class=\"lpb-form\" style=\"display: flex; flex-direction: ${componentData.direction || 'column'}; gap: ${componentData.gap || '10px'}; padding: ${styles.padding || '0'}; background: ${styles.background || 'transparent'};\">\r\n                        ${componentData.title && !children.some((child) => child?.type === 'heading') ? `<h3 style=\"font-size: ${componentData.titleFontSize || '1.2rem'}; margin: ${componentData.titleMargin || '0'}; color: ${componentData.titleColor || '#1f2937'}; font-weight: ${componentData.titleFontWeight || '600'};\">${componentData.title}</h3>` : ''}\r\n                        ${(componentData.fields || []).map((field, idx) => `<input type=\"${field.type || 'text'}\" placeholder=\"${field.placeholder || field.label || 'Nhập...'}\" style=\"padding: ${field.padding || '8px'}; border-radius: ${field.borderRadius || '8px'}; border: ${field.border || '1px solid #ccc'}; font-size: ${field.fontSize || '1rem'};\">`).join('')}\r\n                        ${componentData.buttonText && !children.some((child) => child?.type === 'button') ? `<button type=\"submit\" style=\"background: ${componentData.buttonBackground || '#2563eb'}; color: ${componentData.buttonColor || '#fff'}; padding: ${componentData.buttonPadding || '8px 16px'}; border-radius: ${componentData.buttonBorderRadius || '8px'}; border: ${componentData.buttonBorder || 'none'}; cursor: pointer; font-size: ${componentData.buttonFontSize || '1rem'}; font-weight: ${componentData.buttonFontWeight || '600'};\">${componentData.buttonText || 'Gửi'}</button>` : ''}\r\n                    </div>`;\r\n                    break;\r\n                case 'divider':\r\n                    content = `<hr class=\"lpb-divider\" style=\"border: none; background: ${componentData.color || '#e5e7eb'}; height: ${componentData.thickness || '2px'}; width: ${componentData.width || '100%'}; margin: ${componentData.margin || '0'};\" />`;\r\n                    break;\r\n                case 'spacer':\r\n                    content = `<div class=\"lpb-spacer\" style=\"background: ${componentData.background || 'transparent'}; height: ${componentData.height || '40px'}; width: ${componentData.width || '100%'};\"></div>`;\r\n                    break;\r\n                case 'card':\r\n                    content = `<div class=\"lpb-card\" style=\"padding: ${componentData.padding || '20px'}; background: ${componentData.background || '#ffffff'}; border-radius: ${componentData.borderRadius || '8px'}; box-shadow: ${componentData.boxShadow || '0 2px 8px rgba(0,0,0,0.1)'};\">\r\n                        ${componentData.title ? `<h3 style=\"font-size: ${componentData.titleFontSize || '1.2rem'}; margin: ${componentData.titleMargin || '0'}; color: ${componentData.titleColor || '#1f2937'};\">${componentData.title}</h3>` : ''}\r\n                        ${componentData.content ? `<p style=\"font-size: ${componentData.contentFontSize || '1rem'}; margin: ${componentData.contentMargin || '10px 0 0'}; color: ${componentData.contentColor || '#4b5563'};\">${componentData.content}</p>` : ''}\r\n                    </div>`;\r\n                    break;\r\n                case 'grid':\r\n                    content = `<div class=\"lpb-grid\" style=\"display: grid; grid-template-columns: ${componentData.columns ? `repeat(${componentData.columns}, 1fr)` : 'repeat(2, 1fr)'}; gap: ${componentData.gap || '20px'};\">\r\n                        ${(componentData.items || []).map((item, idx) => `\r\n                            <div style=\"background: ${componentData.itemBackground || '#ffffff'}; border-radius: ${componentData.itemBorderRadius || '8px'}; padding: ${componentData.itemPadding || '10px'};\">\r\n                                ${item.image ? `<img src=\"${item.image}\" alt=\"${item.title || 'Product'}\" style=\"max-width: 100%; height: auto;\" />` : ''}\r\n                                ${item.title ? `<h4 style=\"font-size: ${componentData.titleFontSize || '1rem'}; margin: ${componentData.titleMargin || '10px 0 0'}; color: ${componentData.titleColor || '#1f2937'};\">${item.title}</h4>` : ''}\r\n                                ${item.price ? `<p style=\"font-size: ${componentData.priceFontSize || '0.9rem'}; margin: ${componentData.priceMargin || '5px 0 0'}; color: ${componentData.priceColor || '#4b5563'};\">${item.price}</p>` : ''}\r\n                            </div>\r\n                        `).join('')}\r\n                    </div>`;\r\n                    break;\r\n                case 'list':\r\n                    content = `<ul class=\"lpb-list\" style=\"list-style-type: ${componentData.listStyleType || 'none'}; padding: ${componentData.padding || '0'};\">\r\n                        ${(componentData.items || []).map((item, idx) => `<li style=\"font-size: ${componentData.itemFontSize || '1rem'}; margin: ${componentData.itemMargin || '5px 0'}; color: ${componentData.itemColor || '#1f2937'};\">${item.title || item}</li>`).join('')}\r\n                    </ul>`;\r\n                    break;\r\n                case 'popup':\r\n                case 'modal':\r\n                    content = `<div style=\"display: flex; flex-direction: ${componentData.direction || 'column'}; gap: ${componentData.gap || '10px'}; text-align: ${componentData.textAlign || 'center'}; padding: ${componentData.padding || '20px'}; background: ${componentData.background || 'rgba(255, 255, 255, 0.9)'}; border-radius: ${componentData.borderRadius || '12px'};\">\r\n                        ${componentData.title && !children.some((child) => child?.type === 'heading') ? `<h3 style=\"font-size: ${componentData.titleFontSize || '1.5rem'}; margin: ${componentData.titleMargin || '0'}; color: ${componentData.titleColor || '#1f2937'}; font-weight: ${componentData.titleFontWeight || '600'};\">${componentData.title}</h3>` : ''}\r\n                        ${componentData.content && !children.some((child) => child?.type === 'paragraph') ? `<p style=\"font-size: ${componentData.contentFontSize || '1rem'}; margin: ${componentData.contentMargin || '0'}; color: ${componentData.contentColor || '#4b5563'};\">${componentData.content}</p>` : ''}\r\n                        ${type === 'modal' && componentData.closeButton && !children.some((child) => child?.type === 'button') ? `<button style=\"padding: ${componentData.buttonPadding || '8px 16px'}; border-radius: ${componentData.buttonBorderRadius || '8px'}; background: ${componentData.buttonBackground || '#6b7280'}; color: ${componentData.buttonColor || '#fff'}; border: ${componentData.buttonBorder || 'none'}; cursor: pointer; align-self: flex-end; font-size: ${componentData.buttonFontSize || '1rem'}; font-weight: ${componentData.buttonFontWeight || '600'};\" onclick=\"togglePopup('${id}')\">${componentData.buttonText || 'Đóng'}</button>` : ''}\r\n                        ${type === 'popup' && componentData.buttonText && !children.some((child) => child?.type === 'button') ? `<button style=\"padding: ${componentData.buttonPadding || '10px 20px'}; border-radius: ${componentData.buttonBorderRadius || '8px'}; background: ${componentData.buttonBackground || '#2563eb'}; color: ${componentData.buttonColor || '#fff'}; border: ${componentData.buttonBorder || 'none'}; cursor: pointer; font-size: ${componentData.buttonFontSize || '1rem'}; font-weight: ${componentData.buttonFontWeight || '600'};\">${componentData.buttonText}</button>` : ''}\r\n                    </div>`;\r\n                    break;\r\n                default:\r\n                    content = `<div style=\"color: ${componentData.errorColor || '#ff0000'}; padding: 10px; border: 1px dashed #ff0000; border-radius: 4px;\">Unknown Component: ${type}</div>`;\r\n                    break;\r\n            }\r\n\r\n            // Start element HTML\r\n            html += `\r\n        <style>${cssStyles}</style>\r\n        <div id=\"${id}\" class=\"${elementClass}\" data-type=\"${type}\" data-component-data='${JSON.stringify(componentData)}' style=\"${elementStyles}\">\r\n            ${content}\r\n`;\r\n\r\n            // Render children\r\n            if (children && children.length > 0) {\r\n                children.forEach((child) => {\r\n                    const childClass = `child-${child.id}`;\r\n                    const childStyles = `\r\n                        left: ${child.position[viewMode]?.x || 0}px;\r\n                        top: ${child.position[viewMode]?.y || 0}px;\r\n                        width: ${child.size.width}px;\r\n                        height: ${child.size.height}px;\r\n                        ${child.styles.backgroundColor ? `background-color: ${child.styles.backgroundColor};` : ''}\r\n                        ${child.styles.borderRadius ? `border-radius: ${child.styles.borderRadius};` : ''}\r\n                        ${child.styles.boxShadow ? `box-shadow: ${child.styles.boxShadow};` : ''}\r\n                        ${child.styles.margin ? `margin: ${child.styles.margin};` : ''}\r\n                        ${child.styles.padding ? `padding: ${child.styles.padding};` : ''}\r\n                        z-index: ${child.styles.zIndex || 2};\r\n                        ${child.locked ? 'pointer-events: none;' : ''}\r\n                        ${child.styles.display ? `display: ${child.styles.display};` : ''}\r\n                        ${child.styles.alignItems ? `align-items: ${child.styles.alignItems};` : ''}\r\n                        ${child.styles.justifyContent ? `justify-content: ${child.styles.justifyContent};` : ''}\r\n                        ${child.styles.transition ? `transition: ${child.styles.transition};` : ''}\r\n                    `.trim();\r\n\r\n                    let childContent = '';\r\n                    switch (child.type) {\r\n                        case 'heading':\r\n                            childContent = `<h${child.componentData.level || 2} style=\"font-size: ${child.componentData.fontSize || '1.5rem'}; color: ${child.componentData.color || '#1f2937'}; margin: ${child.componentData.margin || '0'}; font-weight: ${child.componentData.fontWeight || '700'}; text-align: ${child.componentData.textAlign || 'left'}; line-height: ${child.componentData.lineHeight || '1.4'};\">${child.componentData.content || 'Child Heading'}</h${child.componentData.level || 2}>`;\r\n                            break;\r\n                        case 'paragraph':\r\n                            childContent = `<p style=\"font-size: ${child.componentData.fontSize || '1rem'}; color: ${child.componentData.color || '#1f2937'}; margin: ${child.componentData.margin || '0'}; font-weight: ${child.componentData.fontWeight || '400'}; line-height: ${child.componentData.lineHeight || '1.6'}; text-align: ${child.componentData.textAlign || 'left'};\">${child.componentData.content || 'Child Paragraph'}</p>`;\r\n                            break;\r\n                        case 'button':\r\n                            const action = child.componentData.events?.onClick || {};\r\n                            const actionAttr = action.type === 'popup' && action.popupId\r\n                                ? `onclick=\"togglePopup('${action.popupId}')\"`\r\n                                : action.type === 'navigate' && action.url\r\n                                    ? `onclick=\"handleButtonClick('navigate', { url: '${action.url}' }, '${child.id}')\"`\r\n                                    : action.type === 'triggerApi' && action.apiUrl\r\n                                        ? `onclick=\"handleButtonClick('triggerApi', { apiUrl: '${action.apiUrl}' }, '${child.id}')\"`\r\n                                        : action.type === 'submitForm' && action.apiUrl\r\n                                            ? `onclick=\"handleButtonClick('submitForm', { apiUrl: '${action.apiUrl}' }, '${child.id}')\"`\r\n                                            : '';\r\n                            childContent = `<button class=\"lpb-button ${childClass}\" ${actionAttr} style=\"padding: ${child.styles.padding || child.componentData.padding || '10px 20px'}; border-radius: ${child.styles.borderRadius || child.componentData.borderRadius || '4px'}; background: ${child.styles.background || child.componentData.background || CSS_VARIABLES['--primary-color']}; color: ${child.styles.color || child.componentData.color || '#fff'}; border: ${child.styles.border || child.componentData.border || 'none'}; font-size: ${child.styles.fontSize || child.componentData.fontSize || '1rem'}; font-weight: ${child.styles.fontWeight || child.componentData.fontWeight || '600'}; text-align: ${child.styles.textAlign || child.componentData.textAlign || 'center'}; display: ${child.styles.display || 'inline-flex'}; align-items: ${child.styles.alignItems || 'center'}; justify-content: ${child.styles.justifyContent || 'center'}; transition: ${child.styles.transition || 'all 0.3s ease'}; width: ${child.styles.width || 'auto'}; min-width: ${child.styles.minWidth || 'fit-content'}; white-space: nowrap;\">${child.componentData.content || 'Child Button'}</button>`;\r\n                            break;\r\n                        case 'image':\r\n                            childContent = `<img src=\"${child.componentData.src || 'https://via.placeholder.com/150'}\" alt=\"${child.componentData.alt || 'Child Image'}\" class=\"lpb-image\" style=\"max-width: ${child.componentData.maxWidth || '100%'}; height: ${child.componentData.height || 'auto'}; border-radius: ${child.componentData.borderRadius || '0'};\" loading=\"lazy\">`;\r\n                            break;\r\n                        case 'icon':\r\n                            const isSvg = child.componentData.icon && child.componentData.icon.startsWith('<svg');\r\n                            childContent = isSvg\r\n                                ? `<div class=\"lpb-icon ${childClass}\" style=\"width: ${child.componentData.size?.width || child.styles.width || '50px'}; height: ${child.componentData.size?.height || child.styles.height || '50px'}; display: ${child.styles.display || 'flex'}; align-items: ${child.styles.alignItems || 'center'}; justify-content: ${child.styles.justifyContent || 'center'};\" ${child.componentData.events?.onClick ? `onclick=\"handleButtonClick('${child.componentData.events.onClick.type}', ${JSON.stringify(child.componentData.events.onClick)}, '${child.id}')\"` : ''}>${child.componentData.icon}</div>`\r\n                                : `<i class=\"${child.componentData.icon || 'fas fa-star'} lpb-icon ${childClass}\" style=\"font-size: ${child.styles.fontSize || '24px'}; width: ${child.componentData.size?.width || child.styles.width || '50px'}; height: ${child.componentData.size?.height || child.styles.height || '50px'}; display: ${child.styles.display || 'flex'}; align-items: ${child.styles.alignItems || 'center'}; justify-content: ${child.styles.justifyContent || 'center'};\" ${child.componentData.events?.onClick ? `onclick=\"handleButtonClick('${child.componentData.events.onClick.type}', ${JSON.stringify(child.componentData.events.onClick)}, '${child.id}')\"` : ''}></i>`;\r\n                            break;\r\n                        case 'gallery':\r\n                            const animation = child.componentData.animation || {};\r\n                            const galleryClass = `gallery-${child.id}`;\r\n                            let animationCSS = '';\r\n                            if (animation.type) {\r\n                                const animationName = `${animation.type}-${galleryClass}`;\r\n                                animationCSS = `\r\n                                    @keyframes ${animationName} {\r\n                                        ${animation.type === 'fadeIn' ? `\r\n                                            from { opacity: 0; }\r\n                                            to { opacity: 1; }\r\n                                        ` : animation.type === 'fadeInUp' ? `\r\n                                            from { opacity: 0; transform: translateY(20px); }\r\n                                            to { opacity: 1; transform: translateY(0); }\r\n                                        ` : animation.type === 'slideInRight' ? `\r\n                                            from { transform: translateX(100%); }\r\n                                            to { transform: translateX(0); }\r\n                                        ` : animation.type === 'bounceIn' ? `\r\n                                            0% { opacity: 0; transform: scale(0.3); }\r\n                                            50% { opacity: 1; transform: scale(1.05); }\r\n                                            70% { transform: scale(0.9); }\r\n                                            100% { transform: scale(1); }\r\n                                        ` : ''}\r\n                                    }\r\n                                    .${galleryClass} { animation: ${animationName} ${animation.duration || 800}ms ease-out ${animation.delay || 0}ms; }\r\n                                    .${galleryClass} div:hover { transform: ${child.componentData.events?.onHover?.type === 'zoomIn' ? 'scale(1.05)' : 'none'}; }\r\n                                `;\r\n                            }\r\n                            childContent = `<div class=\"lpb-gallery ${galleryClass}\" style=\"display: ${child.styles.display || 'grid'}; grid-template-columns: ${child.styles.gridTemplateColumns || 'repeat(auto-fill, minmax(150px, 1fr))'}; gap: ${child.styles.gap || '10px'}; width: 100%;\">${(child.componentData.images || []).map((img, idx) => `<div style=\"position: relative; overflow: hidden; border-radius: ${child.styles.borderRadius || '8px'}; aspect-ratio: 1 / 1; cursor: pointer; transition: transform 0.3s ease;\" onclick=\"handleGalleryClick('${img}', ${idx})\"><img src=\"${img || 'https://via.placeholder.com/150'}\" alt=\"Gallery ${idx + 1}\" style=\"width: 100%; height: 100%; object-fit: cover;\" loading=\"lazy\"></div>`).join('')}</div>`;\r\n                            html += `<style>${animationCSS}</style>`;\r\n                            break;\r\n                        default:\r\n                            childContent = `<div style=\"color: ${child.componentData.errorColor || '#ff0000'}; padding: 10px; border: 1px dashed #ff0000; border-radius: 4px;\">Unknown Child Component: ${child.type}</div>`;\r\n                            break;\r\n                    }\r\n\r\n                    html += `\r\n            <style>${processStyles(child.styles, childClass)}</style>\r\n            <div id=\"${child.id}\" class=\"lpb-child-element lpb-${child.type} ${childClass}\" data-type=\"${child.type}\" data-component-data='${JSON.stringify(child.componentData)}' style=\"${childStyles}\">\r\n                ${childContent}\r\n            </div>\r\n`;\r\n                });\r\n            }\r\n\r\n            // Close section container for ladi-standard sections\r\n            if (type === 'section' && componentData.structure === 'ladi-standard') {\r\n                content += `</div>`;\r\n            }\r\n\r\n            // Close element div\r\n            html += `\r\n        </div>\r\n`;\r\n        });\r\n\r\n        // Close HTML\r\n        html += `\r\n    </div>\r\n</body>\r\n</html>\r\n`;\r\n\r\n        return html;\r\n    } catch (error) {\r\n        console.error('Error rendering static HTML:', error);\r\n        return '<div>Error rendering page</div>';\r\n    }\r\n};\r\n\r\nexport { CSS_VARIABLES, parseHTMLToPageData, renderStaticHTML };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}