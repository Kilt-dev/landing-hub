{"ast":null,"code":"const parseHTMLToPageData = htmlString => {\n  console.log('Parsing HTML to pageData:', htmlString);\n  try {\n    // Tạo DOM parser\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(htmlString, 'text/html');\n    const pageContainer = doc.querySelector('.page-container');\n    if (!pageContainer) {\n      console.warn('No .page-container found in HTML');\n      return {\n        canvas: {\n          width: 1200,\n          background: '#ffffff'\n        },\n        elements: []\n      };\n    }\n    const elements = [];\n    const directChildren = Array.from(pageContainer.children);\n    directChildren.forEach((child, index) => {\n      const element = parseElementFromDOM(child, index);\n      if (element) {\n        elements.push(element);\n      }\n    });\n    return {\n      canvas: {\n        width: 1200,\n        background: '#ffffff'\n      },\n      elements\n    };\n  } catch (error) {\n    console.error('Error parsing HTML:', error);\n    return {\n      canvas: {\n        width: 1200,\n        background: '#ffffff'\n      },\n      elements: []\n    };\n  }\n};\n\n// Parse từng element từ DOM node\nconst parseElementFromDOM = (domNode, index) => {\n  if (!domNode || domNode.nodeType !== Node.ELEMENT_NODE) {\n    return null;\n  }\n  const styles = domNode.style;\n  const computedStyle = window.getComputedStyle ? window.getComputedStyle(domNode) : {};\n\n  // Extract position từ style\n  const position = extractPositionFromStyle(styles);\n\n  // Extract size từ style\n  const size = extractSizeFromStyle(styles, domNode);\n\n  // Determine element type và parse content\n  const {\n    type,\n    componentData,\n    children\n  } = determineElementType(domNode);\n\n  // Generate ID duy nhất\n  const id = `element-${Date.now()}-${index}`;\n  return {\n    id,\n    type,\n    componentData,\n    position: {\n      desktop: position,\n      tablet: position,\n      mobile: position\n    },\n    size,\n    styles: extractStylesFromDOM(styles),\n    children: children || []\n  };\n};\n\n// Extract position từ DOM style\nconst extractPositionFromStyle = styles => {\n  const transform = styles.transform || '';\n  const position = styles.position || '';\n\n  // Check for translate values\n  const translateMatch = transform.match(/translate\\(([^,]+),\\s*([^)]+)\\)/);\n  if (translateMatch) {\n    return {\n      x: parseInt(translateMatch[1]) || 0,\n      y: parseInt(translateMatch[2]) || 0\n    };\n  }\n\n  // Check for left/top values (absolute positioning)\n  if (position === 'absolute') {\n    return {\n      x: parseInt(styles.left) || 0,\n      y: parseInt(styles.top) || 0\n    };\n  }\n  return {\n    x: 0,\n    y: 0\n  };\n};\n\n// Extract size từ DOM\nconst extractSizeFromStyle = (styles, domNode) => {\n  let width = parseInt(styles.width) || domNode.offsetWidth || 200;\n  let height = parseInt(styles.height) || domNode.offsetHeight || 50;\n\n  // Default sizes cho các loại element khác nhau\n  const tagName = domNode.tagName.toLowerCase();\n  if (tagName === 'button' && height < 40) height = 40;\n  if (tagName === 'h1' || tagName === 'h2' || tagName === 'h3') {\n    if (height < 50) height = 50;\n    if (width < 200) width = 200;\n  }\n  if (tagName === 'p' && height < 30) height = 30;\n  return {\n    width,\n    height\n  };\n};\n\n// Determine element type từ DOM node\nconst determineElementType = domNode => {\n  var _domNode$textContent, _domNode$querySelecto;\n  const tagName = domNode.tagName.toLowerCase();\n  const className = domNode.className || '';\n  const textContent = ((_domNode$textContent = domNode.textContent) === null || _domNode$textContent === void 0 ? void 0 : _domNode$textContent.trim()) || '';\n  switch (tagName) {\n    case 'h1':\n    case 'h2':\n    case 'h3':\n    case 'h4':\n    case 'h5':\n    case 'h6':\n      return {\n        type: 'heading',\n        componentData: {\n          content: textContent,\n          fontSize: window.getComputedStyle(domNode).fontSize || '1.5rem',\n          color: window.getComputedStyle(domNode).color || '#1f2937'\n        },\n        children: []\n      };\n    case 'p':\n      return {\n        type: 'paragraph',\n        componentData: {\n          content: textContent,\n          fontSize: window.getComputedStyle(domNode).fontSize || '1rem',\n          color: window.getComputedStyle(domNode).color || '#1f2937'\n        },\n        children: []\n      };\n    case 'button':\n      return {\n        type: 'button',\n        componentData: {\n          content: textContent,\n          background: window.getComputedStyle(domNode).backgroundColor || '#2563eb',\n          color: window.getComputedStyle(domNode).color || '#fff'\n        },\n        children: []\n      };\n    case 'img':\n      return {\n        type: 'image',\n        componentData: {\n          src: domNode.src || 'https://via.placeholder.com/150',\n          alt: domNode.alt || 'Image'\n        },\n        children: []\n      };\n    case 'form':\n      const fields = Array.from(domNode.querySelectorAll('input')).map(input => input.placeholder || input.name || 'Input');\n      const submitButton = domNode.querySelector('button[type=\"submit\"]');\n      return {\n        type: 'form',\n        componentData: {\n          title: ((_domNode$querySelecto = domNode.querySelector('h3')) === null || _domNode$querySelecto === void 0 ? void 0 : _domNode$querySelecto.textContent) || '',\n          fields: fields.length > 0 ? fields : ['Input'],\n          buttonText: (submitButton === null || submitButton === void 0 ? void 0 : submitButton.textContent) || 'Submit'\n        },\n        children: []\n      };\n    case 'div':\n      // Check if it's a container/section với children\n      const children = Array.from(domNode.children);\n      if (children.length > 0) {\n        var _domNode$querySelecto2;\n        const parsedChildren = children.map((child, index) => {\n          const childData = parseChildElement(child, index);\n          return childData;\n        }).filter(Boolean);\n        return {\n          type: className.includes('section') ? 'section' : 'container',\n          componentData: {\n            title: ((_domNode$querySelecto2 = domNode.querySelector('h2, h3')) === null || _domNode$querySelecto2 === void 0 ? void 0 : _domNode$querySelecto2.textContent) || '',\n            content: !domNode.querySelector('h2, h3, p, button') ? textContent : ''\n          },\n          children: parsedChildren\n        };\n      } else {\n        // Empty div - spacer or divider\n        const height = parseInt(window.getComputedStyle(domNode).height) || 20;\n        if (height < 10) {\n          return {\n            type: 'divider',\n            componentData: {},\n            children: []\n          };\n        } else {\n          return {\n            type: 'spacer',\n            componentData: {},\n            children: []\n          };\n        }\n      }\n    case 'hr':\n      return {\n        type: 'divider',\n        componentData: {},\n        children: []\n      };\n    default:\n      return {\n        type: 'container',\n        componentData: {\n          content: textContent\n        },\n        children: []\n      };\n  }\n};\n\n// Parse child element\nconst parseChildElement = (childNode, index) => {\n  var _childNode$textConten;\n  if (!childNode || childNode.nodeType !== Node.ELEMENT_NODE) {\n    return null;\n  }\n  const tagName = childNode.tagName.toLowerCase();\n  const textContent = ((_childNode$textConten = childNode.textContent) === null || _childNode$textConten === void 0 ? void 0 : _childNode$textConten.trim()) || '';\n  const id = `child-${Date.now()}-${index}`;\n  switch (tagName) {\n    case 'h1':\n    case 'h2':\n    case 'h3':\n    case 'h4':\n    case 'h5':\n    case 'h6':\n      return {\n        id,\n        type: 'heading',\n        content: textContent,\n        componentData: {\n          fontSize: window.getComputedStyle(childNode).fontSize || '1.5rem',\n          color: window.getComputedStyle(childNode).color || '#1f2937'\n        },\n        styles: extractStylesFromDOM(childNode.style)\n      };\n    case 'p':\n      return {\n        id,\n        type: 'paragraph',\n        content: textContent,\n        componentData: {\n          fontSize: window.getComputedStyle(childNode).fontSize || '1rem',\n          color: window.getComputedStyle(childNode).color || '#1f2937'\n        },\n        styles: extractStylesFromDOM(childNode.style)\n      };\n    case 'button':\n      return {\n        id,\n        type: 'button',\n        content: textContent,\n        componentData: {\n          background: window.getComputedStyle(childNode).backgroundColor || '#2563eb',\n          color: window.getComputedStyle(childNode).color || '#fff'\n        },\n        styles: extractStylesFromDOM(childNode.style)\n      };\n    case 'input':\n      return {\n        id,\n        type: 'input',\n        content: childNode.placeholder || 'Input',\n        componentData: {\n          placeholder: childNode.placeholder || 'Input',\n          type: childNode.type || 'text'\n        },\n        styles: extractStylesFromDOM(childNode.style)\n      };\n    case 'li':\n      return {\n        id,\n        type: 'list-item',\n        content: textContent,\n        componentData: {},\n        styles: extractStylesFromDOM(childNode.style)\n      };\n    default:\n      return {\n        id,\n        type: 'text',\n        content: textContent,\n        componentData: {},\n        styles: extractStylesFromDOM(childNode.style)\n      };\n  }\n};\n\n// Extract clean styles từ DOM style object\nconst extractStylesFromDOM = styleObj => {\n  const cleanStyles = {};\n\n  // Các style properties quan trọng cần preserve\n  const importantProps = ['backgroundColor', 'color', 'fontSize', 'fontWeight', 'fontFamily', 'textAlign', 'padding', 'margin', 'border', 'borderRadius', 'boxShadow', 'opacity', 'display', 'flexDirection', 'alignItems', 'justifyContent', 'gap', 'minHeight', 'maxWidth'];\n  importantProps.forEach(prop => {\n    if (styleObj[prop]) {\n      cleanStyles[prop] = styleObj[prop];\n    }\n  });\n  return cleanStyles;\n};\n\n// Enhanced renderStaticHTML với better structure\nconst renderStaticHTML = pageData => {\n  var _pageData$canvas, _pageData$canvas2;\n  console.log('Rendering static HTML with pageData:', JSON.stringify(pageData, null, 2));\n  let html = `<!DOCTYPE html>\n<html lang=\"vi\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Landing Page</title>\n    <style>\n        body { \n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; \n            margin: 0; \n            padding: 0; \n            background: ${((_pageData$canvas = pageData.canvas) === null || _pageData$canvas === void 0 ? void 0 : _pageData$canvas.background) || '#ffffff'};\n        }\n        .page-container { \n            position: relative; \n            width: ${((_pageData$canvas2 = pageData.canvas) === null || _pageData$canvas2 === void 0 ? void 0 : _pageData$canvas2.width) || 1200}px; \n            min-height: 600px; \n            margin: 0 auto; \n            background: #ffffff;\n        }\n        /* Responsive styles */\n        @media (max-width: 768px) {\n            .page-container { width: 100%; padding: 20px; box-sizing: border-box; }\n            .page-container > div { position: relative !important; transform: none !important; margin-bottom: 20px; }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"page-container\">`;\n\n  // Render elements\n  pageData.elements.forEach(element => {\n    html += renderElementHTML(element);\n  });\n  html += `\n    </div>\n</body>\n</html>`;\n  return html;\n};\n\n// Render individual element HTML\nconst renderElementHTML = element => {\n  const {\n    type,\n    componentData = {},\n    position = {},\n    size = {},\n    styles = {},\n    children = []\n  } = element;\n\n  // Position styles\n  const positionStyles = position !== null && position !== void 0 && position.desktop ? `position: absolute; left: ${position.desktop.x}px; top: ${position.desktop.y}px;` : '';\n\n  // Size styles\n  const sizeStyles = size ? `width: ${size.width}px; height: ${size.height}px;` : '';\n\n  // Custom styles\n  const customStyles = styles ? Object.entries(styles).map(([key, value]) => `${key}: ${value};`).join(' ') : '';\n  const allStyles = `${positionStyles} ${sizeStyles} ${customStyles}`;\n  let elementHtml = `<div style=\"${allStyles}\" data-element-type=\"${type}\" data-element-id=\"${element.id}\">`;\n\n  // Render main content\n  elementHtml += renderElementContent(type, componentData, children);\n  elementHtml += `</div>`;\n  return elementHtml;\n};\n\n// Render element content based on type\nconst renderElementContent = (type, componentData, children = []) => {\n  let content = '';\n  switch (type) {\n    case 'heading':\n      content = `<h2 style=\"font-size: ${componentData.fontSize || '1.5rem'}; color: ${componentData.color || '#1f2937'}; margin: 0; padding: 0;\">${componentData.content || 'Tiêu đề'}</h2>`;\n      break;\n    case 'paragraph':\n      content = `<p style=\"font-size: ${componentData.fontSize || '1rem'}; color: ${componentData.color || '#1f2937'}; margin: 0; padding: 0;\">${componentData.content || 'Đoạn văn'}</p>`;\n      break;\n    case 'button':\n      content = `<button style=\"padding: 8px 16px; border-radius: 8px; background: ${componentData.background || '#2563eb'}; color: ${componentData.color || '#fff'}; border: none; cursor: pointer;\">${componentData.content || 'Nút'}</button>`;\n      break;\n    case 'image':\n      content = `<img src=\"${componentData.src || 'https://via.placeholder.com/150'}\" alt=\"${componentData.alt || 'Image'}\" style=\"max-width: 100%; height: auto;\" draggable=\"false\" />`;\n      break;\n    case 'form':\n      content = '<form style=\"display: flex; flex-direction: column; gap: 10px;\">';\n      if (componentData.title) {\n        content += `<h3 style=\"margin: 0; font-size: 1.2rem;\">${componentData.title}</h3>`;\n      }\n      if (componentData.fields) {\n        componentData.fields.forEach(field => {\n          content += `<input type=\"text\" placeholder=\"${field}\" style=\"padding: 8px; border-radius: 8px; border: 1px solid #ccc;\" />`;\n        });\n      }\n      content += `<button type=\"submit\" style=\"background: #2563eb; color: #fff; padding: 8px 16px; border-radius: 8px; border: none; cursor: pointer;\">${componentData.buttonText || 'Submit'}</button>`;\n      content += '</form>';\n      break;\n    case 'section':\n    case 'container':\n      content = '<div style=\"display: flex; flex-direction: column; gap: 10px;\">';\n\n      // Render component data content if no children override it\n      if (componentData.title && !children.some(child => child.type === 'heading')) {\n        content += `<h2 style=\"font-size: 1.8rem; margin: 0;\">${componentData.title}</h2>`;\n      }\n      if (componentData.subtitle && !children.some(child => child.type === 'paragraph')) {\n        content += `<p style=\"font-size: 1.2rem; margin: 0;\">${componentData.subtitle}</p>`;\n      }\n      if (componentData.content && !children.some(child => child.type === 'paragraph')) {\n        content += `<p style=\"font-size: 1rem; margin: 0;\">${componentData.content}</p>`;\n      }\n\n      // Render children\n      children.forEach(child => {\n        content += renderChildHTML(child);\n      });\n      content += '</div>';\n      break;\n    case 'divider':\n      content = '<hr style=\"border: none; background: #e5e7eb; height: 2px;\" />';\n      break;\n    case 'spacer':\n      content = '<div style=\"background: transparent;\"></div>';\n      break;\n    default:\n      content = `<div style=\"color: #ff0000;\">Unknown Component: ${type}</div>`;\n  }\n  return content;\n};\n\n// Render child element HTML\nconst renderChildHTML = child => {\n  const {\n    type,\n    content,\n    componentData = {},\n    styles = {}\n  } = child;\n  const styleStr = Object.entries(styles).map(([key, value]) => `${key}: ${value};`).join(' ');\n  switch (type) {\n    case 'heading':\n      return `<h2 style=\"${styleStr}\">${content || 'Tiêu đề'}</h2>`;\n    case 'paragraph':\n      return `<p style=\"${styleStr}\">${content || 'Đoạn văn'}</p>`;\n    case 'button':\n      return `<button style=\"${styleStr}\">${content || 'Nút'}</button>`;\n    case 'input':\n      return `<input type=\"${componentData.type || 'text'}\" placeholder=\"${componentData.placeholder || 'Input'}\" style=\"${styleStr}\" />`;\n    case 'list-item':\n      return `<li style=\"${styleStr}\">${content}</li>`;\n    default:\n      return `<span style=\"${styleStr}\">${content}</span>`;\n  }\n};\nexport { parseHTMLToPageData, renderStaticHTML };","map":{"version":3,"names":["parseHTMLToPageData","htmlString","console","log","parser","DOMParser","doc","parseFromString","pageContainer","querySelector","warn","canvas","width","background","elements","directChildren","Array","from","children","forEach","child","index","element","parseElementFromDOM","push","error","domNode","nodeType","Node","ELEMENT_NODE","styles","style","computedStyle","window","getComputedStyle","position","extractPositionFromStyle","size","extractSizeFromStyle","type","componentData","determineElementType","id","Date","now","desktop","tablet","mobile","extractStylesFromDOM","transform","translateMatch","match","x","parseInt","y","left","top","offsetWidth","height","offsetHeight","tagName","toLowerCase","_domNode$textContent","_domNode$querySelecto","className","textContent","trim","content","fontSize","color","backgroundColor","src","alt","fields","querySelectorAll","map","input","placeholder","name","submitButton","title","length","buttonText","_domNode$querySelecto2","parsedChildren","childData","parseChildElement","filter","Boolean","includes","childNode","_childNode$textConten","styleObj","cleanStyles","importantProps","prop","renderStaticHTML","pageData","_pageData$canvas","_pageData$canvas2","JSON","stringify","html","renderElementHTML","positionStyles","sizeStyles","customStyles","Object","entries","key","value","join","allStyles","elementHtml","renderElementContent","field","some","subtitle","renderChildHTML","styleStr"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/parseHTMLToPageData.js"],"sourcesContent":["\r\nconst parseHTMLToPageData = (htmlString) => {\r\n    console.log('Parsing HTML to pageData:', htmlString);\r\n\r\n    try {\r\n        // Tạo DOM parser\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(htmlString, 'text/html');\r\n        const pageContainer = doc.querySelector('.page-container');\r\n\r\n        if (!pageContainer) {\r\n            console.warn('No .page-container found in HTML');\r\n            return {\r\n                canvas: { width: 1200, background: '#ffffff' },\r\n                elements: [],\r\n            };\r\n        }\r\n\r\n        const elements = [];\r\n        const directChildren = Array.from(pageContainer.children);\r\n\r\n        directChildren.forEach((child, index) => {\r\n            const element = parseElementFromDOM(child, index);\r\n            if (element) {\r\n                elements.push(element);\r\n            }\r\n        });\r\n\r\n        return {\r\n            canvas: { width: 1200, background: '#ffffff' },\r\n            elements,\r\n        };\r\n    } catch (error) {\r\n        console.error('Error parsing HTML:', error);\r\n        return {\r\n            canvas: { width: 1200, background: '#ffffff' },\r\n            elements: [],\r\n        };\r\n    }\r\n};\r\n\r\n// Parse từng element từ DOM node\r\nconst parseElementFromDOM = (domNode, index) => {\r\n    if (!domNode || domNode.nodeType !== Node.ELEMENT_NODE) {\r\n        return null;\r\n    }\r\n\r\n    const styles = domNode.style;\r\n    const computedStyle = window.getComputedStyle ? window.getComputedStyle(domNode) : {};\r\n\r\n    // Extract position từ style\r\n    const position = extractPositionFromStyle(styles);\r\n\r\n    // Extract size từ style\r\n    const size = extractSizeFromStyle(styles, domNode);\r\n\r\n    // Determine element type và parse content\r\n    const { type, componentData, children } = determineElementType(domNode);\r\n\r\n    // Generate ID duy nhất\r\n    const id = `element-${Date.now()}-${index}`;\r\n\r\n    return {\r\n        id,\r\n        type,\r\n        componentData,\r\n        position: {\r\n            desktop: position,\r\n            tablet: position,\r\n            mobile: position,\r\n        },\r\n        size,\r\n        styles: extractStylesFromDOM(styles),\r\n        children: children || [],\r\n    };\r\n};\r\n\r\n// Extract position từ DOM style\r\nconst extractPositionFromStyle = (styles) => {\r\n    const transform = styles.transform || '';\r\n    const position = styles.position || '';\r\n\r\n    // Check for translate values\r\n    const translateMatch = transform.match(/translate\\(([^,]+),\\s*([^)]+)\\)/);\r\n    if (translateMatch) {\r\n        return {\r\n            x: parseInt(translateMatch[1]) || 0,\r\n            y: parseInt(translateMatch[2]) || 0,\r\n        };\r\n    }\r\n\r\n    // Check for left/top values (absolute positioning)\r\n    if (position === 'absolute') {\r\n        return {\r\n            x: parseInt(styles.left) || 0,\r\n            y: parseInt(styles.top) || 0,\r\n        };\r\n    }\r\n\r\n    return { x: 0, y: 0 };\r\n};\r\n\r\n// Extract size từ DOM\r\nconst extractSizeFromStyle = (styles, domNode) => {\r\n    let width = parseInt(styles.width) || domNode.offsetWidth || 200;\r\n    let height = parseInt(styles.height) || domNode.offsetHeight || 50;\r\n\r\n    // Default sizes cho các loại element khác nhau\r\n    const tagName = domNode.tagName.toLowerCase();\r\n    if (tagName === 'button' && height < 40) height = 40;\r\n    if (tagName === 'h1' || tagName === 'h2' || tagName === 'h3') {\r\n        if (height < 50) height = 50;\r\n        if (width < 200) width = 200;\r\n    }\r\n    if (tagName === 'p' && height < 30) height = 30;\r\n\r\n    return { width, height };\r\n};\r\n\r\n// Determine element type từ DOM node\r\nconst determineElementType = (domNode) => {\r\n    const tagName = domNode.tagName.toLowerCase();\r\n    const className = domNode.className || '';\r\n    const textContent = domNode.textContent?.trim() || '';\r\n\r\n    switch (tagName) {\r\n        case 'h1':\r\n        case 'h2':\r\n        case 'h3':\r\n        case 'h4':\r\n        case 'h5':\r\n        case 'h6':\r\n            return {\r\n                type: 'heading',\r\n                componentData: {\r\n                    content: textContent,\r\n                    fontSize: window.getComputedStyle(domNode).fontSize || '1.5rem',\r\n                    color: window.getComputedStyle(domNode).color || '#1f2937',\r\n                },\r\n                children: [],\r\n            };\r\n\r\n        case 'p':\r\n            return {\r\n                type: 'paragraph',\r\n                componentData: {\r\n                    content: textContent,\r\n                    fontSize: window.getComputedStyle(domNode).fontSize || '1rem',\r\n                    color: window.getComputedStyle(domNode).color || '#1f2937',\r\n                },\r\n                children: [],\r\n            };\r\n\r\n        case 'button':\r\n            return {\r\n                type: 'button',\r\n                componentData: {\r\n                    content: textContent,\r\n                    background: window.getComputedStyle(domNode).backgroundColor || '#2563eb',\r\n                    color: window.getComputedStyle(domNode).color || '#fff',\r\n                },\r\n                children: [],\r\n            };\r\n\r\n        case 'img':\r\n            return {\r\n                type: 'image',\r\n                componentData: {\r\n                    src: domNode.src || 'https://via.placeholder.com/150',\r\n                    alt: domNode.alt || 'Image',\r\n                },\r\n                children: [],\r\n            };\r\n\r\n        case 'form':\r\n            const fields = Array.from(domNode.querySelectorAll('input')).map(input =>\r\n                input.placeholder || input.name || 'Input'\r\n            );\r\n            const submitButton = domNode.querySelector('button[type=\"submit\"]');\r\n\r\n            return {\r\n                type: 'form',\r\n                componentData: {\r\n                    title: domNode.querySelector('h3')?.textContent || '',\r\n                    fields: fields.length > 0 ? fields : ['Input'],\r\n                    buttonText: submitButton?.textContent || 'Submit',\r\n                },\r\n                children: [],\r\n            };\r\n\r\n        case 'div':\r\n            // Check if it's a container/section với children\r\n            const children = Array.from(domNode.children);\r\n            if (children.length > 0) {\r\n                const parsedChildren = children.map((child, index) => {\r\n                    const childData = parseChildElement(child, index);\r\n                    return childData;\r\n                }).filter(Boolean);\r\n\r\n                return {\r\n                    type: className.includes('section') ? 'section' : 'container',\r\n                    componentData: {\r\n                        title: domNode.querySelector('h2, h3')?.textContent || '',\r\n                        content: !domNode.querySelector('h2, h3, p, button') ? textContent : '',\r\n                    },\r\n                    children: parsedChildren,\r\n                };\r\n            } else {\r\n                // Empty div - spacer or divider\r\n                const height = parseInt(window.getComputedStyle(domNode).height) || 20;\r\n                if (height < 10) {\r\n                    return {\r\n                        type: 'divider',\r\n                        componentData: {},\r\n                        children: [],\r\n                    };\r\n                } else {\r\n                    return {\r\n                        type: 'spacer',\r\n                        componentData: {},\r\n                        children: [],\r\n                    };\r\n                }\r\n            }\r\n\r\n        case 'hr':\r\n            return {\r\n                type: 'divider',\r\n                componentData: {},\r\n                children: [],\r\n            };\r\n\r\n        default:\r\n            return {\r\n                type: 'container',\r\n                componentData: {\r\n                    content: textContent,\r\n                },\r\n                children: [],\r\n            };\r\n    }\r\n};\r\n\r\n// Parse child element\r\nconst parseChildElement = (childNode, index) => {\r\n    if (!childNode || childNode.nodeType !== Node.ELEMENT_NODE) {\r\n        return null;\r\n    }\r\n\r\n    const tagName = childNode.tagName.toLowerCase();\r\n    const textContent = childNode.textContent?.trim() || '';\r\n    const id = `child-${Date.now()}-${index}`;\r\n\r\n    switch (tagName) {\r\n        case 'h1':\r\n        case 'h2':\r\n        case 'h3':\r\n        case 'h4':\r\n        case 'h5':\r\n        case 'h6':\r\n            return {\r\n                id,\r\n                type: 'heading',\r\n                content: textContent,\r\n                componentData: {\r\n                    fontSize: window.getComputedStyle(childNode).fontSize || '1.5rem',\r\n                    color: window.getComputedStyle(childNode).color || '#1f2937',\r\n                },\r\n                styles: extractStylesFromDOM(childNode.style),\r\n            };\r\n\r\n        case 'p':\r\n            return {\r\n                id,\r\n                type: 'paragraph',\r\n                content: textContent,\r\n                componentData: {\r\n                    fontSize: window.getComputedStyle(childNode).fontSize || '1rem',\r\n                    color: window.getComputedStyle(childNode).color || '#1f2937',\r\n                },\r\n                styles: extractStylesFromDOM(childNode.style),\r\n            };\r\n\r\n        case 'button':\r\n            return {\r\n                id,\r\n                type: 'button',\r\n                content: textContent,\r\n                componentData: {\r\n                    background: window.getComputedStyle(childNode).backgroundColor || '#2563eb',\r\n                    color: window.getComputedStyle(childNode).color || '#fff',\r\n                },\r\n                styles: extractStylesFromDOM(childNode.style),\r\n            };\r\n\r\n        case 'input':\r\n            return {\r\n                id,\r\n                type: 'input',\r\n                content: childNode.placeholder || 'Input',\r\n                componentData: {\r\n                    placeholder: childNode.placeholder || 'Input',\r\n                    type: childNode.type || 'text',\r\n                },\r\n                styles: extractStylesFromDOM(childNode.style),\r\n            };\r\n\r\n        case 'li':\r\n            return {\r\n                id,\r\n                type: 'list-item',\r\n                content: textContent,\r\n                componentData: {},\r\n                styles: extractStylesFromDOM(childNode.style),\r\n            };\r\n\r\n        default:\r\n            return {\r\n                id,\r\n                type: 'text',\r\n                content: textContent,\r\n                componentData: {},\r\n                styles: extractStylesFromDOM(childNode.style),\r\n            };\r\n    }\r\n};\r\n\r\n// Extract clean styles từ DOM style object\r\nconst extractStylesFromDOM = (styleObj) => {\r\n    const cleanStyles = {};\r\n\r\n    // Các style properties quan trọng cần preserve\r\n    const importantProps = [\r\n        'backgroundColor', 'color', 'fontSize', 'fontWeight', 'fontFamily',\r\n        'textAlign', 'padding', 'margin', 'border', 'borderRadius',\r\n        'boxShadow', 'opacity', 'display', 'flexDirection', 'alignItems',\r\n        'justifyContent', 'gap', 'minHeight', 'maxWidth'\r\n    ];\r\n\r\n    importantProps.forEach(prop => {\r\n        if (styleObj[prop]) {\r\n            cleanStyles[prop] = styleObj[prop];\r\n        }\r\n    });\r\n\r\n    return cleanStyles;\r\n};\r\n\r\n// Enhanced renderStaticHTML với better structure\r\nconst renderStaticHTML = (pageData) => {\r\n    console.log('Rendering static HTML with pageData:', JSON.stringify(pageData, null, 2));\r\n\r\n    let html = `<!DOCTYPE html>\r\n<html lang=\"vi\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Landing Page</title>\r\n    <style>\r\n        body { \r\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; \r\n            margin: 0; \r\n            padding: 0; \r\n            background: ${pageData.canvas?.background || '#ffffff'};\r\n        }\r\n        .page-container { \r\n            position: relative; \r\n            width: ${pageData.canvas?.width || 1200}px; \r\n            min-height: 600px; \r\n            margin: 0 auto; \r\n            background: #ffffff;\r\n        }\r\n        /* Responsive styles */\r\n        @media (max-width: 768px) {\r\n            .page-container { width: 100%; padding: 20px; box-sizing: border-box; }\r\n            .page-container > div { position: relative !important; transform: none !important; margin-bottom: 20px; }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"page-container\">`;\r\n\r\n    // Render elements\r\n    pageData.elements.forEach((element) => {\r\n        html += renderElementHTML(element);\r\n    });\r\n\r\n    html += `\r\n    </div>\r\n</body>\r\n</html>`;\r\n\r\n    return html;\r\n};\r\n\r\n// Render individual element HTML\r\nconst renderElementHTML = (element) => {\r\n    const { type, componentData = {}, position = {}, size = {}, styles = {}, children = [] } = element;\r\n\r\n    // Position styles\r\n    const positionStyles = position?.desktop\r\n        ? `position: absolute; left: ${position.desktop.x}px; top: ${position.desktop.y}px;`\r\n        : '';\r\n\r\n    // Size styles\r\n    const sizeStyles = size\r\n        ? `width: ${size.width}px; height: ${size.height}px;`\r\n        : '';\r\n\r\n    // Custom styles\r\n    const customStyles = styles\r\n        ? Object.entries(styles).map(([key, value]) => `${key}: ${value};`).join(' ')\r\n        : '';\r\n\r\n    const allStyles = `${positionStyles} ${sizeStyles} ${customStyles}`;\r\n\r\n    let elementHtml = `<div style=\"${allStyles}\" data-element-type=\"${type}\" data-element-id=\"${element.id}\">`;\r\n\r\n    // Render main content\r\n    elementHtml += renderElementContent(type, componentData, children);\r\n\r\n    elementHtml += `</div>`;\r\n\r\n    return elementHtml;\r\n};\r\n\r\n// Render element content based on type\r\nconst renderElementContent = (type, componentData, children = []) => {\r\n    let content = '';\r\n\r\n    switch (type) {\r\n        case 'heading':\r\n            content = `<h2 style=\"font-size: ${componentData.fontSize || '1.5rem'}; color: ${componentData.color || '#1f2937'}; margin: 0; padding: 0;\">${componentData.content || 'Tiêu đề'}</h2>`;\r\n            break;\r\n\r\n        case 'paragraph':\r\n            content = `<p style=\"font-size: ${componentData.fontSize || '1rem'}; color: ${componentData.color || '#1f2937'}; margin: 0; padding: 0;\">${componentData.content || 'Đoạn văn'}</p>`;\r\n            break;\r\n\r\n        case 'button':\r\n            content = `<button style=\"padding: 8px 16px; border-radius: 8px; background: ${componentData.background || '#2563eb'}; color: ${componentData.color || '#fff'}; border: none; cursor: pointer;\">${componentData.content || 'Nút'}</button>`;\r\n            break;\r\n\r\n        case 'image':\r\n            content = `<img src=\"${componentData.src || 'https://via.placeholder.com/150'}\" alt=\"${componentData.alt || 'Image'}\" style=\"max-width: 100%; height: auto;\" draggable=\"false\" />`;\r\n            break;\r\n\r\n        case 'form':\r\n            content = '<form style=\"display: flex; flex-direction: column; gap: 10px;\">';\r\n            if (componentData.title) {\r\n                content += `<h3 style=\"margin: 0; font-size: 1.2rem;\">${componentData.title}</h3>`;\r\n            }\r\n            if (componentData.fields) {\r\n                componentData.fields.forEach(field => {\r\n                    content += `<input type=\"text\" placeholder=\"${field}\" style=\"padding: 8px; border-radius: 8px; border: 1px solid #ccc;\" />`;\r\n                });\r\n            }\r\n            content += `<button type=\"submit\" style=\"background: #2563eb; color: #fff; padding: 8px 16px; border-radius: 8px; border: none; cursor: pointer;\">${componentData.buttonText || 'Submit'}</button>`;\r\n            content += '</form>';\r\n            break;\r\n\r\n        case 'section':\r\n        case 'container':\r\n            content = '<div style=\"display: flex; flex-direction: column; gap: 10px;\">';\r\n\r\n            // Render component data content if no children override it\r\n            if (componentData.title && !children.some(child => child.type === 'heading')) {\r\n                content += `<h2 style=\"font-size: 1.8rem; margin: 0;\">${componentData.title}</h2>`;\r\n            }\r\n            if (componentData.subtitle && !children.some(child => child.type === 'paragraph')) {\r\n                content += `<p style=\"font-size: 1.2rem; margin: 0;\">${componentData.subtitle}</p>`;\r\n            }\r\n            if (componentData.content && !children.some(child => child.type === 'paragraph')) {\r\n                content += `<p style=\"font-size: 1rem; margin: 0;\">${componentData.content}</p>`;\r\n            }\r\n\r\n            // Render children\r\n            children.forEach(child => {\r\n                content += renderChildHTML(child);\r\n            });\r\n\r\n            content += '</div>';\r\n            break;\r\n\r\n        case 'divider':\r\n            content = '<hr style=\"border: none; background: #e5e7eb; height: 2px;\" />';\r\n            break;\r\n\r\n        case 'spacer':\r\n            content = '<div style=\"background: transparent;\"></div>';\r\n            break;\r\n\r\n        default:\r\n            content = `<div style=\"color: #ff0000;\">Unknown Component: ${type}</div>`;\r\n    }\r\n\r\n    return content;\r\n};\r\n\r\n// Render child element HTML\r\nconst renderChildHTML = (child) => {\r\n    const { type, content, componentData = {}, styles = {} } = child;\r\n    const styleStr = Object.entries(styles).map(([key, value]) => `${key}: ${value};`).join(' ');\r\n\r\n    switch (type) {\r\n        case 'heading':\r\n            return `<h2 style=\"${styleStr}\">${content || 'Tiêu đề'}</h2>`;\r\n        case 'paragraph':\r\n            return `<p style=\"${styleStr}\">${content || 'Đoạn văn'}</p>`;\r\n        case 'button':\r\n            return `<button style=\"${styleStr}\">${content || 'Nút'}</button>`;\r\n        case 'input':\r\n            return `<input type=\"${componentData.type || 'text'}\" placeholder=\"${componentData.placeholder || 'Input'}\" style=\"${styleStr}\" />`;\r\n        case 'list-item':\r\n            return `<li style=\"${styleStr}\">${content}</li>`;\r\n        default:\r\n            return `<span style=\"${styleStr}\">${content}</span>`;\r\n    }\r\n};\r\n\r\nexport { parseHTMLToPageData, renderStaticHTML };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}