{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\ComponentLibrary.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useCallback, useMemo, useRef } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport DraggableComponent from './DraggableComponent';\nimport EXTENDED_LIBRARY from '../../constants/ExtendedLibrary';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  SECTION: 'section',\n  ELEMENT: 'element'\n};\nconst ComponentLibrary = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c = _s2(({\n  isCollapsed,\n  onToggle,\n  addSection,\n  addElement,\n  onSelect,\n  pageState,\n  updatePageState\n}) => {\n  var _s = $RefreshSig$(),\n    _EXTENDED_LIBRARY$act3;\n  _s2();\n  const [activeCategory, setActiveCategory] = useState('sections');\n  const [activeSubCategory, setActiveSubCategory] = useState(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [viewMode, setViewMode] = useState('desktop'); // desktop hoặc mobile\n  const canvasRef = useRef(null);\n  const categories = Object.keys(EXTENDED_LIBRARY).map(key => ({\n    id: key,\n    ...EXTENDED_LIBRARY[key]\n  }));\n\n  // Drop target cho canvas\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.SECTION, ItemTypes.ELEMENT],\n    drop: (item, monitor) => {\n      const offset = monitor.getClientOffset();\n      if (!offset || !canvasRef.current) return;\n      const canvasRect = canvasRef.current.getBoundingClientRect();\n      const relativeX = offset.x - canvasRect.left;\n      const relativeY = offset.y - canvasRect.top;\n      if (item.type === 'section') {\n        const newSection = {\n          ...item,\n          styles: {\n            desktop: {\n              ...item.styles.desktop,\n              left: relativeX,\n              top: relativeY\n            },\n            mobile: {\n              ...item.styles.mobile,\n              left: relativeX / 2,\n              top: relativeY / 2\n            } // Điều chỉnh tỷ lệ cho mobile\n          }\n        };\n        addSection(newSection, 0);\n        toast.success('Đã thêm section mới!');\n      } else {\n        var _document$getElementB;\n        // Tìm section gần nhất\n        const sections = pageState.children || [];\n        if (sections.length === 0) {\n          toast.error('Vui lòng thêm một section trước khi thả phần tử!');\n          return;\n        }\n        const targetSection = sections[0]; // Giả sử thả vào section đầu tiên\n        const sectionRect = (_document$getElementB = document.getElementById(targetSection.id)) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.getBoundingClientRect();\n        if (!sectionRect) return;\n        const sectionRelativeX = offset.x - sectionRect.left;\n        const sectionRelativeY = offset.y - sectionRect.top;\n        const newElement = {\n          ...item,\n          styles: {\n            desktop: {\n              ...item.styles.desktop,\n              left: sectionRelativeX,\n              top: sectionRelativeY\n            },\n            mobile: {\n              ...item.styles.mobile,\n              left: sectionRelativeX / 2,\n              top: sectionRelativeY / 2\n            }\n          }\n        };\n        addElement(targetSection.id, newElement, 0);\n        toast.success('Đã thêm phần tử vào section!');\n      }\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  const handleToggle = useCallback(() => {\n    onToggle();\n  }, [onToggle]);\n  const handleCategoryChange = useCallback(categoryId => {\n    var _EXTENDED_LIBRARY$cat;\n    setActiveCategory(categoryId);\n    setActiveSubCategory(null);\n    toast.info(`Đã chuyển sang danh mục ${(_EXTENDED_LIBRARY$cat = EXTENDED_LIBRARY[categoryId]) === null || _EXTENDED_LIBRARY$cat === void 0 ? void 0 : _EXTENDED_LIBRARY$cat.name}`);\n  }, []);\n  const handleSubCategoryChange = useCallback(subId => {\n    var _EXTENDED_LIBRARY$act, _EXTENDED_LIBRARY$act2;\n    setActiveSubCategory(subId === activeSubCategory ? null : subId);\n    toast.info(`Đã chọn danh mục con ${(_EXTENDED_LIBRARY$act = EXTENDED_LIBRARY[activeCategory]) === null || _EXTENDED_LIBRARY$act === void 0 ? void 0 : (_EXTENDED_LIBRARY$act2 = _EXTENDED_LIBRARY$act.subCategories.find(sub => sub.id === subId)) === null || _EXTENDED_LIBRARY$act2 === void 0 ? void 0 : _EXTENDED_LIBRARY$act2.name}`);\n  }, [activeCategory, activeSubCategory]);\n  const filteredItems = useMemo(() => {\n    const categoryData = EXTENDED_LIBRARY[activeCategory];\n    if (!categoryData || !activeSubCategory) return [];\n    const subCategory = categoryData.subCategories.find(sub => sub.id === activeSubCategory);\n    return subCategory ? subCategory.templates : [];\n  }, [activeCategory, activeSubCategory]);\n  const handleDragEnd = useCallback(() => {\n    setIsDragging(false);\n  }, []);\n  const toggleViewMode = useCallback(() => {\n    setViewMode(prev => prev === 'desktop' ? 'mobile' : 'desktop');\n    toast.info(`Chuyển sang chế độ ${viewMode === 'desktop' ? 'mobile' : 'desktop'}`);\n  }, [viewMode]);\n  _s(categories.forEach(_s((cat, index) => {\n    _s();\n    useHotkeys(`ctrl+${index + 1}`, () => handleCategoryChange(cat.id), [handleCategoryChange]);\n  }, \"pwpuIBlwH6mtmZzykQCeVxCd7IA=\", false, function () {\n    return [useHotkeys];\n  })), \"pwpuIBlwH6mtmZzykQCeVxCd7IA=\", false, function () {\n    return [useHotkeys];\n  });\n  const renderCanvas = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: drop,\n      style: {\n        minHeight: '600px',\n        background: '#f9fafb',\n        border: isOver ? '2px dashed #4a90e2' : '1px solid #ddd',\n        position: 'relative'\n      },\n      children: (pageState.children || []).map(section => /*#__PURE__*/_jsxDEV(DraggableComponent, {\n        item: {\n          id: section.id,\n          json: section\n        },\n        isSection: true,\n        onSelect: onSelect,\n        viewMode: viewMode\n      }, section.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this);\n  };\n  if (isCollapsed) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-component-library lpb-component-library-collapsed\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-component-library-header\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleToggle,\n          className: \"lpb-component-library-toggle\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-chevron-right\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"lpb-component-library-icon-collapsed\",\n        onClick: () => {\n          handleCategoryChange(cat.id);\n          handleToggle();\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: cat.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 25\n        }, this)\n      }, cat.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lpb-component-library\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-component-library-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-component-library-category-nav\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-component-library-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"lpb-component-library-title\",\n            children: \"Th\\u01B0 vi\\u1EC7n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleToggle,\n            className: \"lpb-component-library-toggle\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-chevron-left\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleCategoryChange(cat.id),\n          className: `lpb-component-library-category-btn ${activeCategory === cat.id ? 'lpb-component-library-category-btn-active' : ''}`,\n          children: cat.name\n        }, cat.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-component-library-subcategory-nav\",\n        children: (_EXTENDED_LIBRARY$act3 = EXTENDED_LIBRARY[activeCategory]) === null || _EXTENDED_LIBRARY$act3 === void 0 ? void 0 : _EXTENDED_LIBRARY$act3.subCategories.map(sub => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleSubCategoryChange(sub.id),\n          className: `lpb-component-library-subcategory-btn ${activeSubCategory === sub.id ? 'lpb-component-library-subcategory-btn-active' : ''}`,\n          children: sub.name\n        }, sub.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-component-library-template-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: toggleViewMode,\n          className: \"lpb-toggle-view-mode\",\n          children: viewMode === 'desktop' ? 'Chuyển sang Mobile' : 'Chuyển sang Desktop'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this), filteredItems.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-component-library-template-list\",\n          style: {\n            display: 'grid',\n            gap: '10px'\n          },\n          children: filteredItems.map(item => /*#__PURE__*/_jsxDEV(DraggableComponent, {\n            item: item,\n            isSection: activeCategory === 'sections' || activeCategory === 'templates',\n            onDrag: () => setIsDragging(true),\n            onDragEnd: handleDragEnd,\n            onSelect: onSelect,\n            viewMode: viewMode\n          }, item.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-component-library-empty\",\n          children: \"Ch\\u1ECDn m\\u1ED9t danh m\\u1EE5c con \\u0111\\u1EC3 xem templates\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: canvasRef,\n        className: \"lpb-canvas\",\n        children: renderCanvas()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 9\n  }, this);\n}, \"KJHYiB9qfpVWrjm7dNxq1mKL5qU=\", false, function () {\n  return [useDrop];\n})), \"KJHYiB9qfpVWrjm7dNxq1mKL5qU=\", false, function () {\n  return [useDrop];\n});\n_c2 = ComponentLibrary;\nexport default ComponentLibrary;\nvar _c, _c2;\n$RefreshReg$(_c, \"ComponentLibrary$React.memo\");\n$RefreshReg$(_c2, \"ComponentLibrary\");","map":{"version":3,"names":["React","useState","useCallback","useMemo","useRef","useDrop","useHotkeys","toast","DraggableComponent","EXTENDED_LIBRARY","jsxDEV","_jsxDEV","ItemTypes","SECTION","ELEMENT","ComponentLibrary","_s2","memo","_c","isCollapsed","onToggle","addSection","addElement","onSelect","pageState","updatePageState","_s","$RefreshSig$","_EXTENDED_LIBRARY$act3","activeCategory","setActiveCategory","activeSubCategory","setActiveSubCategory","isDragging","setIsDragging","viewMode","setViewMode","canvasRef","categories","Object","keys","map","key","id","isOver","drop","accept","item","monitor","offset","getClientOffset","current","canvasRect","getBoundingClientRect","relativeX","x","left","relativeY","y","top","type","newSection","styles","desktop","mobile","success","_document$getElementB","sections","children","length","error","targetSection","sectionRect","document","getElementById","sectionRelativeX","sectionRelativeY","newElement","collect","handleToggle","handleCategoryChange","categoryId","_EXTENDED_LIBRARY$cat","info","name","handleSubCategoryChange","subId","_EXTENDED_LIBRARY$act","_EXTENDED_LIBRARY$act2","subCategories","find","sub","filteredItems","categoryData","subCategory","templates","handleDragEnd","toggleViewMode","prev","forEach","cat","index","renderCanvas","ref","style","minHeight","background","border","position","section","json","isSection","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","icon","display","gap","onDrag","onDragEnd","_c2","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/ComponentLibrary.js"],"sourcesContent":["import React, { useState, useCallback, useMemo, useRef } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport DraggableComponent from './DraggableComponent';\r\nimport EXTENDED_LIBRARY from '../../constants/ExtendedLibrary';\r\n\r\nconst ItemTypes = {\r\n    SECTION: 'section',\r\n    ELEMENT: 'element',\r\n};\r\n\r\nconst ComponentLibrary = React.memo(({ isCollapsed, onToggle, addSection, addElement, onSelect, pageState, updatePageState }) => {\r\n    const [activeCategory, setActiveCategory] = useState('sections');\r\n    const [activeSubCategory, setActiveSubCategory] = useState(null);\r\n    const [isDragging, setIsDragging] = useState(false);\r\n    const [viewMode, setViewMode] = useState('desktop'); // desktop hoặc mobile\r\n    const canvasRef = useRef(null);\r\n\r\n    const categories = Object.keys(EXTENDED_LIBRARY).map((key) => ({\r\n        id: key,\r\n        ...EXTENDED_LIBRARY[key],\r\n    }));\r\n\r\n    // Drop target cho canvas\r\n    const [{ isOver }, drop] = useDrop(() => ({\r\n        accept: [ItemTypes.SECTION, ItemTypes.ELEMENT],\r\n        drop: (item, monitor) => {\r\n            const offset = monitor.getClientOffset();\r\n            if (!offset || !canvasRef.current) return;\r\n\r\n            const canvasRect = canvasRef.current.getBoundingClientRect();\r\n            const relativeX = offset.x - canvasRect.left;\r\n            const relativeY = offset.y - canvasRect.top;\r\n\r\n            if (item.type === 'section') {\r\n                const newSection = {\r\n                    ...item,\r\n                    styles: {\r\n                        desktop: { ...item.styles.desktop, left: relativeX, top: relativeY },\r\n                        mobile: { ...item.styles.mobile, left: relativeX / 2, top: relativeY / 2 }, // Điều chỉnh tỷ lệ cho mobile\r\n                    },\r\n                };\r\n                addSection(newSection, 0);\r\n                toast.success('Đã thêm section mới!');\r\n            } else {\r\n                // Tìm section gần nhất\r\n                const sections = pageState.children || [];\r\n                if (sections.length === 0) {\r\n                    toast.error('Vui lòng thêm một section trước khi thả phần tử!');\r\n                    return;\r\n                }\r\n                const targetSection = sections[0]; // Giả sử thả vào section đầu tiên\r\n                const sectionRect = document.getElementById(targetSection.id)?.getBoundingClientRect();\r\n                if (!sectionRect) return;\r\n\r\n                const sectionRelativeX = offset.x - sectionRect.left;\r\n                const sectionRelativeY = offset.y - sectionRect.top;\r\n\r\n                const newElement = {\r\n                    ...item,\r\n                    styles: {\r\n                        desktop: { ...item.styles.desktop, left: sectionRelativeX, top: sectionRelativeY },\r\n                        mobile: { ...item.styles.mobile, left: sectionRelativeX / 2, top: sectionRelativeY / 2 },\r\n                    },\r\n                };\r\n                addElement(targetSection.id, newElement, 0);\r\n                toast.success('Đã thêm phần tử vào section!');\r\n            }\r\n        },\r\n        collect: (monitor) => ({\r\n            isOver: !!monitor.isOver(),\r\n        }),\r\n    }));\r\n\r\n    const handleToggle = useCallback(() => {\r\n        onToggle();\r\n    }, [onToggle]);\r\n\r\n    const handleCategoryChange = useCallback((categoryId) => {\r\n        setActiveCategory(categoryId);\r\n        setActiveSubCategory(null);\r\n        toast.info(`Đã chuyển sang danh mục ${EXTENDED_LIBRARY[categoryId]?.name}`);\r\n    }, []);\r\n\r\n    const handleSubCategoryChange = useCallback((subId) => {\r\n        setActiveSubCategory(subId === activeSubCategory ? null : subId);\r\n        toast.info(\r\n            `Đã chọn danh mục con ${EXTENDED_LIBRARY[activeCategory]?.subCategories.find((sub) => sub.id === subId)?.name}`\r\n        );\r\n    }, [activeCategory, activeSubCategory]);\r\n\r\n    const filteredItems = useMemo(() => {\r\n        const categoryData = EXTENDED_LIBRARY[activeCategory];\r\n        if (!categoryData || !activeSubCategory) return [];\r\n        const subCategory = categoryData.subCategories.find((sub) => sub.id === activeSubCategory);\r\n        return subCategory ? subCategory.templates : [];\r\n    }, [activeCategory, activeSubCategory]);\r\n\r\n    const handleDragEnd = useCallback(() => {\r\n        setIsDragging(false);\r\n    }, []);\r\n\r\n    const toggleViewMode = useCallback(() => {\r\n        setViewMode((prev) => (prev === 'desktop' ? 'mobile' : 'desktop'));\r\n        toast.info(`Chuyển sang chế độ ${viewMode === 'desktop' ? 'mobile' : 'desktop'}`);\r\n    }, [viewMode]);\r\n\r\n    categories.forEach((cat, index) => {\r\n        useHotkeys(`ctrl+${index + 1}`, () => handleCategoryChange(cat.id), [handleCategoryChange]);\r\n    });\r\n\r\n    const renderCanvas = () => {\r\n        return (\r\n            <div\r\n                ref={drop}\r\n                style={{\r\n                    minHeight: '600px',\r\n                    background: '#f9fafb',\r\n                    border: isOver ? '2px dashed #4a90e2' : '1px solid #ddd',\r\n                    position: 'relative',\r\n                }}\r\n            >\r\n                {(pageState.children || []).map((section) => (\r\n                    <DraggableComponent\r\n                        key={section.id}\r\n                        item={{ id: section.id, json: section }}\r\n                        isSection={true}\r\n                        onSelect={onSelect}\r\n                        viewMode={viewMode}\r\n                    />\r\n                ))}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    if (isCollapsed) {\r\n        return (\r\n            <div className=\"lpb-component-library lpb-component-library-collapsed\">\r\n                <div className=\"lpb-component-library-header\">\r\n                    <button onClick={handleToggle} className=\"lpb-component-library-toggle\">\r\n                        <i className=\"fas fa-chevron-right\"></i>\r\n                    </button>\r\n                </div>\r\n                {categories.map((cat) => (\r\n                    <button\r\n                        key={cat.id}\r\n                        className=\"lpb-component-library-icon-collapsed\"\r\n                        onClick={() => {\r\n                            handleCategoryChange(cat.id);\r\n                            handleToggle();\r\n                        }}\r\n                    >\r\n                        <i className={cat.icon}></i>\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"lpb-component-library\">\r\n            <div className=\"lpb-component-library-wrapper\">\r\n                <div className=\"lpb-component-library-category-nav\">\r\n                    <div className=\"lpb-component-library-header\">\r\n                        <h2 className=\"lpb-component-library-title\">Thư viện</h2>\r\n                        <button onClick={handleToggle} className=\"lpb-component-library-toggle\">\r\n                            <i className=\"fas fa-chevron-left\"></i>\r\n                        </button>\r\n                    </div>\r\n                    {categories.map((cat) => (\r\n                        <button\r\n                            key={cat.id}\r\n                            onClick={() => handleCategoryChange(cat.id)}\r\n                            className={`lpb-component-library-category-btn ${activeCategory === cat.id ? 'lpb-component-library-category-btn-active' : ''}`}\r\n                        >\r\n                            {cat.name}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n                <div className=\"lpb-component-library-subcategory-nav\">\r\n                    {EXTENDED_LIBRARY[activeCategory]?.subCategories.map((sub) => (\r\n                        <button\r\n                            key={sub.id}\r\n                            onClick={() => handleSubCategoryChange(sub.id)}\r\n                            className={`lpb-component-library-subcategory-btn ${activeSubCategory === sub.id ? 'lpb-component-library-subcategory-btn-active' : ''}`}\r\n                        >\r\n                            {sub.name}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n                <div className=\"lpb-component-library-template-column\">\r\n                    <button onClick={toggleViewMode} className=\"lpb-toggle-view-mode\">\r\n                        {viewMode === 'desktop' ? 'Chuyển sang Mobile' : 'Chuyển sang Desktop'}\r\n                    </button>\r\n                    {filteredItems.length > 0 ? (\r\n                        <div className=\"lpb-component-library-template-list\" style={{ display: 'grid', gap: '10px' }}>\r\n                            {filteredItems.map((item) => (\r\n                                <DraggableComponent\r\n                                    key={item.id}\r\n                                    item={item}\r\n                                    isSection={activeCategory === 'sections' || activeCategory === 'templates'}\r\n                                    onDrag={() => setIsDragging(true)}\r\n                                    onDragEnd={handleDragEnd}\r\n                                    onSelect={onSelect}\r\n                                    viewMode={viewMode}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"lpb-component-library-empty\">Chọn một danh mục con để xem templates</div>\r\n                    )}\r\n                </div>\r\n                <div ref={canvasRef} className=\"lpb-canvas\">\r\n                    {renderCanvas()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default ComponentLibrary;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}