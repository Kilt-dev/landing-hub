{"ast":null,"code":"import { AST_Array, AST_Chain, AST_Constant, AST_Dot, AST_ImportMeta, AST_Node, AST_Object, AST_ObjectKeyVal, AST_PropAccess, AST_SymbolDeclaration, AST_SymbolRef, AST_Toplevel, TreeTransformer } from \"../ast.js\";\nimport { make_node, noop, HOP } from \"../utils/index.js\";\nimport { make_node_from_constant } from \"./common.js\";\nimport { is_lhs } from \"./inference.js\";\n(function (def_find_defs) {\n  function to_node(value, orig) {\n    if (value instanceof AST_Node) {\n      if (!(value instanceof AST_Constant)) {\n        // Value may be a function, an array including functions and even a complex assign / block expression,\n        // so it should never be shared in different places.\n        // Otherwise wrong information may be used in the compression phase\n        value = value.clone(true);\n      }\n      return make_node(value.CTOR, orig, value);\n    }\n    if (Array.isArray(value)) return make_node(AST_Array, orig, {\n      elements: value.map(function (value) {\n        return to_node(value, orig);\n      })\n    });\n    if (value && typeof value == \"object\") {\n      var props = [];\n      for (var key in value) if (HOP(value, key)) {\n        props.push(make_node(AST_ObjectKeyVal, orig, {\n          key: key,\n          value: to_node(value[key], orig)\n        }));\n      }\n      return make_node(AST_Object, orig, {\n        properties: props\n      });\n    }\n    return make_node_from_constant(value, orig);\n  }\n  AST_Toplevel.DEFMETHOD(\"resolve_defines\", function (compressor) {\n    if (!compressor.option(\"global_defs\")) return this;\n    this.figure_out_scope({\n      ie8: compressor.option(\"ie8\")\n    });\n    return this.transform(new TreeTransformer(function (node) {\n      var def = node._find_defs(compressor, \"\");\n      if (!def) return;\n      var level = 0,\n        child = node,\n        parent;\n      while (parent = this.parent(level++)) {\n        if (!(parent instanceof AST_PropAccess)) break;\n        if (parent.expression !== child) break;\n        child = parent;\n      }\n      if (is_lhs(child, parent)) {\n        return;\n      }\n      return def;\n    }));\n  });\n  def_find_defs(AST_Node, noop);\n  def_find_defs(AST_Chain, function (compressor, suffix) {\n    return this.expression._find_defs(compressor, suffix);\n  });\n  def_find_defs(AST_Dot, function (compressor, suffix) {\n    return this.expression._find_defs(compressor, \".\" + this.property + suffix);\n  });\n  def_find_defs(AST_SymbolDeclaration, function () {\n    if (!this.global()) return;\n  });\n  def_find_defs(AST_SymbolRef, function (compressor, suffix) {\n    if (!this.global()) return;\n    var defines = compressor.option(\"global_defs\");\n    var name = this.name + suffix;\n    if (HOP(defines, name)) return to_node(defines[name], this);\n  });\n  def_find_defs(AST_ImportMeta, function (compressor, suffix) {\n    var defines = compressor.option(\"global_defs\");\n    var name = \"import.meta\" + suffix;\n    if (HOP(defines, name)) return to_node(defines[name], this);\n  });\n})(function (node, func) {\n  node.DEFMETHOD(\"_find_defs\", func);\n});","map":{"version":3,"names":["AST_Array","AST_Chain","AST_Constant","AST_Dot","AST_ImportMeta","AST_Node","AST_Object","AST_ObjectKeyVal","AST_PropAccess","AST_SymbolDeclaration","AST_SymbolRef","AST_Toplevel","TreeTransformer","make_node","noop","HOP","make_node_from_constant","is_lhs","def_find_defs","to_node","value","orig","clone","CTOR","Array","isArray","elements","map","props","key","push","properties","DEFMETHOD","compressor","option","figure_out_scope","ie8","transform","node","def","_find_defs","level","child","parent","expression","suffix","property","global","defines","name","func"],"sources":["F:/landinghub-iconic/node_modules/.pnpm/terser@5.44.0/node_modules/terser/lib/compress/global-defs.js"],"sourcesContent":["import {\n    AST_Array,\n    AST_Chain,\n    AST_Constant,\n    AST_Dot,\n    AST_ImportMeta,\n    AST_Node,\n    AST_Object,\n    AST_ObjectKeyVal,\n    AST_PropAccess,\n    AST_SymbolDeclaration,\n    AST_SymbolRef,\n    AST_Toplevel,\n    TreeTransformer,\n} from \"../ast.js\";\nimport { make_node, noop, HOP } from \"../utils/index.js\";\nimport { make_node_from_constant } from \"./common.js\";\nimport { is_lhs } from \"./inference.js\";\n\n(function(def_find_defs) {\n    function to_node(value, orig) {\n        if (value instanceof AST_Node) {\n            if (!(value instanceof AST_Constant)) {\n                // Value may be a function, an array including functions and even a complex assign / block expression,\n                // so it should never be shared in different places.\n                // Otherwise wrong information may be used in the compression phase\n                value = value.clone(true);\n            }\n            return make_node(value.CTOR, orig, value);\n        }\n        if (Array.isArray(value)) return make_node(AST_Array, orig, {\n            elements: value.map(function(value) {\n                return to_node(value, orig);\n            })\n        });\n        if (value && typeof value == \"object\") {\n            var props = [];\n            for (var key in value) if (HOP(value, key)) {\n                props.push(make_node(AST_ObjectKeyVal, orig, {\n                    key: key,\n                    value: to_node(value[key], orig)\n                }));\n            }\n            return make_node(AST_Object, orig, {\n                properties: props\n            });\n        }\n        return make_node_from_constant(value, orig);\n    }\n\n    AST_Toplevel.DEFMETHOD(\"resolve_defines\", function(compressor) {\n        if (!compressor.option(\"global_defs\")) return this;\n        this.figure_out_scope({ ie8: compressor.option(\"ie8\") });\n        return this.transform(new TreeTransformer(function(node) {\n            var def = node._find_defs(compressor, \"\");\n            if (!def) return;\n            var level = 0, child = node, parent;\n            while (parent = this.parent(level++)) {\n                if (!(parent instanceof AST_PropAccess)) break;\n                if (parent.expression !== child) break;\n                child = parent;\n            }\n            if (is_lhs(child, parent)) {\n                return;\n            }\n            return def;\n        }));\n    });\n    def_find_defs(AST_Node, noop);\n    def_find_defs(AST_Chain, function(compressor, suffix) {\n        return this.expression._find_defs(compressor, suffix);\n    });\n    def_find_defs(AST_Dot, function(compressor, suffix) {\n        return this.expression._find_defs(compressor, \".\" + this.property + suffix);\n    });\n    def_find_defs(AST_SymbolDeclaration, function() {\n        if (!this.global()) return;\n    });\n    def_find_defs(AST_SymbolRef, function(compressor, suffix) {\n        if (!this.global()) return;\n        var defines = compressor.option(\"global_defs\");\n        var name = this.name + suffix;\n        if (HOP(defines, name)) return to_node(defines[name], this);\n    });\n    def_find_defs(AST_ImportMeta, function(compressor, suffix) {\n        var defines = compressor.option(\"global_defs\");\n        var name = \"import.meta\" + suffix;\n        if (HOP(defines, name)) return to_node(defines[name], this);\n    });\n})(function(node, func) {\n    node.DEFMETHOD(\"_find_defs\", func);\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}