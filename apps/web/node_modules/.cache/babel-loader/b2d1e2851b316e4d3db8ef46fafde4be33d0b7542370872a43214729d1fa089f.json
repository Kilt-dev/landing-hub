{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\CreateLanding.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport api from \"@landinghub/api\";\nimport DogLoader from \"../components/DogLoader\";\nimport \"grapesjs/dist/css/grapes.min.css\";\nimport grapesjs from \"grapesjs\";\nimport \"grapesjs-preset-webpage\";\nimport \"grapesjs-blocks-basic\";\nimport \"../styles/CreateLanding.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  jwtDecode\n} = require('jwt-decode');\nconst CreateLandingPage = () => {\n  _s();\n  // State management\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [pageDescription, setPageDescription] = useState(\"\");\n  const [saveTime, setSaveTime] = useState(null);\n  const [aiModalOpen, setAiModalOpen] = useState(false);\n  const [aiHtml, setAiHtml] = useState(\"\");\n  const [aiThumbnail, setAiThumbnail] = useState(\"\");\n  const [aiImprovements, setAiImprovements] = useState([]);\n  const [originalHtml, setOriginalHtml] = useState(\"\");\n  const [isAutoSaving, setIsAutoSaving] = useState(false);\n  const [currentPage, setCurrentPage] = useState(null);\n  const [previewMode, setPreviewMode] = useState(false);\n  const [selectedDevice, setSelectedDevice] = useState('desktop');\n  const [showShortcuts, setShowShortcuts] = useState(false);\n\n  // Refs\n  const editorRef = useRef(null);\n  const editorContainerRef = useRef(null);\n  const autoSaveTimeoutRef = useRef(null);\n  const navigate = useNavigate();\n  const {\n    pageId\n  } = useParams();\n\n  // Auth check với enhanced security\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      navigate(\"/auth\", {\n        state: {\n          from: location.pathname\n        }\n      });\n      return;\n    }\n    try {\n      const decoded = jwtDecode(token);\n      const currentTime = Date.now() / 1000;\n      if (!decoded.userId) throw new Error(\"Invalid token - missing userId\");\n      if (decoded.exp < currentTime) throw new Error(\"Token expired\");\n      api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n    } catch (err) {\n      console.error(\"Auth error:\", err.message);\n      localStorage.removeItem(\"token\");\n      navigate(\"/auth\", {\n        state: {\n          from: location.pathname,\n          error: \"Session expired\"\n        }\n      });\n    }\n  }, [navigate]);\n\n  // Load existing page if editing\n  useEffect(() => {\n    if (pageId) {\n      loadExistingPage();\n    }\n  }, [pageId]);\n  const loadExistingPage = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/api/pages/${pageId}/content`);\n      setCurrentPage(response.data);\n      if (editorRef.current && response.data.html) {\n        var _doc$head$querySelect;\n        // Parse HTML to extract content for GrapesJS\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(response.data.html, 'text/html');\n        const bodyContent = doc.body.innerHTML;\n        const styleContent = ((_doc$head$querySelect = doc.head.querySelector('style')) === null || _doc$head$querySelect === void 0 ? void 0 : _doc$head$querySelect.innerHTML) || '';\n        editorRef.current.setComponents(bodyContent);\n        editorRef.current.setCss(styleContent);\n        setPageDescription(response.data.name || '');\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Load page error:\", err);\n      setError(\"Không thể tải nội dung trang: \" + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Enhanced GrapesJS initialization\n  useEffect(() => {\n    if (!editorRef.current && editorContainerRef.current) {\n      try {\n        editorRef.current = grapesjs.init({\n          container: editorContainerRef.current,\n          height: '70vh',\n          width: '100%',\n          fromElement: false,\n          storageManager: false,\n          // Enhanced plugins\n          plugins: ['gjs-blocks-basic', 'gjs-preset-webpage'],\n          pluginsOpts: {\n            'gjs-blocks-basic': {\n              blocks: ['column1', 'column2', 'column3', 'text', 'link', 'image', 'video']\n            },\n            'gjs-preset-webpage': {\n              modalImportTitle: 'Import Template',\n              modalImportLabel: '<div style=\"margin-bottom: 10px; font-size: 13px;\">Paste here your HTML/CSS and click Import</div>',\n              modalImportContent: function (editor) {\n                return editor.getHtml() + '<style>' + editor.getCss() + '</style>';\n              }\n            }\n          },\n          // Canvas settings\n          canvas: {\n            styles: ['https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css'],\n            scripts: []\n          },\n          // Block manager config\n          blockManager: {\n            appendTo: '.blocks-container',\n            blocks: [{\n              id: 'hero-section',\n              label: 'Hero Section',\n              category: 'Sections',\n              content: `\n                                    <div class=\"hero-section\" style=\"padding: 80px 20px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; min-height: 500px; display: flex; align-items: center; justify-content: center; flex-direction: column;\">\n                                        <h1 style=\"font-size: 3rem; margin-bottom: 1rem; font-weight: 700;\">Tiêu đề chính</h1>\n                                        <p style=\"font-size: 1.2rem; margin-bottom: 2rem; max-width: 600px;\">Mô tả ngắn gọn về sản phẩm hoặc dịch vụ của bạn. Hãy viết một câu thu hút và thuyết phục.</p>\n                                        <button style=\"background: #ff6b6b; color: white; padding: 15px 30px; font-size: 1.1rem; border: none; border-radius: 50px; cursor: pointer; transition: all 0.3s ease;\" onmouseover=\"this.style.transform='scale(1.05)'\" onmouseout=\"this.style.transform='scale(1)'\">Hành động chính</button>\n                                    </div>\n                                `,\n              media: '<i class=\"fa fa-star\"></i>'\n            }, {\n              id: 'feature-cards',\n              label: 'Feature Cards',\n              category: 'Sections',\n              content: `\n                                    <div class=\"features-section\" style=\"padding: 60px 20px; max-width: 1200px; margin: 0 auto;\">\n                                        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;\">\n                                            <div style=\"text-align: center; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\n                                                <div style=\"width: 60px; height: 60px; background: #4CAF50; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white;\">\n                                                    <i class=\"fa fa-rocket\"></i>\n                                                </div>\n                                                <h3 style=\"margin-bottom: 15px; color: #333;\">Tính năng 1</h3>\n                                                <p style=\"color: #666; line-height: 1.6;\">Mô tả chi tiết về tính năng này và lợi ích mà nó mang lại cho người dùng.</p>\n                                            </div>\n                                            <div style=\"text-align: center; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\n                                                <div style=\"width: 60px; height: 60px; background: #2196F3; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white;\">\n                                                    <i class=\"fa fa-shield\"></i>\n                                                </div>\n                                                <h3 style=\"margin-bottom: 15px; color: #333;\">Tính năng 2</h3>\n                                                <p style=\"color: #666; line-height: 1.6;\">Mô tả chi tiết về tính năng này và lợi ích mà nó mang lại cho người dùng.</p>\n                                            </div>\n                                            <div style=\"text-align: center; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\n                                                <div style=\"width: 60px; height: 60px; background: #FF9800; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white;\">\n                                                    <i class=\"fa fa-heart\"></i>\n                                                </div>\n                                                <h3 style=\"margin-bottom: 15px; color: #333;\">Tính năng 3</h3>\n                                                <p style=\"color: #666; line-height: 1.6;\">Mô tả chi tiết về tính năng này và lợi ích mà nó mang lại cho người dùng.</p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                `,\n              media: '<i class=\"fa fa-th-large\"></i>'\n            }, {\n              id: 'contact-form',\n              label: 'Contact Form',\n              category: 'Forms',\n              content: `\n                                    <div class=\"contact-section\" style=\"padding: 60px 20px; background: #f8f9fa;\">\n                                        <div style=\"max-width: 600px; margin: 0 auto;\">\n                                            <h2 style=\"text-align: center; margin-bottom: 30px; color: #333;\">Liên hệ với chúng tôi</h2>\n                                            <form style=\"background: white; padding: 40px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);\">\n                                                <div style=\"margin-bottom: 20px;\">\n                                                    <input type=\"text\" placeholder=\"Họ và tên\" style=\"width: 100%; padding: 15px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px; transition: border-color 0.3s;\" onfocus=\"this.style.borderColor='#007bff'\" onblur=\"this.style.borderColor='#e1e5e9'\">\n                                                </div>\n                                                <div style=\"margin-bottom: 20px;\">\n                                                    <input type=\"email\" placeholder=\"Email\" style=\"width: 100%; padding: 15px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px; transition: border-color 0.3s;\" onfocus=\"this.style.borderColor='#007bff'\" onblur=\"this.style.borderColor='#e1e5e9'\">\n                                                </div>\n                                                <div style=\"margin-bottom: 30px;\">\n                                                    <textarea placeholder=\"Tin nhắn\" rows=\"5\" style=\"width: 100%; padding: 15px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px; resize: vertical; transition: border-color 0.3s;\" onfocus=\"this.style.borderColor='#007bff'\" onblur=\"this.style.borderColor='#e1e5e9'\"></textarea>\n                                                </div>\n                                                <button type=\"submit\" style=\"width: 100%; background: #007bff; color: white; padding: 15px; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; transition: background 0.3s;\" onmouseover=\"this.style.background='#0056b3'\" onmouseout=\"this.style.background='#007bff'\">Gửi tin nhắn</button>\n                                            </form>\n                                        </div>\n                                    </div>\n                                `,\n              media: '<i class=\"fa fa-envelope\"></i>'\n            }, {\n              id: 'testimonials',\n              label: 'Testimonials',\n              category: 'Sections',\n              content: `\n                                    <div class=\"testimonials-section\" style=\"padding: 80px 20px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\">\n                                        <div style=\"max-width: 1200px; margin: 0 auto; text-align: center;\">\n                                            <h2 style=\"color: white; font-size: 2.5rem; margin-bottom: 50px; font-weight: 700;\">Khách hàng nói gì về chúng tôi</h2>\n                                            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; margin-top: 40px;\">\n                                                <div style=\"background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transform: translateY(0); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\n                                                    <div style=\"display: flex; align-items: center; margin-bottom: 20px;\">\n                                                        <img src=\"https://via.placeholder.com/60x60/4CAF50/white?text=A\" style=\"width: 60px; height: 60px; border-radius: 50%; margin-right: 15px;\">\n                                                        <div style=\"text-align: left;\">\n                                                            <h4 style=\"margin: 0; color: #333;\">Nguyễn Văn A</h4>\n                                                            <p style=\"margin: 5px 0 0 0; color: #666; font-size: 14px;\">CEO, Công ty ABC</p>\n                                                        </div>\n                                                    </div>\n                                                    <p style=\"color: #555; line-height: 1.6; font-style: italic;\">\"Dịch vụ tuyệt vời! Đội ngũ chuyên nghiệp và sản phẩm chất lượng cao. Tôi rất hài lòng với kết quả.\"</p>\n                                                    <div style=\"color: #ffc107; margin-top: 15px;\">\n                                                        <i class=\"fa fa-star\"></i>\n                                                        <i class=\"fa fa-star\"></i>\n                                                        <i class=\"fa fa-star\"></i>\n                                                        <i class=\"fa fa-star\"></i>\n                                                        <i class=\"fa fa-star\"></i>\n                                                    </div>\n                                                </div>\n                                                <div style=\"background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transform: translateY(0); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\n                                                    <div style=\"display: flex; align-items: center; margin-bottom: 20px;\">\n                                                        <img src=\"https://via.placeholder.com/60x60/2196F3/white?text=B\" style=\"width: 60px; height: 60px; border-radius: 50%; margin-right: 15px;\">\n                                                        <div style=\"text-align: left;\">\n                                                            <h4 style=\"margin: 0; color: #333;\">Trần Thị B</h4>\n                                                            <p style=\"margin: 5px 0 0 0; color: #666; font-size: 14px;\">Giám đốc Marketing</p>\n                                                        </div>\n                                                    </div>\n                                                    <p style=\"color: #555; line-height: 1.6; font-style: italic;\">\"Hỗ trợ khách hàng xuất sắc và giao diện người dùng rất thân thiện. Chắc chắn sẽ giới thiệu cho bạn bè.\"</p>\n                                                    <div style=\"color: #ffc107; margin-top: 15px;\">\n                                                        <i class=\"fa fa-star\"></i>\n                                                        <i class=\"fa fa-star\"></i>\n                                                        <i class=\"fa fa-star\"></i>\n                                                        <i class=\"fa fa-star\"></i>\n                                                        <i class=\"fa fa-star\"></i>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                `,\n              media: '<i class=\"fa fa-quote-left\"></i>'\n            }, {\n              id: 'pricing-table',\n              label: 'Pricing Table',\n              category: 'Sections',\n              content: `\n                                    <div class=\"pricing-section\" style=\"padding: 80px 20px; background: #f8f9fa;\">\n                                        <div style=\"max-width: 1200px; margin: 0 auto; text-align: center;\">\n                                            <h2 style=\"color: #333; font-size: 2.5rem; margin-bottom: 20px; font-weight: 700;\">Bảng giá dịch vụ</h2>\n                                            <p style=\"color: #666; font-size: 1.2rem; margin-bottom: 50px;\">Chọn gói phù hợp với nhu cầu của bạn</p>\n                                            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;\">\n                                                <div style=\"background: white; padding: 40px 30px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); position: relative; transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\n                                                    <h3 style=\"color: #333; margin-bottom: 10px; font-size: 1.5rem;\">Gói Cơ Bản</h3>\n                                                    <div style=\"margin-bottom: 30px;\">\n                                                        <span style=\"font-size: 3rem; font-weight: 700; color: #007bff;\">$29</span>\n                                                        <span style=\"color: #666;\">/tháng</span>\n                                                    </div>\n                                                    <ul style=\"list-style: none; padding: 0; margin-bottom: 30px;\">\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>5 Landing Pages</li>\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Analytics cơ bản</li>\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Hỗ trợ email</li>\n                                                        <li style=\"padding: 8px 0; color: #ccc;\"><i class=\"fa fa-times\" style=\"color: #f44336; margin-right: 10px;\"></i>AI Tối ưu</li>\n                                                    </ul>\n                                                    <button style=\"width: 100%; background: #007bff; color: white; padding: 15px; border: none; border-radius: 50px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background 0.3s;\" onmouseover=\"this.style.background='#0056b3'\" onmouseout=\"this.style.background='#007bff'\">Chọn gói</button>\n                                                </div>\n                                                <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; border-radius: 20px; color: white; position: relative; transform: scale(1.05); box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);\">\n                                                    <div style=\"position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: #ff6b6b; color: white; padding: 8px 20px; border-radius: 20px; font-size: 12px; font-weight: 600;\">PHỔ BIẾN</div>\n                                                    <h3 style=\"margin-bottom: 10px; font-size: 1.5rem;\">Gói Pro</h3>\n                                                    <div style=\"margin-bottom: 30px;\">\n                                                        <span style=\"font-size: 3rem; font-weight: 700;\">$59</span>\n                                                        <span>/tháng</span>\n                                                    </div>\n                                                    <ul style=\"list-style: none; padding: 0; margin-bottom: 30px;\">\n                                                        <li style=\"padding: 8px 0;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>20 Landing Pages</li>\n                                                        <li style=\"padding: 8px 0;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Analytics nâng cao</li>\n                                                        <li style=\"padding: 8px 0;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Hỗ trợ 24/7</li>\n                                                        <li style=\"padding: 8px 0;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>AI Tối ưu</li>\n                                                    </ul>\n                                                    <button style=\"width: 100%; background: white; color: #667eea; padding: 15px; border: none; border-radius: 50px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s;\" onmouseover=\"this.style.background='#f8f9ff'\" onmouseout=\"this.style.background='white'\">Chọn gói</button>\n                                                </div>\n                                                <div style=\"background: white; padding: 40px 30px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\n                                                    <h3 style=\"color: #333; margin-bottom: 10px; font-size: 1.5rem;\">Gói Enterprise</h3>\n                                                    <div style=\"margin-bottom: 30px;\">\n                                                        <span style=\"font-size: 3rem; font-weight: 700; color: #007bff;\">$99</span>\n                                                        <span style=\"color: #666;\">/tháng</span>\n                                                    </div>\n                                                    <ul style=\"list-style: none; padding: 0; margin-bottom: 30px;\">\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Không giới hạn</li>\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Analytics chuyên sâu</li>\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Hỗ trợ ưu tiên</li>\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>AI + Custom Code</li>\n                                                    </ul>\n                                                    <button style=\"width: 100%; background: #007bff; color: white; padding: 15px; border: none; border-radius: 50px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background 0.3s;\" onmouseover=\"this.style.background='#0056b3'\" onmouseout=\"this.style.background='#007bff'\">Chọn gói</button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                `,\n              media: '<i class=\"fa fa-dollar-sign\"></i>'\n            }, {\n              id: 'footer',\n              label: 'Footer',\n              category: 'Sections',\n              content: `\n                                    <footer style=\"background: #2c3e50; color: white; padding: 60px 20px 20px; margin-top: auto;\">\n                                        <div style=\"max-width: 1200px; margin: 0 auto;\">\n                                            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom: 40px;\">\n                                                <div>\n                                                    <h3 style=\"margin-bottom: 20px; font-size: 1.5rem;\">LandingHub</h3>\n                                                    <p style=\"color: #bdc3c7; line-height: 1.6; margin-bottom: 20px;\">Tạo landing page chuyên nghiệp với AI, dễ dàng và nhanh chóng.</p>\n                                                    <div style=\"display: flex; gap: 15px;\">\n                                                        <a href=\"#\" style=\"color: #3498db; font-size: 1.5rem; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#3498db'\"><i class=\"fab fa-facebook\"></i></a>\n                                                        <a href=\"#\" style=\"color: #3498db; font-size: 1.5rem; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#3498db'\"><i class=\"fab fa-twitter\"></i></a>\n                                                        <a href=\"#\" style=\"color: #3498db; font-size: 1.5rem; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#3498db'\"><i class=\"fab fa-linkedin\"></i></a>\n                                                    </div>\n                                                </div>\n                                                <div>\n                                                    <h4 style=\"margin-bottom: 20px; color: #ecf0f1;\">Sản phẩm</h4>\n                                                    <ul style=\"list-style: none; padding: 0;\">\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Landing Page Builder</a></li>\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">AI Templates</a></li>\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Analytics</a></li>\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Integrations</a></li>\n                                                    </ul>\n                                                </div>\n                                                <div>\n                                                    <h4 style=\"margin-bottom: 20px; color: #ecf0f1;\">Hỗ trợ</h4>\n                                                    <ul style=\"list-style: none; padding: 0;\">\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Trung tâm trợ giúp</a></li>\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Hướng dẫn</a></li>\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Liên hệ</a></li>\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Status</a></li>\n                                                    </ul>\n                                                </div>\n                                                <div>\n                                                    <h4 style=\"margin-bottom: 20px; color: #ecf0f1;\">Liên hệ</h4>\n                                                    <div style=\"color: #bdc3c7;\">\n                                                        <p style=\"margin-bottom: 10px; display: flex; align-items: center;\"><i class=\"fa fa-envelope\" style=\"margin-right: 10px; color: #3498db;\"></i> support@landinghub.vn</p>\n                                                        <p style=\"margin-bottom: 10px; display: flex; align-items: center;\"><i class=\"fa fa-phone\" style=\"margin-right: 10px; color: #3498db;\"></i> +84 123 456 789</p>\n                                                        <p style=\"margin-bottom: 10px; display: flex; align-items: center;\"><i class=\"fa fa-map-marker\" style=\"margin-right: 10px; color: #3498db;\"></i> TP. Hồ Chí Minh, Việt Nam</p>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div style=\"border-top: 1px solid #34495e; padding-top: 20px; text-align: center; color: #bdc3c7;\">\n                                                <p>&copy; 2024 LandingHub. Tất cả quyền được bảo lưu.</p>\n                                            </div>\n                                        </div>\n                                    </footer>\n                                `,\n              media: '<i class=\"fa fa-sitemap\"></i>'\n            }]\n          },\n          // Style manager settings\n          styleManager: {\n            appendTo: '.styles-container',\n            sectors: [{\n              name: 'Dimension',\n              open: false,\n              buildProps: ['width', 'min-height', 'padding'],\n              properties: [{\n                type: 'integer',\n                name: 'Width',\n                property: 'width',\n                units: ['px', '%', 'vw'],\n                defaults: 'auto',\n                min: 0\n              }]\n            }, {\n              name: 'Typography',\n              open: false,\n              buildProps: ['font-family', 'font-size', 'font-weight', 'letter-spacing', 'color', 'line-height', 'text-align', 'text-decoration', 'text-shadow'],\n              properties: [{\n                name: 'Font',\n                property: 'font-family'\n              }, {\n                name: 'Weight',\n                property: 'font-weight'\n              }, {\n                name: 'Font color',\n                property: 'color'\n              }, {\n                property: 'text-align',\n                type: 'radio',\n                defaults: 'left',\n                list: [{\n                  value: 'left',\n                  name: 'Left',\n                  className: 'fa fa-align-left'\n                }, {\n                  value: 'center',\n                  name: 'Center',\n                  className: 'fa fa-align-center'\n                }, {\n                  value: 'right',\n                  name: 'Right',\n                  className: 'fa fa-align-right'\n                }, {\n                  value: 'justify',\n                  name: 'Justify',\n                  className: 'fa fa-align-justify'\n                }]\n              }]\n            }, {\n              name: 'Decorations',\n              open: false,\n              buildProps: ['opacity', 'background-color', 'border-radius', 'border', 'box-shadow', 'background'],\n              properties: [{\n                type: 'slider',\n                property: 'opacity',\n                defaults: 1,\n                step: 0.01,\n                max: 1,\n                min: 0\n              }]\n            }, {\n              name: 'Extra',\n              open: false,\n              buildProps: ['transition', 'perspective', 'transform'],\n              properties: [{\n                property: 'transition',\n                type: 'stack',\n                properties: [{\n                  type: 'select',\n                  property: 'transition-property',\n                  defaults: 'width'\n                }, {\n                  type: 'integer',\n                  property: 'transition-duration',\n                  units: ['s', 'ms'],\n                  defaults: '2',\n                  min: 0\n                }]\n              }]\n            }]\n          },\n          // Layers panel\n          layerManager: {\n            appendTo: '.layers-container'\n          },\n          // Device manager for responsive design\n          deviceManager: {\n            devices: [{\n              name: 'Desktop',\n              width: '',\n              id: 'desktop'\n            }, {\n              name: 'Tablet',\n              width: '768px',\n              widthMedia: '992px',\n              id: 'tablet'\n            }, {\n              name: 'Mobile portrait',\n              width: '320px',\n              widthMedia: '768px',\n              id: 'mobilePortrait'\n            }]\n          },\n          // Panel settings\n          panels: {\n            defaults: [{\n              id: 'layers',\n              el: '.layers-container',\n              resizable: {\n                maxDim: 350,\n                minDim: 200,\n                tc: 0,\n                cl: 1,\n                cr: 0,\n                bc: 0,\n                keyWidth: 'flex-basis'\n              }\n            }, {\n              id: 'styles',\n              el: '.styles-container',\n              resizable: {\n                maxDim: 350,\n                minDim: 200,\n                tc: 0,\n                cl: 1,\n                cr: 0,\n                bc: 0,\n                keyWidth: 'flex-basis'\n              }\n            }, {\n              id: 'blocks',\n              el: '.blocks-container',\n              resizable: {\n                maxDim: 350,\n                minDim: 200,\n                tc: 0,\n                cl: 1,\n                cr: 0,\n                bc: 0,\n                keyWidth: 'flex-basis'\n              }\n            }]\n          }\n        });\n\n        // Enhanced auto-save với debounce\n        const debouncedAutoSave = debounce(() => {\n          handleAutoSave();\n        }, 800);\n        ['update', 'component:add', 'component:remove', 'component:update'].forEach(event => {\n          editorRef.current.on(event, debouncedAutoSave);\n        });\n\n        // Device change handler\n        editorRef.current.on('device:select', device => {\n          setSelectedDevice(device.get('id'));\n        });\n\n        // Load draft nếu có\n        loadDraft();\n      } catch (err) {\n        console.error('GrapesJS initialization error:', err);\n        setError('Lỗi khởi tạo editor: ' + err.message);\n      }\n    }\n\n    // Cleanup\n    return () => {\n      if (autoSaveTimeoutRef.current) {\n        clearTimeout(autoSaveTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Debounce utility\n  const debounce = (func, wait) => {\n    return (...args) => {\n      clearTimeout(autoSaveTimeoutRef.current);\n      autoSaveTimeoutRef.current = setTimeout(() => func.apply(this, args), wait);\n    };\n  };\n\n  // Load draft from localStorage\n  const loadDraft = useCallback(async () => {\n    try {\n      const draftKey = pageId ? `draft_${pageId}` : 'draft_new';\n      const savedDraft = localStorage.getItem(draftKey);\n      if (savedDraft) {\n        const draft = JSON.parse(savedDraft);\n        const timeDiff = Date.now() - new Date(draft.timestamp).getTime();\n\n        // Chỉ load draft nếu < 24h\n        if (timeDiff < 24 * 60 * 60 * 1000 && editorRef.current) {\n          if (draft.html) editorRef.current.setComponents(draft.html);\n          if (draft.css) editorRef.current.setCss(draft.css);\n          setSuccess('Đã khôi phục bản nháp đã lưu');\n        }\n      }\n    } catch (err) {\n      console.warn('Load draft error:', err);\n    }\n  }, [pageId]);\n\n  // Enhanced auto-save với local storage\n  const handleAutoSave = useCallback(async () => {\n    if (!editorRef.current || isAutoSaving) return;\n    setIsAutoSaving(true);\n    try {\n      const html = editorRef.current.getHtml();\n      const css = editorRef.current.getCss();\n\n      // Lưu draft local\n      const draftKey = pageId ? `draft_${pageId}` : 'draft_new';\n      const draft = {\n        html,\n        css,\n        timestamp: new Date().toISOString()\n      };\n      localStorage.setItem(draftKey, JSON.stringify(draft));\n\n      // Auto-save lên server (nếu có pageId)\n      if (pageId) {\n        await api.post('/api/pages/auto-save', {\n          html,\n          css,\n          pageId\n        });\n      }\n      setSaveTime(new Date().toLocaleTimeString('vi-VN'));\n    } catch (err) {\n      console.warn('Auto save error:', err);\n    } finally {\n      setIsAutoSaving(false);\n    }\n  }, [pageId, isAutoSaving]);\n\n  // Clear messages after timeout\n  useEffect(() => {\n    if (error || success) {\n      const timer = setTimeout(() => {\n        setError(null);\n        setSuccess(null);\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, success]);\n\n  // Enhanced reload editor\n  const handleReloadEditor = useCallback(() => {\n    if (editorRef.current) {\n      editorRef.current.destroy();\n      editorRef.current = null;\n\n      // Reload page để reinitialize\n      window.location.reload();\n    }\n  }, []);\n\n  // Enhanced export HTML\n  const handleExportHTML = useCallback(() => {\n    if (!editorRef.current) return;\n    try {\n      const html = editorRef.current.getHtml();\n      const css = editorRef.current.getCss();\n      const fullHtml = `<!DOCTYPE html>\n<html lang=\"vi\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"description\" content=\"${pageDescription || 'Landing Page tạo bởi LandingHub'}\">\n    <title>${pageDescription || 'Landing Page'}</title>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\n    <style>\n        * { \n            margin: 0; \n            padding: 0; \n            box-sizing: border-box; \n        }\n        body { \n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; \n            line-height: 1.6; \n        }\n        ${css}\n    </style>\n</head>\n<body>\n    ${html}\n    <script>\n        // Basic analytics tracking\n        console.log('Landing page loaded at:', new Date());\n        \n        // Form submission handler\n        document.querySelectorAll('form').forEach(form => {\n            form.addEventListener('submit', function(e) {\n                e.preventDefault();\n                alert('Form submitted! (Demo mode)');\n                console.log('Form data:', new FormData(this));\n            });\n        });\n\n        // Button click tracking\n        document.querySelectorAll('button').forEach(button => {\n            button.addEventListener('click', function() {\n                console.log('Button clicked:', this.textContent);\n            });\n        });\n\n        // Smooth scroll for anchor links\n        document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n            anchor.addEventListener('click', function (e) {\n                e.preventDefault();\n                const target = document.querySelector(this.getAttribute('href'));\n                if (target) {\n                    target.scrollIntoView({ behavior: 'smooth' });\n                }\n            });\n        });\n    </script>\n</body>\n</html>`;\n      const blob = new Blob([fullHtml], {\n        type: 'text/html;charset=utf-8'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `${pageDescription || 'landing-page'}.html`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      setSuccess('Đã xuất file HTML thành công!');\n    } catch (err) {\n      console.error('Export error:', err);\n      setError('Lỗi khi xuất HTML: ' + err.message);\n    }\n  }, [pageDescription]);\n\n  // Enhanced AI Refactor\n  const handleAiRefactor = useCallback(async () => {\n    if (!editorRef.current) return;\n    try {\n      setLoading(true);\n      const html = editorRef.current.getHtml();\n      const css = editorRef.current.getCss();\n      const fullContent = html + (css ? `<style>${css}</style>` : '');\n\n      // Lưu bản gốc\n      setOriginalHtml(fullContent);\n      const response = await api.post('/api/pages/ai-refactor', {\n        html: fullContent\n      });\n      setAiHtml(response.data.html);\n      setAiThumbnail(response.data.thumbnail);\n      setAiImprovements(response.data.improvements || []);\n      setAiModalOpen(true);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error('AI Refactor error:', err);\n      setError('Lỗi khi gọi AI Refactor: ' + (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Accept AI refactor\n  const handleAcceptAi = useCallback(() => {\n    if (!editorRef.current || !aiHtml) return;\n    try {\n      // Parse AI HTML để tách HTML và CSS\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(aiHtml, 'text/html');\n      const bodyContent = doc.body.innerHTML;\n      const styleElement = doc.head.querySelector('style');\n      const cssContent = styleElement ? styleElement.innerHTML : '';\n      editorRef.current.setComponents(bodyContent);\n      if (cssContent) {\n        editorRef.current.setCss(cssContent);\n      }\n      handleAutoSave();\n      setAiModalOpen(false);\n      setSuccess('Đã áp dụng AI Refactor thành công!');\n    } catch (err) {\n      console.error('Apply AI error:', err);\n      setError('Lỗi khi áp dụng AI refactor: ' + err.message);\n    }\n  }, [aiHtml, handleAutoSave]);\n\n  // Enhanced create page\n  const handleCreatePage = useCallback(async () => {\n    if (!(pageDescription !== null && pageDescription !== void 0 && pageDescription.trim())) {\n      setError('Vui lòng nhập mô tả landing page');\n      return;\n    }\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await api.post('/api/pages', {\n        description: pageDescription.trim()\n      });\n      if (response.data.html && editorRef.current) {\n        var _doc$head$querySelect2;\n        // Parse và load vào editor\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(response.data.html, 'text/html');\n        const bodyContent = doc.body.innerHTML;\n        const styleContent = ((_doc$head$querySelect2 = doc.head.querySelector('style')) === null || _doc$head$querySelect2 === void 0 ? void 0 : _doc$head$querySelect2.innerHTML) || '';\n        editorRef.current.setComponents(bodyContent);\n        if (styleContent) {\n          editorRef.current.setCss(styleContent);\n        }\n      }\n      setCurrentPage(response.data);\n      setSuccess('Tạo landing page thành công!');\n\n      // Navigate to edit page\n      navigate(`/pages/edit/${response.data.id}`, {\n        state: {\n          page: response.data,\n          isNew: true\n        },\n        replace: true\n      });\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error('Create error:', err);\n      setError('Lỗi khi tạo landing page: ' + (((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  }, [pageDescription, navigate]);\n\n  // Save page (manual save)\n  const handleSavePage = useCallback(async () => {\n    if (!editorRef.current) return;\n    try {\n      setLoading(true);\n      const html = editorRef.current.getHtml();\n      const css = editorRef.current.getCss();\n      const fullHtml = `<!DOCTYPE html>\n<html lang=\"vi\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${pageDescription || 'Landing Page'}</title>\n    <style>${css}</style>\n</head>\n<body>\n    ${html}\n</body>\n</html>`;\n      let response;\n      if (pageId) {\n        // Update existing page\n        response = await api.put(`/api/pages/${pageId}`, {\n          html: fullHtml\n        });\n      } else {\n        // Save new page\n        response = await api.post('/api/pages/save', {\n          html: fullHtml\n        });\n      }\n      setCurrentPage(response.data);\n      setSaveTime(new Date().toLocaleTimeString('vi-VN'));\n      setSuccess('Đã lưu trang thành công!');\n\n      // Clear draft\n      const draftKey = pageId ? `draft_${pageId}` : 'draft_new';\n      localStorage.removeItem(draftKey);\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      console.error('Save error:', err);\n      setError('Lỗi khi lưu trang: ' + (((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  }, [pageId, pageDescription]);\n\n  // Preview page\n  const handlePreviewPage = useCallback(() => {\n    if (!editorRef.current) return;\n    const html = editorRef.current.getHtml();\n    const css = editorRef.current.getCss();\n    const previewWindow = window.open('', '_blank');\n    previewWindow.document.write(`\n            <!DOCTYPE html>\n            <html lang=\"vi\">\n            <head>\n                <meta charset=\"UTF-8\">\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n                <title>Preview - ${pageDescription || 'Landing Page'}</title>\n                <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\n                <style>\n                    * { margin: 0; padding: 0; box-sizing: border-box; }\n                    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; }\n                    ${css}\n                </style>\n            </head>\n            <body>\n                ${html}\n                <div style=\"position: fixed; top: 10px; right: 10px; background: #007bff; color: white; padding: 10px 15px; border-radius: 25px; z-index: 9999; font-size: 14px; box-shadow: 0 4px 12px rgba(0,123,255,0.3);\">\n                    <i class=\"fa fa-eye\"></i> Preview Mode\n                </div>\n                <script>\n                    // Form handlers for preview\n                    document.querySelectorAll('form').forEach(form => {\n                        form.addEventListener('submit', function(e) {\n                            e.preventDefault();\n                            alert('Form submission (Preview mode)');\n                        });\n                    });\n                </script>\n            </body>\n            </html>\n        `);\n    previewWindow.document.close();\n  }, [pageDescription]);\n\n  // Publish page\n  const handlePublishPage = useCallback(async () => {\n    if (!pageId) {\n      setError('Vui lòng lưu trang trước khi xuất bản');\n      return;\n    }\n    try {\n      setLoading(true);\n      const response = await api.post(`/api/pages/${pageId}/publish`);\n      setCurrentPage(response.data);\n      setSuccess(`Trang đã được xuất bản tại: ${response.data.url}`);\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n      console.error('Publish error:', err);\n      setError('Lỗi khi xuất bản: ' + (((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  }, [pageId]);\n\n  // Template selection\n  const handleSelectTemplate = useCallback(templateId => {\n    if (!editorRef.current) return;\n\n    // Predefined templates\n    const templates = {\n      blank: {\n        html: '<div>Bắt đầu từ trang trống</div>',\n        css: ''\n      },\n      business: {\n        html: `\n                    <div style=\"min-height: 100vh;\">\n                        <header style=\"background: #2c3e50; color: white; padding: 20px 0; text-align: center;\">\n                            <h1>Doanh Nghiệp Của Bạn</h1>\n                            <p>Giải pháp chuyên nghiệp cho mọi nhu cầu</p>\n                        </header>\n                        <main style=\"padding: 60px 20px; text-align: center;\">\n                            <h2>Chào mừng đến với dịch vụ của chúng tôi</h2>\n                            <p style=\"margin: 20px 0; color: #666;\">Chúng tôi cung cấp giải pháp tốt nhất cho doanh nghiệp của bạn</p>\n                            <button style=\"background: #3498db; color: white; padding: 15px 30px; border: none; border-radius: 5px; font-size: 16px;\">Liên hệ ngay</button>\n                        </main>\n                    </div>\n                `,\n        css: `\n                    body { font-family: 'Arial', sans-serif; margin: 0; }\n                    button:hover { background: #2980b9 !important; }\n                `\n      },\n      portfolio: {\n        html: `\n                    <div style=\"min-height: 100vh; background: #f8f9fa;\">\n                        <section style=\"padding: 100px 20px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;\">\n                            <h1 style=\"font-size: 3em; margin-bottom: 20px;\">Portfolio</h1>\n                            <p style=\"font-size: 1.2em;\">Showcase công việc và dự án của tôi</p>\n                        </section>\n                        <section style=\"padding: 80px 20px; text-align: center;\">\n                            <h2>Về tôi</h2>\n                            <p style=\"max-width: 600px; margin: 20px auto; color: #666;\">\n                                Tôi là một nhà thiết kế và phát triển với niềm đam mê tạo ra những trải nghiệm tuyệt vời.\n                            </p>\n                        </section>\n                    </div>\n                `,\n        css: `\n                    body { font-family: 'Georgia', serif; margin: 0; line-height: 1.6; }\n                `\n      }\n    };\n    const template = templates[templateId];\n    if (template) {\n      editorRef.current.setComponents(template.html);\n      editorRef.current.setCss(template.css);\n      setSuccess(`Đã tải template ${templateId}`);\n    }\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(DogLoader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 979,\n    columnNumber: 25\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"create-landing-page flex gap-4 p-4 max-w-7xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sidebar w-80 flex flex-col gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(\"/pages\"),\n          className: \"btn-secondary flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-arrow-left\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 991,\n            columnNumber: 25\n          }, this), \" Quay l\\u1EA1i\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 987,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold\",\n          children: [pageId ? 'Chỉnh sửa' : 'Tạo', \" Landing Page\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 993,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 986,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg flex justify-between items-start\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"flex-1\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1001,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setError(null),\n          className: \"ml-2 text-red-500 hover:text-red-700\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-times\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1006,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1002,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1000,\n        columnNumber: 21\n      }, this), success && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"success p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg flex justify-between items-start\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"flex-1\",\n          children: success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1013,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setSuccess(null),\n          className: \"ml-2 text-green-500 hover:text-green-700\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-times\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1018,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1014,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1012,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-lg border\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium mb-2\",\n          children: \"M\\xF4 t\\u1EA3 Landing Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1025,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: pageDescription,\n          onChange: e => setPageDescription(e.target.value),\n          rows: 4,\n          placeholder: \"Nh\\u1EADp m\\xF4 t\\u1EA3 chi ti\\u1EBFt v\\u1EC1 landing page b\\u1EA1n mu\\u1ED1n t\\u1EA1o...\",\n          className: \"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1026,\n          columnNumber: 21\n        }, this), !pageId && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleCreatePage,\n            className: \"w-full mt-3 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2\",\n            disabled: loading,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-magic\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1041,\n              columnNumber: 33\n            }, this), loading ? 'Đang tạo...' : 'Tạo với AI']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1036,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-3 pt-3 border-t\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600 mb-2\",\n              children: \"Ho\\u1EB7c ch\\u1ECDn template:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1047,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-3 gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleSelectTemplate('blank'),\n                className: \"btn-secondary text-xs py-1 px-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-file\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1053,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1054,\n                  columnNumber: 41\n                }, this), \"Tr\\u1ED1ng\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1049,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleSelectTemplate('business'),\n                className: \"btn-secondary text-xs py-1 px-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-briefcase\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1060,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1061,\n                  columnNumber: 41\n                }, this), \"Business\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1056,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleSelectTemplate('portfolio'),\n                className: \"btn-secondary text-xs py-1 px-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-user\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1067,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1068,\n                  columnNumber: 41\n                }, this), \"Portfolio\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1063,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1048,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1046,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1024,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg border\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 border-b\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-mobile-alt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1080,\n              columnNumber: 29\n            }, this), \"Thi\\u1EBFt b\\u1ECB\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1079,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1078,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _editorRef$current;\n                return (_editorRef$current = editorRef.current) === null || _editorRef$current === void 0 ? void 0 : _editorRef$current.setDevice('desktop');\n              },\n              className: `flex-1 py-2 px-3 text-sm rounded ${selectedDevice === 'desktop' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-desktop\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1090,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1086,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _editorRef$current2;\n                return (_editorRef$current2 = editorRef.current) === null || _editorRef$current2 === void 0 ? void 0 : _editorRef$current2.setDevice('tablet');\n              },\n              className: `flex-1 py-2 px-3 text-sm rounded ${selectedDevice === 'tablet' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-tablet-alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1096,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1092,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                var _editorRef$current3;\n                return (_editorRef$current3 = editorRef.current) === null || _editorRef$current3 === void 0 ? void 0 : _editorRef$current3.setDevice('mobilePortrait');\n              },\n              className: `flex-1 py-2 px-3 text-sm rounded ${selectedDevice === 'mobilePortrait' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-mobile-alt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1102,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1098,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1085,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1084,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1077,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg border\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 border-b\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-cubes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1112,\n              columnNumber: 29\n            }, this), \"Kh\\u1ED1i giao di\\u1EC7n\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1111,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"blocks-container p-2 max-h-80 overflow-y-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1116,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg border\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 border-b\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-paint-brush\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1123,\n              columnNumber: 29\n            }, this), \"Styles\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1122,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"styles-container p-2 max-h-60 overflow-y-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1127,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg border\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 border-b\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-layer-group\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1134,\n              columnNumber: 29\n            }, this), \"Layers\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1133,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"layers-container p-2 max-h-40 overflow-y-auto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1138,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1131,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 984,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-4 rounded-lg border\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-3 items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSavePage,\n            className: \"btn-primary flex items-center gap-2\",\n            disabled: loading,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1152,\n              columnNumber: 29\n            }, this), loading ? 'Đang lưu...' : 'Lưu']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1147,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePreviewPage,\n            className: \"btn-secondary flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-eye\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1160,\n              columnNumber: 29\n            }, this), \"Preview\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1156,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleExportHTML,\n            className: \"btn-secondary flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-download\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1168,\n              columnNumber: 29\n            }, this), \"Xu\\u1EA5t HTML\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1164,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAiRefactor,\n            className: \"btn-primary flex items-center gap-2\",\n            disabled: loading,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-robot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1177,\n              columnNumber: 29\n            }, this), loading ? 'AI đang xử lý...' : 'AI Refactor']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1172,\n            columnNumber: 25\n          }, this), pageId && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handlePublishPage,\n            className: \"btn-success flex items-center gap-2\",\n            disabled: loading,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-rocket\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1187,\n              columnNumber: 33\n            }, this), loading ? 'Đang xuất bản...' : 'Xuất bản']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1182,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleReloadEditor,\n            className: \"btn-danger flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-refresh\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1196,\n              columnNumber: 29\n            }, this), \"Reset Editor\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1192,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"ml-auto flex items-center gap-2 text-sm text-gray-600\",\n            children: [isAutoSaving && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-spinner fa-spin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1204,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u0110ang l\\u01B0u...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1205,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true), saveTime && !isAutoSaving && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-clock\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1210,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"L\\u1EA7n l\\u01B0u cu\\u1ED1i: \", saveTime]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1211,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1201,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1146,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1145,\n        columnNumber: 17\n      }, this), currentPage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-blue-50 border border-blue-200 p-3 rounded-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-medium text-blue-900\",\n              children: currentPage.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1223,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-blue-700\",\n              children: [\"Status: \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: currentPage.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1225,\n                columnNumber: 45\n              }, this), currentPage.url && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [' | ', /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: currentPage.url,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: \"underline hover:no-underline\",\n                  children: \"Xem trang live\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1229,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1224,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1222,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-blue-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Views: \", currentPage.views || 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1242,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Conversions: \", currentPage.conversions || 0]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1243,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1241,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1221,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1220,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg border overflow-hidden\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: editorContainerRef,\n          className: \"editor-section min-h-[70vh]\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1251,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1250,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1143,\n      columnNumber: 13\n    }, this), aiModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4 ai-modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto ai-modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-b\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-bold flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-robot text-blue-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1265,\n                columnNumber: 37\n              }, this), \"AI Refactor Preview\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1264,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setAiModalOpen(false),\n              className: \"text-gray-500 hover:text-gray-700 text-xl transition-colors\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-times\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1272,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1268,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1263,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1262,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6\",\n          children: [aiImprovements.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6 p-4 bg-blue-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-semibold mb-2 flex items-center gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-lightbulb text-yellow-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1282,\n                columnNumber: 41\n              }, this), \"C\\u1EA3i ti\\u1EBFn \\u0111\\u01B0\\u1EE3c \\u0111\\u1EC1 xu\\u1EA5t:\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1281,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc list-inside space-y-1\",\n              children: aiImprovements.map((improvement, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"text-sm text-gray-700\",\n                children: improvement\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1287,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1285,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1280,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-lg flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-file-code text-gray-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1300,\n                  columnNumber: 41\n                }, this), \"B\\u1EA3n g\\u1ED1c\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1299,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border rounded-lg p-4 bg-gray-50 max-h-96 overflow-y-auto preview-frame\",\n                dangerouslySetInnerHTML: {\n                  __html: originalHtml\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1303,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1298,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"font-semibold text-lg flex items-center gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-magic text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1312,\n                  columnNumber: 41\n                }, this), \"Phi\\xEAn b\\u1EA3n AI\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1311,\n                columnNumber: 37\n              }, this), aiThumbnail && /*#__PURE__*/_jsxDEV(\"img\", {\n                src: aiThumbnail,\n                alt: \"AI Preview\",\n                className: \"w-full rounded-lg border shadow-sm max-h-48 object-cover\",\n                onError: e => {\n                  e.target.style.display = 'none';\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1316,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border rounded-lg p-4 bg-gray-50 max-h-96 overflow-y-auto preview-frame\",\n                dangerouslySetInnerHTML: {\n                  __html: aiHtml\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1325,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1310,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1296,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1277,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 border-t bg-gray-50 flex justify-end gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAiModalOpen(false),\n            className: \"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors\",\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1334,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAcceptAi,\n            className: \"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-check\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1344,\n              columnNumber: 33\n            }, this), \"\\xC1p d\\u1EE5ng AI Refactor\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1340,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1333,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1261,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1260,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bottom-6 right-6 z-40\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-lg border p-2 flex flex-col gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _editorRef$current4;\n            return (_editorRef$current4 = editorRef.current) === null || _editorRef$current4 === void 0 ? void 0 : _editorRef$current4.runCommand('core:undo');\n          },\n          className: \"p-2 hover:bg-gray-100 rounded transition-colors\",\n          title: \"Ho\\xE0n t\\xE1c\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-undo text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1360,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1355,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _editorRef$current5;\n            return (_editorRef$current5 = editorRef.current) === null || _editorRef$current5 === void 0 ? void 0 : _editorRef$current5.runCommand('core:redo');\n          },\n          className: \"p-2 hover:bg-gray-100 rounded transition-colors\",\n          title: \"L\\xE0m l\\u1EA1i\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-redo text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1367,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1362,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            var _editorRef$current6;\n            return (_editorRef$current6 = editorRef.current) === null || _editorRef$current6 === void 0 ? void 0 : _editorRef$current6.runCommand('core:canvas-clear');\n          },\n          className: \"p-2 hover:bg-gray-100 rounded transition-colors\",\n          title: \"X\\xF3a t\\u1EA5t c\\u1EA3\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-trash text-red-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1374,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1369,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1354,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1353,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bottom-6 left-6 z-40\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowShortcuts(!showShortcuts),\n        className: \"bg-gray-800 text-white p-2 rounded-full shadow-lg hover:bg-gray-700 transition-colors\",\n        title: \"Ph\\xEDm t\\u1EAFt\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-keyboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1386,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1381,\n        columnNumber: 17\n      }, this), showShortcuts && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute bottom-12 left-0 bg-white rounded-lg shadow-xl border p-4 w-64\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"font-semibold mb-2\",\n          children: \"Ph\\xEDm t\\u1EAFt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1390,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm space-y-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Ctrl+S: L\\u01B0u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1392,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Ctrl+Z: Ho\\xE0n t\\xE1c\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1393,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Ctrl+Y: L\\xE0m l\\u1EA1i\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1394,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Delete: X\\xF3a element\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1395,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Esc: B\\u1ECF ch\\u1ECDn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1396,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1391,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1389,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1380,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 982,\n    columnNumber: 9\n  }, this);\n};\n_s(CreateLandingPage, \"yoNyVQJB2HBo53wczXnZ+x09K8s=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = CreateLandingPage;\nexport default CreateLandingPage;\nvar _c;\n$RefreshReg$(_c, \"CreateLandingPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useNavigate","useParams","api","DogLoader","grapesjs","jsxDEV","_jsxDEV","Fragment","_Fragment","jwtDecode","require","CreateLandingPage","_s","loading","setLoading","error","setError","success","setSuccess","pageDescription","setPageDescription","saveTime","setSaveTime","aiModalOpen","setAiModalOpen","aiHtml","setAiHtml","aiThumbnail","setAiThumbnail","aiImprovements","setAiImprovements","originalHtml","setOriginalHtml","isAutoSaving","setIsAutoSaving","currentPage","setCurrentPage","previewMode","setPreviewMode","selectedDevice","setSelectedDevice","showShortcuts","setShowShortcuts","editorRef","editorContainerRef","autoSaveTimeoutRef","navigate","pageId","token","localStorage","getItem","state","from","location","pathname","decoded","currentTime","Date","now","userId","Error","exp","defaults","headers","common","err","console","message","removeItem","loadExistingPage","response","get","data","current","html","_doc$head$querySelect","parser","DOMParser","doc","parseFromString","bodyContent","body","innerHTML","styleContent","head","querySelector","setComponents","setCss","name","_err$response","_err$response$data","init","container","height","width","fromElement","storageManager","plugins","pluginsOpts","blocks","modalImportTitle","modalImportLabel","modalImportContent","editor","getHtml","getCss","canvas","styles","scripts","blockManager","appendTo","id","label","category","content","media","styleManager","sectors","open","buildProps","properties","type","property","units","min","list","value","className","step","max","layerManager","deviceManager","devices","widthMedia","panels","el","resizable","maxDim","minDim","tc","cl","cr","bc","keyWidth","debouncedAutoSave","debounce","handleAutoSave","forEach","event","on","device","loadDraft","clearTimeout","func","wait","args","setTimeout","apply","draftKey","savedDraft","draft","JSON","parse","timeDiff","timestamp","getTime","css","warn","toISOString","setItem","stringify","post","toLocaleTimeString","timer","handleReloadEditor","destroy","window","reload","handleExportHTML","fullHtml","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","handleAiRefactor","fullContent","thumbnail","improvements","_err$response2","_err$response2$data","handleAcceptAi","styleElement","cssContent","handleCreatePage","trim","description","_doc$head$querySelect2","page","isNew","replace","_err$response3","_err$response3$data","handleSavePage","put","_err$response4","_err$response4$data","handlePreviewPage","previewWindow","write","close","handlePublishPage","_err$response5","_err$response5$data","handleSelectTemplate","templateId","templates","blank","business","portfolio","template","fileName","_jsxFileName","lineNumber","columnNumber","children","onClick","onChange","e","target","rows","placeholder","disabled","_editorRef$current","setDevice","_editorRef$current2","_editorRef$current3","status","rel","views","conversions","ref","length","map","improvement","index","dangerouslySetInnerHTML","__html","src","alt","onError","style","display","_editorRef$current4","runCommand","title","_editorRef$current5","_editorRef$current6","_c","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/CreateLanding.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport api from \"@landinghub/api\";\r\nimport DogLoader from \"../components/DogLoader\";\r\nimport \"grapesjs/dist/css/grapes.min.css\";\r\nimport grapesjs from \"grapesjs\";\r\nimport \"grapesjs-preset-webpage\";\r\nimport \"grapesjs-blocks-basic\";\r\nimport \"../styles/CreateLanding.css\";\r\n\r\nconst { jwtDecode } = require('jwt-decode');\r\n\r\nconst CreateLandingPage = () => {\r\n    // State management\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [success, setSuccess] = useState(null);\r\n    const [pageDescription, setPageDescription] = useState(\"\");\r\n    const [saveTime, setSaveTime] = useState(null);\r\n    const [aiModalOpen, setAiModalOpen] = useState(false);\r\n    const [aiHtml, setAiHtml] = useState(\"\");\r\n    const [aiThumbnail, setAiThumbnail] = useState(\"\");\r\n    const [aiImprovements, setAiImprovements] = useState([]);\r\n    const [originalHtml, setOriginalHtml] = useState(\"\");\r\n    const [isAutoSaving, setIsAutoSaving] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(null);\r\n    const [previewMode, setPreviewMode] = useState(false);\r\n    const [selectedDevice, setSelectedDevice] = useState('desktop');\r\n    const [showShortcuts, setShowShortcuts] = useState(false);\r\n\r\n    // Refs\r\n    const editorRef = useRef(null);\r\n    const editorContainerRef = useRef(null);\r\n    const autoSaveTimeoutRef = useRef(null);\r\n\r\n    const navigate = useNavigate();\r\n    const { pageId } = useParams();\r\n\r\n    // Auth check với enhanced security\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n            navigate(\"/auth\", { state: { from: location.pathname } });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const decoded = jwtDecode(token);\r\n            const currentTime = Date.now() / 1000;\r\n\r\n            if (!decoded.userId) throw new Error(\"Invalid token - missing userId\");\r\n            if (decoded.exp < currentTime) throw new Error(\"Token expired\");\r\n\r\n            api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n        } catch (err) {\r\n            console.error(\"Auth error:\", err.message);\r\n            localStorage.removeItem(\"token\");\r\n            navigate(\"/auth\", { state: { from: location.pathname, error: \"Session expired\" } });\r\n        }\r\n    }, [navigate]);\r\n\r\n    // Load existing page if editing\r\n    useEffect(() => {\r\n        if (pageId) {\r\n            loadExistingPage();\r\n        }\r\n    }, [pageId]);\r\n\r\n    const loadExistingPage = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await api.get(`/api/pages/${pageId}/content`);\r\n            setCurrentPage(response.data);\r\n\r\n            if (editorRef.current && response.data.html) {\r\n                // Parse HTML to extract content for GrapesJS\r\n                const parser = new DOMParser();\r\n                const doc = parser.parseFromString(response.data.html, 'text/html');\r\n                const bodyContent = doc.body.innerHTML;\r\n                const styleContent = doc.head.querySelector('style')?.innerHTML || '';\r\n\r\n                editorRef.current.setComponents(bodyContent);\r\n                editorRef.current.setCss(styleContent);\r\n                setPageDescription(response.data.name || '');\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Load page error:\", err);\r\n            setError(\"Không thể tải nội dung trang: \" + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Enhanced GrapesJS initialization\r\n    useEffect(() => {\r\n        if (!editorRef.current && editorContainerRef.current) {\r\n            try {\r\n                editorRef.current = grapesjs.init({\r\n                    container: editorContainerRef.current,\r\n                    height: '70vh',\r\n                    width: '100%',\r\n                    fromElement: false,\r\n                    storageManager: false,\r\n\r\n                    // Enhanced plugins\r\n                    plugins: ['gjs-blocks-basic', 'gjs-preset-webpage'],\r\n                    pluginsOpts: {\r\n                        'gjs-blocks-basic': {\r\n                            blocks: ['column1', 'column2', 'column3', 'text', 'link', 'image', 'video']\r\n                        },\r\n                        'gjs-preset-webpage': {\r\n                            modalImportTitle: 'Import Template',\r\n                            modalImportLabel: '<div style=\"margin-bottom: 10px; font-size: 13px;\">Paste here your HTML/CSS and click Import</div>',\r\n                            modalImportContent: function(editor) {\r\n                                return editor.getHtml() + '<style>' + editor.getCss() + '</style>';\r\n                            }\r\n                        }\r\n                    },\r\n\r\n                    // Canvas settings\r\n                    canvas: {\r\n                        styles: [\r\n                            'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css'\r\n                        ],\r\n                        scripts: []\r\n                    },\r\n\r\n                    // Block manager config\r\n                    blockManager: {\r\n                        appendTo: '.blocks-container',\r\n                        blocks: [\r\n                            {\r\n                                id: 'hero-section',\r\n                                label: 'Hero Section',\r\n                                category: 'Sections',\r\n                                content: `\r\n                                    <div class=\"hero-section\" style=\"padding: 80px 20px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; min-height: 500px; display: flex; align-items: center; justify-content: center; flex-direction: column;\">\r\n                                        <h1 style=\"font-size: 3rem; margin-bottom: 1rem; font-weight: 700;\">Tiêu đề chính</h1>\r\n                                        <p style=\"font-size: 1.2rem; margin-bottom: 2rem; max-width: 600px;\">Mô tả ngắn gọn về sản phẩm hoặc dịch vụ của bạn. Hãy viết một câu thu hút và thuyết phục.</p>\r\n                                        <button style=\"background: #ff6b6b; color: white; padding: 15px 30px; font-size: 1.1rem; border: none; border-radius: 50px; cursor: pointer; transition: all 0.3s ease;\" onmouseover=\"this.style.transform='scale(1.05)'\" onmouseout=\"this.style.transform='scale(1)'\">Hành động chính</button>\r\n                                    </div>\r\n                                `,\r\n                                media: '<i class=\"fa fa-star\"></i>'\r\n                            },\r\n                            {\r\n                                id: 'feature-cards',\r\n                                label: 'Feature Cards',\r\n                                category: 'Sections',\r\n                                content: `\r\n                                    <div class=\"features-section\" style=\"padding: 60px 20px; max-width: 1200px; margin: 0 auto;\">\r\n                                        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;\">\r\n                                            <div style=\"text-align: center; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\r\n                                                <div style=\"width: 60px; height: 60px; background: #4CAF50; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white;\">\r\n                                                    <i class=\"fa fa-rocket\"></i>\r\n                                                </div>\r\n                                                <h3 style=\"margin-bottom: 15px; color: #333;\">Tính năng 1</h3>\r\n                                                <p style=\"color: #666; line-height: 1.6;\">Mô tả chi tiết về tính năng này và lợi ích mà nó mang lại cho người dùng.</p>\r\n                                            </div>\r\n                                            <div style=\"text-align: center; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\r\n                                                <div style=\"width: 60px; height: 60px; background: #2196F3; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white;\">\r\n                                                    <i class=\"fa fa-shield\"></i>\r\n                                                </div>\r\n                                                <h3 style=\"margin-bottom: 15px; color: #333;\">Tính năng 2</h3>\r\n                                                <p style=\"color: #666; line-height: 1.6;\">Mô tả chi tiết về tính năng này và lợi ích mà nó mang lại cho người dùng.</p>\r\n                                            </div>\r\n                                            <div style=\"text-align: center; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\r\n                                                <div style=\"width: 60px; height: 60px; background: #FF9800; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 24px; color: white;\">\r\n                                                    <i class=\"fa fa-heart\"></i>\r\n                                                </div>\r\n                                                <h3 style=\"margin-bottom: 15px; color: #333;\">Tính năng 3</h3>\r\n                                                <p style=\"color: #666; line-height: 1.6;\">Mô tả chi tiết về tính năng này và lợi ích mà nó mang lại cho người dùng.</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                `,\r\n                                media: '<i class=\"fa fa-th-large\"></i>'\r\n                            },\r\n                            {\r\n                                id: 'contact-form',\r\n                                label: 'Contact Form',\r\n                                category: 'Forms',\r\n                                content: `\r\n                                    <div class=\"contact-section\" style=\"padding: 60px 20px; background: #f8f9fa;\">\r\n                                        <div style=\"max-width: 600px; margin: 0 auto;\">\r\n                                            <h2 style=\"text-align: center; margin-bottom: 30px; color: #333;\">Liên hệ với chúng tôi</h2>\r\n                                            <form style=\"background: white; padding: 40px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);\">\r\n                                                <div style=\"margin-bottom: 20px;\">\r\n                                                    <input type=\"text\" placeholder=\"Họ và tên\" style=\"width: 100%; padding: 15px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px; transition: border-color 0.3s;\" onfocus=\"this.style.borderColor='#007bff'\" onblur=\"this.style.borderColor='#e1e5e9'\">\r\n                                                </div>\r\n                                                <div style=\"margin-bottom: 20px;\">\r\n                                                    <input type=\"email\" placeholder=\"Email\" style=\"width: 100%; padding: 15px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px; transition: border-color 0.3s;\" onfocus=\"this.style.borderColor='#007bff'\" onblur=\"this.style.borderColor='#e1e5e9'\">\r\n                                                </div>\r\n                                                <div style=\"margin-bottom: 30px;\">\r\n                                                    <textarea placeholder=\"Tin nhắn\" rows=\"5\" style=\"width: 100%; padding: 15px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px; resize: vertical; transition: border-color 0.3s;\" onfocus=\"this.style.borderColor='#007bff'\" onblur=\"this.style.borderColor='#e1e5e9'\"></textarea>\r\n                                                </div>\r\n                                                <button type=\"submit\" style=\"width: 100%; background: #007bff; color: white; padding: 15px; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; transition: background 0.3s;\" onmouseover=\"this.style.background='#0056b3'\" onmouseout=\"this.style.background='#007bff'\">Gửi tin nhắn</button>\r\n                                            </form>\r\n                                        </div>\r\n                                    </div>\r\n                                `,\r\n                                media: '<i class=\"fa fa-envelope\"></i>'\r\n                            },\r\n                            {\r\n                                id: 'testimonials',\r\n                                label: 'Testimonials',\r\n                                category: 'Sections',\r\n                                content: `\r\n                                    <div class=\"testimonials-section\" style=\"padding: 80px 20px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\">\r\n                                        <div style=\"max-width: 1200px; margin: 0 auto; text-align: center;\">\r\n                                            <h2 style=\"color: white; font-size: 2.5rem; margin-bottom: 50px; font-weight: 700;\">Khách hàng nói gì về chúng tôi</h2>\r\n                                            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; margin-top: 40px;\">\r\n                                                <div style=\"background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transform: translateY(0); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\r\n                                                    <div style=\"display: flex; align-items: center; margin-bottom: 20px;\">\r\n                                                        <img src=\"https://via.placeholder.com/60x60/4CAF50/white?text=A\" style=\"width: 60px; height: 60px; border-radius: 50%; margin-right: 15px;\">\r\n                                                        <div style=\"text-align: left;\">\r\n                                                            <h4 style=\"margin: 0; color: #333;\">Nguyễn Văn A</h4>\r\n                                                            <p style=\"margin: 5px 0 0 0; color: #666; font-size: 14px;\">CEO, Công ty ABC</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <p style=\"color: #555; line-height: 1.6; font-style: italic;\">\"Dịch vụ tuyệt vời! Đội ngũ chuyên nghiệp và sản phẩm chất lượng cao. Tôi rất hài lòng với kết quả.\"</p>\r\n                                                    <div style=\"color: #ffc107; margin-top: 15px;\">\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div style=\"background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transform: translateY(0); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\r\n                                                    <div style=\"display: flex; align-items: center; margin-bottom: 20px;\">\r\n                                                        <img src=\"https://via.placeholder.com/60x60/2196F3/white?text=B\" style=\"width: 60px; height: 60px; border-radius: 50%; margin-right: 15px;\">\r\n                                                        <div style=\"text-align: left;\">\r\n                                                            <h4 style=\"margin: 0; color: #333;\">Trần Thị B</h4>\r\n                                                            <p style=\"margin: 5px 0 0 0; color: #666; font-size: 14px;\">Giám đốc Marketing</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <p style=\"color: #555; line-height: 1.6; font-style: italic;\">\"Hỗ trợ khách hàng xuất sắc và giao diện người dùng rất thân thiện. Chắc chắn sẽ giới thiệu cho bạn bè.\"</p>\r\n                                                    <div style=\"color: #ffc107; margin-top: 15px;\">\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                        <i class=\"fa fa-star\"></i>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                `,\r\n                                media: '<i class=\"fa fa-quote-left\"></i>'\r\n                            },\r\n                            {\r\n                                id: 'pricing-table',\r\n                                label: 'Pricing Table',\r\n                                category: 'Sections',\r\n                                content: `\r\n                                    <div class=\"pricing-section\" style=\"padding: 80px 20px; background: #f8f9fa;\">\r\n                                        <div style=\"max-width: 1200px; margin: 0 auto; text-align: center;\">\r\n                                            <h2 style=\"color: #333; font-size: 2.5rem; margin-bottom: 20px; font-weight: 700;\">Bảng giá dịch vụ</h2>\r\n                                            <p style=\"color: #666; font-size: 1.2rem; margin-bottom: 50px;\">Chọn gói phù hợp với nhu cầu của bạn</p>\r\n                                            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;\">\r\n                                                <div style=\"background: white; padding: 40px 30px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); position: relative; transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\r\n                                                    <h3 style=\"color: #333; margin-bottom: 10px; font-size: 1.5rem;\">Gói Cơ Bản</h3>\r\n                                                    <div style=\"margin-bottom: 30px;\">\r\n                                                        <span style=\"font-size: 3rem; font-weight: 700; color: #007bff;\">$29</span>\r\n                                                        <span style=\"color: #666;\">/tháng</span>\r\n                                                    </div>\r\n                                                    <ul style=\"list-style: none; padding: 0; margin-bottom: 30px;\">\r\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>5 Landing Pages</li>\r\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Analytics cơ bản</li>\r\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Hỗ trợ email</li>\r\n                                                        <li style=\"padding: 8px 0; color: #ccc;\"><i class=\"fa fa-times\" style=\"color: #f44336; margin-right: 10px;\"></i>AI Tối ưu</li>\r\n                                                    </ul>\r\n                                                    <button style=\"width: 100%; background: #007bff; color: white; padding: 15px; border: none; border-radius: 50px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background 0.3s;\" onmouseover=\"this.style.background='#0056b3'\" onmouseout=\"this.style.background='#007bff'\">Chọn gói</button>\r\n                                                </div>\r\n                                                <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; border-radius: 20px; color: white; position: relative; transform: scale(1.05); box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);\">\r\n                                                    <div style=\"position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: #ff6b6b; color: white; padding: 8px 20px; border-radius: 20px; font-size: 12px; font-weight: 600;\">PHỔ BIẾN</div>\r\n                                                    <h3 style=\"margin-bottom: 10px; font-size: 1.5rem;\">Gói Pro</h3>\r\n                                                    <div style=\"margin-bottom: 30px;\">\r\n                                                        <span style=\"font-size: 3rem; font-weight: 700;\">$59</span>\r\n                                                        <span>/tháng</span>\r\n                                                    </div>\r\n                                                    <ul style=\"list-style: none; padding: 0; margin-bottom: 30px;\">\r\n                                                        <li style=\"padding: 8px 0;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>20 Landing Pages</li>\r\n                                                        <li style=\"padding: 8px 0;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Analytics nâng cao</li>\r\n                                                        <li style=\"padding: 8px 0;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Hỗ trợ 24/7</li>\r\n                                                        <li style=\"padding: 8px 0;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>AI Tối ưu</li>\r\n                                                    </ul>\r\n                                                    <button style=\"width: 100%; background: white; color: #667eea; padding: 15px; border: none; border-radius: 50px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s;\" onmouseover=\"this.style.background='#f8f9ff'\" onmouseout=\"this.style.background='white'\">Chọn gói</button>\r\n                                                </div>\r\n                                                <div style=\"background: white; padding: 40px 30px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease;\" onmouseover=\"this.style.transform='translateY(-10px)'\" onmouseout=\"this.style.transform='translateY(0)'\">\r\n                                                    <h3 style=\"color: #333; margin-bottom: 10px; font-size: 1.5rem;\">Gói Enterprise</h3>\r\n                                                    <div style=\"margin-bottom: 30px;\">\r\n                                                        <span style=\"font-size: 3rem; font-weight: 700; color: #007bff;\">$99</span>\r\n                                                        <span style=\"color: #666;\">/tháng</span>\r\n                                                    </div>\r\n                                                    <ul style=\"list-style: none; padding: 0; margin-bottom: 30px;\">\r\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Không giới hạn</li>\r\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Analytics chuyên sâu</li>\r\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>Hỗ trợ ưu tiên</li>\r\n                                                        <li style=\"padding: 8px 0; color: #555;\"><i class=\"fa fa-check\" style=\"color: #4CAF50; margin-right: 10px;\"></i>AI + Custom Code</li>\r\n                                                    </ul>\r\n                                                    <button style=\"width: 100%; background: #007bff; color: white; padding: 15px; border: none; border-radius: 50px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background 0.3s;\" onmouseover=\"this.style.background='#0056b3'\" onmouseout=\"this.style.background='#007bff'\">Chọn gói</button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                `,\r\n                                media: '<i class=\"fa fa-dollar-sign\"></i>'\r\n                            },\r\n                            {\r\n                                id: 'footer',\r\n                                label: 'Footer',\r\n                                category: 'Sections',\r\n                                content: `\r\n                                    <footer style=\"background: #2c3e50; color: white; padding: 60px 20px 20px; margin-top: auto;\">\r\n                                        <div style=\"max-width: 1200px; margin: 0 auto;\">\r\n                                            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom: 40px;\">\r\n                                                <div>\r\n                                                    <h3 style=\"margin-bottom: 20px; font-size: 1.5rem;\">LandingHub</h3>\r\n                                                    <p style=\"color: #bdc3c7; line-height: 1.6; margin-bottom: 20px;\">Tạo landing page chuyên nghiệp với AI, dễ dàng và nhanh chóng.</p>\r\n                                                    <div style=\"display: flex; gap: 15px;\">\r\n                                                        <a href=\"#\" style=\"color: #3498db; font-size: 1.5rem; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#3498db'\"><i class=\"fab fa-facebook\"></i></a>\r\n                                                        <a href=\"#\" style=\"color: #3498db; font-size: 1.5rem; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#3498db'\"><i class=\"fab fa-twitter\"></i></a>\r\n                                                        <a href=\"#\" style=\"color: #3498db; font-size: 1.5rem; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#3498db'\"><i class=\"fab fa-linkedin\"></i></a>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h4 style=\"margin-bottom: 20px; color: #ecf0f1;\">Sản phẩm</h4>\r\n                                                    <ul style=\"list-style: none; padding: 0;\">\r\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Landing Page Builder</a></li>\r\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">AI Templates</a></li>\r\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Analytics</a></li>\r\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Integrations</a></li>\r\n                                                    </ul>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h4 style=\"margin-bottom: 20px; color: #ecf0f1;\">Hỗ trợ</h4>\r\n                                                    <ul style=\"list-style: none; padding: 0;\">\r\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Trung tâm trợ giúp</a></li>\r\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Hướng dẫn</a></li>\r\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Liên hệ</a></li>\r\n                                                        <li style=\"margin-bottom: 10px;\"><a href=\"#\" style=\"color: #bdc3c7; text-decoration: none; transition: color 0.3s;\" onmouseover=\"this.style.color='white'\" onmouseout=\"this.style.color='#bdc3c7'\">Status</a></li>\r\n                                                    </ul>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h4 style=\"margin-bottom: 20px; color: #ecf0f1;\">Liên hệ</h4>\r\n                                                    <div style=\"color: #bdc3c7;\">\r\n                                                        <p style=\"margin-bottom: 10px; display: flex; align-items: center;\"><i class=\"fa fa-envelope\" style=\"margin-right: 10px; color: #3498db;\"></i> support@landinghub.vn</p>\r\n                                                        <p style=\"margin-bottom: 10px; display: flex; align-items: center;\"><i class=\"fa fa-phone\" style=\"margin-right: 10px; color: #3498db;\"></i> +84 123 456 789</p>\r\n                                                        <p style=\"margin-bottom: 10px; display: flex; align-items: center;\"><i class=\"fa fa-map-marker\" style=\"margin-right: 10px; color: #3498db;\"></i> TP. Hồ Chí Minh, Việt Nam</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div style=\"border-top: 1px solid #34495e; padding-top: 20px; text-align: center; color: #bdc3c7;\">\r\n                                                <p>&copy; 2024 LandingHub. Tất cả quyền được bảo lưu.</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </footer>\r\n                                `,\r\n                                media: '<i class=\"fa fa-sitemap\"></i>'\r\n                            }\r\n                        ]\r\n                    },\r\n\r\n                    // Style manager settings\r\n                    styleManager: {\r\n                        appendTo: '.styles-container',\r\n                        sectors: [{\r\n                            name: 'Dimension',\r\n                            open: false,\r\n                            buildProps: ['width', 'min-height', 'padding'],\r\n                            properties: [{\r\n                                type: 'integer',\r\n                                name: 'Width',\r\n                                property: 'width',\r\n                                units: ['px', '%', 'vw'],\r\n                                defaults: 'auto',\r\n                                min: 0,\r\n                            }]\r\n                        }, {\r\n                            name: 'Typography',\r\n                            open: false,\r\n                            buildProps: ['font-family', 'font-size', 'font-weight', 'letter-spacing', 'color', 'line-height', 'text-align', 'text-decoration', 'text-shadow'],\r\n                            properties: [{\r\n                                name: 'Font',\r\n                                property: 'font-family'\r\n                            }, {\r\n                                name: 'Weight',\r\n                                property: 'font-weight'\r\n                            }, {\r\n                                name: 'Font color',\r\n                                property: 'color',\r\n                            }, {\r\n                                property: 'text-align',\r\n                                type: 'radio',\r\n                                defaults: 'left',\r\n                                list: [\r\n                                    { value: 'left', name: 'Left', className: 'fa fa-align-left' },\r\n                                    { value: 'center', name: 'Center', className: 'fa fa-align-center' },\r\n                                    { value: 'right', name: 'Right', className: 'fa fa-align-right' },\r\n                                    { value: 'justify', name: 'Justify', className: 'fa fa-align-justify' }\r\n                                ],\r\n                            }]\r\n                        }, {\r\n                            name: 'Decorations',\r\n                            open: false,\r\n                            buildProps: ['opacity', 'background-color', 'border-radius', 'border', 'box-shadow', 'background'],\r\n                            properties: [{\r\n                                type: 'slider',\r\n                                property: 'opacity',\r\n                                defaults: 1,\r\n                                step: 0.01,\r\n                                max: 1,\r\n                                min: 0,\r\n                            }]\r\n                        }, {\r\n                            name: 'Extra',\r\n                            open: false,\r\n                            buildProps: ['transition', 'perspective', 'transform'],\r\n                            properties: [{\r\n                                property: 'transition',\r\n                                type: 'stack',\r\n                                properties: [{\r\n                                    type: 'select',\r\n                                    property: 'transition-property',\r\n                                    defaults: 'width',\r\n                                }, {\r\n                                    type: 'integer',\r\n                                    property: 'transition-duration',\r\n                                    units: ['s', 'ms'],\r\n                                    defaults: '2',\r\n                                    min: 0,\r\n                                }]\r\n                            }]\r\n                        }]\r\n                    },\r\n\r\n                    // Layers panel\r\n                    layerManager: {\r\n                        appendTo: '.layers-container'\r\n                    },\r\n\r\n                    // Device manager for responsive design\r\n                    deviceManager: {\r\n                        devices: [{\r\n                            name: 'Desktop',\r\n                            width: '',\r\n                            id: 'desktop'\r\n                        }, {\r\n                            name: 'Tablet',\r\n                            width: '768px',\r\n                            widthMedia: '992px',\r\n                            id: 'tablet'\r\n                        }, {\r\n                            name: 'Mobile portrait',\r\n                            width: '320px',\r\n                            widthMedia: '768px',\r\n                            id: 'mobilePortrait'\r\n                        }]\r\n                    },\r\n\r\n                    // Panel settings\r\n                    panels: {\r\n                        defaults: [{\r\n                            id: 'layers',\r\n                            el: '.layers-container',\r\n                            resizable: {\r\n                                maxDim: 350,\r\n                                minDim: 200,\r\n                                tc: 0,\r\n                                cl: 1,\r\n                                cr: 0,\r\n                                bc: 0,\r\n                                keyWidth: 'flex-basis',\r\n                            },\r\n                        }, {\r\n                            id: 'styles',\r\n                            el: '.styles-container',\r\n                            resizable: {\r\n                                maxDim: 350,\r\n                                minDim: 200,\r\n                                tc: 0,\r\n                                cl: 1,\r\n                                cr: 0,\r\n                                bc: 0,\r\n                                keyWidth: 'flex-basis',\r\n                            },\r\n                        }, {\r\n                            id: 'blocks',\r\n                            el: '.blocks-container',\r\n                            resizable: {\r\n                                maxDim: 350,\r\n                                minDim: 200,\r\n                                tc: 0,\r\n                                cl: 1,\r\n                                cr: 0,\r\n                                bc: 0,\r\n                                keyWidth: 'flex-basis',\r\n                            },\r\n                        }]\r\n                    }\r\n                });\r\n\r\n                // Enhanced auto-save với debounce\r\n                const debouncedAutoSave = debounce(() => {\r\n                    handleAutoSave();\r\n                }, 800);\r\n\r\n                ['update', 'component:add', 'component:remove', 'component:update'].forEach((event) => {\r\n                    editorRef.current.on(event, debouncedAutoSave);\r\n                });\r\n\r\n                // Device change handler\r\n                editorRef.current.on('device:select', (device) => {\r\n                    setSelectedDevice(device.get('id'));\r\n                });\r\n\r\n                // Load draft nếu có\r\n                loadDraft();\r\n\r\n            } catch (err) {\r\n                console.error('GrapesJS initialization error:', err);\r\n                setError('Lỗi khởi tạo editor: ' + err.message);\r\n            }\r\n        }\r\n\r\n        // Cleanup\r\n        return () => {\r\n            if (autoSaveTimeoutRef.current) {\r\n                clearTimeout(autoSaveTimeoutRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    // Debounce utility\r\n    const debounce = (func, wait) => {\r\n        return (...args) => {\r\n            clearTimeout(autoSaveTimeoutRef.current);\r\n            autoSaveTimeoutRef.current = setTimeout(() => func.apply(this, args), wait);\r\n        };\r\n    };\r\n\r\n    // Load draft from localStorage\r\n    const loadDraft = useCallback(async () => {\r\n        try {\r\n            const draftKey = pageId ? `draft_${pageId}` : 'draft_new';\r\n            const savedDraft = localStorage.getItem(draftKey);\r\n\r\n            if (savedDraft) {\r\n                const draft = JSON.parse(savedDraft);\r\n                const timeDiff = Date.now() - new Date(draft.timestamp).getTime();\r\n\r\n                // Chỉ load draft nếu < 24h\r\n                if (timeDiff < 24 * 60 * 60 * 1000 && editorRef.current) {\r\n                    if (draft.html) editorRef.current.setComponents(draft.html);\r\n                    if (draft.css) editorRef.current.setCss(draft.css);\r\n                    setSuccess('Đã khôi phục bản nháp đã lưu');\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.warn('Load draft error:', err);\r\n        }\r\n    }, [pageId]);\r\n\r\n    // Enhanced auto-save với local storage\r\n    const handleAutoSave = useCallback(async () => {\r\n        if (!editorRef.current || isAutoSaving) return;\r\n\r\n        setIsAutoSaving(true);\r\n\r\n        try {\r\n            const html = editorRef.current.getHtml();\r\n            const css = editorRef.current.getCss();\r\n\r\n            // Lưu draft local\r\n            const draftKey = pageId ? `draft_${pageId}` : 'draft_new';\r\n            const draft = {\r\n                html,\r\n                css,\r\n                timestamp: new Date().toISOString()\r\n            };\r\n            localStorage.setItem(draftKey, JSON.stringify(draft));\r\n\r\n            // Auto-save lên server (nếu có pageId)\r\n            if (pageId) {\r\n                await api.post('/api/pages/auto-save', {\r\n                    html,\r\n                    css,\r\n                    pageId\r\n                });\r\n            }\r\n\r\n            setSaveTime(new Date().toLocaleTimeString('vi-VN'));\r\n\r\n        } catch (err) {\r\n            console.warn('Auto save error:', err);\r\n        } finally {\r\n            setIsAutoSaving(false);\r\n        }\r\n    }, [pageId, isAutoSaving]);\r\n\r\n    // Clear messages after timeout\r\n    useEffect(() => {\r\n        if (error || success) {\r\n            const timer = setTimeout(() => {\r\n                setError(null);\r\n                setSuccess(null);\r\n            }, 5000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [error, success]);\r\n\r\n    // Enhanced reload editor\r\n    const handleReloadEditor = useCallback(() => {\r\n        if (editorRef.current) {\r\n            editorRef.current.destroy();\r\n            editorRef.current = null;\r\n\r\n            // Reload page để reinitialize\r\n            window.location.reload();\r\n        }\r\n    }, []);\r\n\r\n    // Enhanced export HTML\r\n    const handleExportHTML = useCallback(() => {\r\n        if (!editorRef.current) return;\r\n\r\n        try {\r\n            const html = editorRef.current.getHtml();\r\n            const css = editorRef.current.getCss();\r\n\r\n            const fullHtml = `<!DOCTYPE html>\r\n<html lang=\"vi\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <meta name=\"description\" content=\"${pageDescription || 'Landing Page tạo bởi LandingHub'}\">\r\n    <title>${pageDescription || 'Landing Page'}</title>\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\r\n    <style>\r\n        * { \r\n            margin: 0; \r\n            padding: 0; \r\n            box-sizing: border-box; \r\n        }\r\n        body { \r\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; \r\n            line-height: 1.6; \r\n        }\r\n        ${css}\r\n    </style>\r\n</head>\r\n<body>\r\n    ${html}\r\n    <script>\r\n        // Basic analytics tracking\r\n        console.log('Landing page loaded at:', new Date());\r\n        \r\n        // Form submission handler\r\n        document.querySelectorAll('form').forEach(form => {\r\n            form.addEventListener('submit', function(e) {\r\n                e.preventDefault();\r\n                alert('Form submitted! (Demo mode)');\r\n                console.log('Form data:', new FormData(this));\r\n            });\r\n        });\r\n\r\n        // Button click tracking\r\n        document.querySelectorAll('button').forEach(button => {\r\n            button.addEventListener('click', function() {\r\n                console.log('Button clicked:', this.textContent);\r\n            });\r\n        });\r\n\r\n        // Smooth scroll for anchor links\r\n        document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n            anchor.addEventListener('click', function (e) {\r\n                e.preventDefault();\r\n                const target = document.querySelector(this.getAttribute('href'));\r\n                if (target) {\r\n                    target.scrollIntoView({ behavior: 'smooth' });\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n</html>`;\r\n\r\n            const blob = new Blob([fullHtml], { type: 'text/html;charset=utf-8' });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = `${pageDescription || 'landing-page'}.html`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n            URL.revokeObjectURL(url);\r\n\r\n            setSuccess('Đã xuất file HTML thành công!');\r\n\r\n        } catch (err) {\r\n            console.error('Export error:', err);\r\n            setError('Lỗi khi xuất HTML: ' + err.message);\r\n        }\r\n    }, [pageDescription]);\r\n\r\n    // Enhanced AI Refactor\r\n    const handleAiRefactor = useCallback(async () => {\r\n        if (!editorRef.current) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n            const html = editorRef.current.getHtml();\r\n            const css = editorRef.current.getCss();\r\n            const fullContent = html + (css ? `<style>${css}</style>` : '');\r\n\r\n            // Lưu bản gốc\r\n            setOriginalHtml(fullContent);\r\n\r\n            const response = await api.post('/api/pages/ai-refactor', {\r\n                html: fullContent\r\n            });\r\n\r\n            setAiHtml(response.data.html);\r\n            setAiThumbnail(response.data.thumbnail);\r\n            setAiImprovements(response.data.improvements || []);\r\n            setAiModalOpen(true);\r\n\r\n        } catch (err) {\r\n            console.error('AI Refactor error:', err);\r\n            setError('Lỗi khi gọi AI Refactor: ' + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    // Accept AI refactor\r\n    const handleAcceptAi = useCallback(() => {\r\n        if (!editorRef.current || !aiHtml) return;\r\n\r\n        try {\r\n            // Parse AI HTML để tách HTML và CSS\r\n            const parser = new DOMParser();\r\n            const doc = parser.parseFromString(aiHtml, 'text/html');\r\n            const bodyContent = doc.body.innerHTML;\r\n            const styleElement = doc.head.querySelector('style');\r\n            const cssContent = styleElement ? styleElement.innerHTML : '';\r\n\r\n            editorRef.current.setComponents(bodyContent);\r\n            if (cssContent) {\r\n                editorRef.current.setCss(cssContent);\r\n            }\r\n\r\n            handleAutoSave();\r\n            setAiModalOpen(false);\r\n            setSuccess('Đã áp dụng AI Refactor thành công!');\r\n\r\n        } catch (err) {\r\n            console.error('Apply AI error:', err);\r\n            setError('Lỗi khi áp dụng AI refactor: ' + err.message);\r\n        }\r\n    }, [aiHtml, handleAutoSave]);\r\n\r\n    // Enhanced create page\r\n    const handleCreatePage = useCallback(async () => {\r\n        if (!pageDescription?.trim()) {\r\n            setError('Vui lòng nhập mô tả landing page');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const response = await api.post('/api/pages', {\r\n                description: pageDescription.trim()\r\n            });\r\n\r\n            if (response.data.html && editorRef.current) {\r\n                // Parse và load vào editor\r\n                const parser = new DOMParser();\r\n                const doc = parser.parseFromString(response.data.html, 'text/html');\r\n                const bodyContent = doc.body.innerHTML;\r\n                const styleContent = doc.head.querySelector('style')?.innerHTML || '';\r\n\r\n                editorRef.current.setComponents(bodyContent);\r\n                if (styleContent) {\r\n                    editorRef.current.setCss(styleContent);\r\n                }\r\n            }\r\n\r\n            setCurrentPage(response.data);\r\n            setSuccess('Tạo landing page thành công!');\r\n\r\n            // Navigate to edit page\r\n            navigate(`/pages/edit/${response.data.id}`, {\r\n                state: {\r\n                    page: response.data,\r\n                    isNew: true\r\n                },\r\n                replace: true\r\n            });\r\n\r\n        } catch (err) {\r\n            console.error('Create error:', err);\r\n            setError('Lỗi khi tạo landing page: ' + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [pageDescription, navigate]);\r\n\r\n    // Save page (manual save)\r\n    const handleSavePage = useCallback(async () => {\r\n        if (!editorRef.current) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n            const html = editorRef.current.getHtml();\r\n            const css = editorRef.current.getCss();\r\n\r\n            const fullHtml = `<!DOCTYPE html>\r\n<html lang=\"vi\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>${pageDescription || 'Landing Page'}</title>\r\n    <style>${css}</style>\r\n</head>\r\n<body>\r\n    ${html}\r\n</body>\r\n</html>`;\r\n\r\n            let response;\r\n            if (pageId) {\r\n                // Update existing page\r\n                response = await api.put(`/api/pages/${pageId}`, { html: fullHtml });\r\n            } else {\r\n                // Save new page\r\n                response = await api.post('/api/pages/save', { html: fullHtml });\r\n            }\r\n\r\n            setCurrentPage(response.data);\r\n            setSaveTime(new Date().toLocaleTimeString('vi-VN'));\r\n            setSuccess('Đã lưu trang thành công!');\r\n\r\n            // Clear draft\r\n            const draftKey = pageId ? `draft_${pageId}` : 'draft_new';\r\n            localStorage.removeItem(draftKey);\r\n\r\n        } catch (err) {\r\n            console.error('Save error:', err);\r\n            setError('Lỗi khi lưu trang: ' + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [pageId, pageDescription]);\r\n\r\n    // Preview page\r\n    const handlePreviewPage = useCallback(() => {\r\n        if (!editorRef.current) return;\r\n\r\n        const html = editorRef.current.getHtml();\r\n        const css = editorRef.current.getCss();\r\n\r\n        const previewWindow = window.open('', '_blank');\r\n        previewWindow.document.write(`\r\n            <!DOCTYPE html>\r\n            <html lang=\"vi\">\r\n            <head>\r\n                <meta charset=\"UTF-8\">\r\n                <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n                <title>Preview - ${pageDescription || 'Landing Page'}</title>\r\n                <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\r\n                <style>\r\n                    * { margin: 0; padding: 0; box-sizing: border-box; }\r\n                    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; }\r\n                    ${css}\r\n                </style>\r\n            </head>\r\n            <body>\r\n                ${html}\r\n                <div style=\"position: fixed; top: 10px; right: 10px; background: #007bff; color: white; padding: 10px 15px; border-radius: 25px; z-index: 9999; font-size: 14px; box-shadow: 0 4px 12px rgba(0,123,255,0.3);\">\r\n                    <i class=\"fa fa-eye\"></i> Preview Mode\r\n                </div>\r\n                <script>\r\n                    // Form handlers for preview\r\n                    document.querySelectorAll('form').forEach(form => {\r\n                        form.addEventListener('submit', function(e) {\r\n                            e.preventDefault();\r\n                            alert('Form submission (Preview mode)');\r\n                        });\r\n                    });\r\n                </script>\r\n            </body>\r\n            </html>\r\n        `);\r\n        previewWindow.document.close();\r\n    }, [pageDescription]);\r\n\r\n    // Publish page\r\n    const handlePublishPage = useCallback(async () => {\r\n        if (!pageId) {\r\n            setError('Vui lòng lưu trang trước khi xuất bản');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            const response = await api.post(`/api/pages/${pageId}/publish`);\r\n\r\n            setCurrentPage(response.data);\r\n            setSuccess(`Trang đã được xuất bản tại: ${response.data.url}`);\r\n\r\n        } catch (err) {\r\n            console.error('Publish error:', err);\r\n            setError('Lỗi khi xuất bản: ' + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [pageId]);\r\n\r\n    // Template selection\r\n    const handleSelectTemplate = useCallback((templateId) => {\r\n        if (!editorRef.current) return;\r\n\r\n        // Predefined templates\r\n        const templates = {\r\n            blank: { html: '<div>Bắt đầu từ trang trống</div>', css: '' },\r\n            business: {\r\n                html: `\r\n                    <div style=\"min-height: 100vh;\">\r\n                        <header style=\"background: #2c3e50; color: white; padding: 20px 0; text-align: center;\">\r\n                            <h1>Doanh Nghiệp Của Bạn</h1>\r\n                            <p>Giải pháp chuyên nghiệp cho mọi nhu cầu</p>\r\n                        </header>\r\n                        <main style=\"padding: 60px 20px; text-align: center;\">\r\n                            <h2>Chào mừng đến với dịch vụ của chúng tôi</h2>\r\n                            <p style=\"margin: 20px 0; color: #666;\">Chúng tôi cung cấp giải pháp tốt nhất cho doanh nghiệp của bạn</p>\r\n                            <button style=\"background: #3498db; color: white; padding: 15px 30px; border: none; border-radius: 5px; font-size: 16px;\">Liên hệ ngay</button>\r\n                        </main>\r\n                    </div>\r\n                `,\r\n                css: `\r\n                    body { font-family: 'Arial', sans-serif; margin: 0; }\r\n                    button:hover { background: #2980b9 !important; }\r\n                `\r\n            },\r\n            portfolio: {\r\n                html: `\r\n                    <div style=\"min-height: 100vh; background: #f8f9fa;\">\r\n                        <section style=\"padding: 100px 20px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;\">\r\n                            <h1 style=\"font-size: 3em; margin-bottom: 20px;\">Portfolio</h1>\r\n                            <p style=\"font-size: 1.2em;\">Showcase công việc và dự án của tôi</p>\r\n                        </section>\r\n                        <section style=\"padding: 80px 20px; text-align: center;\">\r\n                            <h2>Về tôi</h2>\r\n                            <p style=\"max-width: 600px; margin: 20px auto; color: #666;\">\r\n                                Tôi là một nhà thiết kế và phát triển với niềm đam mê tạo ra những trải nghiệm tuyệt vời.\r\n                            </p>\r\n                        </section>\r\n                    </div>\r\n                `,\r\n                css: `\r\n                    body { font-family: 'Georgia', serif; margin: 0; line-height: 1.6; }\r\n                `\r\n            }\r\n        };\r\n\r\n        const template = templates[templateId];\r\n        if (template) {\r\n            editorRef.current.setComponents(template.html);\r\n            editorRef.current.setCss(template.css);\r\n            setSuccess(`Đã tải template ${templateId}`);\r\n        }\r\n    }, []);\r\n\r\n    if (loading) return <DogLoader />;\r\n\r\n    return (\r\n        <div className=\"create-landing-page flex gap-4 p-4 max-w-7xl mx-auto\">\r\n            {/* Left Sidebar - Blocks and Styles */}\r\n            <div className=\"sidebar w-80 flex flex-col gap-4\">\r\n                {/* Navigation */}\r\n                <div className=\"flex justify-between items-center\">\r\n                    <button\r\n                        onClick={() => navigate(\"/pages\")}\r\n                        className=\"btn-secondary flex items-center gap-2\"\r\n                    >\r\n                        <i className=\"fa fa-arrow-left\"></i> Quay lại\r\n                    </button>\r\n                    <h1 className=\"text-xl font-bold\">\r\n                        {pageId ? 'Chỉnh sửa' : 'Tạo'} Landing Page\r\n                    </h1>\r\n                </div>\r\n\r\n                {/* Messages */}\r\n                {error && (\r\n                    <div className=\"error p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg flex justify-between items-start\">\r\n                        <span className=\"flex-1\">{error}</span>\r\n                        <button\r\n                            onClick={() => setError(null)}\r\n                            className=\"ml-2 text-red-500 hover:text-red-700\"\r\n                        >\r\n                            <i className=\"fa fa-times\"></i>\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {success && (\r\n                    <div className=\"success p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg flex justify-between items-start\">\r\n                        <span className=\"flex-1\">{success}</span>\r\n                        <button\r\n                            onClick={() => setSuccess(null)}\r\n                            className=\"ml-2 text-green-500 hover:text-green-700\"\r\n                        >\r\n                            <i className=\"fa fa-times\"></i>\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Page Description */}\r\n                <div className=\"bg-white p-4 rounded-lg border\">\r\n                    <label className=\"block text-sm font-medium mb-2\">Mô tả Landing Page</label>\r\n                    <textarea\r\n                        value={pageDescription}\r\n                        onChange={(e) => setPageDescription(e.target.value)}\r\n                        rows={4}\r\n                        placeholder=\"Nhập mô tả chi tiết về landing page bạn muốn tạo...\"\r\n                        className=\"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                    />\r\n\r\n                    {!pageId && (\r\n                        <>\r\n                            <button\r\n                                onClick={handleCreatePage}\r\n                                className=\"w-full mt-3 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2\"\r\n                                disabled={loading}\r\n                            >\r\n                                <i className=\"fa fa-magic\"></i>\r\n                                {loading ? 'Đang tạo...' : 'Tạo với AI'}\r\n                            </button>\r\n\r\n                            {/* Template Selection */}\r\n                            <div className=\"mt-3 pt-3 border-t\">\r\n                                <p className=\"text-sm text-gray-600 mb-2\">Hoặc chọn template:</p>\r\n                                <div className=\"grid grid-cols-3 gap-2\">\r\n                                    <button\r\n                                        onClick={() => handleSelectTemplate('blank')}\r\n                                        className=\"btn-secondary text-xs py-1 px-2\"\r\n                                    >\r\n                                        <i className=\"fa fa-file\"></i>\r\n                                        <br />Trống\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleSelectTemplate('business')}\r\n                                        className=\"btn-secondary text-xs py-1 px-2\"\r\n                                    >\r\n                                        <i className=\"fa fa-briefcase\"></i>\r\n                                        <br />Business\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => handleSelectTemplate('portfolio')}\r\n                                        className=\"btn-secondary text-xs py-1 px-2\"\r\n                                    >\r\n                                        <i className=\"fa fa-user\"></i>\r\n                                        <br />Portfolio\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Device Selection */}\r\n                <div className=\"bg-white rounded-lg border\">\r\n                    <div className=\"p-3 border-b\">\r\n                        <h3 className=\"font-semibold flex items-center gap-2\">\r\n                            <i className=\"fa fa-mobile-alt\"></i>\r\n                            Thiết bị\r\n                        </h3>\r\n                    </div>\r\n                    <div className=\"p-3\">\r\n                        <div className=\"flex gap-2\">\r\n                            <button\r\n                                onClick={() => editorRef.current?.setDevice('desktop')}\r\n                                className={`flex-1 py-2 px-3 text-sm rounded ${selectedDevice === 'desktop' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`}\r\n                            >\r\n                                <i className=\"fa fa-desktop\"></i>\r\n                            </button>\r\n                            <button\r\n                                onClick={() => editorRef.current?.setDevice('tablet')}\r\n                                className={`flex-1 py-2 px-3 text-sm rounded ${selectedDevice === 'tablet' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`}\r\n                            >\r\n                                <i className=\"fa fa-tablet-alt\"></i>\r\n                            </button>\r\n                            <button\r\n                                onClick={() => editorRef.current?.setDevice('mobilePortrait')}\r\n                                className={`flex-1 py-2 px-3 text-sm rounded ${selectedDevice === 'mobilePortrait' ? 'bg-blue-500 text-white' : 'bg-gray-100'}`}\r\n                            >\r\n                                <i className=\"fa fa-mobile-alt\"></i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Blocks Panel */}\r\n                <div className=\"bg-white rounded-lg border\">\r\n                    <div className=\"p-3 border-b\">\r\n                        <h3 className=\"font-semibold flex items-center gap-2\">\r\n                            <i className=\"fa fa-cubes\"></i>\r\n                            Khối giao diện\r\n                        </h3>\r\n                    </div>\r\n                    <div className=\"blocks-container p-2 max-h-80 overflow-y-auto\"></div>\r\n                </div>\r\n\r\n                {/* Styles Panel */}\r\n                <div className=\"bg-white rounded-lg border\">\r\n                    <div className=\"p-3 border-b\">\r\n                        <h3 className=\"font-semibold flex items-center gap-2\">\r\n                            <i className=\"fa fa-paint-brush\"></i>\r\n                            Styles\r\n                        </h3>\r\n                    </div>\r\n                    <div className=\"styles-container p-2 max-h-60 overflow-y-auto\"></div>\r\n                </div>\r\n\r\n                {/* Layers Panel */}\r\n                <div className=\"bg-white rounded-lg border\">\r\n                    <div className=\"p-3 border-b\">\r\n                        <h3 className=\"font-semibold flex items-center gap-2\">\r\n                            <i className=\"fa fa-layer-group\"></i>\r\n                            Layers\r\n                        </h3>\r\n                    </div>\r\n                    <div className=\"layers-container p-2 max-h-40 overflow-y-auto\"></div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Editor Area */}\r\n            <div className=\"flex-1 flex flex-col gap-4\">\r\n                {/* Toolbar */}\r\n                <div className=\"bg-white p-4 rounded-lg border\">\r\n                    <div className=\"flex flex-wrap gap-3 items-center\">\r\n                        <button\r\n                            onClick={handleSavePage}\r\n                            className=\"btn-primary flex items-center gap-2\"\r\n                            disabled={loading}\r\n                        >\r\n                            <i className=\"fa fa-save\"></i>\r\n                            {loading ? 'Đang lưu...' : 'Lưu'}\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={handlePreviewPage}\r\n                            className=\"btn-secondary flex items-center gap-2\"\r\n                        >\r\n                            <i className=\"fa fa-eye\"></i>\r\n                            Preview\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={handleExportHTML}\r\n                            className=\"btn-secondary flex items-center gap-2\"\r\n                        >\r\n                            <i className=\"fa fa-download\"></i>\r\n                            Xuất HTML\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={handleAiRefactor}\r\n                            className=\"btn-primary flex items-center gap-2\"\r\n                            disabled={loading}\r\n                        >\r\n                            <i className=\"fa fa-robot\"></i>\r\n                            {loading ? 'AI đang xử lý...' : 'AI Refactor'}\r\n                        </button>\r\n\r\n                        {pageId && (\r\n                            <button\r\n                                onClick={handlePublishPage}\r\n                                className=\"btn-success flex items-center gap-2\"\r\n                                disabled={loading}\r\n                            >\r\n                                <i className=\"fa fa-rocket\"></i>\r\n                                {loading ? 'Đang xuất bản...' : 'Xuất bản'}\r\n                            </button>\r\n                        )}\r\n\r\n                        <button\r\n                            onClick={handleReloadEditor}\r\n                            className=\"btn-danger flex items-center gap-2\"\r\n                        >\r\n                            <i className=\"fa fa-refresh\"></i>\r\n                            Reset Editor\r\n                        </button>\r\n\r\n                        {/* Auto-save status */}\r\n                        <div className=\"ml-auto flex items-center gap-2 text-sm text-gray-600\">\r\n                            {isAutoSaving && (\r\n                                <>\r\n                                    <i className=\"fa fa-spinner fa-spin\"></i>\r\n                                    <span>Đang lưu...</span>\r\n                                </>\r\n                            )}\r\n                            {saveTime && !isAutoSaving && (\r\n                                <>\r\n                                    <i className=\"fa fa-clock\"></i>\r\n                                    <span>Lần lưu cuối: {saveTime}</span>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Page Info (if editing existing page) */}\r\n                {currentPage && (\r\n                    <div className=\"bg-blue-50 border border-blue-200 p-3 rounded-lg\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <h4 className=\"font-medium text-blue-900\">{currentPage.name}</h4>\r\n                                <p className=\"text-sm text-blue-700\">\r\n                                    Status: <span className=\"font-medium\">{currentPage.status}</span>\r\n                                    {currentPage.url && (\r\n                                        <>\r\n                                            {' | '}\r\n                                            <a\r\n                                                href={currentPage.url}\r\n                                                target=\"_blank\"\r\n                                                rel=\"noopener noreferrer\"\r\n                                                className=\"underline hover:no-underline\"\r\n                                            >\r\n                                                Xem trang live\r\n                                            </a>\r\n                                        </>\r\n                                    )}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"text-sm text-blue-600\">\r\n                                <div>Views: {currentPage.views || 0}</div>\r\n                                <div>Conversions: {currentPage.conversions || 0}</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* GrapesJS Editor */}\r\n                <div className=\"bg-white rounded-lg border overflow-hidden\">\r\n                    <div\r\n                        ref={editorContainerRef}\r\n                        className=\"editor-section min-h-[70vh]\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* AI Modal */}\r\n            {aiModalOpen && (\r\n                <div className=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4 ai-modal\">\r\n                    <div className=\"bg-white rounded-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto ai-modal-content\">\r\n                        <div className=\"p-6 border-b\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <h2 className=\"text-2xl font-bold flex items-center gap-2\">\r\n                                    <i className=\"fa fa-robot text-blue-500\"></i>\r\n                                    AI Refactor Preview\r\n                                </h2>\r\n                                <button\r\n                                    onClick={() => setAiModalOpen(false)}\r\n                                    className=\"text-gray-500 hover:text-gray-700 text-xl transition-colors\"\r\n                                >\r\n                                    <i className=\"fa fa-times\"></i>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-6\">\r\n                            {/* Improvements List */}\r\n                            {aiImprovements.length > 0 && (\r\n                                <div className=\"mb-6 p-4 bg-blue-50 rounded-lg\">\r\n                                    <h3 className=\"font-semibold mb-2 flex items-center gap-2\">\r\n                                        <i className=\"fa fa-lightbulb text-yellow-500\"></i>\r\n                                        Cải tiến được đề xuất:\r\n                                    </h3>\r\n                                    <ul className=\"list-disc list-inside space-y-1\">\r\n                                        {aiImprovements.map((improvement, index) => (\r\n                                            <li key={index} className=\"text-sm text-gray-700\">\r\n                                                {improvement}\r\n                                            </li>\r\n                                        ))}\r\n                                    </ul>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Preview Comparison */}\r\n                            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                                {/* Original */}\r\n                                <div className=\"space-y-3\">\r\n                                    <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n                                        <i className=\"fa fa-file-code text-gray-500\"></i>\r\n                                        Bản gốc\r\n                                    </h3>\r\n                                    <div\r\n                                        className=\"border rounded-lg p-4 bg-gray-50 max-h-96 overflow-y-auto preview-frame\"\r\n                                        dangerouslySetInnerHTML={{ __html: originalHtml }}\r\n                                    />\r\n                                </div>\r\n\r\n                                {/* AI Refactored */}\r\n                                <div className=\"space-y-3\">\r\n                                    <h3 className=\"font-semibold text-lg flex items-center gap-2\">\r\n                                        <i className=\"fa fa-magic text-blue-500\"></i>\r\n                                        Phiên bản AI\r\n                                    </h3>\r\n                                    {aiThumbnail && (\r\n                                        <img\r\n                                            src={aiThumbnail}\r\n                                            alt=\"AI Preview\"\r\n                                            className=\"w-full rounded-lg border shadow-sm max-h-48 object-cover\"\r\n                                            onError={(e) => {\r\n                                                e.target.style.display = 'none';\r\n                                            }}\r\n                                        />\r\n                                    )}\r\n                                    <div\r\n                                        className=\"border rounded-lg p-4 bg-gray-50 max-h-96 overflow-y-auto preview-frame\"\r\n                                        dangerouslySetInnerHTML={{ __html: aiHtml }}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 border-t bg-gray-50 flex justify-end gap-3\">\r\n                            <button\r\n                                onClick={() => setAiModalOpen(false)}\r\n                                className=\"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-100 transition-colors\"\r\n                            >\r\n                                Hủy\r\n                            </button>\r\n                            <button\r\n                                onClick={handleAcceptAi}\r\n                                className=\"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2\"\r\n                            >\r\n                                <i className=\"fa fa-check\"></i>\r\n                                Áp dụng AI Refactor\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Quick Actions Floating Panel */}\r\n            <div className=\"fixed bottom-6 right-6 z-40\">\r\n                <div className=\"bg-white rounded-lg shadow-lg border p-2 flex flex-col gap-2\">\r\n                    <button\r\n                        onClick={() => editorRef.current?.runCommand('core:undo')}\r\n                        className=\"p-2 hover:bg-gray-100 rounded transition-colors\"\r\n                        title=\"Hoàn tác\"\r\n                    >\r\n                        <i className=\"fa fa-undo text-gray-600\"></i>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => editorRef.current?.runCommand('core:redo')}\r\n                        className=\"p-2 hover:bg-gray-100 rounded transition-colors\"\r\n                        title=\"Làm lại\"\r\n                    >\r\n                        <i className=\"fa fa-redo text-gray-600\"></i>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => editorRef.current?.runCommand('core:canvas-clear')}\r\n                        className=\"p-2 hover:bg-gray-100 rounded transition-colors\"\r\n                        title=\"Xóa tất cả\"\r\n                    >\r\n                        <i className=\"fa fa-trash text-red-500\"></i>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Keyboard Shortcuts Help */}\r\n            <div className=\"fixed bottom-6 left-6 z-40\">\r\n                <button\r\n                    onClick={() => setShowShortcuts(!showShortcuts)}\r\n                    className=\"bg-gray-800 text-white p-2 rounded-full shadow-lg hover:bg-gray-700 transition-colors\"\r\n                    title=\"Phím tắt\"\r\n                >\r\n                    <i className=\"fa fa-keyboard\"></i>\r\n                </button>\r\n                {showShortcuts && (\r\n                    <div className=\"absolute bottom-12 left-0 bg-white rounded-lg shadow-xl border p-4 w-64\">\r\n                        <h4 className=\"font-semibold mb-2\">Phím tắt</h4>\r\n                        <div className=\"text-sm space-y-1\">\r\n                            <div>Ctrl+S: Lưu</div>\r\n                            <div>Ctrl+Z: Hoàn tác</div>\r\n                            <div>Ctrl+Y: Làm lại</div>\r\n                            <div>Delete: Xóa element</div>\r\n                            <div>Esc: Bỏ chọn</div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CreateLandingPage;"],"mappings":"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OAAO,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;cACDC,KAAK,EAAE;YACX,CAAC,EACD;cACIJ,EAAE,EAAE,cAAc;cAClBC,KAAK,EAAE,cAAc;cACrBC,QAAQ,EAAE,OAAO;cACjBC,OAAO,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;cACDC,KAAK,EAAE;YACX,CAAC,EACD;cACIJ,EAAE,EAAE,cAAc;cAClBC,KAAK,EAAE,cAAc;cACrBC,QAAQ,EAAE,UAAU;cACpBC,OAAO,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;cACDC,KAAK,EAAE;YACX,CAAC,EACD;cACIJ,EAAE,EAAE,eAAe;cACnBC,KAAK,EAAE,eAAe;cACtBC,QAAQ,EAAE,UAAU;cACpBC,OAAO,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;cACDC,KAAK,EAAE;YACX,CAAC,EACD;cACIJ,EAAE,EAAE,QAAQ;cACZC,KAAK,EAAE,QAAQ;cACfC,QAAQ,EAAE,UAAU;cACpBC,OAAO,EAAE;AACzC;AACA;AACA;AA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}