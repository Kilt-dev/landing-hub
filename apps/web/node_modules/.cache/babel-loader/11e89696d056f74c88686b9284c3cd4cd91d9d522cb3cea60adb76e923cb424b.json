{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useRef, useMemo, useCallback, useState } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport QuickEditToolkit from './QuickEditToolkit';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  COMPONENT: 'component',\n  EXISTING_ELEMENT: 'existingElement'\n};\n\n// Memoized component for rendering individual elements with error handling\nconst Element = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  component,\n  index,\n  isSelected,\n  hasQuickEdit,\n  onSelectElement,\n  handleElementHover,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement\n}) => {\n  var _component$json, _component$json2, _component$json3, _component$json4;\n  _s();\n  const [{\n    isDragging,\n    initialOffset\n  }, drag, preview] = useDrag(() => ({\n    type: ItemTypes.EXISTING_ELEMENT,\n    item: {\n      id: component.id,\n      index\n    },\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging(),\n      initialOffset: monitor.getInitialClientOffset()\n    })\n  }));\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: ItemTypes.EXISTING_ELEMENT,\n    hover: item => {\n      if (item.id !== component.id) {\n        onMoveElement(item, index);\n      }\n    }\n  }));\n  const content = useMemo(() => {\n    var _component$json$style, _component$json$style2, _component$json$style3, _component$json$style4, _component$json$conte, _component$json$conte2, _component$json$conte3, _component$json$conte4, _component$json$conte5, _component$json$conte6, _component$json$conte7, _component$json$conte8, _component$json$backg, _component$json$conte9, _component$json$conte0, _component$json$conte1, _component$json$conte10;\n    if (!component.json) {\n      console.warn('Invalid component structure:', component);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500 text-xs\",\n        children: \"Component l\\u1ED7i: Thi\\u1EBFu json\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 24\n      }, this);\n    }\n    const styles = {\n      ...component.json.styles,\n      position: 'absolute',\n      left: ((_component$json$style = component.json.styles) === null || _component$json$style === void 0 ? void 0 : (_component$json$style2 = _component$json$style.position) === null || _component$json$style2 === void 0 ? void 0 : _component$json$style2.x) || 0,\n      top: ((_component$json$style3 = component.json.styles) === null || _component$json$style3 === void 0 ? void 0 : (_component$json$style4 = _component$json$style3.position) === null || _component$json$style4 === void 0 ? void 0 : _component$json$style4.y) || 0,\n      transition: isDragging ? 'none' : 'all 0.3s ease'\n    };\n    switch (component.json.type) {\n      case 'heading':\n        const HeadingTag = component.json.level === 2 ? 'h2' : 'h1';\n        return /*#__PURE__*/_jsxDEV(HeadingTag, {\n          style: styles,\n          children: component.json.content || 'Tiêu đề'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 28\n        }, this);\n      case 'paragraph':\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: styles,\n          children: component.json.content || 'Đoạn văn'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 28\n        }, this);\n      case 'button':\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styles,\n          children: component.json.content || 'Nút'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 28\n        }, this);\n      case 'button-group':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles,\n          children: ((_component$json$conte = component.json.content) === null || _component$json$conte === void 0 ? void 0 : _component$json$conte.map((btn, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              marginRight: '10px',\n              ...btn.styles\n            },\n            children: btn.text || 'Nút'\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 33\n          }, this))) || 'Nhóm nút'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this);\n      case 'form':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles,\n          children: ((_component$json$conte2 = component.json.content) === null || _component$json$conte2 === void 0 ? void 0 : (_component$json$conte3 = _component$json$conte2.fields) === null || _component$json$conte3 === void 0 ? void 0 : _component$json$conte3.map((field, idx) => /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: field,\n            style: {\n              marginBottom: '10px',\n              ...component.json.styles\n            }\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 33\n          }, this))) || 'Form'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this);\n      case 'image':\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          src: component.json.content || 'https://via.placeholder.com/300x200',\n          style: styles,\n          alt: \"Image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 28\n        }, this);\n      case 'gallery':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles,\n            display: 'flex',\n            gap: '10px'\n          },\n          children: ((_component$json$conte4 = component.json.content) === null || _component$json$conte4 === void 0 ? void 0 : _component$json$conte4.map((src, idx) => /*#__PURE__*/_jsxDEV(\"img\", {\n            src: src || 'https://via.placeholder.com/150x150',\n            style: {\n              width: '150px'\n            },\n            alt: \"Gallery\"\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 33\n          }, this))) || 'Gallery'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }, this);\n      case 'product':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: ((_component$json$conte5 = component.json.content) === null || _component$json$conte5 === void 0 ? void 0 : _component$json$conte5.title) || 'Sản phẩm'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: ((_component$json$conte6 = component.json.content) === null || _component$json$conte6 === void 0 ? void 0 : _component$json$conte6.price) || '$0.00'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            children: ((_component$json$conte7 = component.json.content) === null || _component$json$conte7 === void 0 ? void 0 : _component$json$conte7.button) || 'Mua ngay'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }, this);\n      case 'carousel':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles,\n            overflow: 'hidden',\n            width: '400px',\n            height: '200px'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              transition: 'transform 0.5s'\n            },\n            children: (_component$json$conte8 = component.json.content) === null || _component$json$conte8 === void 0 ? void 0 : _component$json$conte8.map((src, idx) => /*#__PURE__*/_jsxDEV(\"img\", {\n              src: src || 'https://via.placeholder.com/400x200',\n              style: {\n                width: '400px'\n              },\n              alt: \"Carousel\"\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }, this);\n      case 'section':\n        return /*#__PURE__*/_jsxDEV(\"section\", {\n          style: {\n            ...styles,\n            background: (_component$json$backg = component.json.background) === null || _component$json$backg === void 0 ? void 0 : _component$json$backg.value\n          },\n          children: [component.json.layout === 'hero' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container mx-auto\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-4xl font-bold mb-4 text-white\",\n              children: ((_component$json$conte9 = component.json.content) === null || _component$json$conte9 === void 0 ? void 0 : _component$json$conte9.title) || 'Welcome'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xl mb-8 text-white\",\n              children: ((_component$json$conte0 = component.json.content) === null || _component$json$conte0 === void 0 ? void 0 : _component$json$conte0.subtitle) || 'Subtitle'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-4 justify-center\",\n              children: ((_component$json$conte1 = component.json.content) === null || _component$json$conte1 === void 0 ? void 0 : (_component$json$conte10 = _component$json$conte1.buttons) === null || _component$json$conte10 === void 0 ? void 0 : _component$json$conte10.map((btn, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `px-6 py-3 rounded-lg font-semibold ${btn.type === 'primary' ? 'bg-white text-blue-600' : 'border-2 border-white text-white bg-transparent'}`,\n                children: btn.text || 'Nút'\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 45\n              }, this))) || null\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 33\n          }, this), isSelected && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"absolute top-2 left-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs px-2 py-1 rounded-lg\",\n            children: \"Hero Section\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 25\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-gray-500 text-xs\",\n          children: \"Lo\\u1EA1i kh\\xF4ng h\\u1ED7 tr\\u1EE3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 28\n        }, this);\n    }\n  }, [component, isDragging, isSelected]);\n  if (((_component$json = component.json) === null || _component$json === void 0 ? void 0 : _component$json.type) === 'section') {\n    return content;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: node => drag(drop(node)),\n    className: `relative transition-all duration-300 ${isSelected ? 'ring-4 ring-blue-500 ring-opacity-50' : ''} ${hasQuickEdit ? 'shadow-lg hover:shadow-xl' : ''} ${isOver ? 'bg-blue-100' : ''}`,\n    onClick: () => onSelectElement(component),\n    onMouseEnter: e => handleElementHover(e, component),\n    style: {\n      ...((_component$json2 = component.json) === null || _component$json2 === void 0 ? void 0 : _component$json2.styles),\n      opacity: isDragging ? 0.5 : 1\n    },\n    children: [content, isSelected && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute -top-6 left-0 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs px-2 py-1 rounded-lg\",\n      children: ((_component$json3 = component.json) === null || _component$json3 === void 0 ? void 0 : _component$json3.type.charAt(0).toUpperCase()) + ((_component$json4 = component.json) === null || _component$json4 === void 0 ? void 0 : _component$json4.type.slice(1)) || 'Không xác định'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 13\n  }, this);\n}, \"5wXeYlGa3drkqE5sebjsszPVZg0=\", false, function () {\n  return [useDrag, useDrop];\n})), \"5wXeYlGa3drkqE5sebjsszPVZg0=\", false, function () {\n  return [useDrag, useDrop];\n});\n_c2 = Element;\nconst Canvas = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c3 = _s2(({\n  pageStructure,\n  selectedElement,\n  onSelectElement,\n  quickEditElement,\n  quickEditPosition,\n  onQuickEdit,\n  onCloseQuickEdit,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  viewMode,\n  addComponent,\n  moveElement,\n  zoomLevel,\n  setPageStructure\n}) => {\n  _s2();\n  const canvasRef = useRef(null);\n  const [dropIndex, setDropIndex] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n\n  // Make the entire canvas a drop target\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.COMPONENT, ItemTypes.EXISTING_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      const rect = canvasRef.current.getBoundingClientRect();\n      const y = clientOffset.y - rect.top;\n      const x = clientOffset.x - rect.left;\n      const index = calculateDropIndex(y);\n      setDropIndex(index);\n      if (item.componentData) {\n        item.componentData.json.styles = {\n          ...item.componentData.json.styles,\n          position: {\n            x,\n            y\n          }\n        };\n      }\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      const rect = canvasRef.current.getBoundingClientRect();\n      const position = {\n        x: clientOffset.x - rect.left,\n        y: clientOffset.y - rect.top\n      };\n      setHistory(prev => {\n        const newHistory = prev.slice(0, historyIndex + 1);\n        newHistory.push([...pageStructure]);\n        return newHistory;\n      });\n      setHistoryIndex(prev => prev + 1);\n      if (item.componentData) {\n        const index = calculateDropIndex(position.y);\n        addComponent({\n          ...item.componentData,\n          json: {\n            ...item.componentData.json,\n            styles: {\n              ...item.componentData.json.styles,\n              position: {\n                x: position.x,\n                y: position.y\n              }\n            }\n          }\n        }, index);\n      } else {\n        const newIndex = calculateDropIndex(position.y);\n        moveElement(item.id, newIndex);\n        const updatedStructure = [...pageStructure];\n        updatedStructure[newIndex] = {\n          ...updatedStructure[newIndex],\n          json: {\n            ...updatedStructure[newIndex].json,\n            styles: {\n              ...updatedStructure[newIndex].json.styles,\n              position: {\n                x: position.x,\n                y: position.y\n              }\n            }\n          }\n        };\n        setPageStructure(updatedStructure);\n      }\n      setDropIndex(null);\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n\n  // Calculate drop index based on y-position\n  const calculateDropIndex = useCallback(y => {\n    const elements = canvasRef.current.querySelectorAll('.canvas-element');\n    let index = pageStructure.length;\n    elements.forEach((el, i) => {\n      const rect = el.getBoundingClientRect();\n      const canvasRect = canvasRef.current.getBoundingClientRect();\n      const elTop = rect.top - canvasRect.top;\n      const elHeight = rect.height;\n      if (y < elTop + elHeight / 2) {\n        index = i;\n        return false;\n      }\n    });\n    return index;\n  }, [pageStructure]);\n\n  // Handle element hover for quick edit\n  const handleElementHover = useCallback((e, component) => {\n    if ((quickEditElement === null || quickEditElement === void 0 ? void 0 : quickEditElement.id) === component.id) return;\n    const rect = e.currentTarget.getBoundingClientRect();\n    const canvasRect = canvasRef.current.getBoundingClientRect();\n    onQuickEdit(component, {\n      x: rect.left - canvasRect.left,\n      y: rect.top - canvasRect.top + 20\n    });\n  }, [quickEditElement, onQuickEdit]);\n\n  // Keyboard shortcuts\n  useHotkeys('delete', () => {\n    if (selectedElement) {\n      setHistory(prev => {\n        const newHistory = prev.slice(0, historyIndex + 1);\n        newHistory.push([...pageStructure]);\n        return newHistory;\n      });\n      setHistoryIndex(prev => prev + 1);\n      onDeleteElement(selectedElement);\n    }\n  }, [selectedElement, onDeleteElement]);\n  useHotkeys('up', () => {\n    if (selectedElement) {\n      onMoveElement(selectedElement, 'up');\n    }\n  }, [selectedElement, onMoveElement]);\n  useHotkeys('down', () => {\n    if (selectedElement) {\n      onMoveElement(selectedElement, 'down');\n    }\n  }, [selectedElement, onMoveElement]);\n  useHotkeys('ctrl+z', () => {\n    if (historyIndex > 0) {\n      setHistoryIndex(prev => prev - 1);\n      setPageStructure([...history[historyIndex - 1]]);\n      toast.info('Đã hoàn tác!');\n    }\n  }, [historyIndex, history, setPageStructure]);\n  useHotkeys('ctrl+y', () => {\n    if (historyIndex < history.length - 1) {\n      setHistoryIndex(prev => prev + 1);\n      setPageStructure([...history[historyIndex + 1]]);\n      toast.info('Đã khôi phục!');\n    }\n  }, [historyIndex, history, setPageStructure]);\n  const getCanvasClasses = useCallback(() => {\n    const baseClasses = 'bg-[#E6F3D6]/80 overflow-auto transition-all duration-300 rounded-xl shadow-lg relative';\n    switch (viewMode) {\n      case 'mobile':\n        return `${baseClasses} max-w-sm mx-auto border-2 border-[#D4E4E4] rounded-2xl p-4`;\n      case 'tablet':\n        return `${baseClasses} max-w-2xl mx-auto border-2 border-[#D4E4E4] rounded-xl p-4`;\n      default:\n        return `${baseClasses} w-full h-full`;\n    }\n  }, [viewMode]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-1 bg-[#F4E4D4] p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        canvasRef.current = node;\n        drop(node);\n      },\n      className: getCanvasClasses(),\n      onMouseLeave: onCloseQuickEdit,\n      style: {\n        transform: `scale(${zoomLevel / 100})`,\n        transformOrigin: 'top left',\n        backgroundColor: isOver ? 'rgba(212, 228, 228, 0.5)' : '',\n        boxShadow: isOver ? '0 4px 12px rgba(212, 228, 228, 0.3)' : 'none',\n        position: 'relative',\n        minHeight: '500px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-full\",\n        children: pageStructure.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-full flex items-center justify-center text-gray-600 min-h-[500px]\",\n          \"data-tooltip-id\": \"canvas-tooltip\",\n          \"data-tooltip-content\": \"K\\xE9o th\\u1EA3 component t\\u1EEB th\\u01B0 vi\\u1EC7n v\\xE0o \\u0111\\xE2y\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"far fa-mouse-pointer text-5xl mb-4 text-[#FAD2E1]\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 395,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-lg font-poppins\",\n              children: \"K\\xE9o th\\u1EA3 component \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [pageStructure.map((component, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [dropIndex === index && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-2 bg-[#D4E4E4]/50 border-dashed border-2 border-[#FAD2E1] my-1 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"canvas-element\",\n              children: /*#__PURE__*/_jsxDEV(Element, {\n                component: component,\n                index: index,\n                isSelected: (selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id) === component.id,\n                hasQuickEdit: (quickEditElement === null || quickEditElement === void 0 ? void 0 : quickEditElement.id) === component.id,\n                onSelectElement: onSelectElement,\n                handleElementHover: handleElementHover,\n                onDuplicateElement: onDuplicateElement,\n                onDeleteElement: onDeleteElement,\n                onMoveElement: onMoveElement\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 41\n            }, this)]\n          }, component.id || index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 37\n          }, this)), dropIndex === pageStructure.length && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-2 bg-[#D4E4E4]/50 border-dashed border-2 border-[#FAD2E1] my-1 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(QuickEditToolkit, {\n        element: quickEditElement,\n        position: quickEditPosition,\n        onEdit: () => onSelectElement(quickEditElement),\n        onDuplicate: () => onDuplicateElement(quickEditElement),\n        onDelete: () => onDeleteElement(quickEditElement),\n        onMoveUp: () => onMoveElement(quickEditElement, 'up'),\n        onMoveDown: () => onMoveElement(quickEditElement, 'down'),\n        onClose: onCloseQuickEdit,\n        className: \"bg-white/90 shadow-md rounded-lg p-2 hover:shadow-lg transition-all duration-200 text-gray-700\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 374,\n    columnNumber: 13\n  }, this);\n}, \"Fo8a+51w33MF8h/wlrR8ccKzO7w=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys, useHotkeys, useHotkeys, useHotkeys];\n})), \"Fo8a+51w33MF8h/wlrR8ccKzO7w=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys, useHotkeys, useHotkeys, useHotkeys];\n});\n_c4 = Canvas;\nexport default Canvas;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Element$React.memo\");\n$RefreshReg$(_c2, \"Element\");\n$RefreshReg$(_c3, \"Canvas$React.memo\");\n$RefreshReg$(_c4, \"Canvas\");","map":{"version":3,"names":["React","useRef","useMemo","useCallback","useState","useDrop","useDrag","useHotkeys","toast","QuickEditToolkit","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemTypes","COMPONENT","EXISTING_ELEMENT","Element","_s","memo","_c","component","index","isSelected","hasQuickEdit","onSelectElement","handleElementHover","onDuplicateElement","onDeleteElement","onMoveElement","_component$json","_component$json2","_component$json3","_component$json4","isDragging","initialOffset","drag","preview","type","item","id","collect","monitor","getInitialClientOffset","isOver","drop","accept","hover","content","_component$json$style","_component$json$style2","_component$json$style3","_component$json$style4","_component$json$conte","_component$json$conte2","_component$json$conte3","_component$json$conte4","_component$json$conte5","_component$json$conte6","_component$json$conte7","_component$json$conte8","_component$json$backg","_component$json$conte9","_component$json$conte0","_component$json$conte1","_component$json$conte10","json","console","warn","className","children","fileName","_jsxFileName","lineNumber","columnNumber","styles","position","left","x","top","y","transition","HeadingTag","level","style","map","btn","idx","marginRight","text","fields","field","placeholder","marginBottom","src","alt","display","gap","width","title","price","button","overflow","height","background","value","layout","subtitle","buttons","ref","node","onClick","onMouseEnter","e","opacity","charAt","toUpperCase","slice","_c2","Canvas","_s2","_c3","pageStructure","selectedElement","quickEditElement","quickEditPosition","onQuickEdit","onCloseQuickEdit","viewMode","addComponent","moveElement","zoomLevel","setPageStructure","canvasRef","dropIndex","setDropIndex","history","setHistory","historyIndex","setHistoryIndex","clientOffset","getClientOffset","rect","current","getBoundingClientRect","calculateDropIndex","componentData","prev","newHistory","push","newIndex","updatedStructure","elements","querySelectorAll","length","forEach","el","i","canvasRect","elTop","elHeight","currentTarget","info","getCanvasClasses","baseClasses","onMouseLeave","transform","transformOrigin","backgroundColor","boxShadow","minHeight","element","onEdit","onDuplicate","onDelete","onMoveUp","onMoveDown","onClose","_c4","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef, useMemo, useCallback, useState } from 'react';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport QuickEditToolkit from './QuickEditToolkit';\r\n\r\nconst ItemTypes = {\r\n    COMPONENT: 'component',\r\n    EXISTING_ELEMENT: 'existingElement',\r\n};\r\n\r\n// Memoized component for rendering individual elements with error handling\r\nconst Element = React.memo(\r\n    ({\r\n         component,\r\n         index,\r\n         isSelected,\r\n         hasQuickEdit,\r\n         onSelectElement,\r\n         handleElementHover,\r\n         onDuplicateElement,\r\n         onDeleteElement,\r\n         onMoveElement,\r\n     }) => {\r\n        const [{ isDragging, initialOffset }, drag, preview] = useDrag(() => ({\r\n            type: ItemTypes.EXISTING_ELEMENT,\r\n            item: { id: component.id, index },\r\n            collect: (monitor) => ({\r\n                isDragging: !!monitor.isDragging(),\r\n                initialOffset: monitor.getInitialClientOffset(),\r\n            }),\r\n        }));\r\n\r\n        const [{ isOver }, drop] = useDrop(() => ({\r\n            accept: ItemTypes.EXISTING_ELEMENT,\r\n            hover: (item) => {\r\n                if (item.id !== component.id) {\r\n                    onMoveElement(item, index);\r\n                }\r\n            },\r\n        }));\r\n\r\n        const content = useMemo(() => {\r\n            if (!component.json) {\r\n                console.warn('Invalid component structure:', component);\r\n                return <div className=\"text-red-500 text-xs\">Component lỗi: Thiếu json</div>;\r\n            }\r\n\r\n            const styles = {\r\n                ...component.json.styles,\r\n                position: 'absolute',\r\n                left: component.json.styles?.position?.x || 0,\r\n                top: component.json.styles?.position?.y || 0,\r\n                transition: isDragging ? 'none' : 'all 0.3s ease',\r\n            };\r\n\r\n            switch (component.json.type) {\r\n                case 'heading':\r\n                    const HeadingTag = component.json.level === 2 ? 'h2' : 'h1';\r\n                    return <HeadingTag style={styles}>{component.json.content || 'Tiêu đề'}</HeadingTag>;\r\n                case 'paragraph':\r\n                    return <p style={styles}>{component.json.content || 'Đoạn văn'}</p>;\r\n                case 'button':\r\n                    return <button style={styles}>{component.json.content || 'Nút'}</button>;\r\n                case 'button-group':\r\n                    return (\r\n                        <div style={styles}>\r\n                            {component.json.content?.map((btn, idx) => (\r\n                                <button key={idx} style={{ marginRight: '10px', ...btn.styles }}>\r\n                                    {btn.text || 'Nút'}\r\n                                </button>\r\n                            )) || 'Nhóm nút'}\r\n                        </div>\r\n                    );\r\n                case 'form':\r\n                    return (\r\n                        <div style={styles}>\r\n                            {component.json.content?.fields?.map((field, idx) => (\r\n                                <input key={idx} placeholder={field} style={{ marginBottom: '10px', ...component.json.styles }} />\r\n                            )) || 'Form'}\r\n                        </div>\r\n                    );\r\n                case 'image':\r\n                    return <img src={component.json.content || 'https://via.placeholder.com/300x200'} style={styles} alt=\"Image\" />;\r\n                case 'gallery':\r\n                    return (\r\n                        <div style={{ ...styles, display: 'flex', gap: '10px' }}>\r\n                            {component.json.content?.map((src, idx) => (\r\n                                <img key={idx} src={src || 'https://via.placeholder.com/150x150'} style={{ width: '150px' }} alt=\"Gallery\" />\r\n                            )) || 'Gallery'}\r\n                        </div>\r\n                    );\r\n                case 'product':\r\n                    return (\r\n                        <div style={styles}>\r\n                            <h3>{component.json.content?.title || 'Sản phẩm'}</h3>\r\n                            <p>{component.json.content?.price || '$0.00'}</p>\r\n                            <button>{component.json.content?.button || 'Mua ngay'}</button>\r\n                        </div>\r\n                    );\r\n                case 'carousel':\r\n                    return (\r\n                        <div style={{ ...styles, overflow: 'hidden', width: '400px', height: '200px' }}>\r\n                            <div style={{ display: 'flex', transition: 'transform 0.5s' }}>\r\n                                {component.json.content?.map((src, idx) => (\r\n                                    <img key={idx} src={src || 'https://via.placeholder.com/400x200'} style={{ width: '400px' }} alt=\"Carousel\" />\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                case 'section':\r\n                    return (\r\n                        <section\r\n                            style={{\r\n                                ...styles,\r\n                                background: component.json.background?.value,\r\n                            }}\r\n                        >\r\n                            {component.json.layout === 'hero' && (\r\n                                <div className=\"container mx-auto\">\r\n                                    <h1 className=\"text-4xl font-bold mb-4 text-white\">\r\n                                        {component.json.content?.title || 'Welcome'}\r\n                                    </h1>\r\n                                    <p className=\"text-xl mb-8 text-white\">{component.json.content?.subtitle || 'Subtitle'}</p>\r\n                                    <div className=\"flex gap-4 justify-center\">\r\n                                        {component.json.content?.buttons?.map((btn, idx) => (\r\n                                            <button\r\n                                                key={idx}\r\n                                                className={`px-6 py-3 rounded-lg font-semibold ${\r\n                                                    btn.type === 'primary'\r\n                                                        ? 'bg-white text-blue-600'\r\n                                                        : 'border-2 border-white text-white bg-transparent'\r\n                                                }`}\r\n                                            >\r\n                                                {btn.text || 'Nút'}\r\n                                            </button>\r\n                                        )) || null}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                            {isSelected && (\r\n                                <div className=\"absolute top-2 left-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs px-2 py-1 rounded-lg\">\r\n                                    Hero Section\r\n                                </div>\r\n                            )}\r\n                        </section>\r\n                    );\r\n                default:\r\n                    return <div className=\"text-gray-500 text-xs\">Loại không hỗ trợ</div>;\r\n            }\r\n        }, [component, isDragging, isSelected]);\r\n\r\n        if (component.json?.type === 'section') {\r\n            return content;\r\n        }\r\n\r\n        return (\r\n            <div\r\n                ref={(node) => drag(drop(node))}\r\n                className={`relative transition-all duration-300 ${\r\n                    isSelected ? 'ring-4 ring-blue-500 ring-opacity-50' : ''\r\n                } ${hasQuickEdit ? 'shadow-lg hover:shadow-xl' : ''} ${isOver ? 'bg-blue-100' : ''}`}\r\n                onClick={() => onSelectElement(component)}\r\n                onMouseEnter={(e) => handleElementHover(e, component)}\r\n                style={{ ...component.json?.styles, opacity: isDragging ? 0.5 : 1 }}\r\n            >\r\n                {content}\r\n                {isSelected && (\r\n                    <div className=\"absolute -top-6 left-0 bg-gradient-to-r from-blue-500 to-blue-600 text-white text-xs px-2 py-1 rounded-lg\">\r\n                        {component.json?.type.charAt(0).toUpperCase() + component.json?.type.slice(1) || 'Không xác định'}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nconst Canvas = React.memo(\r\n    ({\r\n         pageStructure,\r\n         selectedElement,\r\n         onSelectElement,\r\n         quickEditElement,\r\n         quickEditPosition,\r\n         onQuickEdit,\r\n         onCloseQuickEdit,\r\n         onDuplicateElement,\r\n         onDeleteElement,\r\n         onMoveElement,\r\n         viewMode,\r\n         addComponent,\r\n         moveElement,\r\n         zoomLevel,\r\n         setPageStructure,\r\n     }) => {\r\n        const canvasRef = useRef(null);\r\n        const [dropIndex, setDropIndex] = useState(null);\r\n        const [history, setHistory] = useState([]);\r\n        const [historyIndex, setHistoryIndex] = useState(-1);\r\n\r\n        // Make the entire canvas a drop target\r\n        const [{ isOver }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.COMPONENT, ItemTypes.EXISTING_ELEMENT],\r\n            hover: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                const rect = canvasRef.current.getBoundingClientRect();\r\n                const y = clientOffset.y - rect.top;\r\n                const x = clientOffset.x - rect.left;\r\n                const index = calculateDropIndex(y);\r\n                setDropIndex(index);\r\n\r\n                if (item.componentData) {\r\n                    item.componentData.json.styles = {\r\n                        ...item.componentData.json.styles,\r\n                        position: { x, y },\r\n                    };\r\n                }\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                const rect = canvasRef.current.getBoundingClientRect();\r\n                const position = {\r\n                    x: clientOffset.x - rect.left,\r\n                    y: clientOffset.y - rect.top,\r\n                };\r\n\r\n                setHistory((prev) => {\r\n                    const newHistory = prev.slice(0, historyIndex + 1);\r\n                    newHistory.push([...pageStructure]);\r\n                    return newHistory;\r\n                });\r\n                setHistoryIndex((prev) => prev + 1);\r\n\r\n                if (item.componentData) {\r\n                    const index = calculateDropIndex(position.y);\r\n                    addComponent(\r\n                        {\r\n                            ...item.componentData,\r\n                            json: {\r\n                                ...item.componentData.json,\r\n                                styles: { ...item.componentData.json.styles, position: { x: position.x, y: position.y } },\r\n                            },\r\n                        },\r\n                        index\r\n                    );\r\n                } else {\r\n                    const newIndex = calculateDropIndex(position.y);\r\n                    moveElement(item.id, newIndex);\r\n                    const updatedStructure = [...pageStructure];\r\n                    updatedStructure[newIndex] = {\r\n                        ...updatedStructure[newIndex],\r\n                        json: {\r\n                            ...updatedStructure[newIndex].json,\r\n                            styles: { ...updatedStructure[newIndex].json.styles, position: { x: position.x, y: position.y } },\r\n                        },\r\n                    };\r\n                    setPageStructure(updatedStructure);\r\n                }\r\n                setDropIndex(null);\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: !!monitor.isOver(),\r\n            }),\r\n        }));\r\n\r\n        // Calculate drop index based on y-position\r\n        const calculateDropIndex = useCallback(\r\n            (y) => {\r\n                const elements = canvasRef.current.querySelectorAll('.canvas-element');\r\n                let index = pageStructure.length;\r\n\r\n                elements.forEach((el, i) => {\r\n                    const rect = el.getBoundingClientRect();\r\n                    const canvasRect = canvasRef.current.getBoundingClientRect();\r\n                    const elTop = rect.top - canvasRect.top;\r\n                    const elHeight = rect.height;\r\n\r\n                    if (y < elTop + elHeight / 2) {\r\n                        index = i;\r\n                        return false;\r\n                    }\r\n                });\r\n\r\n                return index;\r\n            },\r\n            [pageStructure]\r\n        );\r\n\r\n        // Handle element hover for quick edit\r\n        const handleElementHover = useCallback(\r\n            (e, component) => {\r\n                if (quickEditElement?.id === component.id) return;\r\n\r\n                const rect = e.currentTarget.getBoundingClientRect();\r\n                const canvasRect = canvasRef.current.getBoundingClientRect();\r\n                onQuickEdit(component, {\r\n                    x: rect.left - canvasRect.left,\r\n                    y: rect.top - canvasRect.top + 20,\r\n                });\r\n            },\r\n            [quickEditElement, onQuickEdit]\r\n        );\r\n\r\n        // Keyboard shortcuts\r\n        useHotkeys(\r\n            'delete',\r\n            () => {\r\n                if (selectedElement) {\r\n                    setHistory((prev) => {\r\n                        const newHistory = prev.slice(0, historyIndex + 1);\r\n                        newHistory.push([...pageStructure]);\r\n                        return newHistory;\r\n                    });\r\n                    setHistoryIndex((prev) => prev + 1);\r\n                    onDeleteElement(selectedElement);\r\n                }\r\n            },\r\n            [selectedElement, onDeleteElement]\r\n        );\r\n        useHotkeys(\r\n            'up',\r\n            () => {\r\n                if (selectedElement) {\r\n                    onMoveElement(selectedElement, 'up');\r\n                }\r\n            },\r\n            [selectedElement, onMoveElement]\r\n        );\r\n        useHotkeys(\r\n            'down',\r\n            () => {\r\n                if (selectedElement) {\r\n                    onMoveElement(selectedElement, 'down');\r\n                }\r\n            },\r\n            [selectedElement, onMoveElement]\r\n        );\r\n        useHotkeys(\r\n            'ctrl+z',\r\n            () => {\r\n                if (historyIndex > 0) {\r\n                    setHistoryIndex((prev) => prev - 1);\r\n                    setPageStructure([...history[historyIndex - 1]]);\r\n                    toast.info('Đã hoàn tác!');\r\n                }\r\n            },\r\n            [historyIndex, history, setPageStructure]\r\n        );\r\n        useHotkeys(\r\n            'ctrl+y',\r\n            () => {\r\n                if (historyIndex < history.length - 1) {\r\n                    setHistoryIndex((prev) => prev + 1);\r\n                    setPageStructure([...history[historyIndex + 1]]);\r\n                    toast.info('Đã khôi phục!');\r\n                }\r\n            },\r\n            [historyIndex, history, setPageStructure]\r\n        );\r\n\r\n        const getCanvasClasses = useCallback(() => {\r\n            const baseClasses = 'bg-[#E6F3D6]/80 overflow-auto transition-all duration-300 rounded-xl shadow-lg relative';\r\n            switch (viewMode) {\r\n                case 'mobile':\r\n                    return `${baseClasses} max-w-sm mx-auto border-2 border-[#D4E4E4] rounded-2xl p-4`;\r\n                case 'tablet':\r\n                    return `${baseClasses} max-w-2xl mx-auto border-2 border-[#D4E4E4] rounded-xl p-4`;\r\n                default:\r\n                    return `${baseClasses} w-full h-full`;\r\n            }\r\n        }, [viewMode]);\r\n\r\n        return (\r\n            <div className=\"flex-1 bg-[#F4E4D4] p-4\">\r\n                <div\r\n                    ref={(node) => {\r\n                        canvasRef.current = node;\r\n                        drop(node);\r\n                    }}\r\n                    className={getCanvasClasses()}\r\n                    onMouseLeave={onCloseQuickEdit}\r\n                    style={{\r\n                        transform: `scale(${zoomLevel / 100})`,\r\n                        transformOrigin: 'top left',\r\n                        backgroundColor: isOver ? 'rgba(212, 228, 228, 0.5)' : '',\r\n                        boxShadow: isOver ? '0 4px 12px rgba(212, 228, 228, 0.3)' : 'none',\r\n                        position: 'relative',\r\n                        minHeight: '500px',\r\n                    }}\r\n                >\r\n                    <div className=\"min-h-full\">\r\n                        {pageStructure.length === 0 ? (\r\n                            <div className=\"h-full flex items-center justify-center text-gray-600 min-h-[500px]\" data-tooltip-id=\"canvas-tooltip\" data-tooltip-content=\"Kéo thả component từ thư viện vào đây\">\r\n                                <div className=\"text-center\">\r\n                                    <i className=\"far fa-mouse-pointer text-5xl mb-4 text-[#FAD2E1]\"></i>\r\n                                    <p className=\"text-lg font-poppins\">Kéo thả component để bắt đầu</p>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                {pageStructure.map((component, index) => (\r\n                                    <React.Fragment key={component.id || index}>\r\n                                        {dropIndex === index && (\r\n                                            <div className=\"h-2 bg-[#D4E4E4]/50 border-dashed border-2 border-[#FAD2E1] my-1 rounded\" />\r\n                                        )}\r\n                                        <div className=\"canvas-element\">\r\n                                            <Element\r\n                                                component={component}\r\n                                                index={index}\r\n                                                isSelected={selectedElement?.id === component.id}\r\n                                                hasQuickEdit={quickEditElement?.id === component.id}\r\n                                                onSelectElement={onSelectElement}\r\n                                                handleElementHover={handleElementHover}\r\n                                                onDuplicateElement={onDuplicateElement}\r\n                                                onDeleteElement={onDeleteElement}\r\n                                                onMoveElement={onMoveElement}\r\n                                            />\r\n                                        </div>\r\n                                    </React.Fragment>\r\n                                ))}\r\n                                {dropIndex === pageStructure.length && (\r\n                                    <div className=\"h-2 bg-[#D4E4E4]/50 border-dashed border-2 border-[#FAD2E1] my-1 rounded\" />\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    <QuickEditToolkit\r\n                        element={quickEditElement}\r\n                        position={quickEditPosition}\r\n                        onEdit={() => onSelectElement(quickEditElement)}\r\n                        onDuplicate={() => onDuplicateElement(quickEditElement)}\r\n                        onDelete={() => onDeleteElement(quickEditElement)}\r\n                        onMoveUp={() => onMoveElement(quickEditElement, 'up')}\r\n                        onMoveDown={() => onMoveElement(quickEditElement, 'down')}\r\n                        onClose={onCloseQuickEdit}\r\n                        className=\"bg-white/90 shadow-md rounded-lg p-2 hover:shadow-lg transition-all duration-200 text-gray-700\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}