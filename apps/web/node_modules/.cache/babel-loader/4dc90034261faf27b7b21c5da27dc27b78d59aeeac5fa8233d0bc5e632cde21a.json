{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL\n});\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n}, error => Promise.reject(error));\nconst apiMethods = {\n  // Save landing page (maps to backend's savePage endpoint)\n  savePage: async data => {\n    try {\n      const response = await api.post('/api/pages/save', data);\n      return response; // Backend returns the Page object or { error: string }\n    } catch (error) {\n      throw error; // Handled by response interceptor\n    }\n  },\n  // Deploy landing page (maps to backend's publishPage endpoint)\n  deployLandingPage: async pageId => {\n    try {\n      const response = await api.post(`/api/pages/${pageId}/publish`);\n      return response; // Backend returns the Page object with url, cloudfrontDomain, etc.\n    } catch (error) {\n      throw error;\n    }\n  },\n  // Get all pages for the user (maps to backend's getPages endpoint)\n  getPages: async () => {\n    try {\n      const response = await api.get('/api/pages');\n      return response; // Backend returns an array of pages\n    } catch (error) {\n      throw error;\n    }\n  },\n  // Update an existing page (maps to backend's updatePage endpoint)\n  updatePage: async (pageId, data) => {\n    try {\n      const response = await api.put(`/api/pages/${pageId}`, data);\n      return response; // Backend returns the updated Page object\n    } catch (error) {\n      throw error;\n    }\n  },\n  // Delete a page (maps to backend's deletePage endpoint)\n  deletePage: async pageId => {\n    try {\n      const response = await api.delete(`/api/pages/${pageId}`);\n      return response; // Backend returns { success: true } or { error: string }\n    } catch (error) {\n      throw error;\n    }\n  },\n  // Get page content (maps to backend's getPageContent endpoint)\n  getPageContent: async pageId => {\n    try {\n      const response = await api.get(`/api/pages/${pageId}/content`);\n      return response; // Backend returns { html: string, css: string }\n    } catch (error) {\n      throw error;\n    }\n  },\n  // Auto-save draft (maps to backend's autoSave endpoint)\n  autoSave: async data => {\n    try {\n      const response = await api.post('/api/pages/autosave', data);\n      return response; // Backend returns { success: true, savedAt: string, message: string }\n    } catch (error) {\n      throw error;\n    }\n  },\n  // AI refactor (maps to backend's aiRefactor endpoint)\n  aiRefactor: async data => {\n    try {\n      const response = await api.post('/api/pages/refactor', data);\n      return response; // Backend returns { html: string, thumbnail: string, improvements: string[], isValid: boolean, metadata: object }\n    } catch (error) {\n      throw error;\n    }\n  }\n};\nexport default apiMethods;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","apiMethods","savePage","data","response","post","deployLandingPage","pageId","getPages","get","updatePage","put","deletePage","delete","getPageContent","autoSave","aiRefactor"],"sources":["F:/landinghub-iconic/packages/api/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n    baseURL: process.env.REACT_APP_API_URL,\r\n});\r\n\r\napi.interceptors.request.use(\r\n    (config) => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) config.headers.Authorization = `Bearer ${token}`;\r\n        return config;\r\n    },\r\n    (error) => Promise.reject(error)\r\n);\r\n\r\nconst apiMethods = {\r\n    // Save landing page (maps to backend's savePage endpoint)\r\n    savePage: async (data) => {\r\n        try {\r\n            const response = await api.post('/api/pages/save', data);\r\n            return response; // Backend returns the Page object or { error: string }\r\n        } catch (error) {\r\n            throw error; // Handled by response interceptor\r\n        }\r\n    },\r\n\r\n    // Deploy landing page (maps to backend's publishPage endpoint)\r\n    deployLandingPage: async (pageId) => {\r\n        try {\r\n            const response = await api.post(`/api/pages/${pageId}/publish`);\r\n            return response; // Backend returns the Page object with url, cloudfrontDomain, etc.\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Get all pages for the user (maps to backend's getPages endpoint)\r\n    getPages: async () => {\r\n        try {\r\n            const response = await api.get('/api/pages');\r\n            return response; // Backend returns an array of pages\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Update an existing page (maps to backend's updatePage endpoint)\r\n    updatePage: async (pageId, data) => {\r\n        try {\r\n            const response = await api.put(`/api/pages/${pageId}`, data);\r\n            return response; // Backend returns the updated Page object\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Delete a page (maps to backend's deletePage endpoint)\r\n    deletePage: async (pageId) => {\r\n        try {\r\n            const response = await api.delete(`/api/pages/${pageId}`);\r\n            return response; // Backend returns { success: true } or { error: string }\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Get page content (maps to backend's getPageContent endpoint)\r\n    getPageContent: async (pageId) => {\r\n        try {\r\n            const response = await api.get(`/api/pages/${pageId}/content`);\r\n            return response; // Backend returns { html: string, css: string }\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Auto-save draft (maps to backend's autoSave endpoint)\r\n    autoSave: async (data) => {\r\n        try {\r\n            const response = await api.post('/api/pages/autosave', data);\r\n            return response; // Backend returns { success: true, savedAt: string, message: string }\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // AI refactor (maps to backend's aiRefactor endpoint)\r\n    aiRefactor: async (data) => {\r\n        try {\r\n            const response = await api.post('/api/pages/refactor', data);\r\n            return response; // Backend returns { html: string, thumbnail: string, improvements: string[], isValid: boolean, metadata: object }\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    },\r\n};\r\n\r\nexport default apiMethods;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}