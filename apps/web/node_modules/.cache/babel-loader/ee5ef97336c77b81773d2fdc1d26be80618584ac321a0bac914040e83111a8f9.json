{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\CreateLanding.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback, useRef } from 'react';\nimport Canvas from '../components/create-page/Canvas';\nimport ComponentLibrary from '../components/create-page/ComponentLibrary';\nimport Toolbar from '../components/create-page/Toolbar';\nimport PropertiesPanel from '../components/create-page/PropertiesPanel';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport '../styles/CreateLanding.css';\n\n// ErrorBoundary để bắt lỗi render\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass ErrorBoundary extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      error: null\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      error\n    };\n  }\n  render() {\n    if (this.state.error) {\n      console.error('Error in component:', this.state.error);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"L\\u1ED7i: \", this.state.error.message]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 20\n      }, this);\n    }\n    return this.props.children;\n  }\n}\nconst CreateLanding = () => {\n  _s();\n  const [pageData, setPageData] = useState({\n    canvas: {\n      width: 1200,\n      background: '#ffffff'\n    },\n    elements: []\n  });\n  const [selectedIds, setSelectedIds] = useState([]);\n  const [selectedChildId, setSelectedChildId] = useState(null);\n  const [viewMode, setViewMode] = useState('desktop');\n  const [zoomLevel, setZoomLevel] = useState(100);\n  const [gridSize, setGridSize] = useState(10);\n  const [showGrid, setShowGrid] = useState(true);\n  const [history, setHistory] = useState([pageData]);\n  const [historyIndex, setHistoryIndex] = useState(0);\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\n  const [isPropertiesCollapsed, setIsPropertiesCollapsed] = useState(false);\n  const handleSelectElement = useCallback((ids, addToSelection = false) => {\n    setSelectedIds(prev => addToSelection ? [...new Set([...prev, ...ids])] : ids);\n    setSelectedChildId(null); // Xóa chọn child khi chọn element\n  }, []);\n  const handleSelectChild = useCallback((parentId, childId) => {\n    setSelectedIds([parentId]); // Chọn section chứa child\n    setSelectedChildId(childId);\n  }, []);\n  const handleAddElement = useCallback(newElement => {\n    setPageData(prev => {\n      const newPageData = {\n        ...prev,\n        elements: [...prev.elements, newElement]\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n  }, [historyIndex]);\n  const handleAddChild = useCallback((parentId, newChild) => {\n    setPageData(prev => {\n      const newPageData = {\n        ...prev,\n        elements: prev.elements.map(el => {\n          if (el.id === parentId) {\n            return {\n              ...el,\n              children: [...(el.children || []), newChild]\n            };\n          }\n          return el;\n        })\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n  }, [historyIndex]);\n  const handleUpdatePosition = useCallback((id, newPosition, mode) => {\n    setPageData(prev => {\n      const newPageData = {\n        ...prev,\n        elements: prev.elements.map(el => {\n          if (el.id === id) {\n            return {\n              ...el,\n              position: mode === 'replace' ? newPosition : {\n                ...el.position,\n                [viewMode]: {\n                  ...el.position[viewMode],\n                  ...newPosition[viewMode]\n                }\n              }\n            };\n          }\n          return el;\n        })\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n  }, [viewMode, historyIndex]);\n  const handleUpdateChildren = useCallback((parentId, dragIndex, dropIndex) => {\n    setPageData(prev => {\n      const newPageData = {\n        ...prev,\n        elements: prev.elements.map(el => {\n          if (el.id === parentId) {\n            const newChildren = [...(el.children || [])];\n            if (dragIndex >= 0 && dragIndex < newChildren.length && dropIndex >= 0 && dropIndex < newChildren.length) {\n              const [movedChild] = newChildren.splice(dragIndex, 1);\n              newChildren.splice(dropIndex, 0, movedChild);\n              return {\n                ...el,\n                children: newChildren\n              };\n            }\n          }\n          return el;\n        })\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n  }, [historyIndex]);\n  const handleDeleteElement = useCallback(id => {\n    setPageData(prev => {\n      const newPageData = {\n        ...prev,\n        elements: prev.elements.filter(el => el.id !== id)\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n    setSelectedIds(prev => prev.filter(selectedId => selectedId !== id));\n    setSelectedChildId(null);\n  }, [historyIndex]);\n  const handleUpdateSize = useCallback((id, newSize) => {\n    setPageData(prev => {\n      const newPageData = {\n        ...prev,\n        elements: prev.elements.map(el => {\n          if (el.id === id) {\n            return {\n              ...el,\n              size: newSize\n            };\n          }\n          return el;\n        })\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n  }, [historyIndex]);\n  const handleGroupElements = useCallback(ids => {\n    // Implement grouping logic if needed\n  }, []);\n  const handleEditElement = useCallback(updatedElement => {\n    setPageData(prev => {\n      const newPageData = {\n        ...prev,\n        elements: prev.elements.map(el => {\n          if (el.id === updatedElement.id) {\n            return {\n              ...el,\n              componentData: updatedElement.json.componentData,\n              styles: updatedElement.json.styles,\n              size: updatedElement.json.size,\n              children: updatedElement.json.children || el.children\n            };\n          }\n          return el;\n        })\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n  }, [historyIndex]);\n  const handleDuplicateElement = useCallback(id => {\n    setPageData(prev => {\n      var _elementToDuplicate$p, _elementToDuplicate$p2;\n      const elementToDuplicate = prev.elements.find(el => el.id === id);\n      if (!elementToDuplicate) return prev;\n      const newElement = {\n        ...elementToDuplicate,\n        id: `${elementToDuplicate.id}-${Date.now()}`,\n        position: {\n          ...elementToDuplicate.position,\n          [viewMode]: {\n            ...elementToDuplicate.position[viewMode],\n            x: (((_elementToDuplicate$p = elementToDuplicate.position[viewMode]) === null || _elementToDuplicate$p === void 0 ? void 0 : _elementToDuplicate$p.x) || 0) + 20,\n            y: (((_elementToDuplicate$p2 = elementToDuplicate.position[viewMode]) === null || _elementToDuplicate$p2 === void 0 ? void 0 : _elementToDuplicate$p2.y) || 0) + 20\n          }\n        }\n      };\n      const newPageData = {\n        ...prev,\n        elements: [...prev.elements, newElement]\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n  }, [historyIndex, viewMode]);\n  const handleMoveElementUp = useCallback(id => {\n    setPageData(prev => {\n      const index = prev.elements.findIndex(el => el.id === id);\n      if (index <= 0) return prev;\n      const newElements = [...prev.elements];\n      [newElements[index - 1], newElements[index]] = [newElements[index], newElements[index - 1]];\n      const newPageData = {\n        ...prev,\n        elements: newElements\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n  }, [historyIndex]);\n  const handleMoveElementDown = useCallback(id => {\n    setPageData(prev => {\n      const index = prev.elements.findIndex(el => el.id === id);\n      if (index >= prev.elements.length - 1) return prev;\n      const newElements = [...prev.elements];\n      [newElements[index], newElements[index + 1]] = [newElements[index + 1], newElements[index]];\n      const newPageData = {\n        ...prev,\n        elements: newElements\n      };\n      setHistory(prevHistory => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\n      setHistoryIndex(prevIndex => prevIndex + 1);\n      return newPageData;\n    });\n  }, [historyIndex]);\n\n  // Tạo selectedElement cho PropertiesPanel\n  const selectedElement = (() => {\n    if (selectedChildId) {\n      const parent = pageData.elements.find(el => el.id === selectedIds[0]);\n      if (parent && parent.children) {\n        const child = parent.children.find(child => child.id === selectedChildId);\n        if (child) {\n          return {\n            id: parent.id,\n            json: {\n              id: child.id,\n              type: child.type,\n              content: child.content,\n              componentData: child.componentData || {},\n              styles: child.styles || {},\n              size: child.size || {\n                width: 200,\n                height: 50\n              },\n              children: child.children || []\n            },\n            isChild: true\n          };\n        }\n      }\n    }\n    const element = pageData.elements.find(el => selectedIds.includes(el.id));\n    if (element) {\n      return {\n        id: element.id,\n        json: {\n          id: element.id,\n          type: element.type,\n          componentData: element.componentData || {},\n          styles: element.styles || {},\n          size: element.size || {\n            width: 200,\n            height: 50\n          },\n          children: element.children || []\n        },\n        isChild: false\n      };\n    }\n    return null;\n  })();\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-create-landing flex h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(ErrorBoundary, {\n        children: /*#__PURE__*/_jsxDEV(ComponentLibrary, {\n          isCollapsed: isSidebarCollapsed,\n          onToggle: () => setIsSidebarCollapsed(!isSidebarCollapsed),\n          onAddElement: handleAddElement,\n          onAddChild: handleAddChild,\n          pageData: pageData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-main-content flex-1 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(ErrorBoundary, {\n          children: /*#__PURE__*/_jsxDEV(Toolbar, {\n            viewMode: viewMode,\n            setViewMode: setViewMode,\n            zoomLevel: zoomLevel,\n            setZoomLevel: setZoomLevel,\n            gridSize: gridSize,\n            setGridSize: setGridSize,\n            showGrid: showGrid,\n            setShowGrid: setShowGrid\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n          children: /*#__PURE__*/_jsxDEV(Canvas, {\n            pageData: pageData,\n            selectedIds: selectedIds,\n            onSelectElement: handleSelectElement,\n            onUpdatePosition: handleUpdatePosition,\n            onUpdateSize: handleUpdateSize,\n            onDeleteElement: handleDeleteElement,\n            onAddElement: handleAddElement,\n            onGroupElements: handleGroupElements,\n            viewMode: viewMode,\n            zoomLevel: zoomLevel,\n            gridSize: gridSize,\n            showGrid: showGrid,\n            onEditElement: handleEditElement,\n            onDuplicateElement: handleDuplicateElement,\n            onMoveElementUp: handleMoveElementUp,\n            onMoveElementDown: handleMoveElementDown,\n            onSelectChild: handleSelectChild,\n            selectedChildId: selectedChildId,\n            onUpdateChildren: handleUpdateChildren,\n            onAddChild: handleAddChild\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n        children: /*#__PURE__*/_jsxDEV(PropertiesPanel, {\n          selectedElement: selectedElement,\n          onUpdateElement: handleEditElement,\n          isCollapsed: isPropertiesCollapsed,\n          onToggle: () => setIsPropertiesCollapsed(!isPropertiesCollapsed)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 283,\n    columnNumber: 9\n  }, this);\n};\n_s(CreateLanding, \"6Gjys8SNCDcsQv4d2HhEt4WX3rI=\");\n_c = CreateLanding;\nexport default CreateLanding;\nvar _c;\n$RefreshReg$(_c, \"CreateLanding\");","map":{"version":3,"names":["React","useState","useCallback","useRef","Canvas","ComponentLibrary","Toolbar","PropertiesPanel","DndProvider","HTML5Backend","jsxDEV","_jsxDEV","ErrorBoundary","Component","constructor","args","state","error","getDerivedStateFromError","render","console","children","message","fileName","_jsxFileName","lineNumber","columnNumber","props","CreateLanding","_s","pageData","setPageData","canvas","width","background","elements","selectedIds","setSelectedIds","selectedChildId","setSelectedChildId","viewMode","setViewMode","zoomLevel","setZoomLevel","gridSize","setGridSize","showGrid","setShowGrid","history","setHistory","historyIndex","setHistoryIndex","isSidebarCollapsed","setIsSidebarCollapsed","isPropertiesCollapsed","setIsPropertiesCollapsed","handleSelectElement","ids","addToSelection","prev","Set","handleSelectChild","parentId","childId","handleAddElement","newElement","newPageData","prevHistory","slice","prevIndex","handleAddChild","newChild","map","el","id","handleUpdatePosition","newPosition","mode","position","handleUpdateChildren","dragIndex","dropIndex","newChildren","length","movedChild","splice","handleDeleteElement","filter","selectedId","handleUpdateSize","newSize","size","handleGroupElements","handleEditElement","updatedElement","componentData","json","styles","handleDuplicateElement","_elementToDuplicate$p","_elementToDuplicate$p2","elementToDuplicate","find","Date","now","x","y","handleMoveElementUp","index","findIndex","newElements","handleMoveElementDown","selectedElement","parent","child","type","content","height","isChild","element","includes","backend","className","isCollapsed","onToggle","onAddElement","onAddChild","onSelectElement","onUpdatePosition","onUpdateSize","onDeleteElement","onGroupElements","onEditElement","onDuplicateElement","onMoveElementUp","onMoveElementDown","onSelectChild","onUpdateChildren","onUpdateElement","_c","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/CreateLanding.js"],"sourcesContent":["import React, { useState, useCallback, useRef } from 'react';\r\nimport Canvas from '../components/create-page/Canvas';\r\nimport ComponentLibrary from '../components/create-page/ComponentLibrary';\r\nimport Toolbar from '../components/create-page/Toolbar';\r\nimport PropertiesPanel from '../components/create-page/PropertiesPanel';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport '../styles/CreateLanding.css';\r\n\r\n// ErrorBoundary để bắt lỗi render\r\nclass ErrorBoundary extends React.Component {\r\n    state = { error: null };\r\n    static getDerivedStateFromError(error) {\r\n        return { error };\r\n    }\r\n    render() {\r\n        if (this.state.error) {\r\n            console.error('Error in component:', this.state.error);\r\n            return <div>Lỗi: {this.state.error.message}</div>;\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nconst CreateLanding = () => {\r\n    const [pageData, setPageData] = useState({\r\n        canvas: { width: 1200, background: '#ffffff' },\r\n        elements: [],\r\n    });\r\n    const [selectedIds, setSelectedIds] = useState([]);\r\n    const [selectedChildId, setSelectedChildId] = useState(null);\r\n    const [viewMode, setViewMode] = useState('desktop');\r\n    const [zoomLevel, setZoomLevel] = useState(100);\r\n    const [gridSize, setGridSize] = useState(10);\r\n    const [showGrid, setShowGrid] = useState(true);\r\n    const [history, setHistory] = useState([pageData]);\r\n    const [historyIndex, setHistoryIndex] = useState(0);\r\n    const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\r\n    const [isPropertiesCollapsed, setIsPropertiesCollapsed] = useState(false);\r\n\r\n    const handleSelectElement = useCallback((ids, addToSelection = false) => {\r\n        setSelectedIds((prev) => (addToSelection ? [...new Set([...prev, ...ids])] : ids));\r\n        setSelectedChildId(null); // Xóa chọn child khi chọn element\r\n    }, []);\r\n\r\n    const handleSelectChild = useCallback((parentId, childId) => {\r\n        setSelectedIds([parentId]); // Chọn section chứa child\r\n        setSelectedChildId(childId);\r\n    }, []);\r\n\r\n    const handleAddElement = useCallback((newElement) => {\r\n        setPageData((prev) => {\r\n            const newPageData = {\r\n                ...prev,\r\n                elements: [...prev.elements, newElement],\r\n            };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n    }, [historyIndex]);\r\n\r\n    const handleAddChild = useCallback((parentId, newChild) => {\r\n        setPageData((prev) => {\r\n            const newPageData = {\r\n                ...prev,\r\n                elements: prev.elements.map((el) => {\r\n                    if (el.id === parentId) {\r\n                        return {\r\n                            ...el,\r\n                            children: [...(el.children || []), newChild],\r\n                        };\r\n                    }\r\n                    return el;\r\n                }),\r\n            };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n    }, [historyIndex]);\r\n\r\n    const handleUpdatePosition = useCallback((id, newPosition, mode) => {\r\n        setPageData((prev) => {\r\n            const newPageData = {\r\n                ...prev,\r\n                elements: prev.elements.map((el) => {\r\n                    if (el.id === id) {\r\n                        return {\r\n                            ...el,\r\n                            position: mode === 'replace' ? newPosition : {\r\n                                ...el.position,\r\n                                [viewMode]: {\r\n                                    ...el.position[viewMode],\r\n                                    ...newPosition[viewMode],\r\n                                },\r\n                            },\r\n                        };\r\n                    }\r\n                    return el;\r\n                }),\r\n            };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n    }, [viewMode, historyIndex]);\r\n\r\n    const handleUpdateChildren = useCallback((parentId, dragIndex, dropIndex) => {\r\n        setPageData((prev) => {\r\n            const newPageData = {\r\n                ...prev,\r\n                elements: prev.elements.map((el) => {\r\n                    if (el.id === parentId) {\r\n                        const newChildren = [...(el.children || [])];\r\n                        if (dragIndex >= 0 && dragIndex < newChildren.length && dropIndex >= 0 && dropIndex < newChildren.length) {\r\n                            const [movedChild] = newChildren.splice(dragIndex, 1);\r\n                            newChildren.splice(dropIndex, 0, movedChild);\r\n                            return { ...el, children: newChildren };\r\n                        }\r\n                    }\r\n                    return el;\r\n                }),\r\n            };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n    }, [historyIndex]);\r\n\r\n    const handleDeleteElement = useCallback((id) => {\r\n        setPageData((prev) => {\r\n            const newPageData = {\r\n                ...prev,\r\n                elements: prev.elements.filter((el) => el.id !== id),\r\n            };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n        setSelectedIds((prev) => prev.filter((selectedId) => selectedId !== id));\r\n        setSelectedChildId(null);\r\n    }, [historyIndex]);\r\n\r\n    const handleUpdateSize = useCallback((id, newSize) => {\r\n        setPageData((prev) => {\r\n            const newPageData = {\r\n                ...prev,\r\n                elements: prev.elements.map((el) => {\r\n                    if (el.id === id) {\r\n                        return { ...el, size: newSize };\r\n                    }\r\n                    return el;\r\n                }),\r\n            };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n    }, [historyIndex]);\r\n\r\n    const handleGroupElements = useCallback((ids) => {\r\n        // Implement grouping logic if needed\r\n    }, []);\r\n\r\n    const handleEditElement = useCallback((updatedElement) => {\r\n        setPageData((prev) => {\r\n            const newPageData = {\r\n                ...prev,\r\n                elements: prev.elements.map((el) => {\r\n                    if (el.id === updatedElement.id) {\r\n                        return {\r\n                            ...el,\r\n                            componentData: updatedElement.json.componentData,\r\n                            styles: updatedElement.json.styles,\r\n                            size: updatedElement.json.size,\r\n                            children: updatedElement.json.children || el.children,\r\n                        };\r\n                    }\r\n                    return el;\r\n                }),\r\n            };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n    }, [historyIndex]);\r\n\r\n    const handleDuplicateElement = useCallback((id) => {\r\n        setPageData((prev) => {\r\n            const elementToDuplicate = prev.elements.find((el) => el.id === id);\r\n            if (!elementToDuplicate) return prev;\r\n            const newElement = {\r\n                ...elementToDuplicate,\r\n                id: `${elementToDuplicate.id}-${Date.now()}`,\r\n                position: {\r\n                    ...elementToDuplicate.position,\r\n                    [viewMode]: {\r\n                        ...elementToDuplicate.position[viewMode],\r\n                        x: (elementToDuplicate.position[viewMode]?.x || 0) + 20,\r\n                        y: (elementToDuplicate.position[viewMode]?.y || 0) + 20,\r\n                    },\r\n                },\r\n            };\r\n            const newPageData = {\r\n                ...prev,\r\n                elements: [...prev.elements, newElement],\r\n            };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n    }, [historyIndex, viewMode]);\r\n\r\n    const handleMoveElementUp = useCallback((id) => {\r\n        setPageData((prev) => {\r\n            const index = prev.elements.findIndex((el) => el.id === id);\r\n            if (index <= 0) return prev;\r\n            const newElements = [...prev.elements];\r\n            [newElements[index - 1], newElements[index]] = [newElements[index], newElements[index - 1]];\r\n            const newPageData = { ...prev, elements: newElements };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n    }, [historyIndex]);\r\n\r\n    const handleMoveElementDown = useCallback((id) => {\r\n        setPageData((prev) => {\r\n            const index = prev.elements.findIndex((el) => el.id === id);\r\n            if (index >= prev.elements.length - 1) return prev;\r\n            const newElements = [...prev.elements];\r\n            [newElements[index], newElements[index + 1]] = [newElements[index + 1], newElements[index]];\r\n            const newPageData = { ...prev, elements: newElements };\r\n            setHistory((prevHistory) => [...prevHistory.slice(0, historyIndex + 1), newPageData]);\r\n            setHistoryIndex((prevIndex) => prevIndex + 1);\r\n            return newPageData;\r\n        });\r\n    }, [historyIndex]);\r\n\r\n    // Tạo selectedElement cho PropertiesPanel\r\n    const selectedElement = (() => {\r\n        if (selectedChildId) {\r\n            const parent = pageData.elements.find((el) => el.id === selectedIds[0]);\r\n            if (parent && parent.children) {\r\n                const child = parent.children.find((child) => child.id === selectedChildId);\r\n                if (child) {\r\n                    return {\r\n                        id: parent.id,\r\n                        json: {\r\n                            id: child.id,\r\n                            type: child.type,\r\n                            content: child.content,\r\n                            componentData: child.componentData || {},\r\n                            styles: child.styles || {},\r\n                            size: child.size || { width: 200, height: 50 },\r\n                            children: child.children || [],\r\n                        },\r\n                        isChild: true,\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        const element = pageData.elements.find((el) => selectedIds.includes(el.id));\r\n        if (element) {\r\n            return {\r\n                id: element.id,\r\n                json: {\r\n                    id: element.id,\r\n                    type: element.type,\r\n                    componentData: element.componentData || {},\r\n                    styles: element.styles || {},\r\n                    size: element.size || { width: 200, height: 50 },\r\n                    children: element.children || [],\r\n                },\r\n                isChild: false,\r\n            };\r\n        }\r\n        return null;\r\n    })();\r\n\r\n    return (\r\n        <DndProvider backend={HTML5Backend}>\r\n            <div className=\"lpb-create-landing flex h-screen\">\r\n                <ErrorBoundary>\r\n                    <ComponentLibrary\r\n                        isCollapsed={isSidebarCollapsed}\r\n                        onToggle={() => setIsSidebarCollapsed(!isSidebarCollapsed)}\r\n                        onAddElement={handleAddElement}\r\n                        onAddChild={handleAddChild}\r\n                        pageData={pageData}\r\n                    />\r\n                </ErrorBoundary>\r\n                <div className=\"lpb-main-content flex-1 flex flex-col\">\r\n                    <ErrorBoundary>\r\n                        <Toolbar\r\n                            viewMode={viewMode}\r\n                            setViewMode={setViewMode}\r\n                            zoomLevel={zoomLevel}\r\n                            setZoomLevel={setZoomLevel}\r\n                            gridSize={gridSize}\r\n                            setGridSize={setGridSize}\r\n                            showGrid={showGrid}\r\n                            setShowGrid={setShowGrid}\r\n                        />\r\n                    </ErrorBoundary>\r\n                    <ErrorBoundary>\r\n                        <Canvas\r\n                            pageData={pageData}\r\n                            selectedIds={selectedIds}\r\n                            onSelectElement={handleSelectElement}\r\n                            onUpdatePosition={handleUpdatePosition}\r\n                            onUpdateSize={handleUpdateSize}\r\n                            onDeleteElement={handleDeleteElement}\r\n                            onAddElement={handleAddElement}\r\n                            onGroupElements={handleGroupElements}\r\n                            viewMode={viewMode}\r\n                            zoomLevel={zoomLevel}\r\n                            gridSize={gridSize}\r\n                            showGrid={showGrid}\r\n                            onEditElement={handleEditElement}\r\n                            onDuplicateElement={handleDuplicateElement}\r\n                            onMoveElementUp={handleMoveElementUp}\r\n                            onMoveElementDown={handleMoveElementDown}\r\n                            onSelectChild={handleSelectChild}\r\n                            selectedChildId={selectedChildId}\r\n                            onUpdateChildren={handleUpdateChildren}\r\n                            onAddChild={handleAddChild}\r\n                        />\r\n                    </ErrorBoundary>\r\n                </div>\r\n                <ErrorBoundary>\r\n                    <PropertiesPanel\r\n                        selectedElement={selectedElement}\r\n                        onUpdateElement={handleEditElement}\r\n                        isCollapsed={isPropertiesCollapsed}\r\n                        onToggle={() => setIsPropertiesCollapsed(!isPropertiesCollapsed)}\r\n                    />\r\n                </ErrorBoundary>\r\n            </div>\r\n        </DndProvider>\r\n    );\r\n};\r\n\r\nexport default CreateLanding;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}