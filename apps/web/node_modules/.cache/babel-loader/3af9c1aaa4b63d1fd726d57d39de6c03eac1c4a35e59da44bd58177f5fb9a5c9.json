{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useRef, useMemo, useCallback, useState } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport QuickEditToolkit from './QuickEditToolkit';\nimport '../../styles/CreateLanding.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  SECTION: 'section',\n  ELEMENT: 'element',\n  EXISTING_ELEMENT: 'existingElement'\n};\nconst Element = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  component,\n  index,\n  isSelected,\n  hasQuickEdit,\n  onSelectElement,\n  handleElementHover,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  updatePosition,\n  canvasRef\n}) => {\n  var _component$json$style, _component$json$style2;\n  _s();\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: ItemTypes.EXISTING_ELEMENT,\n    item: {\n      id: component.id\n    },\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging()\n    })\n  }));\n  const handleMouseDown = e => {\n    e.stopPropagation();\n    onSelectElement(component);\n  };\n  const renderContent = () => {\n    const {\n      type,\n      content,\n      styles\n    } = component.json;\n    const styleProps = {\n      ...styles,\n      maxWidth: '100%',\n      boxSizing: 'border-box'\n    };\n    switch (type) {\n      case 'heading':\n        return /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: styleProps,\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 28\n        }, this);\n      case 'paragraph':\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: styleProps,\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 28\n        }, this);\n      case 'button':\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          style: styleProps,\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 28\n        }, this);\n      case 'button-group':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styleProps,\n          children: content.map((btn, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              ...styles,\n              marginRight: idx < content.length - 1 ? '10px' : 0\n            },\n            children: btn\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 25\n        }, this);\n      case 'form':\n        return /*#__PURE__*/_jsxDEV(\"form\", {\n          style: styleProps,\n          children: [content.fields.map((field, idx) => /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: field,\n            style: {\n              marginBottom: '8px',\n              width: '100%',\n              ...styles\n            }\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 33\n          }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            style: {\n              ...styles,\n              marginTop: '8px'\n            },\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 25\n        }, this);\n      case 'image':\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          src: content,\n          alt: \"Image\",\n          style: {\n            ...styles,\n            maxWidth: '100%',\n            height: 'auto'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 28\n        }, this);\n      case 'gallery':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styleProps,\n          children: content.map((src, idx) => /*#__PURE__*/_jsxDEV(\"img\", {\n            src: src,\n            alt: `Gallery ${idx}`,\n            style: {\n              width: '100px',\n              marginRight: '8px',\n              ...styles\n            }\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this);\n      case 'product-list':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styleProps,\n          children: content.map((prod, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '10px',\n              ...styles\n            },\n            children: prod.title\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this);\n      case 'popup':\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styleProps,\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 28\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styleProps,\n          children: component.name || 'Unknown'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 28\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drag,\n    className: `lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`,\n    onMouseEnter: e => handleElementHover(e, component),\n    onMouseDown: handleMouseDown,\n    style: {\n      position: 'absolute',\n      left: ((_component$json$style = component.json.styles.position) === null || _component$json$style === void 0 ? void 0 : _component$json$style.x) || 0,\n      top: ((_component$json$style2 = component.json.styles.position) === null || _component$json$style2 === void 0 ? void 0 : _component$json$style2.y) || 0\n    },\n    children: renderContent()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 13\n  }, this);\n}, \"wuumsFp4qAni9XRJfRhQAZjuD/k=\", false, function () {\n  return [useDrag];\n})), \"wuumsFp4qAni9XRJfRhQAZjuD/k=\", false, function () {\n  return [useDrag];\n});\n_c2 = Element;\nconst Section = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c3 = _s2(({\n  section,\n  index,\n  selectedElement,\n  onSelectElement,\n  handleElementHover,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  updatePosition,\n  addElement,\n  canvasRef\n}) => {\n  _s2();\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset && canvasRef.current) {\n        const rect = canvasRef.current.getBoundingClientRect();\n        const y = clientOffset.y - rect.top;\n        // Logic to determine element drop index within section\n      }\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\n        return;\n      }\n      const rect = canvasRef.current.getBoundingClientRect();\n      const position = {\n        x: clientOffset.x - rect.left,\n        y: clientOffset.y - rect.top\n      };\n      if (item.componentData) {\n        addElement(section.id, {\n          ...item.componentData,\n          json: {\n            ...item.componentData.json,\n            styles: {\n              ...item.componentData.json.styles,\n              position\n            }\n          }\n        }, section.elements.length);\n      } else {\n        moveElement(section.id, item.id, section.elements.length);\n      }\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drop,\n    className: `lpb-canvas-section ${isOver ? 'lpb-canvas-section-over' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: section.json.content.title || 'Section'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-canvas-section-content\",\n      children: section.elements.map((element, idx) => /*#__PURE__*/_jsxDEV(Element, {\n        component: element,\n        index: idx,\n        isSelected: (selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id) === element.id,\n        hasQuickEdit: false,\n        onSelectElement: onSelectElement,\n        handleElementHover: handleElementHover,\n        onDuplicateElement: onDuplicateElement,\n        onDeleteElement: onDeleteElement,\n        onMoveElement: onMoveElement,\n        updatePosition: updatePosition,\n        canvasRef: canvasRef\n      }, element.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 13\n  }, this);\n}, \"9166pYLrZ/JzF75YDim8ZjfICTM=\", false, function () {\n  return [useDrop];\n})), \"9166pYLrZ/JzF75YDim8ZjfICTM=\", false, function () {\n  return [useDrop];\n});\n_c4 = Section;\nconst Canvas = /*#__PURE__*/_s3(/*#__PURE__*/React.memo(_c5 = _s3(({\n  pageStructure,\n  selectedElement,\n  onSelectElement,\n  quickEditElement,\n  quickEditPosition,\n  onQuickEdit,\n  onCloseQuickEdit,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  viewMode,\n  addSection,\n  addElement,\n  moveElement,\n  ItemTypes,\n  zoomLevel,\n  setPageStructure\n}) => {\n  _s3();\n  const canvasRef = useRef(null);\n  const [dropIndex, setDropIndex] = useState(null);\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.SECTION],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset && canvasRef.current) {\n        const rect = canvasRef.current.getBoundingClientRect();\n        const y = clientOffset.y - rect.top;\n        const index = Math.min(pageStructure.length, Math.floor(y / 200)); // Giả sử mỗi section cao 200px\n        setDropIndex(index);\n        if (item.componentData) {\n          item.componentData.json.styles = {\n            ...item.componentData.json.styles,\n            position: {\n              x: clientOffset.x - rect.left,\n              y\n            }\n          };\n        }\n      }\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\n        return;\n      }\n      const rect = canvasRef.current.getBoundingClientRect();\n      const position = {\n        x: clientOffset.x - rect.left,\n        y: clientOffset.y - rect.top\n      };\n      const index = Math.min(pageStructure.length, Math.floor(position.y / 200));\n      addSection({\n        ...item.componentData,\n        json: {\n          ...item.componentData.json,\n          styles: {\n            ...item.componentData.json.styles,\n            position\n          }\n        }\n      }, index);\n      setDropIndex(null);\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  const handleElementHover = useCallback((e, component) => {\n    var _canvasRef$current;\n    if ((quickEditElement === null || quickEditElement === void 0 ? void 0 : quickEditElement.id) === component.id) return;\n    const rect = e.currentTarget.getBoundingClientRect();\n    const canvasRect = ((_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.getBoundingClientRect()) || {\n      left: 0,\n      top: 0\n    };\n    onQuickEdit(component, {\n      x: rect.left - canvasRect.left,\n      y: rect.top - canvasRect.top + 20\n    });\n  }, [quickEditElement, onQuickEdit]);\n  useHotkeys('delete', () => {\n    if (selectedElement) {\n      onDeleteElement(selectedElement);\n    }\n  }, [selectedElement, onDeleteElement]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lpb-canvas-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        canvasRef.current = node;\n        drop(node);\n      },\n      className: `lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`,\n      onMouseLeave: onCloseQuickEdit,\n      style: {\n        zoom: `${zoomLevel / 100}`,\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-canvas-content\",\n        children: pageStructure.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-canvas-empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-layer-group\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"K\\xE9o th\\u1EA3 section \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [pageStructure.map((section, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [dropIndex === index && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"lpb-canvas-drop-zone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 65\n            }, this), /*#__PURE__*/_jsxDEV(Section, {\n              section: section,\n              index: index,\n              selectedElement: selectedElement,\n              onSelectElement: onSelectElement,\n              handleElementHover: handleElementHover,\n              onDuplicateElement: onDuplicateElement,\n              onDeleteElement: onDeleteElement,\n              onMoveElement: onMoveElement,\n              updatePosition: updatePosition,\n              addElement: addElement,\n              canvasRef: canvasRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 41\n            }, this)]\n          }, section.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 37\n          }, this)), dropIndex === pageStructure.length && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lpb-canvas-drop-zone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 72\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(QuickEditToolkit, {\n        element: quickEditElement,\n        position: quickEditPosition,\n        onEdit: () => onSelectElement(quickEditElement),\n        onDuplicate: () => onDuplicateElement(quickEditElement),\n        onDelete: () => onDeleteElement(quickEditElement),\n        onMoveUp: () => onMoveElement(quickEditElement, 'up'),\n        onMoveDown: () => onMoveElement(quickEditElement, 'down'),\n        onClose: onCloseQuickEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 257,\n    columnNumber: 13\n  }, this);\n}, \"Ln2p0LjsxM69h+68q9rI3/RiQ1c=\", false, function () {\n  return [useDrop, useHotkeys];\n})), \"Ln2p0LjsxM69h+68q9rI3/RiQ1c=\", false, function () {\n  return [useDrop, useHotkeys];\n});\n_c6 = Canvas;\nexport default Canvas;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"Element$React.memo\");\n$RefreshReg$(_c2, \"Element\");\n$RefreshReg$(_c3, \"Section$React.memo\");\n$RefreshReg$(_c4, \"Section\");\n$RefreshReg$(_c5, \"Canvas$React.memo\");\n$RefreshReg$(_c6, \"Canvas\");","map":{"version":3,"names":["React","useRef","useMemo","useCallback","useState","useDrop","useDrag","useHotkeys","toast","QuickEditToolkit","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemTypes","SECTION","ELEMENT","EXISTING_ELEMENT","Element","_s","memo","_c","component","index","isSelected","hasQuickEdit","onSelectElement","handleElementHover","onDuplicateElement","onDeleteElement","onMoveElement","updatePosition","canvasRef","_component$json$style","_component$json$style2","isDragging","drag","type","item","id","collect","monitor","handleMouseDown","e","stopPropagation","renderContent","content","styles","json","styleProps","maxWidth","boxSizing","style","children","fileName","_jsxFileName","lineNumber","columnNumber","map","btn","idx","marginRight","length","fields","field","placeholder","marginBottom","width","marginTop","src","alt","height","prod","title","name","ref","className","onMouseEnter","onMouseDown","position","left","x","top","y","_c2","Section","_s2","_c3","section","selectedElement","addElement","isOver","drop","accept","hover","clientOffset","getClientOffset","current","rect","getBoundingClientRect","error","componentData","elements","moveElement","element","_c4","Canvas","_s3","_c5","pageStructure","quickEditElement","quickEditPosition","onQuickEdit","onCloseQuickEdit","viewMode","addSection","zoomLevel","setPageStructure","dropIndex","setDropIndex","Math","min","floor","_canvasRef$current","currentTarget","canvasRect","node","onMouseLeave","zoom","onEdit","onDuplicate","onDelete","onMoveUp","onMoveDown","onClose","_c6","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef, useMemo, useCallback, useState } from 'react';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport QuickEditToolkit from './QuickEditToolkit';\r\nimport '../../styles/CreateLanding.css';\r\n\r\nconst ItemTypes = {\r\n    SECTION: 'section',\r\n    ELEMENT: 'element',\r\n    EXISTING_ELEMENT: 'existingElement',\r\n};\r\n\r\nconst Element = React.memo(\r\n    ({ component, index, isSelected, hasQuickEdit, onSelectElement, handleElementHover, onDuplicateElement, onDeleteElement, onMoveElement, updatePosition, canvasRef }) => {\r\n        const [{ isDragging }, drag] = useDrag(() => ({\r\n            type: ItemTypes.EXISTING_ELEMENT,\r\n            item: { id: component.id },\r\n            collect: (monitor) => ({\r\n                isDragging: !!monitor.isDragging(),\r\n            }),\r\n        }));\r\n\r\n        const handleMouseDown = (e) => {\r\n            e.stopPropagation();\r\n            onSelectElement(component);\r\n        };\r\n\r\n        const renderContent = () => {\r\n            const { type, content, styles } = component.json;\r\n            const styleProps = { ...styles, maxWidth: '100%', boxSizing: 'border-box' };\r\n            switch (type) {\r\n                case 'heading':\r\n                    return <h2 style={styleProps}>{content}</h2>;\r\n                case 'paragraph':\r\n                    return <p style={styleProps}>{content}</p>;\r\n                case 'button':\r\n                    return <button style={styleProps}>{content}</button>;\r\n                case 'button-group':\r\n                    return (\r\n                        <div style={styleProps}>\r\n                            {content.map((btn, idx) => (\r\n                                <button key={idx} style={{ ...styles, marginRight: idx < content.length - 1 ? '10px' : 0 }}>\r\n                                    {btn}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    );\r\n                case 'form':\r\n                    return (\r\n                        <form style={styleProps}>\r\n                            {content.fields.map((field, idx) => (\r\n                                <input\r\n                                    key={idx}\r\n                                    type=\"text\"\r\n                                    placeholder={field}\r\n                                    style={{ marginBottom: '8px', width: '100%', ...styles }}\r\n                                />\r\n                            ))}\r\n                            <button type=\"submit\" style={{ ...styles, marginTop: '8px' }}>Submit</button>\r\n                        </form>\r\n                    );\r\n                case 'image':\r\n                    return <img src={content} alt=\"Image\" style={{ ...styles, maxWidth: '100%', height: 'auto' }} />;\r\n                case 'gallery':\r\n                    return (\r\n                        <div style={styleProps}>\r\n                            {content.map((src, idx) => (\r\n                                <img\r\n                                    key={idx}\r\n                                    src={src}\r\n                                    alt={`Gallery ${idx}`}\r\n                                    style={{ width: '100px', marginRight: '8px', ...styles }}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    );\r\n                case 'product-list':\r\n                    return (\r\n                        <div style={styleProps}>\r\n                            {content.map((prod, idx) => (\r\n                                <div key={idx} style={{ marginBottom: '10px', ...styles }}>\r\n                                    {prod.title}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    );\r\n                case 'popup':\r\n                    return <div style={styleProps}>{content}</div>;\r\n                default:\r\n                    return <div style={styleProps}>{component.name || 'Unknown'}</div>;\r\n            }\r\n        };\r\n\r\n        return (\r\n            <div\r\n                ref={drag}\r\n                className={`lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`}\r\n                onMouseEnter={(e) => handleElementHover(e, component)}\r\n                onMouseDown={handleMouseDown}\r\n                style={{\r\n                    position: 'absolute',\r\n                    left: component.json.styles.position?.x || 0,\r\n                    top: component.json.styles.position?.y || 0,\r\n                }}\r\n            >\r\n                {renderContent()}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nconst Section = React.memo(\r\n    ({ section, index, selectedElement, onSelectElement, handleElementHover, onDuplicateElement, onDeleteElement, onMoveElement, updatePosition, addElement, canvasRef }) => {\r\n        const [{ isOver }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\r\n            hover: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (clientOffset && canvasRef.current) {\r\n                    const rect = canvasRef.current.getBoundingClientRect();\r\n                    const y = clientOffset.y - rect.top;\r\n                    // Logic to determine element drop index within section\r\n                }\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\r\n                    return;\r\n                }\r\n                const rect = canvasRef.current.getBoundingClientRect();\r\n                const position = {\r\n                    x: clientOffset.x - rect.left,\r\n                    y: clientOffset.y - rect.top,\r\n                };\r\n                if (item.componentData) {\r\n                    addElement(section.id, { ...item.componentData, json: { ...item.componentData.json, styles: { ...item.componentData.json.styles, position } } }, section.elements.length);\r\n                } else {\r\n                    moveElement(section.id, item.id, section.elements.length);\r\n                }\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: !!monitor.isOver(),\r\n            }),\r\n        }));\r\n\r\n        return (\r\n            <div ref={drop} className={`lpb-canvas-section ${isOver ? 'lpb-canvas-section-over' : ''}`}>\r\n                <h3>{section.json.content.title || 'Section'}</h3>\r\n                <div className=\"lpb-canvas-section-content\">\r\n                    {section.elements.map((element, idx) => (\r\n                        <Element\r\n                            key={element.id}\r\n                            component={element}\r\n                            index={idx}\r\n                            isSelected={selectedElement?.id === element.id}\r\n                            hasQuickEdit={false}\r\n                            onSelectElement={onSelectElement}\r\n                            handleElementHover={handleElementHover}\r\n                            onDuplicateElement={onDuplicateElement}\r\n                            onDeleteElement={onDeleteElement}\r\n                            onMoveElement={onMoveElement}\r\n                            updatePosition={updatePosition}\r\n                            canvasRef={canvasRef}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nconst Canvas = React.memo(\r\n    ({\r\n         pageStructure,\r\n         selectedElement,\r\n         onSelectElement,\r\n         quickEditElement,\r\n         quickEditPosition,\r\n         onQuickEdit,\r\n         onCloseQuickEdit,\r\n         onDuplicateElement,\r\n         onDeleteElement,\r\n         onMoveElement,\r\n         viewMode,\r\n         addSection,\r\n         addElement,\r\n         moveElement,\r\n         ItemTypes,\r\n         zoomLevel,\r\n         setPageStructure,\r\n     }) => {\r\n        const canvasRef = useRef(null);\r\n        const [dropIndex, setDropIndex] = useState(null);\r\n\r\n        const [{ isOver }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.SECTION],\r\n            hover: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (clientOffset && canvasRef.current) {\r\n                    const rect = canvasRef.current.getBoundingClientRect();\r\n                    const y = clientOffset.y - rect.top;\r\n                    const index = Math.min(pageStructure.length, Math.floor(y / 200)); // Giả sử mỗi section cao 200px\r\n                    setDropIndex(index);\r\n                    if (item.componentData) {\r\n                        item.componentData.json.styles = {\r\n                            ...item.componentData.json.styles,\r\n                            position: { x: clientOffset.x - rect.left, y },\r\n                        };\r\n                    }\r\n                }\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\r\n                    return;\r\n                }\r\n                const rect = canvasRef.current.getBoundingClientRect();\r\n                const position = {\r\n                    x: clientOffset.x - rect.left,\r\n                    y: clientOffset.y - rect.top,\r\n                };\r\n                const index = Math.min(pageStructure.length, Math.floor(position.y / 200));\r\n                addSection({ ...item.componentData, json: { ...item.componentData.json, styles: { ...item.componentData.json.styles, position } } }, index);\r\n                setDropIndex(null);\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: !!monitor.isOver(),\r\n            }),\r\n        }));\r\n\r\n        const handleElementHover = useCallback(\r\n            (e, component) => {\r\n                if (quickEditElement?.id === component.id) return;\r\n                const rect = e.currentTarget.getBoundingClientRect();\r\n                const canvasRect = canvasRef.current?.getBoundingClientRect() || { left: 0, top: 0 };\r\n                onQuickEdit(component, {\r\n                    x: rect.left - canvasRect.left,\r\n                    y: rect.top - canvasRect.top + 20,\r\n                });\r\n            },\r\n            [quickEditElement, onQuickEdit]\r\n        );\r\n\r\n        useHotkeys(\r\n            'delete',\r\n            () => {\r\n                if (selectedElement) {\r\n                    onDeleteElement(selectedElement);\r\n                }\r\n            },\r\n            [selectedElement, onDeleteElement]\r\n        );\r\n\r\n        return (\r\n            <div className=\"lpb-canvas-wrapper\">\r\n                <div\r\n                    ref={(node) => {\r\n                        canvasRef.current = node;\r\n                        drop(node);\r\n                    }}\r\n                    className={`lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`}\r\n                    onMouseLeave={onCloseQuickEdit}\r\n                    style={{ zoom: `${zoomLevel / 100}`, position: 'relative' }}\r\n                >\r\n                    <div className=\"lpb-canvas-content\">\r\n                        {pageStructure.length === 0 ? (\r\n                            <div className=\"lpb-canvas-empty-state\">\r\n                                <i className=\"fas fa-layer-group\"></i>\r\n                                <p>Kéo thả section để bắt đầu</p>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                {pageStructure.map((section, index) => (\r\n                                    <React.Fragment key={section.id}>\r\n                                        {dropIndex === index && <div className=\"lpb-canvas-drop-zone\" />}\r\n                                        <Section\r\n                                            section={section}\r\n                                            index={index}\r\n                                            selectedElement={selectedElement}\r\n                                            onSelectElement={onSelectElement}\r\n                                            handleElementHover={handleElementHover}\r\n                                            onDuplicateElement={onDuplicateElement}\r\n                                            onDeleteElement={onDeleteElement}\r\n                                            onMoveElement={onMoveElement}\r\n                                            updatePosition={updatePosition}\r\n                                            addElement={addElement}\r\n                                            canvasRef={canvasRef}\r\n                                        />\r\n                                    </React.Fragment>\r\n                                ))}\r\n                                {dropIndex === pageStructure.length && <div className=\"lpb-canvas-drop-zone\" />}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                    <QuickEditToolkit\r\n                        element={quickEditElement}\r\n                        position={quickEditPosition}\r\n                        onEdit={() => onSelectElement(quickEditElement)}\r\n                        onDuplicate={() => onDuplicateElement(quickEditElement)}\r\n                        onDelete={() => onDeleteElement(quickEditElement)}\r\n                        onMoveUp={() => onMoveElement(quickEditElement, 'up')}\r\n                        onMoveDown={() => onMoveElement(quickEditElement, 'down')}\r\n                        onClose={onCloseQuickEdit}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}