{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\pages-content\\\\EditorModal.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport GrapesJS from 'grapesjs';\nimport 'grapesjs/dist/css/grapes.min.css';\nimport 'grapesjs-preset-webpage';\nimport api from '@landinghub/api';\nimport './EditorModal.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditorModal = ({\n  showEditorModal,\n  setShowEditorModal,\n  editingPage,\n  handleSavePage\n}) => {\n  _s();\n  const editorRef = useRef(null);\n  useEffect(() => {\n    if (showEditorModal && editingPage) {\n      const editor = GrapesJS.init({\n        container: '#gjs-editor',\n        fromElement: true,\n        height: '600px',\n        width: '100%',\n        plugins: ['gjs-preset-webpage'],\n        storageManager: false,\n        assetManager: {\n          upload: false\n        }\n      });\n      api.get(`/api/pages/${editingPage.id}/content`).then(response => {\n        editor.setComponents(response.data.html);\n        editor.setStyle(response.data.css);\n      }).catch(err => {\n        console.error('Editor load error:', err);\n      });\n      editorRef.current = editor;\n      return () => {\n        editor.destroy();\n        editorRef.current = null;\n      };\n    }\n  }, [showEditorModal, editingPage]);\n  return showEditorModal && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Ch\\u1EC9nh s\\u1EEDa Landing Page: \", editingPage === null || editingPage === void 0 ? void 0 : editingPage.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"gjs-editor\",\n        style: {\n          height: '600px',\n          border: '1px solid #ccc'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSavePage,\n          className: \"save-btn\",\n          children: \"L\\u01B0u\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowEditorModal(false),\n          className: \"cancel-btn\",\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 13\n  }, this);\n};\n_s(EditorModal, \"FXGU5sRik9TpAO5B+Yli91RwFDk=\");\n_c = EditorModal;\nexport default EditorModal;\nvar _c;\n$RefreshReg$(_c, \"EditorModal\");","map":{"version":3,"names":["React","useEffect","useRef","GrapesJS","api","jsxDEV","_jsxDEV","EditorModal","showEditorModal","setShowEditorModal","editingPage","handleSavePage","_s","editorRef","editor","init","container","fromElement","height","width","plugins","storageManager","assetManager","upload","get","id","then","response","setComponents","data","html","setStyle","css","catch","err","console","error","current","destroy","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","style","border","onClick","_c","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/pages-content/EditorModal.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport GrapesJS from 'grapesjs';\r\nimport 'grapesjs/dist/css/grapes.min.css';\r\nimport 'grapesjs-preset-webpage';\r\nimport api from '@landinghub/api';\r\nimport './EditorModal.css';\r\n\r\nconst EditorModal = ({ showEditorModal, setShowEditorModal, editingPage, handleSavePage }) => {\r\n    const editorRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (showEditorModal && editingPage) {\r\n            const editor = GrapesJS.init({\r\n                container: '#gjs-editor',\r\n                fromElement: true,\r\n                height: '600px',\r\n                width: '100%',\r\n                plugins: ['gjs-preset-webpage'],\r\n                storageManager: false,\r\n                assetManager: { upload: false },\r\n            });\r\n\r\n            api\r\n                .get(`/api/pages/${editingPage.id}/content`)\r\n                .then((response) => {\r\n                    editor.setComponents(response.data.html);\r\n                    editor.setStyle(response.data.css);\r\n                })\r\n                .catch((err) => {\r\n                    console.error('Editor load error:', err);\r\n                });\r\n\r\n            editorRef.current = editor;\r\n\r\n            return () => {\r\n                editor.destroy();\r\n                editorRef.current = null;\r\n            };\r\n        }\r\n    }, [showEditorModal, editingPage]);\r\n\r\n    return (\r\n        showEditorModal && (\r\n            <div className=\"modal\">\r\n                <div className=\"modal-content\">\r\n                    <h2>Chỉnh sửa Landing Page: {editingPage?.name}</h2>\r\n                    <div id=\"gjs-editor\" style={{ height: '600px', border: '1px solid #ccc' }}></div>\r\n                    <div className=\"modal-actions\">\r\n                        <button onClick={handleSavePage} className=\"save-btn\">Lưu</button>\r\n                        <button onClick={() => setShowEditorModal(false)} className=\"cancel-btn\">Hủy</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    );\r\n};\r\n\r\nexport default EditorModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}