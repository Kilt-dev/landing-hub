{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useMemo, useCallback, useState } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport QuickEditToolkit from './QuickEditToolkit';\nimport '../../styles/CreateLanding.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  COMPONENT: 'component',\n  EXISTING_ELEMENT: 'existingElement'\n};\nconst Canvas = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  pageStructure,\n  selectedElement,\n  onSelectElement,\n  quickEditElement,\n  quickEditPosition,\n  onQuickEdit,\n  onCloseQuickEdit,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  viewMode,\n  addComponent,\n  moveElement,\n  zoomLevel,\n  setPageStructure\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const [dropIndex, setDropIndex] = useState(null);\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const updatePosition = useCallback((id, newPosition) => {\n    setPageStructure(prev => {\n      const newStructure = prev.map(el => el.id === id ? {\n        ...el,\n        json: {\n          ...el.json,\n          styles: {\n            ...el.json.styles,\n            position: {\n              x: newPosition.x,\n              y: newPosition.y\n            }\n          }\n        }\n      } : el);\n      return newStructure;\n    });\n  }, [setPageStructure]);\n\n  // Make the entire canvas a drop target\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.COMPONENT, ItemTypes.EXISTING_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset && canvasRef.current) {\n        const rect = canvasRef.current.getBoundingClientRect();\n        const y = clientOffset.y - rect.top;\n        const index = calculateDropIndex(y);\n        setDropIndex(index);\n        if (item.componentData) {\n          item.componentData.json.styles = {\n            ...item.componentData.json.styles,\n            position: {\n              x: clientOffset.x - rect.left,\n              y\n            }\n          };\n        }\n      }\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\n        return;\n      }\n      const rect = canvasRef.current.getBoundingClientRect();\n      const position = {\n        x: clientOffset.x - rect.left,\n        y: clientOffset.y - rect.top\n      };\n      setHistory(prev => {\n        const newHistory = prev.slice(0, historyIndex + 1);\n        newHistory.push([...pageStructure]);\n        return newHistory;\n      });\n      setHistoryIndex(prev => prev + 1);\n      if (item.componentData) {\n        const index = calculateDropIndex(position.y);\n        addComponent({\n          ...item.componentData,\n          json: {\n            ...item.componentData.json,\n            styles: {\n              ...item.componentData.json.styles,\n              position\n            }\n          }\n        }, index);\n      } else {\n        const newIndex = calculateDropIndex(position.y);\n        moveElement(item.id, newIndex);\n        const updatedStructure = [...pageStructure];\n        const targetIndex = updatedStructure.findIndex(el => el.id === item.id);\n        if (targetIndex !== -1) {\n          updatedStructure[targetIndex] = {\n            ...updatedStructure[targetIndex],\n            json: {\n              ...updatedStructure[targetIndex].json,\n              styles: {\n                ...updatedStructure[targetIndex].json.styles,\n                position\n              }\n            }\n          };\n          setPageStructure(updatedStructure);\n        }\n      }\n      setDropIndex(null);\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n\n  // Calculate drop index based on y-position\n  const calculateDropIndex = useCallback(y => {\n    if (!canvasRef.current) return pageStructure.length;\n    const elements = canvasRef.current.querySelectorAll('.canvas-element');\n    let index = pageStructure.length;\n    elements.forEach((el, i) => {\n      const rect = el.getBoundingClientRect();\n      const canvasRect = canvasRef.current.getBoundingClientRect();\n      const elTop = rect.top - canvasRect.top;\n      const elHeight = rect.height;\n      if (y < elTop + elHeight / 2) {\n        index = i;\n        return false;\n      }\n    });\n    return index;\n  }, [pageStructure]);\n\n  // Handle element hover for quick edit\n  const handleElementHover = useCallback((e, component) => {\n    var _canvasRef$current;\n    if ((quickEditElement === null || quickEditElement === void 0 ? void 0 : quickEditElement.id) === component.id) return;\n    const rect = e.currentTarget.getBoundingClientRect();\n    const canvasRect = ((_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.getBoundingClientRect()) || {\n      left: 0,\n      top: 0\n    };\n    onQuickEdit(component, {\n      x: rect.left - canvasRect.left,\n      y: rect.top - canvasRect.top + 20\n    });\n  }, [quickEditElement, onQuickEdit]);\n\n  // Keyboard shortcuts\n  useHotkeys('delete', () => {\n    if (selectedElement) {\n      setHistory(prev => {\n        const newHistory = prev.slice(0, historyIndex + 1);\n        newHistory.push([...pageStructure]);\n        return newHistory;\n      });\n      setHistoryIndex(prev => prev + 1);\n      onDeleteElement(selectedElement);\n    }\n  }, [selectedElement, onDeleteElement]);\n  useHotkeys('up', () => {\n    if (selectedElement) {\n      onMoveElement(selectedElement, 'up');\n    }\n  }, [selectedElement, onMoveElement]);\n  useHotkeys('down', () => {\n    if (selectedElement) {\n      onMoveElement(selectedElement, 'down');\n    }\n  }, [selectedElement, onMoveElement]);\n  useHotkeys('ctrl+z', () => {\n    if (historyIndex > 0) {\n      setHistoryIndex(prev => prev - 1);\n      setPageStructure([...history[historyIndex - 1]]);\n      toast.info('Đã hoàn tác!');\n    }\n  }, [historyIndex, history, setPageStructure]);\n  useHotkeys('ctrl+y', () => {\n    if (historyIndex < history.length - 1) {\n      setHistoryIndex(prev => prev + 1);\n      setPageStructure([...history[historyIndex + 1]]);\n      toast.info('Đã khôi phục!');\n    }\n  }, [historyIndex, history, setPageStructure]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"canvas-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        canvasRef.current = node;\n        drop(node);\n      },\n      className: `canvas ${viewMode === 'mobile' ? 'mobile' : viewMode === 'tablet' ? 'tablet' : ''}`,\n      onMouseLeave: onCloseQuickEdit,\n      style: {\n        zoom: `${zoomLevel / 100}`,\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"canvas-content\",\n        children: pageStructure.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"canvas-empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"far fa-mouse-pointer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"K\\xE9o th\\u1EA3 component \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [pageStructure.map((component, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [dropIndex === index && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"canvas-drop-zone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"canvas-element-wrapper\",\n              children: /*#__PURE__*/_jsxDEV(Element, {\n                component: component,\n                index: index,\n                isSelected: (selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id) === component.id,\n                hasQuickEdit: (quickEditElement === null || quickEditElement === void 0 ? void 0 : quickEditElement.id) === component.id,\n                onSelectElement: onSelectElement,\n                handleElementHover: handleElementHover,\n                onDuplicateElement: onDuplicateElement,\n                onDeleteElement: onDeleteElement,\n                onMoveElement: onMoveElement,\n                updatePosition: updatePosition,\n                canvasRef: canvasRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 21\n            }, this)]\n          }, component.id || index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 19\n          }, this)), dropIndex === pageStructure.length && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"canvas-drop-zone\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 56\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(QuickEditToolkit, {\n        element: quickEditElement,\n        position: quickEditPosition,\n        onEdit: () => onSelectElement(quickEditElement),\n        onDuplicate: () => onDuplicateElement(quickEditElement),\n        onDelete: () => onDeleteElement(quickEditElement),\n        onMoveUp: () => onMoveElement(quickEditElement, 'up'),\n        onMoveDown: () => onMoveElement(quickEditElement, 'down'),\n        onClose: onCloseQuickEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 7\n  }, this);\n}, \"91ohOrV6vv+NG063xmdovS3lZQo=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys, useHotkeys, useHotkeys, useHotkeys];\n})), \"91ohOrV6vv+NG063xmdovS3lZQo=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys, useHotkeys, useHotkeys, useHotkeys];\n});\n_c2 = Canvas;\nexport default Canvas;\nvar _c, _c2;\n$RefreshReg$(_c, \"Canvas$React.memo\");\n$RefreshReg$(_c2, \"Canvas\");","map":{"version":3,"names":["React","useRef","useMemo","useCallback","useState","useDrop","useDrag","useHotkeys","toast","QuickEditToolkit","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemTypes","COMPONENT","EXISTING_ELEMENT","Canvas","_s","memo","_c","pageStructure","selectedElement","onSelectElement","quickEditElement","quickEditPosition","onQuickEdit","onCloseQuickEdit","onDuplicateElement","onDeleteElement","onMoveElement","viewMode","addComponent","moveElement","zoomLevel","setPageStructure","canvasRef","dropIndex","setDropIndex","history","setHistory","historyIndex","setHistoryIndex","updatePosition","id","newPosition","prev","newStructure","map","el","json","styles","position","x","y","isOver","drop","accept","hover","item","monitor","clientOffset","getClientOffset","current","rect","getBoundingClientRect","top","index","calculateDropIndex","componentData","left","error","newHistory","slice","push","newIndex","updatedStructure","targetIndex","findIndex","collect","length","elements","querySelectorAll","forEach","i","canvasRect","elTop","elHeight","height","handleElementHover","e","component","_canvasRef$current","currentTarget","info","className","children","ref","node","onMouseLeave","style","zoom","fileName","_jsxFileName","lineNumber","columnNumber","Element","isSelected","hasQuickEdit","element","onEdit","onDuplicate","onDelete","onMoveUp","onMoveDown","onClose","_c2","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef, useMemo, useCallback, useState } from 'react';import { useDrop, useDrag } from 'react-dnd';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport QuickEditToolkit from './QuickEditToolkit';\r\nimport '../../styles/CreateLanding.css'\r\nconst ItemTypes = {\r\n  COMPONENT: 'component',\r\n  EXISTING_ELEMENT: 'existingElement',\r\n};\r\n\r\n\r\nconst Canvas = React.memo(\r\n  ({\r\n    pageStructure,\r\n    selectedElement,\r\n    onSelectElement,\r\n    quickEditElement,\r\n    quickEditPosition,\r\n    onQuickEdit,\r\n    onCloseQuickEdit,\r\n    onDuplicateElement,\r\n    onDeleteElement,\r\n    onMoveElement,\r\n    viewMode,\r\n    addComponent,\r\n    moveElement,\r\n    zoomLevel,\r\n    setPageStructure,\r\n  }) => {\r\n    const canvasRef = useRef(null);\r\n    const [dropIndex, setDropIndex] = useState(null);\r\n    const [history, setHistory] = useState([]);\r\n    const [historyIndex, setHistoryIndex] = useState(-1);\r\n\r\n    const updatePosition = useCallback((id, newPosition) => {\r\n      setPageStructure((prev) => {\r\n        const newStructure = prev.map((el) =>\r\n          el.id === id\r\n            ? {\r\n                ...el,\r\n                json: {\r\n                  ...el.json,\r\n                  styles: {\r\n                    ...el.json.styles,\r\n                    position: {\r\n                      x: newPosition.x,\r\n                      y: newPosition.y,\r\n                    },\r\n                  },\r\n                },\r\n              }\r\n            : el\r\n        );\r\n        return newStructure;\r\n      });\r\n    }, [setPageStructure]);\r\n\r\n    // Make the entire canvas a drop target\r\n    const [{ isOver }, drop] = useDrop(() => ({\r\n      accept: [ItemTypes.COMPONENT, ItemTypes.EXISTING_ELEMENT],\r\n      hover: (item, monitor) => {\r\n        const clientOffset = monitor.getClientOffset();\r\n        if (clientOffset && canvasRef.current) {\r\n          const rect = canvasRef.current.getBoundingClientRect();\r\n          const y = clientOffset.y - rect.top;\r\n          const index = calculateDropIndex(y);\r\n          setDropIndex(index);\r\n\r\n          if (item.componentData) {\r\n            item.componentData.json.styles = {\r\n              ...item.componentData.json.styles,\r\n              position: { x: clientOffset.x - rect.left, y },\r\n            };\r\n          }\r\n        }\r\n      },\r\n      drop: (item, monitor) => {\r\n        const clientOffset = monitor.getClientOffset();\r\n        if (!clientOffset || !canvasRef.current) {\r\n          toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\r\n          return;\r\n        }\r\n\r\n        const rect = canvasRef.current.getBoundingClientRect();\r\n        const position = {\r\n          x: clientOffset.x - rect.left,\r\n          y: clientOffset.y - rect.top,\r\n        };\r\n\r\n        setHistory((prev) => {\r\n          const newHistory = prev.slice(0, historyIndex + 1);\r\n          newHistory.push([...pageStructure]);\r\n          return newHistory;\r\n        });\r\n        setHistoryIndex((prev) => prev + 1);\r\n\r\n        if (item.componentData) {\r\n          const index = calculateDropIndex(position.y);\r\n          addComponent(\r\n            {\r\n              ...item.componentData,\r\n              json: {\r\n                ...item.componentData.json,\r\n                styles: { ...item.componentData.json.styles, position },\r\n              },\r\n            },\r\n            index\r\n          );\r\n        } else {\r\n          const newIndex = calculateDropIndex(position.y);\r\n          moveElement(item.id, newIndex);\r\n          const updatedStructure = [...pageStructure];\r\n          const targetIndex = updatedStructure.findIndex((el) => el.id === item.id);\r\n          if (targetIndex !== -1) {\r\n            updatedStructure[targetIndex] = {\r\n              ...updatedStructure[targetIndex],\r\n              json: {\r\n                ...updatedStructure[targetIndex].json,\r\n                styles: { ...updatedStructure[targetIndex].json.styles, position },\r\n              },\r\n            };\r\n            setPageStructure(updatedStructure);\r\n          }\r\n        }\r\n        setDropIndex(null);\r\n      },\r\n      collect: (monitor) => ({\r\n        isOver: !!monitor.isOver(),\r\n      }),\r\n    }));\r\n\r\n    // Calculate drop index based on y-position\r\n    const calculateDropIndex = useCallback(\r\n      (y) => {\r\n        if (!canvasRef.current) return pageStructure.length;\r\n        const elements = canvasRef.current.querySelectorAll('.canvas-element');\r\n        let index = pageStructure.length;\r\n\r\n        elements.forEach((el, i) => {\r\n          const rect = el.getBoundingClientRect();\r\n          const canvasRect = canvasRef.current.getBoundingClientRect();\r\n          const elTop = rect.top - canvasRect.top;\r\n          const elHeight = rect.height;\r\n\r\n          if (y < elTop + elHeight / 2) {\r\n            index = i;\r\n            return false;\r\n          }\r\n        });\r\n\r\n        return index;\r\n      },\r\n      [pageStructure]\r\n    );\r\n\r\n    // Handle element hover for quick edit\r\n    const handleElementHover = useCallback(\r\n      (e, component) => {\r\n        if (quickEditElement?.id === component.id) return;\r\n\r\n        const rect = e.currentTarget.getBoundingClientRect();\r\n        const canvasRect = canvasRef.current?.getBoundingClientRect() || { left: 0, top: 0 };\r\n        onQuickEdit(component, {\r\n          x: rect.left - canvasRect.left,\r\n          y: rect.top - canvasRect.top + 20,\r\n        });\r\n      },\r\n      [quickEditElement, onQuickEdit]\r\n    );\r\n\r\n    // Keyboard shortcuts\r\n    useHotkeys(\r\n      'delete',\r\n      () => {\r\n        if (selectedElement) {\r\n          setHistory((prev) => {\r\n            const newHistory = prev.slice(0, historyIndex + 1);\r\n            newHistory.push([...pageStructure]);\r\n            return newHistory;\r\n          });\r\n          setHistoryIndex((prev) => prev + 1);\r\n          onDeleteElement(selectedElement);\r\n        }\r\n      },\r\n      [selectedElement, onDeleteElement]\r\n    );\r\n    useHotkeys(\r\n      'up',\r\n      () => {\r\n        if (selectedElement) {\r\n          onMoveElement(selectedElement, 'up');\r\n        }\r\n      },\r\n      [selectedElement, onMoveElement]\r\n    );\r\n    useHotkeys(\r\n      'down',\r\n      () => {\r\n        if (selectedElement) {\r\n          onMoveElement(selectedElement, 'down');\r\n        }\r\n      },\r\n      [selectedElement, onMoveElement]\r\n    );\r\n    useHotkeys(\r\n      'ctrl+z',\r\n      () => {\r\n        if (historyIndex > 0) {\r\n          setHistoryIndex((prev) => prev - 1);\r\n          setPageStructure([...history[historyIndex - 1]]);\r\n          toast.info('Đã hoàn tác!');\r\n        }\r\n      },\r\n      [historyIndex, history, setPageStructure]\r\n    );\r\n    useHotkeys(\r\n      'ctrl+y',\r\n      () => {\r\n        if (historyIndex < history.length - 1) {\r\n          setHistoryIndex((prev) => prev + 1);\r\n          setPageStructure([...history[historyIndex + 1]]);\r\n          toast.info('Đã khôi phục!');\r\n        }\r\n      },\r\n      [historyIndex, history, setPageStructure]\r\n    );\r\n\r\n    return (\r\n      <div className=\"canvas-wrapper\">\r\n        <div\r\n          ref={(node) => {\r\n            canvasRef.current = node;\r\n            drop(node);\r\n          }}\r\n          className={`canvas ${viewMode === 'mobile' ? 'mobile' : viewMode === 'tablet' ? 'tablet' : ''}`}\r\n          onMouseLeave={onCloseQuickEdit}\r\n          style={{ zoom: `${zoomLevel / 100}`, position: 'relative' }}\r\n        >\r\n          <div className=\"canvas-content\">\r\n            {pageStructure.length === 0 ? (\r\n              <div className=\"canvas-empty-state\">\r\n                <i className=\"far fa-mouse-pointer\"></i>\r\n                <p>Kéo thả component để bắt đầu</p>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {pageStructure.map((component, index) => (\r\n                  <React.Fragment key={component.id || index}>\r\n                    {dropIndex === index && <div className=\"canvas-drop-zone\" />}\r\n                    <div className=\"canvas-element-wrapper\">\r\n                      <Element\r\n                        component={component}\r\n                        index={index}\r\n                        isSelected={selectedElement?.id === component.id}\r\n                        hasQuickEdit={quickEditElement?.id === component.id}\r\n                        onSelectElement={onSelectElement}\r\n                        handleElementHover={handleElementHover}\r\n                        onDuplicateElement={onDuplicateElement}\r\n                        onDeleteElement={onDeleteElement}\r\n                        onMoveElement={onMoveElement}\r\n                        updatePosition={updatePosition}\r\n                        canvasRef={canvasRef}\r\n                      />\r\n                    </div>\r\n                  </React.Fragment>\r\n                ))}\r\n                {dropIndex === pageStructure.length && <div className=\"canvas-drop-zone\" />}\r\n              </>\r\n            )}\r\n          </div>\r\n\r\n          <QuickEditToolkit\r\n            element={quickEditElement}\r\n            position={quickEditPosition}\r\n            onEdit={() => onSelectElement(quickEditElement)}\r\n            onDuplicate={() => onDuplicateElement(quickEditElement)}\r\n            onDelete={() => onDeleteElement(quickEditElement)}\r\n            onMoveUp={() => onMoveElement(quickEditElement, 'up')}\r\n            onMoveDown={() => onMoveElement(quickEditElement, 'down')}\r\n            onClose={onCloseQuickEdit}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}