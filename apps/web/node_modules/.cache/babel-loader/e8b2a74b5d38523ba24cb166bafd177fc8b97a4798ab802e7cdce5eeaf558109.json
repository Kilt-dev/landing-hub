{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\CreateLanding.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport api from \"@landinghub/api\";\nimport DogLoader from \"../components/DogLoader\";\nimport \"grapesjs/dist/css/grapes.min.css\";\nimport grapesjs from \"grapesjs\";\nimport \"grapesjs-preset-webpage\";\nimport \"grapesjs-blocks-basic\";\nimport \"../styles/CreateLanding.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  jwtDecode\n} = require(\"jwt-decode\");\nconst CreateLandingPage = () => {\n  _s();\n  // State management (unchanged)\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [pageDescription, setPageDescription] = useState(\"\");\n  const [saveTime, setSaveTime] = useState(null);\n  const [aiModalOpen, setAiModalOpen] = useState(false);\n  const [aiHtml, setAiHtml] = useState(\"\");\n  const [aiThumbnail, setAiThumbnail] = useState(\"\");\n  const [aiImprovements, setAiImprovements] = useState([]);\n  const [originalHtml, setOriginalHtml] = useState(\"\");\n  const [isAutoSaving, setIsAutoSaving] = useState(false);\n  const [currentPage, setCurrentPage] = useState(null);\n  const [previewMode, setPreviewMode] = useState(false);\n  const [selectedDevice, setSelectedDevice] = useState(\"desktop\");\n  const [showShortcuts, setShowShortcuts] = useState(false);\n\n  // Refs (unchanged)\n  const editorRef = useRef(null);\n  const editorContainerRef = useRef(null);\n  const autoSaveTimeoutRef = useRef(null);\n  const navigate = useNavigate();\n  const {\n    pageId\n  } = useParams();\n\n  // Auth check (unchanged)\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      navigate(\"/auth\", {\n        state: {\n          from: location.pathname\n        }\n      });\n      return;\n    }\n    try {\n      const decoded = jwtDecode(token);\n      const currentTime = Date.now() / 1000;\n      if (!decoded.userId) throw new Error(\"Invalid token - missing userId\");\n      if (decoded.exp < currentTime) throw new Error(\"Token expired\");\n      api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n    } catch (err) {\n      console.error(\"Auth error:\", err.message);\n      localStorage.removeItem(\"token\");\n      navigate(\"/auth\", {\n        state: {\n          from: location.pathname,\n          error: \"Session expired\"\n        }\n      });\n    }\n  }, [navigate]);\n\n  // Load existing page (unchanged)\n  useEffect(() => {\n    if (pageId) {\n      loadExistingPage();\n    }\n  }, [pageId]);\n  const loadExistingPage = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get(`/api/pages/${pageId}/content`);\n      setCurrentPage(response.data);\n      if (editorRef.current && response.data.html) {\n        var _doc$head$querySelect;\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(response.data.html, \"text/html\");\n        const bodyContent = doc.body.innerHTML;\n        const styleContent = ((_doc$head$querySelect = doc.head.querySelector(\"style\")) === null || _doc$head$querySelect === void 0 ? void 0 : _doc$head$querySelect.innerHTML) || \"\";\n        editorRef.current.setComponents(bodyContent);\n        editorRef.current.setCss(styleContent);\n        setPageDescription(response.data.name || \"\");\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Load page error:\", err);\n      setError(\"Không thể tải nội dung trang: \" + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Enhanced GrapesJS initialization with full-screen canvas\n  useEffect(() => {\n    if (!editorRef.current && editorContainerRef.current) {\n      try {\n        editorRef.current = grapesjs.init({\n          container: editorContainerRef.current,\n          height: \"100vh\",\n          // Full-screen height\n          width: \"100%\",\n          // Full-screen width\n          fromElement: false,\n          storageManager: false,\n          plugins: [\"gjs-blocks-basic\", \"gjs-preset-webpage\"],\n          pluginsOpts: {\n            \"gjs-blocks-basic\": {\n              blocks: [\"column1\", \"column2\", \"column3\", \"text\", \"link\", \"image\", \"video\"]\n            },\n            \"gjs-preset-webpage\": {\n              modalImportTitle: \"Import Template\",\n              modalImportLabel: '<div style=\"margin-bottom: 10px; font-size: 13px;\">Paste here your HTML/CSS and click Import</div>',\n              modalImportContent: function (editor) {\n                return editor.getHtml() + \"<style>\" + editor.getCss() + \"</style>\";\n              }\n            }\n          },\n          canvas: {\n            styles: [\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\"],\n            scripts: []\n          },\n          blockManager: {\n            appendTo: \".toolbox-container\" // Moved to left panel\n          },\n          styleManager: {\n            appendTo: \".styles-container\" // Right panel\n          },\n          layerManager: {\n            appendTo: \".layers-container\" // Right panel\n          },\n          deviceManager: {\n            devices: [{\n              name: \"Desktop\",\n              width: \"\",\n              id: \"desktop\"\n            }, {\n              name: \"Tablet\",\n              width: \"768px\",\n              widthMedia: \"992px\",\n              id: \"tablet\"\n            }, {\n              name: \"Mobile portrait\",\n              width: \"320px\",\n              widthMedia: \"768px\",\n              id: \"mobilePortrait\"\n            }]\n          },\n          panels: {\n            defaults: [{\n              id: \"styles\",\n              el: \".styles-container\",\n              resizable: {\n                maxDim: 350,\n                minDim: 200,\n                tc: 0,\n                cl: 1,\n                cr: 0,\n                bc: 0,\n                keyWidth: \"flex-basis\"\n              }\n            }, {\n              id: \"layers\",\n              el: \".layers-container\",\n              resizable: {\n                maxDim: 350,\n                minDim: 200,\n                tc: 0,\n                cl: 1,\n                cr: 0,\n                bc: 0,\n                keyWidth: \"flex-basis\"\n              }\n            }]\n          }\n        });\n        const debouncedAutoSave = debounce(() => handleAutoSave(), 800);\n        [\"update\", \"component:add\", \"component:remove\", \"component:update\"].forEach(event => editorRef.current.on(event, debouncedAutoSave));\n        editorRef.current.on(\"device:select\", device => setSelectedDevice(device.get(\"id\")));\n        loadDraft();\n      } catch (err) {\n        console.error(\"GrapesJS initialization error:\", err);\n        setError(\"Lỗi khởi tạo editor: \" + err.message);\n      }\n    }\n    return () => {\n      if (autoSaveTimeoutRef.current) clearTimeout(autoSaveTimeoutRef.current);\n    };\n  }, []);\n\n  // Debounce utility (unchanged)\n  const debounce = (func, wait) => {\n    return (...args) => {\n      clearTimeout(autoSaveTimeoutRef.current);\n      autoSaveTimeoutRef.current = setTimeout(() => func.apply(this, args), wait);\n    };\n  };\n\n  // Load draft (unchanged)\n  const loadDraft = useCallback(async () => {\n    try {\n      const draftKey = pageId ? `draft_${pageId}` : \"draft_new\";\n      const savedDraft = localStorage.getItem(draftKey);\n      if (savedDraft) {\n        const draft = JSON.parse(savedDraft);\n        const timeDiff = Date.now() - new Date(draft.timestamp).getTime();\n        if (timeDiff < 24 * 60 * 60 * 1000 && editorRef.current) {\n          if (draft.html) editorRef.current.setComponents(draft.html);\n          if (draft.css) editorRef.current.setCss(draft.css);\n          setSuccess(\"Đã khôi phục bản nháp đã lưu\");\n        }\n      }\n    } catch (err) {\n      console.warn(\"Load draft error:\", err);\n    }\n  }, [pageId]);\n\n  // Handle auto-save (unchanged)\n  const handleAutoSave = useCallback(async () => {\n    if (!editorRef.current || isAutoSaving) return;\n    setIsAutoSaving(true);\n    try {\n      const html = editorRef.current.getHtml();\n      const css = editorRef.current.getCss();\n      const draftKey = pageId ? `draft_${pageId}` : \"draft_new\";\n      const draft = {\n        html,\n        css,\n        timestamp: new Date().toISOString()\n      };\n      localStorage.setItem(draftKey, JSON.stringify(draft));\n      if (pageId) {\n        await api.post(\"/api/pages/auto-save\", {\n          html,\n          css,\n          pageId\n        });\n      }\n      setSaveTime(new Date().toLocaleTimeString(\"vi-VN\"));\n    } catch (err) {\n      console.warn(\"Auto save error:\", err);\n    } finally {\n      setIsAutoSaving(false);\n    }\n  }, [pageId, isAutoSaving]);\n\n  // Clear messages (unchanged)\n  useEffect(() => {\n    if (error || success) {\n      const timer = setTimeout(() => {\n        setError(null);\n        setSuccess(null);\n      }, 5000);\n      return () => clearTimeout(timer);\n    }\n  }, [error, success]);\n\n  // Handle reload editor (unchanged)\n  const handleReloadEditor = useCallback(() => {\n    if (editorRef.current) {\n      editorRef.current.destroy();\n      editorRef.current = null;\n      window.location.reload();\n    }\n  }, []);\n\n  // Handle export HTML (unchanged)\n  const handleExportHTML = useCallback(() => {\n    if (!editorRef.current) return;\n    try {\n      const html = editorRef.current.getHtml();\n      const css = editorRef.current.getCss();\n      const fullHtml = `<!DOCTYPE html>\n<html lang=\"vi\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta name=\"description\" content=\"${pageDescription || 'Landing Page tạo bởi LandingHub'}\">\n    <title>${pageDescription || 'Landing Page'}</title>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\n    <style>\n        * { margin: 0; padding: 0; box-sizing: border-box; }\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; }\n        ${css}\n    </style>\n</head>\n<body>\n    ${html}\n    <script>\n        console.log('Landing page loaded at:', new Date());\n        document.querySelectorAll('form').forEach(form => {\n            form.addEventListener('submit', function(e) {\n                e.preventDefault();\n                alert('Form submitted! (Demo mode)');\n                console.log('Form data:', new FormData(this));\n            });\n        });\n        document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n            anchor.addEventListener('click', function (e) {\n                e.preventDefault();\n                const target = document.querySelector(this.getAttribute('href'));\n                if (target) target.scrollIntoView({ behavior: 'smooth' });\n            });\n        });\n    </script>\n</body>\n</html>`;\n      const blob = new Blob([fullHtml], {\n        type: \"text/html;charset=utf-8\"\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = `${pageDescription || \"landing-page\"}.html`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      setSuccess(\"Đã xuất file HTML thành công!\");\n    } catch (err) {\n      console.error(\"Export error:\", err);\n      setError(\"Lỗi khi xuất HTML: \" + err.message);\n    }\n  }, [pageDescription]);\n\n  // Handle AI refactor (unchanged)\n  const handleAiRefactor = useCallback(async () => {\n    if (!editorRef.current) return;\n    try {\n      setLoading(true);\n      const html = editorRef.current.getHtml();\n      const css = editorRef.current.getCss();\n      const fullContent = html + (css ? `<style>${css}</style>` : \"\");\n      setOriginalHtml(fullContent);\n      const response = await api.post(\"/api/pages/ai-refactor\", {\n        html: fullContent\n      });\n      setAiHtml(response.data.html);\n      setAiThumbnail(response.data.thumbnail);\n      setAiImprovements(response.data.improvements || []);\n      setAiModalOpen(true);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error(\"AI Refactor error:\", err);\n      setError(\"Lỗi khi gọi AI Refactor: \" + (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Handle accept AI (unchanged)\n  const handleAcceptAi = useCallback(() => {\n    if (!editorRef.current || !aiHtml) return;\n    try {\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(aiHtml, \"text/html\");\n      const bodyContent = doc.body.innerHTML;\n      const styleElement = doc.head.querySelector(\"style\");\n      const cssContent = styleElement ? styleElement.innerHTML : \"\";\n      editorRef.current.setComponents(bodyContent);\n      if (cssContent) editorRef.current.setCss(cssContent);\n      handleAutoSave();\n      setAiModalOpen(false);\n      setSuccess(\"Đã áp dụng AI Refactor thành công!\");\n    } catch (err) {\n      console.error(\"Apply AI error:\", err);\n      setError(\"Lỗi khi áp dụng AI refactor: \" + err.message);\n    }\n  }, [aiHtml, handleAutoSave]);\n\n  // Handle create page (unchanged)\n  const handleCreatePage = useCallback(async () => {\n    if (!(pageDescription !== null && pageDescription !== void 0 && pageDescription.trim())) {\n      setError(\"Vui lòng nhập mô tả landing page\");\n      return;\n    }\n    try {\n      setLoading(true);\n      setError(null);\n      const response = await api.post(\"/api/pages\", {\n        description: pageDescription.trim()\n      });\n      if (response.data.html && editorRef.current) {\n        var _doc$head$querySelect2;\n        const parser = new DOMParser();\n        const doc = parser.parseFromString(response.data.html, \"text/html\");\n        const bodyContent = doc.body.innerHTML;\n        const styleContent = ((_doc$head$querySelect2 = doc.head.querySelector(\"style\")) === null || _doc$head$querySelect2 === void 0 ? void 0 : _doc$head$querySelect2.innerHTML) || \"\";\n        editorRef.current.setComponents(bodyContent);\n        if (styleContent) editorRef.current.setCss(styleContent);\n      }\n      setCurrentPage(response.data);\n      setSuccess(\"Tạo landing page thành công!\");\n      navigate(`/pages/edit/${response.data.id}`, {\n        state: {\n          page: response.data,\n          isNew: true\n        },\n        replace: true\n      });\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      console.error(\"Create error:\", err);\n      setError(\"Lỗi khi tạo landing page: \" + (((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  }, [pageDescription, navigate]);\n\n  // Handle save page (unchanged)\n  const handleSavePage = useCallback(async () => {\n    if (!editorRef.current) return;\n    try {\n      setLoading(true);\n      const html = editorRef.current.getHtml();\n      const css = editorRef.current.getCss();\n      const fullHtml = `<!DOCTYPE html>\n<html lang=\"vi\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>${pageDescription || \"Landing Page\"}</title>\n    <style>${css}</style>\n</head>\n<body>\n    ${html}\n</body>\n</html>`;\n      let response;\n      if (pageId) {\n        response = await api.put(`/api/pages/${pageId}`, {\n          html: fullHtml\n        });\n      } else {\n        response = await api.post(\"/api/pages/save\", {\n          html: fullHtml\n        });\n      }\n      setCurrentPage(response.data);\n      setSaveTime(new Date().toLocaleTimeString(\"vi-VN\"));\n      setSuccess(\"Đã lưu trang thành công!\");\n      const draftKey = pageId ? `draft_${pageId}` : \"draft_new\";\n      localStorage.removeItem(draftKey);\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      console.error(\"Save error:\", err);\n      setError(\"Lỗi khi lưu trang: \" + (((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  }, [pageId, pageDescription]);\n\n  // Handle preview page (unchanged)\n  const handlePreviewPage = useCallback(() => {\n    if (!editorRef.current) return;\n    const html = editorRef.current.getHtml();\n    const css = editorRef.current.getCss();\n    const previewWindow = window.open(\"\", \"_blank\");\n    previewWindow.document.write(`\n      <!DOCTYPE html>\n      <html lang=\"vi\">\n      <head>\n          <meta charset=\"UTF-8\">\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n          <title>Preview - ${pageDescription || \"Landing Page\"}</title>\n          <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\n          <style>\n              * { margin: 0; padding: 0; box-sizing: border-box; }\n              body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; }\n              ${css}\n          </style>\n      </head>\n      <body>\n          ${html}\n          <div style=\"position: fixed; top: 10px; right: 10px; background: #007bff; color: white; padding: 10px 15px; border-radius: 25px; z-index: 9999; font-size: 14px; box-shadow: 0 4px 12px rgba(0,123,255,0.3);\">\n              <i class=\"fa fa-eye\"></i> Preview Mode\n          </div>\n          <script>\n              document.querySelectorAll('form').forEach(form => {\n                  form.addEventListener('submit', function(e) {\n                      e.preventDefault();\n                      alert('Form submission (Preview mode)');\n                  });\n              });\n          </script>\n      </body>\n      </html>\n    `);\n    previewWindow.document.close();\n  }, [pageDescription]);\n\n  // Handle publish page (unchanged)\n  const handlePublishPage = useCallback(async () => {\n    if (!pageId) {\n      setError(\"Vui lòng lưu trang trước khi xuất bản\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const response = await api.post(`/api/pages/${pageId}/publish`);\n      setCurrentPage(response.data);\n      setSuccess(`Trang đã được xuất bản tại: ${response.data.url}`);\n    } catch (err) {\n      var _err$response5, _err$response5$data;\n      console.error(\"Publish error:\", err);\n      setError(\"Lỗi khi xuất bản: \" + (((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.error) || err.message));\n    } finally {\n      setLoading(false);\n    }\n  }, [pageId]);\n\n  // Handle select template (unchanged)\n  const handleSelectTemplate = useCallback(templateId => {\n    if (!editorRef.current) return;\n    const templates = {\n      blank: {\n        html: \"<div>Bắt đầu từ trang trống</div>\",\n        css: \"\"\n      },\n      business: {\n        html: `\n          <div style=\"min-height: 100vh;\">\n              <header style=\"background: #2c3e50; color: white; padding: 20px 0; text-align: center;\">\n                  <h1>Doanh Nghiệp Của Bạn</h1>\n                  <p>Giải pháp chuyên nghiệp cho mọi nhu cầu</p>\n              </header>\n              <main style=\"padding: 60px 20px; text-align: center;\">\n                  <h2>Chào mừng đến với dịch vụ của chúng tôi</h2>\n                  <p style=\"margin: 20px 0; color: #666;\">Chúng tôi cung cấp giải pháp tốt nhất cho doanh nghiệp của bạn</p>\n                  <button style=\"background: #3498db; color: white; padding: 15px 30px; border: none; border-radius: 5px; font-size: 16px;\">Liên hệ ngay</button>\n              </main>\n          </div>\n        `,\n        css: `\n          body { font-family: 'Arial', sans-serif; margin: 0; }\n          button:hover { background: #2980b9 !important; }\n        `\n      },\n      portfolio: {\n        html: `\n          <div style=\"min-height: 100vh; background: #f8f9fa;\">\n              <section style=\"padding: 100px 20px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;\">\n                  <h1 style=\"font-size: 3em; margin-bottom: 20px;\">Portfolio</h1>\n                  <p style=\"font-size: 1.2em;\">Showcase công việc và dự án của tôi</p>\n              </section>\n              <section style=\"padding: 80px 20px; text-align: center;\">\n                  <h2>Về tôi</h2>\n                  <p style=\"max-width: 600px; margin: 20px auto; color: #666;\">\n                      Tôi là một nhà thiết kế và phát triển với niềm đam mê tạo ra những trải nghiệm tuyệt vời.\n                  </p>\n              </section>\n          </div>\n        `,\n        css: `\n          body { font-family: 'Georgia', serif; margin: 0; line-height: 1.6; }\n        `\n      }\n    };\n    const template = templates[templateId];\n    if (template) {\n      editorRef.current.setComponents(template.html);\n      editorRef.current.setCss(template.css);\n      setSuccess(`Đã tải template ${templateId}`);\n    }\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(DogLoader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 568,\n    columnNumber: 25\n  }, this);\n};\n_s(CreateLandingPage, \"dj3ezdG8x+lZdBAA1K1ouIxF2yY=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = CreateLandingPage;\nexport default CreateLandingPage;\nvar _c;\n$RefreshReg$(_c, \"CreateLandingPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useNavigate","useParams","api","DogLoader","grapesjs","jsxDEV","_jsxDEV","jwtDecode","require","CreateLandingPage","_s","loading","setLoading","error","setError","success","setSuccess","pageDescription","setPageDescription","saveTime","setSaveTime","aiModalOpen","setAiModalOpen","aiHtml","setAiHtml","aiThumbnail","setAiThumbnail","aiImprovements","setAiImprovements","originalHtml","setOriginalHtml","isAutoSaving","setIsAutoSaving","currentPage","setCurrentPage","previewMode","setPreviewMode","selectedDevice","setSelectedDevice","showShortcuts","setShowShortcuts","editorRef","editorContainerRef","autoSaveTimeoutRef","navigate","pageId","token","localStorage","getItem","state","from","location","pathname","decoded","currentTime","Date","now","userId","Error","exp","defaults","headers","common","err","console","message","removeItem","loadExistingPage","response","get","data","current","html","_doc$head$querySelect","parser","DOMParser","doc","parseFromString","bodyContent","body","innerHTML","styleContent","head","querySelector","setComponents","setCss","name","_err$response","_err$response$data","init","container","height","width","fromElement","storageManager","plugins","pluginsOpts","blocks","modalImportTitle","modalImportLabel","modalImportContent","editor","getHtml","getCss","canvas","styles","scripts","blockManager","appendTo","styleManager","layerManager","deviceManager","devices","id","widthMedia","panels","el","resizable","maxDim","minDim","tc","cl","cr","bc","keyWidth","debouncedAutoSave","debounce","handleAutoSave","forEach","event","on","device","loadDraft","clearTimeout","func","wait","args","setTimeout","apply","draftKey","savedDraft","draft","JSON","parse","timeDiff","timestamp","getTime","css","warn","toISOString","setItem","stringify","post","toLocaleTimeString","timer","handleReloadEditor","destroy","window","reload","handleExportHTML","fullHtml","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","handleAiRefactor","fullContent","thumbnail","improvements","_err$response2","_err$response2$data","handleAcceptAi","styleElement","cssContent","handleCreatePage","trim","description","_doc$head$querySelect2","page","isNew","replace","_err$response3","_err$response3$data","handleSavePage","put","_err$response4","_err$response4$data","handlePreviewPage","previewWindow","open","write","close","handlePublishPage","_err$response5","_err$response5$data","handleSelectTemplate","templateId","templates","blank","business","portfolio","template","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/CreateLanding.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport api from \"@landinghub/api\";\r\nimport DogLoader from \"../components/DogLoader\";\r\nimport \"grapesjs/dist/css/grapes.min.css\";\r\nimport grapesjs from \"grapesjs\";\r\nimport \"grapesjs-preset-webpage\";\r\nimport \"grapesjs-blocks-basic\";\r\nimport \"../styles/CreateLanding.css\";\r\n\r\nconst { jwtDecode } = require(\"jwt-decode\");\r\n\r\nconst CreateLandingPage = () => {\r\n    // State management (unchanged)\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [success, setSuccess] = useState(null);\r\n    const [pageDescription, setPageDescription] = useState(\"\");\r\n    const [saveTime, setSaveTime] = useState(null);\r\n    const [aiModalOpen, setAiModalOpen] = useState(false);\r\n    const [aiHtml, setAiHtml] = useState(\"\");\r\n    const [aiThumbnail, setAiThumbnail] = useState(\"\");\r\n    const [aiImprovements, setAiImprovements] = useState([]);\r\n    const [originalHtml, setOriginalHtml] = useState(\"\");\r\n    const [isAutoSaving, setIsAutoSaving] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(null);\r\n    const [previewMode, setPreviewMode] = useState(false);\r\n    const [selectedDevice, setSelectedDevice] = useState(\"desktop\");\r\n    const [showShortcuts, setShowShortcuts] = useState(false);\r\n\r\n    // Refs (unchanged)\r\n    const editorRef = useRef(null);\r\n    const editorContainerRef = useRef(null);\r\n    const autoSaveTimeoutRef = useRef(null);\r\n\r\n    const navigate = useNavigate();\r\n    const { pageId } = useParams();\r\n\r\n    // Auth check (unchanged)\r\n    useEffect(() => {\r\n        const token = localStorage.getItem(\"token\");\r\n        if (!token) {\r\n            navigate(\"/auth\", { state: { from: location.pathname } });\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const decoded = jwtDecode(token);\r\n            const currentTime = Date.now() / 1000;\r\n\r\n            if (!decoded.userId) throw new Error(\"Invalid token - missing userId\");\r\n            if (decoded.exp < currentTime) throw new Error(\"Token expired\");\r\n\r\n            api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n        } catch (err) {\r\n            console.error(\"Auth error:\", err.message);\r\n            localStorage.removeItem(\"token\");\r\n            navigate(\"/auth\", { state: { from: location.pathname, error: \"Session expired\" } });\r\n        }\r\n    }, [navigate]);\r\n\r\n    // Load existing page (unchanged)\r\n    useEffect(() => {\r\n        if (pageId) {\r\n            loadExistingPage();\r\n        }\r\n    }, [pageId]);\r\n\r\n    const loadExistingPage = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await api.get(`/api/pages/${pageId}/content`);\r\n            setCurrentPage(response.data);\r\n\r\n            if (editorRef.current && response.data.html) {\r\n                const parser = new DOMParser();\r\n                const doc = parser.parseFromString(response.data.html, \"text/html\");\r\n                const bodyContent = doc.body.innerHTML;\r\n                const styleContent = doc.head.querySelector(\"style\")?.innerHTML || \"\";\r\n\r\n                editorRef.current.setComponents(bodyContent);\r\n                editorRef.current.setCss(styleContent);\r\n                setPageDescription(response.data.name || \"\");\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Load page error:\", err);\r\n            setError(\"Không thể tải nội dung trang: \" + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Enhanced GrapesJS initialization with full-screen canvas\r\n    useEffect(() => {\r\n        if (!editorRef.current && editorContainerRef.current) {\r\n            try {\r\n                editorRef.current = grapesjs.init({\r\n                    container: editorContainerRef.current,\r\n                    height: \"100vh\", // Full-screen height\r\n                    width: \"100%\", // Full-screen width\r\n                    fromElement: false,\r\n                    storageManager: false,\r\n                    plugins: [\"gjs-blocks-basic\", \"gjs-preset-webpage\"],\r\n                    pluginsOpts: {\r\n                        \"gjs-blocks-basic\": {\r\n                            blocks: [\"column1\", \"column2\", \"column3\", \"text\", \"link\", \"image\", \"video\"],\r\n                        },\r\n                        \"gjs-preset-webpage\": {\r\n                            modalImportTitle: \"Import Template\",\r\n                            modalImportLabel:\r\n                                '<div style=\"margin-bottom: 10px; font-size: 13px;\">Paste here your HTML/CSS and click Import</div>',\r\n                            modalImportContent: function (editor) {\r\n                                return editor.getHtml() + \"<style>\" + editor.getCss() + \"</style>\";\r\n                            },\r\n                        },\r\n                    },\r\n                    canvas: {\r\n                        styles: [\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\"],\r\n                        scripts: [],\r\n                    },\r\n                    blockManager: {\r\n                        appendTo: \".toolbox-container\", // Moved to left panel\r\n                    },\r\n                    styleManager: {\r\n                        appendTo: \".styles-container\", // Right panel\r\n                    },\r\n                    layerManager: {\r\n                        appendTo: \".layers-container\", // Right panel\r\n                    },\r\n                    deviceManager: {\r\n                        devices: [\r\n                            { name: \"Desktop\", width: \"\", id: \"desktop\" },\r\n                            { name: \"Tablet\", width: \"768px\", widthMedia: \"992px\", id: \"tablet\" },\r\n                            { name: \"Mobile portrait\", width: \"320px\", widthMedia: \"768px\", id: \"mobilePortrait\" },\r\n                        ],\r\n                    },\r\n                    panels: {\r\n                        defaults: [\r\n                            {\r\n                                id: \"styles\",\r\n                                el: \".styles-container\",\r\n                                resizable: {\r\n                                    maxDim: 350,\r\n                                    minDim: 200,\r\n                                    tc: 0,\r\n                                    cl: 1,\r\n                                    cr: 0,\r\n                                    bc: 0,\r\n                                    keyWidth: \"flex-basis\",\r\n                                },\r\n                            },\r\n                            {\r\n                                id: \"layers\",\r\n                                el: \".layers-container\",\r\n                                resizable: {\r\n                                    maxDim: 350,\r\n                                    minDim: 200,\r\n                                    tc: 0,\r\n                                    cl: 1,\r\n                                    cr: 0,\r\n                                    bc: 0,\r\n                                    keyWidth: \"flex-basis\",\r\n                                },\r\n                            },\r\n                        ],\r\n                    },\r\n                });\r\n\r\n                const debouncedAutoSave = debounce(() => handleAutoSave(), 800);\r\n                [\"update\", \"component:add\", \"component:remove\", \"component:update\"].forEach((event) =>\r\n                    editorRef.current.on(event, debouncedAutoSave)\r\n                );\r\n\r\n                editorRef.current.on(\"device:select\", (device) => setSelectedDevice(device.get(\"id\")));\r\n                loadDraft();\r\n            } catch (err) {\r\n                console.error(\"GrapesJS initialization error:\", err);\r\n                setError(\"Lỗi khởi tạo editor: \" + err.message);\r\n            }\r\n        }\r\n\r\n        return () => {\r\n            if (autoSaveTimeoutRef.current) clearTimeout(autoSaveTimeoutRef.current);\r\n        };\r\n    }, []);\r\n\r\n    // Debounce utility (unchanged)\r\n    const debounce = (func, wait) => {\r\n        return (...args) => {\r\n            clearTimeout(autoSaveTimeoutRef.current);\r\n            autoSaveTimeoutRef.current = setTimeout(() => func.apply(this, args), wait);\r\n        };\r\n    };\r\n\r\n    // Load draft (unchanged)\r\n    const loadDraft = useCallback(async () => {\r\n        try {\r\n            const draftKey = pageId ? `draft_${pageId}` : \"draft_new\";\r\n            const savedDraft = localStorage.getItem(draftKey);\r\n\r\n            if (savedDraft) {\r\n                const draft = JSON.parse(savedDraft);\r\n                const timeDiff = Date.now() - new Date(draft.timestamp).getTime();\r\n\r\n                if (timeDiff < 24 * 60 * 60 * 1000 && editorRef.current) {\r\n                    if (draft.html) editorRef.current.setComponents(draft.html);\r\n                    if (draft.css) editorRef.current.setCss(draft.css);\r\n                    setSuccess(\"Đã khôi phục bản nháp đã lưu\");\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.warn(\"Load draft error:\", err);\r\n        }\r\n    }, [pageId]);\r\n\r\n    // Handle auto-save (unchanged)\r\n    const handleAutoSave = useCallback(async () => {\r\n        if (!editorRef.current || isAutoSaving) return;\r\n\r\n        setIsAutoSaving(true);\r\n        try {\r\n            const html = editorRef.current.getHtml();\r\n            const css = editorRef.current.getCss();\r\n\r\n            const draftKey = pageId ? `draft_${pageId}` : \"draft_new\";\r\n            const draft = { html, css, timestamp: new Date().toISOString() };\r\n            localStorage.setItem(draftKey, JSON.stringify(draft));\r\n\r\n            if (pageId) {\r\n                await api.post(\"/api/pages/auto-save\", { html, css, pageId });\r\n            }\r\n\r\n            setSaveTime(new Date().toLocaleTimeString(\"vi-VN\"));\r\n        } catch (err) {\r\n            console.warn(\"Auto save error:\", err);\r\n        } finally {\r\n            setIsAutoSaving(false);\r\n        }\r\n    }, [pageId, isAutoSaving]);\r\n\r\n    // Clear messages (unchanged)\r\n    useEffect(() => {\r\n        if (error || success) {\r\n            const timer = setTimeout(() => {\r\n                setError(null);\r\n                setSuccess(null);\r\n            }, 5000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [error, success]);\r\n\r\n    // Handle reload editor (unchanged)\r\n    const handleReloadEditor = useCallback(() => {\r\n        if (editorRef.current) {\r\n            editorRef.current.destroy();\r\n            editorRef.current = null;\r\n            window.location.reload();\r\n        }\r\n    }, []);\r\n\r\n    // Handle export HTML (unchanged)\r\n    const handleExportHTML = useCallback(() => {\r\n        if (!editorRef.current) return;\r\n\r\n        try {\r\n            const html = editorRef.current.getHtml();\r\n            const css = editorRef.current.getCss();\r\n\r\n            const fullHtml = `<!DOCTYPE html>\r\n<html lang=\"vi\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <meta name=\"description\" content=\"${pageDescription || 'Landing Page tạo bởi LandingHub'}\">\r\n    <title>${pageDescription || 'Landing Page'}</title>\r\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\r\n    <style>\r\n        * { margin: 0; padding: 0; box-sizing: border-box; }\r\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; }\r\n        ${css}\r\n    </style>\r\n</head>\r\n<body>\r\n    ${html}\r\n    <script>\r\n        console.log('Landing page loaded at:', new Date());\r\n        document.querySelectorAll('form').forEach(form => {\r\n            form.addEventListener('submit', function(e) {\r\n                e.preventDefault();\r\n                alert('Form submitted! (Demo mode)');\r\n                console.log('Form data:', new FormData(this));\r\n            });\r\n        });\r\n        document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\r\n            anchor.addEventListener('click', function (e) {\r\n                e.preventDefault();\r\n                const target = document.querySelector(this.getAttribute('href'));\r\n                if (target) target.scrollIntoView({ behavior: 'smooth' });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n</html>`;\r\n\r\n            const blob = new Blob([fullHtml], { type: \"text/html;charset=utf-8\" });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement(\"a\");\r\n            a.href = url;\r\n            a.download = `${pageDescription || \"landing-page\"}.html`;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n            URL.revokeObjectURL(url);\r\n\r\n            setSuccess(\"Đã xuất file HTML thành công!\");\r\n        } catch (err) {\r\n            console.error(\"Export error:\", err);\r\n            setError(\"Lỗi khi xuất HTML: \" + err.message);\r\n        }\r\n    }, [pageDescription]);\r\n\r\n    // Handle AI refactor (unchanged)\r\n    const handleAiRefactor = useCallback(async () => {\r\n        if (!editorRef.current) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n            const html = editorRef.current.getHtml();\r\n            const css = editorRef.current.getCss();\r\n            const fullContent = html + (css ? `<style>${css}</style>` : \"\");\r\n\r\n            setOriginalHtml(fullContent);\r\n\r\n            const response = await api.post(\"/api/pages/ai-refactor\", { html: fullContent });\r\n\r\n            setAiHtml(response.data.html);\r\n            setAiThumbnail(response.data.thumbnail);\r\n            setAiImprovements(response.data.improvements || []);\r\n            setAiModalOpen(true);\r\n        } catch (err) {\r\n            console.error(\"AI Refactor error:\", err);\r\n            setError(\"Lỗi khi gọi AI Refactor: \" + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    // Handle accept AI (unchanged)\r\n    const handleAcceptAi = useCallback(() => {\r\n        if (!editorRef.current || !aiHtml) return;\r\n\r\n        try {\r\n            const parser = new DOMParser();\r\n            const doc = parser.parseFromString(aiHtml, \"text/html\");\r\n            const bodyContent = doc.body.innerHTML;\r\n            const styleElement = doc.head.querySelector(\"style\");\r\n            const cssContent = styleElement ? styleElement.innerHTML : \"\";\r\n\r\n            editorRef.current.setComponents(bodyContent);\r\n            if (cssContent) editorRef.current.setCss(cssContent);\r\n\r\n            handleAutoSave();\r\n            setAiModalOpen(false);\r\n            setSuccess(\"Đã áp dụng AI Refactor thành công!\");\r\n        } catch (err) {\r\n            console.error(\"Apply AI error:\", err);\r\n            setError(\"Lỗi khi áp dụng AI refactor: \" + err.message);\r\n        }\r\n    }, [aiHtml, handleAutoSave]);\r\n\r\n    // Handle create page (unchanged)\r\n    const handleCreatePage = useCallback(async () => {\r\n        if (!pageDescription?.trim()) {\r\n            setError(\"Vui lòng nhập mô tả landing page\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n\r\n            const response = await api.post(\"/api/pages\", { description: pageDescription.trim() });\r\n\r\n            if (response.data.html && editorRef.current) {\r\n                const parser = new DOMParser();\r\n                const doc = parser.parseFromString(response.data.html, \"text/html\");\r\n                const bodyContent = doc.body.innerHTML;\r\n                const styleContent = doc.head.querySelector(\"style\")?.innerHTML || \"\";\r\n\r\n                editorRef.current.setComponents(bodyContent);\r\n                if (styleContent) editorRef.current.setCss(styleContent);\r\n            }\r\n\r\n            setCurrentPage(response.data);\r\n            setSuccess(\"Tạo landing page thành công!\");\r\n\r\n            navigate(`/pages/edit/${response.data.id}`, {\r\n                state: { page: response.data, isNew: true },\r\n                replace: true,\r\n            });\r\n        } catch (err) {\r\n            console.error(\"Create error:\", err);\r\n            setError(\"Lỗi khi tạo landing page: \" + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [pageDescription, navigate]);\r\n\r\n    // Handle save page (unchanged)\r\n    const handleSavePage = useCallback(async () => {\r\n        if (!editorRef.current) return;\r\n\r\n        try {\r\n            setLoading(true);\r\n            const html = editorRef.current.getHtml();\r\n            const css = editorRef.current.getCss();\r\n\r\n            const fullHtml = `<!DOCTYPE html>\r\n<html lang=\"vi\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>${pageDescription || \"Landing Page\"}</title>\r\n    <style>${css}</style>\r\n</head>\r\n<body>\r\n    ${html}\r\n</body>\r\n</html>`;\r\n\r\n            let response;\r\n            if (pageId) {\r\n                response = await api.put(`/api/pages/${pageId}`, { html: fullHtml });\r\n            } else {\r\n                response = await api.post(\"/api/pages/save\", { html: fullHtml });\r\n            }\r\n\r\n            setCurrentPage(response.data);\r\n            setSaveTime(new Date().toLocaleTimeString(\"vi-VN\"));\r\n            setSuccess(\"Đã lưu trang thành công!\");\r\n\r\n            const draftKey = pageId ? `draft_${pageId}` : \"draft_new\";\r\n            localStorage.removeItem(draftKey);\r\n        } catch (err) {\r\n            console.error(\"Save error:\", err);\r\n            setError(\"Lỗi khi lưu trang: \" + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [pageId, pageDescription]);\r\n\r\n    // Handle preview page (unchanged)\r\n    const handlePreviewPage = useCallback(() => {\r\n        if (!editorRef.current) return;\r\n\r\n        const html = editorRef.current.getHtml();\r\n        const css = editorRef.current.getCss();\r\n\r\n        const previewWindow = window.open(\"\", \"_blank\");\r\n        previewWindow.document.write(`\r\n      <!DOCTYPE html>\r\n      <html lang=\"vi\">\r\n      <head>\r\n          <meta charset=\"UTF-8\">\r\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n          <title>Preview - ${pageDescription || \"Landing Page\"}</title>\r\n          <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\">\r\n          <style>\r\n              * { margin: 0; padding: 0; box-sizing: border-box; }\r\n              body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; }\r\n              ${css}\r\n          </style>\r\n      </head>\r\n      <body>\r\n          ${html}\r\n          <div style=\"position: fixed; top: 10px; right: 10px; background: #007bff; color: white; padding: 10px 15px; border-radius: 25px; z-index: 9999; font-size: 14px; box-shadow: 0 4px 12px rgba(0,123,255,0.3);\">\r\n              <i class=\"fa fa-eye\"></i> Preview Mode\r\n          </div>\r\n          <script>\r\n              document.querySelectorAll('form').forEach(form => {\r\n                  form.addEventListener('submit', function(e) {\r\n                      e.preventDefault();\r\n                      alert('Form submission (Preview mode)');\r\n                  });\r\n              });\r\n          </script>\r\n      </body>\r\n      </html>\r\n    `);\r\n        previewWindow.document.close();\r\n    }, [pageDescription]);\r\n\r\n    // Handle publish page (unchanged)\r\n    const handlePublishPage = useCallback(async () => {\r\n        if (!pageId) {\r\n            setError(\"Vui lòng lưu trang trước khi xuất bản\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            const response = await api.post(`/api/pages/${pageId}/publish`);\r\n\r\n            setCurrentPage(response.data);\r\n            setSuccess(`Trang đã được xuất bản tại: ${response.data.url}`);\r\n        } catch (err) {\r\n            console.error(\"Publish error:\", err);\r\n            setError(\"Lỗi khi xuất bản: \" + (err.response?.data?.error || err.message));\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [pageId]);\r\n\r\n    // Handle select template (unchanged)\r\n    const handleSelectTemplate = useCallback((templateId) => {\r\n        if (!editorRef.current) return;\r\n\r\n        const templates = {\r\n            blank: { html: \"<div>Bắt đầu từ trang trống</div>\", css: \"\" },\r\n            business: {\r\n                html: `\r\n          <div style=\"min-height: 100vh;\">\r\n              <header style=\"background: #2c3e50; color: white; padding: 20px 0; text-align: center;\">\r\n                  <h1>Doanh Nghiệp Của Bạn</h1>\r\n                  <p>Giải pháp chuyên nghiệp cho mọi nhu cầu</p>\r\n              </header>\r\n              <main style=\"padding: 60px 20px; text-align: center;\">\r\n                  <h2>Chào mừng đến với dịch vụ của chúng tôi</h2>\r\n                  <p style=\"margin: 20px 0; color: #666;\">Chúng tôi cung cấp giải pháp tốt nhất cho doanh nghiệp của bạn</p>\r\n                  <button style=\"background: #3498db; color: white; padding: 15px 30px; border: none; border-radius: 5px; font-size: 16px;\">Liên hệ ngay</button>\r\n              </main>\r\n          </div>\r\n        `,\r\n                css: `\r\n          body { font-family: 'Arial', sans-serif; margin: 0; }\r\n          button:hover { background: #2980b9 !important; }\r\n        `,\r\n            },\r\n            portfolio: {\r\n                html: `\r\n          <div style=\"min-height: 100vh; background: #f8f9fa;\">\r\n              <section style=\"padding: 100px 20px; text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;\">\r\n                  <h1 style=\"font-size: 3em; margin-bottom: 20px;\">Portfolio</h1>\r\n                  <p style=\"font-size: 1.2em;\">Showcase công việc và dự án của tôi</p>\r\n              </section>\r\n              <section style=\"padding: 80px 20px; text-align: center;\">\r\n                  <h2>Về tôi</h2>\r\n                  <p style=\"max-width: 600px; margin: 20px auto; color: #666;\">\r\n                      Tôi là một nhà thiết kế và phát triển với niềm đam mê tạo ra những trải nghiệm tuyệt vời.\r\n                  </p>\r\n              </section>\r\n          </div>\r\n        `,\r\n                css: `\r\n          body { font-family: 'Georgia', serif; margin: 0; line-height: 1.6; }\r\n        `,\r\n            },\r\n        };\r\n\r\n        const template = templates[templateId];\r\n        if (template) {\r\n            editorRef.current.setComponents(template.html);\r\n            editorRef.current.setCss(template.css);\r\n            setSuccess(`Đã tải template ${templateId}`);\r\n        }\r\n    }, []);\r\n\r\n    if (loading) return <DogLoader />;\r\n    \r\n\r\n};\r\n\r\nexport default CreateLandingPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}