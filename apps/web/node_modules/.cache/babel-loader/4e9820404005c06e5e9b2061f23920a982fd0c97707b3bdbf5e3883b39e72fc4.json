{"ast":null,"code":"class Sorter {\n  sort(tokens, fromIndex = 0) {\n    for (let i = 0, len = this.keys.length; i < len; i++) {\n      const key = this.keys[i];\n      const token = key.slice(1);\n      let index = tokens.indexOf(token, fromIndex);\n      if (index !== -1) {\n        do {\n          if (index !== fromIndex) {\n            tokens.splice(index, 1);\n            tokens.splice(fromIndex, 0, token);\n          }\n          fromIndex++;\n        } while ((index = tokens.indexOf(token, fromIndex)) !== -1);\n        return this[key].sort(tokens, fromIndex);\n      }\n    }\n    return tokens;\n  }\n}\nclass TokenChain {\n  add(tokens) {\n    tokens.forEach(token => {\n      const key = '$' + token;\n      if (!this[key]) {\n        this[key] = [];\n        this[key].processed = 0;\n      }\n      this[key].push(tokens);\n    });\n  }\n  createSorter() {\n    const sorter = new Sorter();\n    sorter.keys = Object.keys(this).sort((j, k) => {\n      const m = this[j].length;\n      const n = this[k].length;\n      return m < n ? 1 : m > n ? -1 : j < k ? -1 : j > k ? 1 : 0;\n    }).filter(key => {\n      if (this[key].processed < this[key].length) {\n        const token = key.slice(1);\n        const chain = new TokenChain();\n        this[key].forEach(tokens => {\n          let index;\n          while ((index = tokens.indexOf(token)) !== -1) {\n            tokens.splice(index, 1);\n          }\n          tokens.forEach(token => {\n            this['$' + token].processed++;\n          });\n          chain.add(tokens.slice(0));\n        });\n        sorter[key] = chain.createSorter();\n        return true;\n      }\n      return false;\n    });\n    return sorter;\n  }\n}\nexport default TokenChain;","map":{"version":3,"names":["Sorter","sort","tokens","fromIndex","i","len","keys","length","key","token","slice","index","indexOf","splice","TokenChain","add","forEach","processed","push","createSorter","sorter","Object","j","k","m","n","filter","chain"],"sources":["F:/landinghub-iconic/node_modules/.pnpm/html-minifier-terser@7.2.0/node_modules/html-minifier-terser/src/tokenchain.js"],"sourcesContent":["class Sorter {\n  sort(tokens, fromIndex = 0) {\n    for (let i = 0, len = this.keys.length; i < len; i++) {\n      const key = this.keys[i];\n      const token = key.slice(1);\n\n      let index = tokens.indexOf(token, fromIndex);\n\n      if (index !== -1) {\n        do {\n          if (index !== fromIndex) {\n            tokens.splice(index, 1);\n            tokens.splice(fromIndex, 0, token);\n          }\n          fromIndex++;\n        } while ((index = tokens.indexOf(token, fromIndex)) !== -1);\n\n        return this[key].sort(tokens, fromIndex);\n      }\n    }\n    return tokens;\n  }\n}\n\nclass TokenChain {\n  add(tokens) {\n    tokens.forEach((token) => {\n      const key = '$' + token;\n      if (!this[key]) {\n        this[key] = [];\n        this[key].processed = 0;\n      }\n      this[key].push(tokens);\n    });\n  }\n\n  createSorter() {\n    const sorter = new Sorter();\n\n    sorter.keys = Object.keys(this).sort((j, k) => {\n      const m = this[j].length;\n      const n = this[k].length;\n      return m < n ? 1 : m > n ? -1 : j < k ? -1 : j > k ? 1 : 0;\n    }).filter((key) => {\n      if (this[key].processed < this[key].length) {\n        const token = key.slice(1);\n        const chain = new TokenChain();\n\n        this[key].forEach((tokens) => {\n          let index;\n          while ((index = tokens.indexOf(token)) !== -1) {\n            tokens.splice(index, 1);\n          }\n          tokens.forEach((token) => {\n            this['$' + token].processed++;\n          });\n          chain.add(tokens.slice(0));\n        });\n        sorter[key] = chain.createSorter();\n        return true;\n      }\n      return false;\n    });\n    return sorter;\n  }\n}\n\nexport default TokenChain;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}