{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\n// Canvas.js\nimport React, { useRef, useCallback, useState, useEffect, useMemo } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport Guidelines from './Guidelines';\nimport SelectionOverlay from './SelectionOverlay';\nimport QuickEditToolkit from './QuickEditToolkit';\nimport '../../styles/CreateLanding.css';\nimport _ from 'lodash';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  ELEMENT: 'element',\n  EXISTING_ELEMENT: 'existingElement',\n  CHILD_ELEMENT: 'childElement'\n};\nconst getCanvasPosition = (mouseX, mouseY, containerElement, zoomLevel) => {\n  if (!containerElement) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  const rect = containerElement.getBoundingClientRect();\n  const scrollX = containerElement.scrollLeft || 0;\n  const scrollY = containerElement.scrollTop || 0;\n  const rawX = (mouseX - rect.left + scrollX) / (zoomLevel / 100);\n  const rawY = (mouseY - rect.top + scrollY) / (zoomLevel / 100);\n  return {\n    x: Math.max(0, rawX),\n    y: Math.max(0, rawY)\n  };\n};\nconst snapToGrid = (x, y, gridSize, snapPoints = []) => {\n  let snappedX = Math.round(x / gridSize) * gridSize;\n  let snappedY = Math.round(y / gridSize) * gridSize;\n  snapPoints.forEach(point => {\n    if (Math.abs(x - point.x) < 15) snappedX = point.x;\n    if (Math.abs(y - point.y) < 15) snappedY = point.y;\n  });\n  return {\n    x: snappedX,\n    y: snappedY\n  };\n};\nconst getElementBounds = element => {\n  var _element$position$des, _element$position$des2, _element$position$des3, _element$size, _element$position$des4, _element$size2, _element$position$des5, _element$size3, _element$position$des6, _element$size4;\n  return {\n    left: ((_element$position$des = element.position.desktop) === null || _element$position$des === void 0 ? void 0 : _element$position$des.x) || 0,\n    top: ((_element$position$des2 = element.position.desktop) === null || _element$position$des2 === void 0 ? void 0 : _element$position$des2.y) || 0,\n    right: (((_element$position$des3 = element.position.desktop) === null || _element$position$des3 === void 0 ? void 0 : _element$position$des3.x) || 0) + (((_element$size = element.size) === null || _element$size === void 0 ? void 0 : _element$size.width) || 200),\n    bottom: (((_element$position$des4 = element.position.desktop) === null || _element$position$des4 === void 0 ? void 0 : _element$position$des4.y) || 0) + (((_element$size2 = element.size) === null || _element$size2 === void 0 ? void 0 : _element$size2.height) || 50),\n    centerX: (((_element$position$des5 = element.position.desktop) === null || _element$position$des5 === void 0 ? void 0 : _element$position$des5.x) || 0) + (((_element$size3 = element.size) === null || _element$size3 === void 0 ? void 0 : _element$size3.width) || 200) / 2,\n    centerY: (((_element$position$des6 = element.position.desktop) === null || _element$position$des6 === void 0 ? void 0 : _element$position$des6.y) || 0) + (((_element$size4 = element.size) === null || _element$size4 === void 0 ? void 0 : _element$size4.height) || 50) / 2\n  };\n};\nconst renderComponentContent = (type, componentData = {}, styles = {}, children = [], dataStore, resolveDataBinding) => {\n  var _componentData$dragga;\n  if (!type || typeof type !== 'string') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"unknown-component\",\n      style: styles,\n      children: [\"Unknown Component: \", type || 'Không xác định']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this);\n  }\n  const boundContent = resolveDataBinding(componentData.content || '', dataStore);\n  if (type === 'container' || type === 'section' || type === 'group') {\n    const isLadi = componentData.layout === 'ladi-standard';\n    const className = isLadi ? 'ladi-section' : 'container';\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: className,\n      style: {\n        ...styles,\n        width: '100%',\n        height: '100%'\n      },\n      children: [isLadi && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ladi-section-background\",\n          style: {\n            backgroundColor: componentData.backgroundColor || 'transparent',\n            backgroundImage: componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ladi-overlay\",\n          style: {\n            backgroundColor: componentData.overlayColor || 'transparent',\n            opacity: componentData.overlayOpacity || 0\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: isLadi ? 'ladi-container' : '',\n        style: {\n          padding: componentData.padding || '20px'\n        },\n        children: children.map((child, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: child.marginBottom || '10px'\n          },\n          children: renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], dataStore, resolveDataBinding)\n        }, child.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this);\n  }\n  switch (type) {\n    case 'heading':\n      const headingLevel = componentData.level && ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(componentData.level) ? componentData.level : 'h2';\n      const HeadingTag = headingLevel;\n      return /*#__PURE__*/_jsxDEV(HeadingTag, {\n        className: \"heading\",\n        style: {\n          fontSize: componentData.fontSize,\n          color: componentData.color,\n          margin: componentData.margin,\n          padding: componentData.padding,\n          fontWeight: componentData.fontWeight,\n          textAlign: componentData.textAlign,\n          ...styles\n        },\n        children: boundContent || 'Tiêu đề'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this);\n    case 'paragraph':\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"paragraph\",\n        style: {\n          fontSize: componentData.fontSize,\n          color: componentData.color,\n          margin: componentData.margin,\n          padding: componentData.padding,\n          fontWeight: componentData.fontWeight,\n          lineHeight: componentData.lineHeight,\n          textAlign: componentData.textAlign,\n          ...styles\n        },\n        children: boundContent || 'Đoạn văn'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this);\n    case 'button':\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        style: {\n          padding: componentData.padding,\n          borderRadius: componentData.borderRadius,\n          background: componentData.background,\n          color: componentData.color,\n          border: componentData.border,\n          fontSize: componentData.fontSize,\n          fontWeight: componentData.fontWeight,\n          textAlign: componentData.textAlign,\n          ...styles\n        },\n        \"data-events\": JSON.stringify(componentData.events || {}),\n        children: boundContent || 'Nút'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }, this);\n    case 'image':\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        src: componentData.src || 'https://via.placeholder.com/150?text=Image',\n        alt: componentData.alt || 'Hình ảnh',\n        className: \"image\",\n        style: {\n          maxWidth: componentData.maxWidth,\n          height: componentData.height,\n          borderRadius: componentData.borderRadius,\n          ...styles\n        },\n        draggable: (_componentData$dragga = componentData.draggable) !== null && _componentData$dragga !== void 0 ? _componentData$dragga : false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this);\n    case 'form':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form\",\n        style: {\n          flexDirection: componentData.direction,\n          gap: componentData.gap,\n          ...styles\n        },\n        \"data-events\": JSON.stringify(componentData.events || {}),\n        children: [componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') && /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"form-title\",\n          style: {\n            margin: componentData.titleMargin,\n            fontSize: componentData.titleFontSize,\n            color: componentData.titleColor,\n            fontWeight: componentData.titleFontWeight\n          },\n          children: componentData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 25\n        }, this), Array.isArray(componentData.fields) && componentData.fields.length > 0 ? componentData.fields.map((field, index) => /*#__PURE__*/_jsxDEV(\"input\", {\n          type: field.type || 'text',\n          placeholder: field.placeholder || field.label || 'Nhập...',\n          className: \"form-input\",\n          style: {\n            padding: field.padding,\n            borderRadius: field.borderRadius,\n            border: field.border,\n            fontSize: field.fontSize\n          }\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 29\n        }, this)) : !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'input') && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: componentData.inputType || 'text',\n          placeholder: componentData.placeholder || 'Nhập...',\n          className: \"form-input\",\n          style: {\n            padding: componentData.inputPadding,\n            borderRadius: componentData.inputBorderRadius,\n            border: componentData.inputBorder,\n            fontSize: componentData.inputFontSize\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 29\n        }, this), !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"button\",\n          style: {\n            background: componentData.buttonBackground,\n            color: componentData.buttonColor,\n            padding: componentData.buttonPadding,\n            borderRadius: componentData.buttonBorderRadius,\n            border: componentData.buttonBorder,\n            fontSize: componentData.buttonFontSize,\n            fontWeight: componentData.buttonFontWeight\n          },\n          children: componentData.buttonText || 'Gửi'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }, this), Array.isArray(children) && children.length > 0 && children.map((child, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: child.marginBottom || '10px'\n          },\n          children: renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], dataStore, resolveDataBinding)\n        }, child.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }, this);\n    case 'divider':\n      return /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"divider\",\n        style: {\n          background: componentData.color,\n          height: componentData.thickness,\n          width: componentData.width,\n          margin: componentData.margin,\n          ...styles\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }, this);\n    case 'spacer':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spacer\",\n        style: {\n          background: componentData.background,\n          height: componentData.height,\n          width: componentData.width,\n          ...styles\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this);\n    case 'popup':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"popup\",\n        style: {\n          flexDirection: componentData.direction,\n          gap: componentData.gap,\n          textAlign: componentData.textAlign,\n          padding: componentData.padding,\n          background: componentData.background,\n          borderRadius: componentData.borderRadius,\n          ...styles\n        },\n        \"data-events\": JSON.stringify(componentData.events || {}),\n        children: [componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') && /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"heading\",\n          style: {\n            fontSize: componentData.titleFontSize,\n            margin: componentData.titleMargin,\n            color: componentData.titleColor,\n            fontWeight: componentData.titleFontWeight\n          },\n          children: componentData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 25\n        }, this), componentData.content && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"paragraph\",\n          style: {\n            fontSize: componentData.contentFontSize,\n            margin: componentData.contentMargin,\n            color: componentData.contentColor\n          },\n          children: boundContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 25\n        }, this), componentData.buttonText && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          style: {\n            padding: componentData.buttonPadding,\n            borderRadius: componentData.buttonBorderRadius,\n            background: componentData.buttonBackground,\n            color: componentData.buttonColor,\n            border: componentData.buttonBorder,\n            fontSize: componentData.buttonFontSize,\n            fontWeight: componentData.buttonFontWeight\n          },\n          children: componentData.buttonText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 25\n        }, this), Array.isArray(children) && children.length > 0 && children.map((child, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: child.marginBottom || '10px'\n          },\n          children: renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], dataStore, resolveDataBinding)\n        }, child.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 17\n      }, this);\n    case 'modal':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        style: {\n          flexDirection: componentData.direction,\n          gap: componentData.gap,\n          padding: componentData.padding,\n          background: componentData.background,\n          borderRadius: componentData.borderRadius,\n          ...styles\n        },\n        \"data-events\": JSON.stringify(componentData.events || {}),\n        children: [componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') && /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"heading\",\n          style: {\n            fontSize: componentData.titleFontSize,\n            margin: componentData.titleMargin,\n            color: componentData.titleColor,\n            fontWeight: componentData.titleFontWeight\n          },\n          children: componentData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 25\n        }, this), componentData.content && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"paragraph\",\n          style: {\n            fontSize: componentData.contentFontSize,\n            margin: componentData.contentMargin,\n            color: componentData.contentColor\n          },\n          children: boundContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 25\n        }, this), componentData.closeButton && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          style: {\n            padding: componentData.buttonPadding,\n            borderRadius: componentData.buttonBorderRadius,\n            background: componentData.buttonBackground || '#6b7280',\n            color: componentData.buttonColor,\n            border: componentData.buttonBorder,\n            alignSelf: 'flex-end',\n            fontSize: componentData.buttonFontSize,\n            fontWeight: componentData.buttonFontWeight\n          },\n          children: componentData.buttonText || 'Đóng'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 25\n        }, this), Array.isArray(children) && children.length > 0 && children.map((child, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: child.marginBottom || '10px'\n          },\n          children: renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], dataStore, resolveDataBinding)\n        }, child.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }, this);\n    default:\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"unknown-component\",\n        style: styles,\n        children: [\"Unknown Component: \", type]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 17\n      }, this);\n  }\n};\nconst ChildElement = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  parentId,\n  id,\n  type,\n  componentData = {},\n  styles = {},\n  isSelected,\n  onSelectChild,\n  zoomLevel,\n  gridSize,\n  showGrid,\n  onUpdateChildPosition,\n  onMoveChild,\n  position,\n  size,\n  viewMode,\n  setDragPreview,\n  dataStore,\n  resolveDataBinding\n}) => {\n  var _position$viewMode, _position$viewMode2;\n  _s();\n  const dragRef = useRef(null);\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: ItemTypes.CHILD_ELEMENT,\n    item: () => ({\n      childId: id,\n      parentId,\n      isExisting: true,\n      position,\n      size\n    }),\n    end: (item, monitor) => {\n      if (!monitor.didDrop()) {\n        setDragPreview(null);\n      }\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  }));\n  const handleClick = e => {\n    e.stopPropagation();\n    if (typeof onSelectChild === 'function') {\n      onSelectChild(parentId, id);\n    }\n  };\n  useEffect(() => {\n    drag(dragRef);\n  }, [drag]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `lpb-child-element ${isSelected ? 'lpb-child-element-selected' : ''} ${isDragging ? 'lpb-child-element-dragging' : ''}`,\n    style: {\n      position: 'absolute',\n      left: ((_position$viewMode = position[viewMode]) === null || _position$viewMode === void 0 ? void 0 : _position$viewMode.x) || 0,\n      top: ((_position$viewMode2 = position[viewMode]) === null || _position$viewMode2 === void 0 ? void 0 : _position$viewMode2.y) || 0,\n      width: (size === null || size === void 0 ? void 0 : size.width) || 200,\n      height: (size === null || size === void 0 ? void 0 : size.height) || 50,\n      zIndex: isDragging ? 1000 : position.z || 10,\n      cursor: isDragging ? 'grabbing' : 'grab',\n      opacity: isDragging ? 0.5 : 1,\n      ...styles\n    },\n    onClick: handleClick,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: dragRef,\n      children: renderComponentContent(type, componentData, styles, [], dataStore, resolveDataBinding)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 17\n    }, this), isSelected && /*#__PURE__*/_jsxDEV(QuickEditToolkit, {\n      element: {\n        id,\n        type,\n        styles\n      },\n      position: {\n        x: 0,\n        y: -40\n      },\n      onEdit: () => console.log('Edit child:', id),\n      onDuplicate: () => console.log('Duplicate child:', id),\n      onDelete: () => console.log('Delete child:', id),\n      onClose: () => onSelectChild(parentId, null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 394,\n    columnNumber: 13\n  }, this);\n}, \"69ZjtV8RmaixMExTxwxOB17H2zg=\", false, function () {\n  return [useDrag];\n}), (prev, next) => prev.id === next.id && prev.isSelected === next.isSelected), \"69ZjtV8RmaixMExTxwxOB17H2zg=\", false, function () {\n  return [useDrag];\n});\n_c2 = ChildElement;\nconst Element = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c3 = _s2(({\n  element,\n  isSelected,\n  onSelectElement,\n  onUpdatePosition,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  onContextMenu,\n  canvasBounds,\n  canvasRef,\n  onSelectChild,\n  selectedChildId,\n  onAddChild,\n  onUpdateChildPosition,\n  onMoveChild,\n  showGrid,\n  setDragPreview,\n  dataStore,\n  resolveDataBinding,\n  executeAction\n}) => {\n  var _position$viewMode3, _position$viewMode4;\n  _s2();\n  const {\n    id,\n    type,\n    componentData = {},\n    position = {},\n    size = {\n      width: 1200,\n      height: 400\n    },\n    styles = {},\n    children = []\n  } = element;\n  const elementRef = useRef(null);\n  const containerRef = useRef(null);\n  const handleMouseDown = useCallback(e => {\n    e.stopPropagation();\n    onSelectElement(id, e.ctrlKey);\n    onSelectChild(id, null);\n  }, [id, onSelectElement, onSelectChild]);\n  const handleContextMenu = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onContextMenu(id, {\n      x: e.clientX,\n      y: e.clientY\n    });\n  }, [id, onContextMenu]);\n  const snapPoints = [{\n    x: 0,\n    y: 0\n  }, {\n    x: size.width,\n    y: size.height\n  }, {\n    x: size.width / 2,\n    y: size.height / 2\n  }];\n  children.forEach(child => {\n    const bounds = getElementBounds(child);\n    snapPoints.push({\n      x: bounds.left,\n      y: bounds.top\n    }, {\n      x: bounds.right,\n      y: bounds.bottom\n    }, {\n      x: bounds.centerX,\n      y: bounds.centerY\n    }, {\n      x: bounds.left,\n      y: bounds.centerY\n    }, {\n      x: bounds.right,\n      y: bounds.centerY\n    }, {\n      x: bounds.centerX,\n      y: bounds.top\n    }, {\n      x: bounds.centerX,\n      y: bounds.bottom\n    });\n  });\n  if (type === 'container' && componentData.layout === 'ladi-standard') {\n    const [{\n      isOverContainer,\n      canDropContainer\n    }, drop] = useDrop(() => ({\n      accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\n      canDrop: (item, monitor) => {\n        if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT && item.parentId && item.parentId !== id) {\n          return false;\n        }\n        return true;\n      },\n      drop: (item, monitor) => {\n        if (!monitor.canDrop()) {\n          toast.error('Không thể thả vào container này!');\n          setDragPreview(null);\n          return {\n            moved: false\n          };\n        }\n        const clientOffset = monitor.getClientOffset();\n        if (!clientOffset || !containerRef.current) {\n          toast.error('Không thể xác định vị trí thả!');\n          setDragPreview(null);\n          return {\n            moved: false\n          };\n        }\n        const pos = getCanvasPosition(clientOffset.x, clientOffset.y, containerRef.current, zoomLevel);\n        const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n        if (monitor.getItemType() === ItemTypes.ELEMENT) {\n          const newId = `${item.id}-${Date.now()}`;\n          const newChild = {\n            id: newId,\n            type: item.json.type,\n            componentData: item.json.componentData || {},\n            position: {\n              [viewMode]: snapped,\n              desktop: snapped,\n              tablet: snapped,\n              mobile: snapped\n            },\n            size: item.json.size || {\n              width: 200,\n              height: 50\n            },\n            styles: item.json.styles || {},\n            children: []\n          };\n          onAddChild(id, newChild);\n          toast.success('Đã thêm thành phần con!');\n          setDragPreview(null);\n          return {\n            moved: true,\n            newPosition: snapped\n          };\n        } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n          if (item.parentId === id) {\n            onUpdateChildPosition(id, item.childId, snapped);\n            toast.success('Đã di chuyển thành phần con trong section!');\n          } else {\n            onMoveChild(item.parentId, item.childId, id, snapped);\n            toast.success('Đã di chuyển thành phần con sang section khác!');\n          }\n          setDragPreview(null);\n          return {\n            moved: true,\n            newPosition: snapped\n          };\n        }\n        setDragPreview(null);\n        return {\n          moved: false\n        };\n      },\n      collect: monitor => ({\n        isOverContainer: monitor.isOver(),\n        canDropContainer: monitor.canDrop()\n      })\n    }), [id, type, componentData, viewMode, zoomLevel, gridSize, showGrid, onAddChild, onUpdateChildPosition, onMoveChild]);\n    useEffect(() => {\n      drop(containerRef);\n    }, [drop]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: elementRef,\n      className: `lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''}`,\n      style: {\n        width: size.width,\n        height: size.height,\n        zIndex: position.z || 1,\n        ...styles\n      },\n      onMouseDown: handleMouseDown,\n      onContextMenu: handleContextMenu,\n      children: renderComponentContent(type, componentData, styles, children, dataStore, resolveDataBinding)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 17\n    }, this);\n  }\n  const [{\n    isDragging\n  }, drag, preview] = useDrag(() => ({\n    type: ItemTypes.EXISTING_ELEMENT,\n    item: () => ({\n      id,\n      elementSize: size,\n      elementPosition: position[viewMode] || {\n        x: 0,\n        y: 0\n      },\n      isExisting: true\n    }),\n    end: (item, monitor) => {\n      if (!monitor.didDrop()) {\n        setDragPreview(null);\n      }\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  }), [id, size, position, viewMode]);\n  useEffect(() => {\n    preview(getEmptyImage(), {\n      captureDraggingState: true\n    });\n  }, [preview]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: node => {\n      elementRef.current = node;\n      drag(node);\n    },\n    className: `lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`,\n    style: {\n      position: 'absolute',\n      transform: `translate(${((_position$viewMode3 = position[viewMode]) === null || _position$viewMode3 === void 0 ? void 0 : _position$viewMode3.x) || 0}px, ${((_position$viewMode4 = position[viewMode]) === null || _position$viewMode4 === void 0 ? void 0 : _position$viewMode4.y) || 0}px)`,\n      width: size.width,\n      height: size.height,\n      zIndex: position.z || 1,\n      opacity: isDragging ? 0.5 : 1,\n      cursor: isDragging ? 'grabbing' : 'grab',\n      ...styles\n    },\n    onMouseDown: handleMouseDown,\n    onContextMenu: handleContextMenu,\n    children: renderComponentContent(type, componentData, styles, children, dataStore, resolveDataBinding)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 583,\n    columnNumber: 13\n  }, this);\n}, \"O+/QKVrk7OnfSaV6CxKrKQ2YtiM=\", false, function () {\n  return [useDrop, useDrag];\n}), (prev, next) => prev.element.id === next.element.id && prev.isSelected === next.isSelected), \"O+/QKVrk7OnfSaV6CxKrKQ2YtiM=\", false, function () {\n  return [useDrop, useDrag];\n});\n_c4 = Element;\nconst Canvas = /*#__PURE__*/_s3(/*#__PURE__*/React.memo(_c5 = _s3(({\n  pageData,\n  selectedIds,\n  onSelectElement,\n  onUpdatePosition,\n  onUpdateSize,\n  onDeleteElement,\n  onAddElement,\n  onGroupElements,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  showGrid,\n  onEditElement,\n  onDuplicateElement,\n  onMoveElementUp,\n  onMoveElementDown,\n  onSelectChild,\n  selectedChildId,\n  onAddChild,\n  onUpdateChildPosition,\n  onMoveChild,\n  dataStore,\n  resolveDataBinding,\n  executeAction\n}) => {\n  _s3();\n  const canvasRef = useRef(null);\n  const [guidelines, setGuidelines] = useState([]);\n  const [contextMenu, setContextMenu] = useState(null);\n  const [dragPreview, setDragPreview] = useState(null);\n  const canvasBounds = canvasRef.current ? {\n    width: canvasRef.current.offsetWidth / (zoomLevel / 100),\n    height: canvasRef.current.offsetHeight / (zoomLevel / 100)\n  } : {\n    width: 1200,\n    height: 1000\n  };\n  const getSnapPoints = useCallback(() => {\n    const points = [{\n      x: 0,\n      y: 0\n    }, {\n      x: canvasBounds.width,\n      y: canvasBounds.height\n    }, {\n      x: canvasBounds.width / 2,\n      y: canvasBounds.height / 2\n    }];\n    pageData.elements.forEach(el => {\n      var _el$children;\n      const bounds = getElementBounds(el);\n      points.push({\n        x: bounds.left,\n        y: bounds.top\n      }, {\n        x: bounds.right,\n        y: bounds.bottom\n      }, {\n        x: bounds.centerX,\n        y: bounds.centerY\n      }, {\n        x: bounds.left,\n        y: bounds.centerY\n      }, {\n        x: bounds.right,\n        y: bounds.centerY\n      }, {\n        x: bounds.centerX,\n        y: bounds.top\n      }, {\n        x: bounds.centerX,\n        y: bounds.bottom\n      });\n      (_el$children = el.children) === null || _el$children === void 0 ? void 0 : _el$children.forEach(child => {\n        const childBounds = getElementBounds(child);\n        points.push({\n          x: childBounds.left,\n          y: childBounds.top\n        }, {\n          x: childBounds.right,\n          y: childBounds.bottom\n        }, {\n          x: childBounds.centerX,\n          y: childBounds.centerY\n        }, {\n          x: childBounds.left,\n          y: childBounds.centerY\n        }, {\n          x: childBounds.right,\n          y: childBounds.centerY\n        }, {\n          x: childBounds.centerX,\n          y: childBounds.top\n        }, {\n          x: childBounds.centerX,\n          y: childBounds.bottom\n        });\n      });\n    });\n    return points;\n  }, [pageData.elements, canvasBounds]);\n  const [{\n    isOver,\n    dragItem\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        setDragPreview(null);\n        return;\n      }\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef.current, zoomLevel);\n      const snapPoints = getSnapPoints();\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\n        setDragPreview({\n          id: 'preview',\n          x: snapped.x,\n          y: snapped.y,\n          size: item.json.size || {\n            width: 200,\n            height: 50\n          },\n          type: item.json.type,\n          componentData: item.json.componentData || {\n            layout: 'ladi-standard'\n          },\n          styles: item.json.styles\n        });\n      } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        var _pageData$elements$fi, _pageData$elements$fi2, _pageData$elements$fi3, _pageData$elements$fi4, _pageData$elements$fi5, _pageData$elements$fi6;\n        setDragPreview({\n          id: item.childId,\n          x: snapped.x,\n          y: snapped.y,\n          size: item.size || {\n            width: 200,\n            height: 50\n          },\n          type: (_pageData$elements$fi = pageData.elements.find(el => el.id === item.parentId)) === null || _pageData$elements$fi === void 0 ? void 0 : (_pageData$elements$fi2 = _pageData$elements$fi.children.find(child => child.id === item.childId)) === null || _pageData$elements$fi2 === void 0 ? void 0 : _pageData$elements$fi2.type,\n          componentData: (_pageData$elements$fi3 = pageData.elements.find(el => el.id === item.parentId)) === null || _pageData$elements$fi3 === void 0 ? void 0 : (_pageData$elements$fi4 = _pageData$elements$fi3.children.find(child => child.id === item.childId)) === null || _pageData$elements$fi4 === void 0 ? void 0 : _pageData$elements$fi4.componentData,\n          styles: (_pageData$elements$fi5 = pageData.elements.find(el => el.id === item.parentId)) === null || _pageData$elements$fi5 === void 0 ? void 0 : (_pageData$elements$fi6 = _pageData$elements$fi5.children.find(child => child.id === item.childId)) === null || _pageData$elements$fi6 === void 0 ? void 0 : _pageData$elements$fi6.styles\n        });\n      }\n      const newGuidelines = [];\n      pageData.elements.forEach(el => {\n        var _el$children2;\n        if (el.id === item.id) return;\n        const bounds = getElementBounds(el);\n        if (Math.abs(snapped.x - bounds.left) < 15) newGuidelines.push({\n          vertical: true,\n          position: bounds.left\n        });\n        if (Math.abs(snapped.x - bounds.right) < 15) newGuidelines.push({\n          vertical: true,\n          position: bounds.right\n        });\n        if (Math.abs(snapped.x - bounds.centerX) < 15) newGuidelines.push({\n          vertical: true,\n          position: bounds.centerX\n        });\n        if (Math.abs(snapped.y - bounds.top) < 15) newGuidelines.push({\n          vertical: false,\n          position: bounds.top\n        });\n        if (Math.abs(snapped.y - bounds.bottom) < 15) newGuidelines.push({\n          vertical: false,\n          position: bounds.bottom\n        });\n        if (Math.abs(snapped.y - bounds.centerY) < 15) newGuidelines.push({\n          vertical: false,\n          position: bounds.centerY\n        });\n        (_el$children2 = el.children) === null || _el$children2 === void 0 ? void 0 : _el$children2.forEach(child => {\n          const childBounds = getElementBounds(child);\n          if (Math.abs(snapped.x - childBounds.left) < 15) newGuidelines.push({\n            vertical: true,\n            position: childBounds.left\n          });\n          if (Math.abs(snapped.x - childBounds.right) < 15) newGuidelines.push({\n            vertical: true,\n            position: childBounds.right\n          });\n          if (Math.abs(snapped.x - childBounds.centerX) < 15) newGuidelines.push({\n            vertical: true,\n            position: childBounds.centerX\n          });\n          if (Math.abs(snapped.y - childBounds.top) < 15) newGuidelines.push({\n            vertical: false,\n            position: childBounds.top\n          });\n          if (Math.abs(snapped.y - childBounds.bottom) < 15) newGuidelines.push({\n            vertical: false,\n            position: childBounds.bottom\n          });\n          if (Math.abs(snapped.y - childBounds.centerY) < 15) newGuidelines.push({\n            vertical: false,\n            position: childBounds.centerY\n          });\n        });\n      });\n      if (Math.abs(snapped.x) < 15) newGuidelines.push({\n        vertical: true,\n        position: 0\n      });\n      if (Math.abs(snapped.x - canvasBounds.width) < 15) newGuidelines.push({\n        vertical: true,\n        position: canvasBounds.width\n      });\n      if (Math.abs(snapped.x - canvasBounds.width / 2) < 15) newGuidelines.push({\n        vertical: true,\n        position: canvasBounds.width / 2\n      });\n      if (Math.abs(snapped.y) < 15) newGuidelines.push({\n        vertical: false,\n        position: 0\n      });\n      if (Math.abs(snapped.y - canvasBounds.height) < 15) newGuidelines.push({\n        vertical: false,\n        position: canvasBounds.height\n      });\n      if (Math.abs(snapped.y - canvasBounds.height / 2) < 15) newGuidelines.push({\n        vertical: false,\n        position: canvasBounds.height / 2\n      });\n      setGuidelines(newGuidelines);\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả!');\n        setDragPreview(null);\n        setGuidelines([]);\n        return {\n          moved: false\n        };\n      }\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef.current, zoomLevel);\n      const snapPoints = getSnapPoints();\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        const sourceSection = pageData.elements.find(el => el.id === item.parentId);\n        if (!sourceSection) {\n          setDragPreview(null);\n          setGuidelines([]);\n          return {\n            moved: false\n          };\n        }\n        onMoveChild(item.parentId, item.childId, null, snapped);\n        toast.success('Đã di chuyển thành phần con ra canvas!');\n        setDragPreview(null);\n        setGuidelines([]);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      } else if (monitor.getItemType() === ItemTypes.ELEMENT) {\n        if (item.json.type !== 'container') {\n          toast.error('Chỉ có thể thả container lên canvas!');\n          setDragPreview(null);\n          setGuidelines([]);\n          return {\n            moved: false\n          };\n        }\n        const newElement = {\n          id: `${item.id}-${Date.now()}`,\n          type: item.json.type,\n          componentData: {\n            layout: 'ladi-standard'\n          },\n          position: {\n            [viewMode]: snapped,\n            desktop: snapped,\n            tablet: snapped,\n            mobile: snapped\n          },\n          size: item.json.size || {\n            width: 1200,\n            height: 400\n          },\n          styles: item.json.styles || {},\n          children: []\n        };\n        onAddElement(newElement);\n        toast.success('Đã thêm container mới!');\n        setDragPreview(null);\n        setGuidelines([]);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      }\n      setDragPreview(null);\n      setGuidelines([]);\n      return {\n        moved: false\n      };\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      dragItem: monitor.getItem()\n    })\n  }), [pageData.elements, viewMode, zoomLevel, gridSize, showGrid, canvasBounds, onAddElement, onMoveChild]);\n  const handleContextMenu = useCallback((id, position) => {\n    setContextMenu({\n      id,\n      position\n    });\n  }, []);\n  const handleCanvasClick = useCallback(e => {\n    if (e.target === canvasRef.current) {\n      onSelectElement([]);\n      onSelectChild(null, null);\n      setContextMenu(null);\n      setDragPreview(null);\n    }\n  }, [onSelectElement, onSelectChild]);\n  const handleKeyDown = useCallback(e => {\n    const ids = Array.isArray(selectedIds) ? selectedIds : [];\n    if (!ids.length) return;\n    e.preventDefault();\n    e.stopPropagation();\n    const step = e.shiftKey ? 10 : 1;\n    ids.forEach(id => {\n      var _element$position$vie5, _element$position$vie6;\n      const element = pageData.elements.find(el => el.id === id);\n      if (element && element.type !== 'container') {\n        var _element$position$vie, _element$position$vie2, _element$position$vie3, _element$position$vie4;\n        const newY = e.key === 'ArrowUp' ? Math.max(0, (((_element$position$vie = element.position[viewMode]) === null || _element$position$vie === void 0 ? void 0 : _element$position$vie.y) || 0) - step) : (((_element$position$vie2 = element.position[viewMode]) === null || _element$position$vie2 === void 0 ? void 0 : _element$position$vie2.y) || 0) + step;\n        const newX = e.key === 'ArrowLeft' ? Math.max(0, (((_element$position$vie3 = element.position[viewMode]) === null || _element$position$vie3 === void 0 ? void 0 : _element$position$vie3.x) || 0) - step) : (((_element$position$vie4 = element.position[viewMode]) === null || _element$position$vie4 === void 0 ? void 0 : _element$position$vie4.x) || 0) + step;\n        switch (e.key) {\n          case 'ArrowUp':\n          case 'ArrowDown':\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: ((_element$position$vie5 = element.position[viewMode]) === null || _element$position$vie5 === void 0 ? void 0 : _element$position$vie5.x) || 0,\n                y: newY\n              }\n            }, 'absolute');\n            break;\n          case 'ArrowLeft':\n          case 'ArrowRight':\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: newX,\n                y: ((_element$position$vie6 = element.position[viewMode]) === null || _element$position$vie6 === void 0 ? void 0 : _element$position$vie6.y) || 0\n              }\n            }, 'absolute');\n            break;\n          case 'Delete':\n          case 'Backspace':\n            onDeleteElement(id);\n            break;\n          case 'Escape':\n            onSelectElement([]);\n            onSelectChild(null, null);\n            setContextMenu(null);\n            setDragPreview(null);\n            break;\n          default:\n            break;\n        }\n      }\n    });\n  }, [selectedIds, onUpdatePosition, onDeleteElement, onSelectElement, onSelectChild, viewMode, pageData.elements]);\n  useHotkeys('ctrl+a', e => {\n    e.preventDefault();\n    onSelectElement(pageData.elements.map(el => el.id));\n  }, [pageData.elements, onSelectElement]);\n  useHotkeys('ctrl+g', e => {\n    e.preventDefault();\n    const ids = Array.isArray(selectedIds) ? selectedIds : [];\n    if (ids.length > 1) {\n      onGroupElements(ids);\n    }\n  }, [selectedIds, onGroupElements]);\n  useEffect(() => {\n    const handleClickOutside = () => {\n      setContextMenu(null);\n      setDragPreview(null);\n    };\n    if (contextMenu) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [contextMenu]);\n  const dragPreviewComponent = useMemo(() => {\n    if (!dragPreview) return null;\n    const {\n      x,\n      y,\n      size,\n      type,\n      componentData,\n      styles\n    } = dragPreview;\n    const previewStyle = {\n      transform: `translate(${x}px, ${y}px)`,\n      width: size.width,\n      height: size.height,\n      ...styles\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-drag-preview\",\n      style: previewStyle,\n      children: renderComponentContent(type, componentData || {}, {}, [], dataStore, resolveDataBinding)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 872,\n      columnNumber: 17\n    }, this);\n  }, [dragPreview, dataStore, resolveDataBinding]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lpb-canvas-wrapper\",\n    onKeyDown: handleKeyDown,\n    tabIndex: 0,\n    style: {\n      outline: 'none'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        canvasRef.current = node;\n        drop(node);\n      },\n      className: `lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`,\n      onClick: handleCanvasClick,\n      children: [/*#__PURE__*/_jsxDEV(Guidelines, {\n        guidelines: guidelines,\n        zoomLevel: zoomLevel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 887,\n        columnNumber: 21\n      }, this), pageData.elements.map(element => /*#__PURE__*/_jsxDEV(Element, {\n        element: element,\n        isSelected: selectedIds.includes(element.id),\n        onSelectElement: onSelectElement,\n        onUpdatePosition: onUpdatePosition,\n        viewMode: viewMode,\n        zoomLevel: zoomLevel,\n        gridSize: gridSize,\n        onContextMenu: handleContextMenu,\n        canvasBounds: canvasBounds,\n        canvasRef: canvasRef,\n        onSelectChild: onSelectChild,\n        selectedChildId: selectedChildId,\n        onAddChild: onAddChild,\n        onUpdateChildPosition: onUpdateChildPosition,\n        onMoveChild: onMoveChild,\n        showGrid: showGrid,\n        setDragPreview: setDragPreview,\n        dataStore: dataStore,\n        resolveDataBinding: resolveDataBinding,\n        executeAction: executeAction\n      }, element.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 889,\n        columnNumber: 25\n      }, this)), dragPreviewComponent, /*#__PURE__*/_jsxDEV(SelectionOverlay, {\n        selectedElements: pageData.elements.filter(el => Array.isArray(selectedIds) && selectedIds.includes(el.id)),\n        onResize: onUpdateSize,\n        zoomLevel: zoomLevel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 914,\n        columnNumber: 21\n      }, this), contextMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-context-menu\",\n        style: {\n          position: 'fixed',\n          left: contextMenu.position.x,\n          top: contextMenu.position.y,\n          zIndex: 10000,\n          background: '#fff',\n          border: '1px solid #ccc',\n          borderRadius: '4px',\n          boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n          minWidth: '120px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-context-menu-item\",\n          style: {\n            padding: '8px 12px',\n            cursor: 'pointer'\n          },\n          onClick: () => {\n            onDeleteElement(contextMenu.id);\n            setContextMenu(null);\n          },\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 934,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-context-menu-item\",\n          style: {\n            padding: '8px 12px',\n            cursor: 'pointer'\n          },\n          onClick: () => {\n            onGroupElements([contextMenu.id]);\n            setContextMenu(null);\n          },\n          children: \"Group\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 944,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 920,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 879,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 878,\n    columnNumber: 13\n  }, this);\n}, \"9CnTfTIsRtAI3JYTrbF1u0tytgI=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys];\n}), (prev, next) => _.isEqual(prev.pageData, next.pageData) && prev.selectedIds === next.selectedIds), \"9CnTfTIsRtAI3JYTrbF1u0tytgI=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys];\n});\n_c6 = Canvas;\nexport default Canvas;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"ChildElement$React.memo\");\n$RefreshReg$(_c2, \"ChildElement\");\n$RefreshReg$(_c3, \"Element$React.memo\");\n$RefreshReg$(_c4, \"Element\");\n$RefreshReg$(_c5, \"Canvas$React.memo\");\n$RefreshReg$(_c6, \"Canvas\");","map":{"version":3,"names":["React","useRef","useCallback","useState","useEffect","useMemo","useDrop","useDrag","getEmptyImage","useHotkeys","toast","Guidelines","SelectionOverlay","QuickEditToolkit","_","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemTypes","ELEMENT","EXISTING_ELEMENT","CHILD_ELEMENT","getCanvasPosition","mouseX","mouseY","containerElement","zoomLevel","x","y","rect","getBoundingClientRect","scrollX","scrollLeft","scrollY","scrollTop","rawX","left","rawY","top","Math","max","snapToGrid","gridSize","snapPoints","snappedX","round","snappedY","forEach","point","abs","getElementBounds","element","_element$position$des","_element$position$des2","_element$position$des3","_element$size","_element$position$des4","_element$size2","_element$position$des5","_element$size3","_element$position$des6","_element$size4","position","desktop","right","size","width","bottom","height","centerX","centerY","renderComponentContent","type","componentData","styles","children","dataStore","resolveDataBinding","_componentData$dragga","className","style","fileName","_jsxFileName","lineNumber","columnNumber","boundContent","content","isLadi","layout","backgroundColor","backgroundImage","overlayColor","opacity","overlayOpacity","padding","map","child","index","marginBottom","id","headingLevel","level","includes","HeadingTag","fontSize","color","margin","fontWeight","textAlign","lineHeight","borderRadius","background","border","JSON","stringify","events","src","alt","maxWidth","draggable","flexDirection","direction","gap","title","some","titleMargin","titleFontSize","titleColor","titleFontWeight","Array","isArray","fields","length","field","placeholder","label","inputType","inputPadding","inputBorderRadius","inputBorder","inputFontSize","buttonBackground","buttonColor","buttonPadding","buttonBorderRadius","buttonBorder","buttonFontSize","buttonFontWeight","buttonText","thickness","contentFontSize","contentMargin","contentColor","closeButton","alignSelf","ChildElement","_s","memo","_c","parentId","isSelected","onSelectChild","showGrid","onUpdateChildPosition","onMoveChild","viewMode","setDragPreview","_position$viewMode","_position$viewMode2","dragRef","isDragging","drag","item","childId","isExisting","end","monitor","didDrop","collect","handleClick","e","stopPropagation","zIndex","z","cursor","onClick","ref","onEdit","console","log","onDuplicate","onDelete","onClose","prev","next","_c2","Element","_s2","_c3","onSelectElement","onUpdatePosition","onContextMenu","canvasBounds","canvasRef","selectedChildId","onAddChild","executeAction","_position$viewMode3","_position$viewMode4","elementRef","containerRef","handleMouseDown","ctrlKey","handleContextMenu","preventDefault","clientX","clientY","bounds","push","isOverContainer","canDropContainer","drop","accept","canDrop","getItemType","error","moved","clientOffset","getClientOffset","current","pos","snapped","Infinity","newId","Date","now","newChild","json","tablet","mobile","success","newPosition","isOver","onMouseDown","preview","elementSize","elementPosition","captureDraggingState","node","transform","_c4","Canvas","_s3","_c5","pageData","selectedIds","onUpdateSize","onDeleteElement","onAddElement","onGroupElements","onEditElement","onDuplicateElement","onMoveElementUp","onMoveElementDown","guidelines","setGuidelines","contextMenu","setContextMenu","dragPreview","offsetWidth","offsetHeight","getSnapPoints","points","elements","el","_el$children","childBounds","dragItem","hover","_pageData$elements$fi","_pageData$elements$fi2","_pageData$elements$fi3","_pageData$elements$fi4","_pageData$elements$fi5","_pageData$elements$fi6","find","newGuidelines","_el$children2","vertical","sourceSection","newElement","getItem","handleCanvasClick","target","handleKeyDown","ids","step","shiftKey","_element$position$vie5","_element$position$vie6","_element$position$vie","_element$position$vie2","_element$position$vie3","_element$position$vie4","newY","key","newX","handleClickOutside","document","addEventListener","removeEventListener","dragPreviewComponent","previewStyle","onKeyDown","tabIndex","outline","selectedElements","filter","onResize","boxShadow","minWidth","isEqual","_c6","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["// Canvas.js\r\nimport React, { useRef, useCallback, useState, useEffect, useMemo } from 'react';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport { getEmptyImage } from 'react-dnd-html5-backend';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport Guidelines from './Guidelines';\r\nimport SelectionOverlay from './SelectionOverlay';\r\nimport QuickEditToolkit from './QuickEditToolkit';\r\nimport '../../styles/CreateLanding.css';\r\nimport _ from 'lodash';\r\n\r\nconst ItemTypes = {\r\n    ELEMENT: 'element',\r\n    EXISTING_ELEMENT: 'existingElement',\r\n    CHILD_ELEMENT: 'childElement',\r\n};\r\n\r\nconst getCanvasPosition = (mouseX, mouseY, containerElement, zoomLevel) => {\r\n    if (!containerElement) {\r\n        return { x: 0, y: 0 };\r\n    }\r\n    const rect = containerElement.getBoundingClientRect();\r\n    const scrollX = containerElement.scrollLeft || 0;\r\n    const scrollY = containerElement.scrollTop || 0;\r\n    const rawX = (mouseX - rect.left + scrollX) / (zoomLevel / 100);\r\n    const rawY = (mouseY - rect.top + scrollY) / (zoomLevel / 100);\r\n    return { x: Math.max(0, rawX), y: Math.max(0, rawY) };\r\n};\r\n\r\nconst snapToGrid = (x, y, gridSize, snapPoints = []) => {\r\n    let snappedX = Math.round(x / gridSize) * gridSize;\r\n    let snappedY = Math.round(y / gridSize) * gridSize;\r\n    snapPoints.forEach((point) => {\r\n        if (Math.abs(x - point.x) < 15) snappedX = point.x;\r\n        if (Math.abs(y - point.y) < 15) snappedY = point.y;\r\n    });\r\n    return { x: snappedX, y: snappedY };\r\n};\r\n\r\nconst getElementBounds = (element) => ({\r\n    left: element.position.desktop?.x || 0,\r\n    top: element.position.desktop?.y || 0,\r\n    right: (element.position.desktop?.x || 0) + (element.size?.width || 200),\r\n    bottom: (element.position.desktop?.y || 0) + (element.size?.height || 50),\r\n    centerX: (element.position.desktop?.x || 0) + (element.size?.width || 200) / 2,\r\n    centerY: (element.position.desktop?.y || 0) + (element.size?.height || 50) / 2,\r\n});\r\n\r\nconst renderComponentContent = (type, componentData = {}, styles = {}, children = [], dataStore, resolveDataBinding) => {\r\n    if (!type || typeof type !== 'string') {\r\n        return (\r\n            <div className=\"unknown-component\" style={styles}>\r\n                Unknown Component: {type || 'Không xác định'}\r\n            </div>\r\n        );\r\n    }\r\n    const boundContent = resolveDataBinding(componentData.content || '', dataStore);\r\n    if (type === 'container' || type === 'section' || type === 'group') {\r\n        const isLadi = componentData.layout === 'ladi-standard';\r\n        const className = isLadi ? 'ladi-section' : 'container';\r\n        return (\r\n            <div className={className} style={{ ...styles, width: '100%', height: '100%' }}>\r\n                {isLadi && (\r\n                    <>\r\n                        <div className=\"ladi-section-background\" style={{\r\n                            backgroundColor: componentData.backgroundColor || 'transparent',\r\n                            backgroundImage: componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none',\r\n                        }}></div>\r\n                        <div className=\"ladi-overlay\" style={{\r\n                            backgroundColor: componentData.overlayColor || 'transparent',\r\n                            opacity: componentData.overlayOpacity || 0,\r\n                        }}></div>\r\n                    </>\r\n                )}\r\n                <div className={isLadi ? 'ladi-container' : ''} style={{\r\n                    padding: componentData.padding || '20px',\r\n                }}>\r\n                    {children.map((child, index) => (\r\n                        <div key={child.id || index} style={{ marginBottom: child.marginBottom || '10px' }}>\r\n                            {renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], dataStore, resolveDataBinding)}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    switch (type) {\r\n        case 'heading':\r\n            const headingLevel = componentData.level && ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(componentData.level) ? componentData.level : 'h2';\r\n            const HeadingTag = headingLevel;\r\n            return (\r\n                <HeadingTag className=\"heading\" style={{\r\n                    fontSize: componentData.fontSize,\r\n                    color: componentData.color,\r\n                    margin: componentData.margin,\r\n                    padding: componentData.padding,\r\n                    fontWeight: componentData.fontWeight,\r\n                    textAlign: componentData.textAlign,\r\n                    ...styles\r\n                }}>\r\n                    {boundContent || 'Tiêu đề'}\r\n                </HeadingTag>\r\n            );\r\n        case 'paragraph':\r\n            return (\r\n                <p className=\"paragraph\" style={{\r\n                    fontSize: componentData.fontSize,\r\n                    color: componentData.color,\r\n                    margin: componentData.margin,\r\n                    padding: componentData.padding,\r\n                    fontWeight: componentData.fontWeight,\r\n                    lineHeight: componentData.lineHeight,\r\n                    textAlign: componentData.textAlign,\r\n                    ...styles\r\n                }}>\r\n                    {boundContent || 'Đoạn văn'}\r\n                </p>\r\n            );\r\n        case 'button':\r\n            return (\r\n                <button className=\"button\" style={{\r\n                    padding: componentData.padding,\r\n                    borderRadius: componentData.borderRadius,\r\n                    background: componentData.background,\r\n                    color: componentData.color,\r\n                    border: componentData.border,\r\n                    fontSize: componentData.fontSize,\r\n                    fontWeight: componentData.fontWeight,\r\n                    textAlign: componentData.textAlign,\r\n                    ...styles\r\n                }} data-events={JSON.stringify(componentData.events || {})}>\r\n                    {boundContent || 'Nút'}\r\n                </button>\r\n            );\r\n        case 'image':\r\n            return (\r\n                <img\r\n                    src={componentData.src || 'https://via.placeholder.com/150?text=Image'}\r\n                    alt={componentData.alt || 'Hình ảnh'}\r\n                    className=\"image\"\r\n                    style={{\r\n                        maxWidth: componentData.maxWidth,\r\n                        height: componentData.height,\r\n                        borderRadius: componentData.borderRadius,\r\n                        ...styles\r\n                    }}\r\n                    draggable={componentData.draggable ?? false}\r\n                />\r\n            );\r\n        case 'form':\r\n            return (\r\n                <div className=\"form\" style={{\r\n                    flexDirection: componentData.direction,\r\n                    gap: componentData.gap,\r\n                    ...styles\r\n                }} data-events={JSON.stringify(componentData.events || {})}>\r\n                    {componentData.title && !children.some(child => child?.type === 'heading') && (\r\n                        <h3 className=\"form-title\" style={{\r\n                            margin: componentData.titleMargin,\r\n                            fontSize: componentData.titleFontSize,\r\n                            color: componentData.titleColor,\r\n                            fontWeight: componentData.titleFontWeight\r\n                        }}>\r\n                            {componentData.title}\r\n                        </h3>\r\n                    )}\r\n                    {Array.isArray(componentData.fields) && componentData.fields.length > 0 ? (\r\n                        componentData.fields.map((field, index) => (\r\n                            <input\r\n                                key={index}\r\n                                type={field.type || 'text'}\r\n                                placeholder={field.placeholder || field.label || 'Nhập...'}\r\n                                className=\"form-input\"\r\n                                style={{\r\n                                    padding: field.padding,\r\n                                    borderRadius: field.borderRadius,\r\n                                    border: field.border,\r\n                                    fontSize: field.fontSize\r\n                                }}\r\n                            />\r\n                        ))\r\n                    ) : (\r\n                        !children.some(child => child?.type === 'input') && (\r\n                            <input\r\n                                type={componentData.inputType || 'text'}\r\n                                placeholder={componentData.placeholder || 'Nhập...'}\r\n                                className=\"form-input\"\r\n                                style={{\r\n                                    padding: componentData.inputPadding,\r\n                                    borderRadius: componentData.inputBorderRadius,\r\n                                    border: componentData.inputBorder,\r\n                                    fontSize: componentData.inputFontSize\r\n                                }}\r\n                            />\r\n                        )\r\n                    )}\r\n                    {!children.some(child => child?.type === 'button') && (\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"button\"\r\n                            style={{\r\n                                background: componentData.buttonBackground,\r\n                                color: componentData.buttonColor,\r\n                                padding: componentData.buttonPadding,\r\n                                borderRadius: componentData.buttonBorderRadius,\r\n                                border: componentData.buttonBorder,\r\n                                fontSize: componentData.buttonFontSize,\r\n                                fontWeight: componentData.buttonFontWeight\r\n                            }}\r\n                        >\r\n                            {componentData.buttonText || 'Gửi'}\r\n                        </button>\r\n                    )}\r\n                    {Array.isArray(children) && children.length > 0 && children.map((child, index) => (\r\n                        <div key={child.id || index} style={{ marginBottom: child.marginBottom || '10px' }}>\r\n                            {renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], dataStore, resolveDataBinding)}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            );\r\n        case 'divider':\r\n            return (\r\n                <hr className=\"divider\" style={{\r\n                    background: componentData.color,\r\n                    height: componentData.thickness,\r\n                    width: componentData.width,\r\n                    margin: componentData.margin,\r\n                    ...styles\r\n                }} />\r\n            );\r\n        case 'spacer':\r\n            return (\r\n                <div className=\"spacer\" style={{\r\n                    background: componentData.background,\r\n                    height: componentData.height,\r\n                    width: componentData.width,\r\n                    ...styles\r\n                }} />\r\n            );\r\n        case 'popup':\r\n            return (\r\n                <div className=\"popup\" style={{\r\n                    flexDirection: componentData.direction,\r\n                    gap: componentData.gap,\r\n                    textAlign: componentData.textAlign,\r\n                    padding: componentData.padding,\r\n                    background: componentData.background,\r\n                    borderRadius: componentData.borderRadius,\r\n                    ...styles\r\n                }} data-events={JSON.stringify(componentData.events || {})}>\r\n                    {componentData.title && !children.some(child => child?.type === 'heading') && (\r\n                        <h3 className=\"heading\" style={{\r\n                            fontSize: componentData.titleFontSize,\r\n                            margin: componentData.titleMargin,\r\n                            color: componentData.titleColor,\r\n                            fontWeight: componentData.titleFontWeight\r\n                        }}>\r\n                            {componentData.title}\r\n                        </h3>\r\n                    )}\r\n                    {componentData.content && !children.some(child => child?.type === 'paragraph') && (\r\n                        <p className=\"paragraph\" style={{\r\n                            fontSize: componentData.contentFontSize,\r\n                            margin: componentData.contentMargin,\r\n                            color: componentData.contentColor\r\n                        }}>\r\n                            {boundContent}\r\n                        </p>\r\n                    )}\r\n                    {componentData.buttonText && !children.some(child => child?.type === 'button') && (\r\n                        <button className=\"button\" style={{\r\n                            padding: componentData.buttonPadding,\r\n                            borderRadius: componentData.buttonBorderRadius,\r\n                            background: componentData.buttonBackground,\r\n                            color: componentData.buttonColor,\r\n                            border: componentData.buttonBorder,\r\n                            fontSize: componentData.buttonFontSize,\r\n                            fontWeight: componentData.buttonFontWeight\r\n                        }}>\r\n                            {componentData.buttonText}\r\n                        </button>\r\n                    )}\r\n                    {Array.isArray(children) && children.length > 0 && children.map((child, index) => (\r\n                        <div key={child.id || index} style={{ marginBottom: child.marginBottom || '10px' }}>\r\n                            {renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], dataStore, resolveDataBinding)}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            );\r\n        case 'modal':\r\n            return (\r\n                <div className=\"modal\" style={{\r\n                    flexDirection: componentData.direction,\r\n                    gap: componentData.gap,\r\n                    padding: componentData.padding,\r\n                    background: componentData.background,\r\n                    borderRadius: componentData.borderRadius,\r\n                    ...styles\r\n                }} data-events={JSON.stringify(componentData.events || {})}>\r\n                    {componentData.title && !children.some(child => child?.type === 'heading') && (\r\n                        <h3 className=\"heading\" style={{\r\n                            fontSize: componentData.titleFontSize,\r\n                            margin: componentData.titleMargin,\r\n                            color: componentData.titleColor,\r\n                            fontWeight: componentData.titleFontWeight\r\n                        }}>\r\n                            {componentData.title}\r\n                        </h3>\r\n                    )}\r\n                    {componentData.content && !children.some(child => child?.type === 'paragraph') && (\r\n                        <p className=\"paragraph\" style={{\r\n                            fontSize: componentData.contentFontSize,\r\n                            margin: componentData.contentMargin,\r\n                            color: componentData.contentColor\r\n                        }}>\r\n                            {boundContent}\r\n                        </p>\r\n                    )}\r\n                    {componentData.closeButton && !children.some(child => child?.type === 'button') && (\r\n                        <button className=\"button\" style={{\r\n                            padding: componentData.buttonPadding,\r\n                            borderRadius: componentData.buttonBorderRadius,\r\n                            background: componentData.buttonBackground || '#6b7280',\r\n                            color: componentData.buttonColor,\r\n                            border: componentData.buttonBorder,\r\n                            alignSelf: 'flex-end',\r\n                            fontSize: componentData.buttonFontSize,\r\n                            fontWeight: componentData.buttonFontWeight\r\n                        }}>\r\n                            {componentData.buttonText || 'Đóng'}\r\n                        </button>\r\n                    )}\r\n                    {Array.isArray(children) && children.length > 0 && children.map((child, index) => (\r\n                        <div key={child.id || index} style={{ marginBottom: child.marginBottom || '10px' }}>\r\n                            {renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], dataStore, resolveDataBinding)}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            );\r\n        default:\r\n            return (\r\n                <div className=\"unknown-component\" style={styles}>\r\n                    Unknown Component: {type}\r\n                </div>\r\n            );\r\n    }\r\n};\r\n\r\nconst ChildElement = React.memo(\r\n    ({\r\n         parentId,\r\n         id,\r\n         type,\r\n         componentData = {},\r\n         styles = {},\r\n         isSelected,\r\n         onSelectChild,\r\n         zoomLevel,\r\n         gridSize,\r\n         showGrid,\r\n         onUpdateChildPosition,\r\n         onMoveChild,\r\n         position,\r\n         size,\r\n         viewMode,\r\n         setDragPreview,\r\n         dataStore,\r\n         resolveDataBinding,\r\n     }) => {\r\n        const dragRef = useRef(null);\r\n        const [{ isDragging }, drag] = useDrag(() => ({\r\n            type: ItemTypes.CHILD_ELEMENT,\r\n            item: () => ({ childId: id, parentId, isExisting: true, position, size }),\r\n            end: (item, monitor) => {\r\n                if (!monitor.didDrop()) {\r\n                    setDragPreview(null);\r\n                }\r\n            },\r\n            collect: (monitor) => ({\r\n                isDragging: monitor.isDragging(),\r\n            }),\r\n        }));\r\n        const handleClick = (e) => {\r\n            e.stopPropagation();\r\n            if (typeof onSelectChild === 'function') {\r\n                onSelectChild(parentId, id);\r\n            }\r\n        };\r\n        useEffect(() => {\r\n            drag(dragRef);\r\n        }, [drag]);\r\n        return (\r\n            <div\r\n                className={`lpb-child-element ${isSelected ? 'lpb-child-element-selected' : ''} ${isDragging ? 'lpb-child-element-dragging' : ''}`}\r\n                style={{\r\n                    position: 'absolute',\r\n                    left: position[viewMode]?.x || 0,\r\n                    top: position[viewMode]?.y || 0,\r\n                    width: size?.width || 200,\r\n                    height: size?.height || 50,\r\n                    zIndex: isDragging ? 1000 : (position.z || 10),\r\n                    cursor: isDragging ? 'grabbing' : 'grab',\r\n                    opacity: isDragging ? 0.5 : 1,\r\n                    ...styles,\r\n                }}\r\n                onClick={handleClick}\r\n            >\r\n                <div ref={dragRef}>\r\n                    {renderComponentContent(type, componentData, styles, [], dataStore, resolveDataBinding)}\r\n                </div>\r\n                {isSelected && (\r\n                    <QuickEditToolkit\r\n                        element={{ id, type, styles }}\r\n                        position={{ x: 0, y: -40 }}\r\n                        onEdit={() => console.log('Edit child:', id)}\r\n                        onDuplicate={() => console.log('Duplicate child:', id)}\r\n                        onDelete={() => console.log('Delete child:', id)}\r\n                        onClose={() => onSelectChild(parentId, null)}\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n    }, (prev, next) => prev.id === next.id && prev.isSelected === next.isSelected\r\n);\r\n\r\nconst Element = React.memo(\r\n    ({\r\n         element,\r\n         isSelected,\r\n         onSelectElement,\r\n         onUpdatePosition,\r\n         viewMode,\r\n         zoomLevel,\r\n         gridSize,\r\n         onContextMenu,\r\n         canvasBounds,\r\n         canvasRef,\r\n         onSelectChild,\r\n         selectedChildId,\r\n         onAddChild,\r\n         onUpdateChildPosition,\r\n         onMoveChild,\r\n         showGrid,\r\n         setDragPreview,\r\n         dataStore,\r\n         resolveDataBinding,\r\n         executeAction,\r\n     }) => {\r\n        const { id, type, componentData = {}, position = {}, size = { width: 1200, height: 400 }, styles = {}, children = [] } = element;\r\n        const elementRef = useRef(null);\r\n        const containerRef = useRef(null);\r\n        const handleMouseDown = useCallback((e) => {\r\n            e.stopPropagation();\r\n            onSelectElement(id, e.ctrlKey);\r\n            onSelectChild(id, null);\r\n        }, [id, onSelectElement, onSelectChild]);\r\n        const handleContextMenu = useCallback((e) => {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            onContextMenu(id, { x: e.clientX, y: e.clientY });\r\n        }, [id, onContextMenu]);\r\n        const snapPoints = [\r\n            { x: 0, y: 0 },\r\n            { x: size.width, y: size.height },\r\n            { x: size.width / 2, y: size.height / 2 },\r\n        ];\r\n        children.forEach((child) => {\r\n            const bounds = getElementBounds(child);\r\n            snapPoints.push(\r\n                { x: bounds.left, y: bounds.top },\r\n                { x: bounds.right, y: bounds.bottom },\r\n                { x: bounds.centerX, y: bounds.centerY },\r\n                { x: bounds.left, y: bounds.centerY },\r\n                { x: bounds.right, y: bounds.centerY },\r\n                { x: bounds.centerX, y: bounds.top },\r\n                { x: bounds.centerX, y: bounds.bottom }\r\n            );\r\n        });\r\n        if (type === 'container' && componentData.layout === 'ladi-standard') {\r\n            const [{ isOverContainer, canDropContainer }, drop] = useDrop(() => ({\r\n                accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\r\n                canDrop: (item, monitor) => {\r\n                    if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT && item.parentId && item.parentId !== id) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n                drop: (item, monitor) => {\r\n                    if (!monitor.canDrop()) {\r\n                        toast.error('Không thể thả vào container này!');\r\n                        setDragPreview(null);\r\n                        return { moved: false };\r\n                    }\r\n                    const clientOffset = monitor.getClientOffset();\r\n                    if (!clientOffset || !containerRef.current) {\r\n                        toast.error('Không thể xác định vị trí thả!');\r\n                        setDragPreview(null);\r\n                        return { moved: false };\r\n                    }\r\n                    const pos = getCanvasPosition(clientOffset.x, clientOffset.y, containerRef.current, zoomLevel);\r\n                    const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n                    if (monitor.getItemType() === ItemTypes.ELEMENT) {\r\n                        const newId = `${item.id}-${Date.now()}`;\r\n                        const newChild = {\r\n                            id: newId,\r\n                            type: item.json.type,\r\n                            componentData: item.json.componentData || {},\r\n                            position: {\r\n                                [viewMode]: snapped,\r\n                                desktop: snapped,\r\n                                tablet: snapped,\r\n                                mobile: snapped,\r\n                            },\r\n                            size: item.json.size || { width: 200, height: 50 },\r\n                            styles: item.json.styles || {},\r\n                            children: [],\r\n                        };\r\n                        onAddChild(id, newChild);\r\n                        toast.success('Đã thêm thành phần con!');\r\n                        setDragPreview(null);\r\n                        return { moved: true, newPosition: snapped };\r\n                    } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                        if (item.parentId === id) {\r\n                            onUpdateChildPosition(id, item.childId, snapped);\r\n                            toast.success('Đã di chuyển thành phần con trong section!');\r\n                        } else {\r\n                            onMoveChild(item.parentId, item.childId, id, snapped);\r\n                            toast.success('Đã di chuyển thành phần con sang section khác!');\r\n                        }\r\n                        setDragPreview(null);\r\n                        return { moved: true, newPosition: snapped };\r\n                    }\r\n                    setDragPreview(null);\r\n                    return { moved: false };\r\n                },\r\n                collect: (monitor) => ({\r\n                    isOverContainer: monitor.isOver(),\r\n                    canDropContainer: monitor.canDrop(),\r\n                }),\r\n            }), [id, type, componentData, viewMode, zoomLevel, gridSize, showGrid, onAddChild, onUpdateChildPosition, onMoveChild]);\r\n            useEffect(() => {\r\n                drop(containerRef);\r\n            }, [drop]);\r\n            return (\r\n                <div\r\n                    ref={elementRef}\r\n                    className={`lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''}`}\r\n                    style={{\r\n                        width: size.width,\r\n                        height: size.height,\r\n                        zIndex: position.z || 1,\r\n                        ...styles,\r\n                    }}\r\n                    onMouseDown={handleMouseDown}\r\n                    onContextMenu={handleContextMenu}\r\n                >\r\n                    {renderComponentContent(type, componentData, styles, children, dataStore, resolveDataBinding)}\r\n                </div>\r\n            );\r\n        }\r\n        const [{ isDragging }, drag, preview] = useDrag(() => ({\r\n            type: ItemTypes.EXISTING_ELEMENT,\r\n            item: () => ({\r\n                id,\r\n                elementSize: size,\r\n                elementPosition: position[viewMode] || { x: 0, y: 0 },\r\n                isExisting: true,\r\n            }),\r\n            end: (item, monitor) => {\r\n                if (!monitor.didDrop()) {\r\n                    setDragPreview(null);\r\n                }\r\n            },\r\n            collect: (monitor) => ({\r\n                isDragging: monitor.isDragging(),\r\n            }),\r\n        }), [id, size, position, viewMode]);\r\n        useEffect(() => {\r\n            preview(getEmptyImage(), { captureDraggingState: true });\r\n        }, [preview]);\r\n        return (\r\n            <div\r\n                ref={(node) => {\r\n                    elementRef.current = node;\r\n                    drag(node);\r\n                }}\r\n                className={`lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`}\r\n                style={{\r\n                    position: 'absolute',\r\n                    transform: `translate(${position[viewMode]?.x || 0}px, ${position[viewMode]?.y || 0}px)`,\r\n                    width: size.width,\r\n                    height: size.height,\r\n                    zIndex: position.z || 1,\r\n                    opacity: isDragging ? 0.5 : 1,\r\n                    cursor: isDragging ? 'grabbing' : 'grab',\r\n                    ...styles,\r\n                }}\r\n                onMouseDown={handleMouseDown}\r\n                onContextMenu={handleContextMenu}\r\n            >\r\n                {renderComponentContent(type, componentData, styles, children, dataStore, resolveDataBinding)}\r\n            </div>\r\n        );\r\n    }, (prev, next) => prev.element.id === next.element.id && prev.isSelected === next.isSelected\r\n);\r\n\r\nconst Canvas = React.memo(\r\n    ({\r\n         pageData,\r\n         selectedIds,\r\n         onSelectElement,\r\n         onUpdatePosition,\r\n         onUpdateSize,\r\n         onDeleteElement,\r\n         onAddElement,\r\n         onGroupElements,\r\n         viewMode,\r\n         zoomLevel,\r\n         gridSize,\r\n         showGrid,\r\n         onEditElement,\r\n         onDuplicateElement,\r\n         onMoveElementUp,\r\n         onMoveElementDown,\r\n         onSelectChild,\r\n         selectedChildId,\r\n         onAddChild,\r\n         onUpdateChildPosition,\r\n         onMoveChild,\r\n         dataStore,\r\n         resolveDataBinding,\r\n         executeAction,\r\n     }) => {\r\n        const canvasRef = useRef(null);\r\n        const [guidelines, setGuidelines] = useState([]);\r\n        const [contextMenu, setContextMenu] = useState(null);\r\n        const [dragPreview, setDragPreview] = useState(null);\r\n        const canvasBounds = canvasRef.current ? {\r\n            width: canvasRef.current.offsetWidth / (zoomLevel / 100),\r\n            height: canvasRef.current.offsetHeight / (zoomLevel / 100),\r\n        } : { width: 1200, height: 1000 };\r\n        const getSnapPoints = useCallback(() => {\r\n            const points = [\r\n                { x: 0, y: 0 },\r\n                { x: canvasBounds.width, y: canvasBounds.height },\r\n                { x: canvasBounds.width / 2, y: canvasBounds.height / 2 },\r\n            ];\r\n            pageData.elements.forEach((el) => {\r\n                const bounds = getElementBounds(el);\r\n                points.push(\r\n                    { x: bounds.left, y: bounds.top },\r\n                    { x: bounds.right, y: bounds.bottom },\r\n                    { x: bounds.centerX, y: bounds.centerY },\r\n                    { x: bounds.left, y: bounds.centerY },\r\n                    { x: bounds.right, y: bounds.centerY },\r\n                    { x: bounds.centerX, y: bounds.top },\r\n                    { x: bounds.centerX, y: bounds.bottom }\r\n                );\r\n                el.children?.forEach((child) => {\r\n                    const childBounds = getElementBounds(child);\r\n                    points.push(\r\n                        { x: childBounds.left, y: childBounds.top },\r\n                        { x: childBounds.right, y: childBounds.bottom },\r\n                        { x: childBounds.centerX, y: childBounds.centerY },\r\n                        { x: childBounds.left, y: childBounds.centerY },\r\n                        { x: childBounds.right, y: childBounds.centerY },\r\n                        { x: childBounds.centerX, y: childBounds.top },\r\n                        { x: childBounds.centerX, y: childBounds.bottom }\r\n                    );\r\n                });\r\n            });\r\n            return points;\r\n        }, [pageData.elements, canvasBounds]);\r\n        const [{ isOver, dragItem }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\r\n            hover: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    setDragPreview(null);\r\n                    return;\r\n                }\r\n                const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef.current, zoomLevel);\r\n                const snapPoints = getSnapPoints();\r\n                const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n                if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\r\n                    setDragPreview({\r\n                        id: 'preview',\r\n                        x: snapped.x,\r\n                        y: snapped.y,\r\n                        size: item.json.size || { width: 200, height: 50 },\r\n                        type: item.json.type,\r\n                        componentData: item.json.componentData || { layout: 'ladi-standard' },\r\n                        styles: item.json.styles,\r\n                    });\r\n                } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                    setDragPreview({\r\n                        id: item.childId,\r\n                        x: snapped.x,\r\n                        y: snapped.y,\r\n                        size: item.size || { width: 200, height: 50 },\r\n                        type: pageData.elements.find((el) => el.id === item.parentId)?.children.find((child) => child.id === item.childId)?.type,\r\n                        componentData: pageData.elements.find((el) => el.id === item.parentId)?.children.find((child) => child.id === item.childId)?.componentData,\r\n                        styles: pageData.elements.find((el) => el.id === item.parentId)?.children.find((child) => child.id === item.childId)?.styles,\r\n                    });\r\n                }\r\n                const newGuidelines = [];\r\n                pageData.elements.forEach((el) => {\r\n                    if (el.id === item.id) return;\r\n                    const bounds = getElementBounds(el);\r\n                    if (Math.abs(snapped.x - bounds.left) < 15) newGuidelines.push({ vertical: true, position: bounds.left });\r\n                    if (Math.abs(snapped.x - bounds.right) < 15) newGuidelines.push({ vertical: true, position: bounds.right });\r\n                    if (Math.abs(snapped.x - bounds.centerX) < 15) newGuidelines.push({ vertical: true, position: bounds.centerX });\r\n                    if (Math.abs(snapped.y - bounds.top) < 15) newGuidelines.push({ vertical: false, position: bounds.top });\r\n                    if (Math.abs(snapped.y - bounds.bottom) < 15) newGuidelines.push({ vertical: false, position: bounds.bottom });\r\n                    if (Math.abs(snapped.y - bounds.centerY) < 15) newGuidelines.push({ vertical: false, position: bounds.centerY });\r\n                    el.children?.forEach((child) => {\r\n                        const childBounds = getElementBounds(child);\r\n                        if (Math.abs(snapped.x - childBounds.left) < 15) newGuidelines.push({ vertical: true, position: childBounds.left });\r\n                        if (Math.abs(snapped.x - childBounds.right) < 15) newGuidelines.push({ vertical: true, position: childBounds.right });\r\n                        if (Math.abs(snapped.x - childBounds.centerX) < 15) newGuidelines.push({ vertical: true, position: childBounds.centerX });\r\n                        if (Math.abs(snapped.y - childBounds.top) < 15) newGuidelines.push({ vertical: false, position: childBounds.top });\r\n                        if (Math.abs(snapped.y - childBounds.bottom) < 15) newGuidelines.push({ vertical: false, position: childBounds.bottom });\r\n                        if (Math.abs(snapped.y - childBounds.centerY) < 15) newGuidelines.push({ vertical: false, position: childBounds.centerY });\r\n                    });\r\n                });\r\n                if (Math.abs(snapped.x) < 15) newGuidelines.push({ vertical: true, position: 0 });\r\n                if (Math.abs(snapped.x - canvasBounds.width) < 15) newGuidelines.push({ vertical: true, position: canvasBounds.width });\r\n                if (Math.abs(snapped.x - canvasBounds.width / 2) < 15) newGuidelines.push({ vertical: true, position: canvasBounds.width / 2 });\r\n                if (Math.abs(snapped.y) < 15) newGuidelines.push({ vertical: false, position: 0 });\r\n                if (Math.abs(snapped.y - canvasBounds.height) < 15) newGuidelines.push({ vertical: false, position: canvasBounds.height });\r\n                if (Math.abs(snapped.y - canvasBounds.height / 2) < 15) newGuidelines.push({ vertical: false, position: canvasBounds.height / 2 });\r\n                setGuidelines(newGuidelines);\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    toast.error('Không thể xác định vị trí thả!');\r\n                    setDragPreview(null);\r\n                    setGuidelines([]);\r\n                    return { moved: false };\r\n                }\r\n                const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef.current, zoomLevel);\r\n                const snapPoints = getSnapPoints();\r\n                const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n                if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                    const sourceSection = pageData.elements.find((el) => el.id === item.parentId);\r\n                    if (!sourceSection) {\r\n                        setDragPreview(null);\r\n                        setGuidelines([]);\r\n                        return { moved: false };\r\n                    }\r\n                    onMoveChild(item.parentId, item.childId, null, snapped);\r\n                    toast.success('Đã di chuyển thành phần con ra canvas!');\r\n                    setDragPreview(null);\r\n                    setGuidelines([]);\r\n                    return { moved: true, newPosition: snapped };\r\n                } else if (monitor.getItemType() === ItemTypes.ELEMENT) {\r\n                    if (item.json.type !== 'container') {\r\n                        toast.error('Chỉ có thể thả container lên canvas!');\r\n                        setDragPreview(null);\r\n                        setGuidelines([]);\r\n                        return { moved: false };\r\n                    }\r\n                    const newElement = {\r\n                        id: `${item.id}-${Date.now()}`,\r\n                        type: item.json.type,\r\n                        componentData: { layout: 'ladi-standard' },\r\n                        position: {\r\n                            [viewMode]: snapped,\r\n                            desktop: snapped,\r\n                            tablet: snapped,\r\n                            mobile: snapped,\r\n                        },\r\n                        size: item.json.size || { width: 1200, height: 400 },\r\n                        styles: item.json.styles || {},\r\n                        children: [],\r\n                    };\r\n                    onAddElement(newElement);\r\n                    toast.success('Đã thêm container mới!');\r\n                    setDragPreview(null);\r\n                    setGuidelines([]);\r\n                    return { moved: true, newPosition: snapped };\r\n                }\r\n                setDragPreview(null);\r\n                setGuidelines([]);\r\n                return { moved: false };\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: monitor.isOver(),\r\n                dragItem: monitor.getItem(),\r\n            }),\r\n        }), [pageData.elements, viewMode, zoomLevel, gridSize, showGrid, canvasBounds, onAddElement, onMoveChild]);\r\n        const handleContextMenu = useCallback((id, position) => {\r\n            setContextMenu({ id, position });\r\n        }, []);\r\n        const handleCanvasClick = useCallback((e) => {\r\n            if (e.target === canvasRef.current) {\r\n                onSelectElement([]);\r\n                onSelectChild(null, null);\r\n                setContextMenu(null);\r\n                setDragPreview(null);\r\n            }\r\n        }, [onSelectElement, onSelectChild]);\r\n        const handleKeyDown = useCallback((e) => {\r\n            const ids = Array.isArray(selectedIds) ? selectedIds : [];\r\n            if (!ids.length) return;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            const step = e.shiftKey ? 10 : 1;\r\n            ids.forEach((id) => {\r\n                const element = pageData.elements.find((el) => el.id === id);\r\n                if (element && element.type !== 'container') {\r\n                    const newY = e.key === 'ArrowUp' ? Math.max(0, (element.position[viewMode]?.y || 0) - step) : (element.position[viewMode]?.y || 0) + step;\r\n                    const newX = e.key === 'ArrowLeft' ? Math.max(0, (element.position[viewMode]?.x || 0) - step) : (element.position[viewMode]?.x || 0) + step;\r\n                    switch (e.key) {\r\n                        case 'ArrowUp':\r\n                        case 'ArrowDown':\r\n                            onUpdatePosition(id, { [viewMode]: { x: element.position[viewMode]?.x || 0, y: newY } }, 'absolute');\r\n                            break;\r\n                        case 'ArrowLeft':\r\n                        case 'ArrowRight':\r\n                            onUpdatePosition(id, { [viewMode]: { x: newX, y: element.position[viewMode]?.y || 0 } }, 'absolute');\r\n                            break;\r\n                        case 'Delete':\r\n                        case 'Backspace':\r\n                            onDeleteElement(id);\r\n                            break;\r\n                        case 'Escape':\r\n                            onSelectElement([]);\r\n                            onSelectChild(null, null);\r\n                            setContextMenu(null);\r\n                            setDragPreview(null);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                }\r\n            });\r\n        }, [selectedIds, onUpdatePosition, onDeleteElement, onSelectElement, onSelectChild, viewMode, pageData.elements]);\r\n        useHotkeys('ctrl+a', (e) => {\r\n            e.preventDefault();\r\n            onSelectElement(pageData.elements.map((el) => el.id));\r\n        }, [pageData.elements, onSelectElement]);\r\n        useHotkeys('ctrl+g', (e) => {\r\n            e.preventDefault();\r\n            const ids = Array.isArray(selectedIds) ? selectedIds : [];\r\n            if (ids.length > 1) {\r\n                onGroupElements(ids);\r\n            }\r\n        }, [selectedIds, onGroupElements]);\r\n        useEffect(() => {\r\n            const handleClickOutside = () => {\r\n                setContextMenu(null);\r\n                setDragPreview(null);\r\n            };\r\n            if (contextMenu) {\r\n                document.addEventListener('click', handleClickOutside);\r\n                return () => document.removeEventListener('click', handleClickOutside);\r\n            }\r\n        }, [contextMenu]);\r\n        const dragPreviewComponent = useMemo(() => {\r\n            if (!dragPreview) return null;\r\n            const { x, y, size, type, componentData, styles } = dragPreview;\r\n            const previewStyle = {\r\n                transform: `translate(${x}px, ${y}px)`,\r\n                width: size.width,\r\n                height: size.height,\r\n                ...styles,\r\n            };\r\n            return (\r\n                <div className=\"lpb-drag-preview\" style={previewStyle}>\r\n                    {renderComponentContent(type, componentData || {}, {}, [], dataStore, resolveDataBinding)}\r\n                </div>\r\n            );\r\n        }, [dragPreview, dataStore, resolveDataBinding]);\r\n        return (\r\n            <div className=\"lpb-canvas-wrapper\" onKeyDown={handleKeyDown} tabIndex={0} style={{ outline: 'none' }}>\r\n                <div\r\n                    ref={(node) => {\r\n                        canvasRef.current = node;\r\n                        drop(node);\r\n                    }}\r\n                    className={`lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`}\r\n                    onClick={handleCanvasClick}\r\n                >\r\n                    <Guidelines guidelines={guidelines} zoomLevel={zoomLevel} />\r\n                    {pageData.elements.map((element) => (\r\n                        <Element\r\n                            key={element.id}\r\n                            element={element}\r\n                            isSelected={selectedIds.includes(element.id)}\r\n                            onSelectElement={onSelectElement}\r\n                            onUpdatePosition={onUpdatePosition}\r\n                            viewMode={viewMode}\r\n                            zoomLevel={zoomLevel}\r\n                            gridSize={gridSize}\r\n                            onContextMenu={handleContextMenu}\r\n                            canvasBounds={canvasBounds}\r\n                            canvasRef={canvasRef}\r\n                            onSelectChild={onSelectChild}\r\n                            selectedChildId={selectedChildId}\r\n                            onAddChild={onAddChild}\r\n                            onUpdateChildPosition={onUpdateChildPosition}\r\n                            onMoveChild={onMoveChild}\r\n                            showGrid={showGrid}\r\n                            setDragPreview={setDragPreview}\r\n                            dataStore={dataStore}\r\n                            resolveDataBinding={resolveDataBinding}\r\n                            executeAction={executeAction}\r\n                        />\r\n                    ))}\r\n                    {dragPreviewComponent}\r\n                    <SelectionOverlay\r\n                        selectedElements={pageData.elements.filter((el) => Array.isArray(selectedIds) && selectedIds.includes(el.id))}\r\n                        onResize={onUpdateSize}\r\n                        zoomLevel={zoomLevel}\r\n                    />\r\n                    {contextMenu && (\r\n                        <div\r\n                            className=\"lpb-context-menu\"\r\n                            style={{\r\n                                position: 'fixed',\r\n                                left: contextMenu.position.x,\r\n                                top: contextMenu.position.y,\r\n                                zIndex: 10000,\r\n                                background: '#fff',\r\n                                border: '1px solid #ccc',\r\n                                borderRadius: '4px',\r\n                                boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\r\n                                minWidth: '120px',\r\n                            }}\r\n                        >\r\n                            <div\r\n                                className=\"lpb-context-menu-item\"\r\n                                style={{ padding: '8px 12px', cursor: 'pointer' }}\r\n                                onClick={() => {\r\n                                    onDeleteElement(contextMenu.id);\r\n                                    setContextMenu(null);\r\n                                }}\r\n                            >\r\n                                Delete\r\n                            </div>\r\n                            <div\r\n                                className=\"lpb-context-menu-item\"\r\n                                style={{ padding: '8px 12px', cursor: 'pointer' }}\r\n                                onClick={() => {\r\n                                    onGroupElements([contextMenu.id]);\r\n                                    setContextMenu(null);\r\n                                }}\r\n                            >\r\n                                Group\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }, (prev, next) => _.isEqual(prev.pageData, next.pageData) && prev.selectedIds === next.selectedIds\r\n);\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}