{"ast":null,"code":"'use strict';\n\nvar CleanCSS = require('clean-css');\nvar decode = require('he').decode;\nvar HTMLParser = require('./htmlparser').HTMLParser;\nvar RelateUrl = require('relateurl');\nvar TokenChain = require('./tokenchain');\nvar UglifyJS = require('uglify-js');\nvar utils = require('./utils');\nfunction trimWhitespace(str) {\n  return str && str.replace(/^[ \\n\\r\\t\\f]+/, '').replace(/[ \\n\\r\\t\\f]+$/, '');\n}\nfunction collapseWhitespaceAll(str) {\n  // Non-breaking space is specifically handled inside the replacer function here:\n  return str && str.replace(/[ \\n\\r\\t\\f\\xA0]+/g, function (spaces) {\n    return spaces === '\\t' ? '\\t' : spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  });\n}\nfunction collapseWhitespace(str, options, trimLeft, trimRight, collapseAll) {\n  var lineBreakBefore = '',\n    lineBreakAfter = '';\n  if (options.preserveLineBreaks) {\n    str = str.replace(/^[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*/, function () {\n      lineBreakBefore = '\\n';\n      return '';\n    }).replace(/[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*$/, function () {\n      lineBreakAfter = '\\n';\n      return '';\n    });\n  }\n  if (trimLeft) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/^[ \\n\\r\\t\\f\\xA0]+/, function (spaces) {\n      var conservative = !lineBreakBefore && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/^[^\\xA0]+/, '').replace(/(\\xA0+)[^\\xA0]+/g, '$1 ') || (conservative ? ' ' : '');\n    });\n  }\n  if (trimRight) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/[ \\n\\r\\t\\f\\xA0]+$/, function (spaces) {\n      var conservative = !lineBreakAfter && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/[^\\xA0]+(\\xA0+)/g, ' $1').replace(/[^\\xA0]+$/, '') || (conservative ? ' ' : '');\n    });\n  }\n  if (collapseAll) {\n    // strip non space whitespace then compress spaces to one\n    str = collapseWhitespaceAll(str);\n  }\n  return lineBreakBefore + str + lineBreakAfter;\n}\nvar createMapFromString = utils.createMapFromString;\n// non-empty tags that will maintain whitespace around them\nvar inlineTags = createMapFromString('a,abbr,acronym,b,bdi,bdo,big,button,cite,code,del,dfn,em,font,i,ins,kbd,label,mark,math,nobr,object,q,rp,rt,rtc,ruby,s,samp,select,small,span,strike,strong,sub,sup,svg,textarea,time,tt,u,var');\n// non-empty tags that will maintain whitespace within them\nvar inlineTextTags = createMapFromString('a,abbr,acronym,b,big,del,em,font,i,ins,kbd,mark,nobr,rp,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var');\n// self-closing tags that will maintain whitespace around them\nvar selfClosingInlineTags = createMapFromString('comment,img,input,wbr');\nfunction collapseWhitespaceSmart(str, prevTag, nextTag, options) {\n  var trimLeft = prevTag && !selfClosingInlineTags(prevTag);\n  if (trimLeft && !options.collapseInlineTagWhitespace) {\n    trimLeft = prevTag.charAt(0) === '/' ? !inlineTags(prevTag.slice(1)) : !inlineTextTags(prevTag);\n  }\n  var trimRight = nextTag && !selfClosingInlineTags(nextTag);\n  if (trimRight && !options.collapseInlineTagWhitespace) {\n    trimRight = nextTag.charAt(0) === '/' ? !inlineTextTags(nextTag.slice(1)) : !inlineTags(nextTag);\n  }\n  return collapseWhitespace(str, options, trimLeft, trimRight, prevTag && nextTag);\n}\nfunction isConditionalComment(text) {\n  return /^\\[if\\s[^\\]]+]|\\[endif]$/.test(text);\n}\nfunction isIgnoredComment(text, options) {\n  for (var i = 0, len = options.ignoreCustomComments.length; i < len; i++) {\n    if (options.ignoreCustomComments[i].test(text)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction isEventAttribute(attrName, options) {\n  var patterns = options.customEventAttributes;\n  if (patterns) {\n    for (var i = patterns.length; i--;) {\n      if (patterns[i].test(attrName)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  return /^on[a-z]{3,}$/.test(attrName);\n}\nfunction canRemoveAttributeQuotes(value) {\n  // https://mathiasbynens.be/notes/unquoted-attribute-values\n  return /^[^ \\t\\n\\f\\r\"'`=<>]+$/.test(value);\n}\nfunction attributesInclude(attributes, attribute) {\n  for (var i = attributes.length; i--;) {\n    if (attributes[i].name.toLowerCase() === attribute) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction isAttributeRedundant(tag, attrName, attrValue, attrs) {\n  attrValue = attrValue ? trimWhitespace(attrValue.toLowerCase()) : '';\n  return tag === 'script' && attrName === 'language' && attrValue === 'javascript' || tag === 'form' && attrName === 'method' && attrValue === 'get' || tag === 'input' && attrName === 'type' && attrValue === 'text' || tag === 'script' && attrName === 'charset' && !attributesInclude(attrs, 'src') || tag === 'a' && attrName === 'name' && attributesInclude(attrs, 'id') || tag === 'area' && attrName === 'shape' && attrValue === 'rect';\n}\n\n// https://mathiasbynens.be/demo/javascript-mime-type\n// https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-type\nvar executableScriptsMimetypes = utils.createMap(['text/javascript', 'text/ecmascript', 'text/jscript', 'application/javascript', 'application/x-javascript', 'application/ecmascript']);\nfunction isScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return attrValue === '' || executableScriptsMimetypes(attrValue);\n}\nfunction isExecutableScript(tag, attrs) {\n  if (tag !== 'script') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isScriptTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\nfunction isStyleLinkTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue).toLowerCase();\n  return attrValue === '' || attrValue === 'text/css';\n}\nfunction isStyleSheet(tag, attrs) {\n  if (tag !== 'style') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isStyleLinkTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\nvar isSimpleBoolean = createMapFromString('allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible');\nvar isBooleanValue = createMapFromString('true,false');\nfunction isBooleanAttribute(attrName, attrValue) {\n  return isSimpleBoolean(attrName) || attrName === 'draggable' && !isBooleanValue(attrValue);\n}\nfunction isUriTypeAttribute(attrName, tag) {\n  return /^(?:a|area|link|base)$/.test(tag) && attrName === 'href' || tag === 'img' && /^(?:src|longdesc|usemap)$/.test(attrName) || tag === 'object' && /^(?:classid|codebase|data|usemap)$/.test(attrName) || tag === 'q' && attrName === 'cite' || tag === 'blockquote' && attrName === 'cite' || (tag === 'ins' || tag === 'del') && attrName === 'cite' || tag === 'form' && attrName === 'action' || tag === 'input' && (attrName === 'src' || attrName === 'usemap') || tag === 'head' && attrName === 'profile' || tag === 'script' && (attrName === 'src' || attrName === 'for');\n}\nfunction isNumberTypeAttribute(attrName, tag) {\n  return /^(?:a|area|object|button)$/.test(tag) && attrName === 'tabindex' || tag === 'input' && (attrName === 'maxlength' || attrName === 'tabindex') || tag === 'select' && (attrName === 'size' || attrName === 'tabindex') || tag === 'textarea' && /^(?:rows|cols|tabindex)$/.test(attrName) || tag === 'colgroup' && attrName === 'span' || tag === 'col' && attrName === 'span' || (tag === 'th' || tag === 'td') && (attrName === 'rowspan' || attrName === 'colspan');\n}\nfunction isLinkType(tag, attrs, value) {\n  if (tag !== 'link') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'rel' && attrs[i].value === value) {\n      return true;\n    }\n  }\n}\nfunction isMediaQuery(tag, attrs, attrName) {\n  return attrName === 'media' && (isLinkType(tag, attrs, 'stylesheet') || isStyleSheet(tag, attrs));\n}\nvar srcsetTags = createMapFromString('img,source');\nfunction isSrcset(attrName, tag) {\n  return attrName === 'srcset' && srcsetTags(tag);\n}\nfunction cleanAttributeValue(tag, attrName, attrValue, options, attrs) {\n  if (isEventAttribute(attrName, options)) {\n    attrValue = trimWhitespace(attrValue).replace(/^javascript:\\s*/i, '');\n    return options.minifyJS(attrValue, true);\n  } else if (attrName === 'class') {\n    attrValue = trimWhitespace(attrValue);\n    if (options.sortClassName) {\n      attrValue = options.sortClassName(attrValue);\n    } else {\n      attrValue = collapseWhitespaceAll(attrValue);\n    }\n    return attrValue;\n  } else if (isUriTypeAttribute(attrName, tag)) {\n    attrValue = trimWhitespace(attrValue);\n    return isLinkType(tag, attrs, 'canonical') ? attrValue : options.minifyURLs(attrValue);\n  } else if (isNumberTypeAttribute(attrName, tag)) {\n    return trimWhitespace(attrValue);\n  } else if (attrName === 'style') {\n    attrValue = trimWhitespace(attrValue);\n    if (attrValue) {\n      if (/;$/.test(attrValue) && !/&#?[0-9a-zA-Z]+;$/.test(attrValue)) {\n        attrValue = attrValue.replace(/\\s*;$/, ';');\n      }\n      attrValue = options.minifyCSS(attrValue, 'inline');\n    }\n    return attrValue;\n  } else if (isSrcset(attrName, tag)) {\n    // https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset\n    attrValue = trimWhitespace(attrValue).split(/\\s+,\\s*|\\s*,\\s+/).map(function (candidate) {\n      var url = candidate;\n      var descriptor = '';\n      var match = candidate.match(/\\s+([1-9][0-9]*w|[0-9]+(?:\\.[0-9]+)?x)$/);\n      if (match) {\n        url = url.slice(0, -match[0].length);\n        var num = +match[1].slice(0, -1);\n        var suffix = match[1].slice(-1);\n        if (num !== 1 || suffix !== 'x') {\n          descriptor = ' ' + num + suffix;\n        }\n      }\n      return options.minifyURLs(url) + descriptor;\n    }).join(', ');\n  } else if (isMetaViewport(tag, attrs) && attrName === 'content') {\n    attrValue = attrValue.replace(/\\s+/g, '').replace(/[0-9]+\\.[0-9]+/g, function (numString) {\n      // \"0.90000\" -> \"0.9\"\n      // \"1.0\" -> \"1\"\n      // \"1.0001\" -> \"1.0001\" (unchanged)\n      return (+numString).toString();\n    });\n  } else if (isContentSecurityPolicy(tag, attrs) && attrName.toLowerCase() === 'content') {\n    return collapseWhitespaceAll(attrValue);\n  } else if (options.customAttrCollapse && options.customAttrCollapse.test(attrName)) {\n    attrValue = attrValue.replace(/\\n+|\\r+|\\s{2,}/g, '');\n  } else if (tag === 'script' && attrName === 'type') {\n    attrValue = trimWhitespace(attrValue.replace(/\\s*;\\s*/g, ';'));\n  } else if (isMediaQuery(tag, attrs, attrName)) {\n    attrValue = trimWhitespace(attrValue);\n    return options.minifyCSS(attrValue, 'media');\n  }\n  return attrValue;\n}\nfunction isMetaViewport(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'name' && attrs[i].value === 'viewport') {\n      return true;\n    }\n  }\n}\nfunction isContentSecurityPolicy(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name.toLowerCase() === 'http-equiv' && attrs[i].value.toLowerCase() === 'content-security-policy') {\n      return true;\n    }\n  }\n}\nfunction ignoreCSS(id) {\n  return '/* clean-css ignore:start */' + id + '/* clean-css ignore:end */';\n}\n\n// Wrap CSS declarations for CleanCSS > 3.x\n// See https://github.com/jakubpawlowicz/clean-css/issues/418\nfunction wrapCSS(text, type) {\n  switch (type) {\n    case 'inline':\n      return '*{' + text + '}';\n    case 'media':\n      return '@media ' + text + '{a{top:0}}';\n    default:\n      return text;\n  }\n}\nfunction unwrapCSS(text, type) {\n  var matches;\n  switch (type) {\n    case 'inline':\n      matches = text.match(/^\\*\\{([\\s\\S]*)\\}$/);\n      break;\n    case 'media':\n      matches = text.match(/^@media ([\\s\\S]*?)\\s*{[\\s\\S]*}$/);\n      break;\n  }\n  return matches ? matches[1] : text;\n}\nfunction cleanConditionalComment(comment, options) {\n  return options.processConditionalComments ? comment.replace(/^(\\[if\\s[^\\]]+]>)([\\s\\S]*?)(<!\\[endif])$/, function (match, prefix, text, suffix) {\n    return prefix + minify(text, options, true) + suffix;\n  }) : comment;\n}\nfunction processScript(text, options, currentAttrs) {\n  for (var i = 0, len = currentAttrs.length; i < len; i++) {\n    if (currentAttrs[i].name.toLowerCase() === 'type' && options.processScripts.indexOf(currentAttrs[i].value) > -1) {\n      return minify(text, options);\n    }\n  }\n  return text;\n}\n\n// Tag omission rules from https://html.spec.whatwg.org/multipage/syntax.html#optional-tags\n// with the following deviations:\n// - retain <body> if followed by <noscript>\n// - </rb>, </rt>, </rtc>, </rp> & </tfoot> follow https://www.w3.org/TR/html5/syntax.html#optional-tags\n// - retain all tags which are adjacent to non-standard HTML tags\nvar optionalStartTags = createMapFromString('html,head,body,colgroup,tbody');\nvar optionalEndTags = createMapFromString('html,head,body,li,dt,dd,p,rb,rt,rtc,rp,optgroup,option,colgroup,caption,thead,tbody,tfoot,tr,td,th');\nvar headerTags = createMapFromString('meta,link,script,style,template,noscript');\nvar descriptionTags = createMapFromString('dt,dd');\nvar pBlockTags = createMapFromString('address,article,aside,blockquote,details,div,dl,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,main,menu,nav,ol,p,pre,section,table,ul');\nvar pInlineTags = createMapFromString('a,audio,del,ins,map,noscript,video');\nvar rubyTags = createMapFromString('rb,rt,rtc,rp');\nvar rtcTag = createMapFromString('rb,rtc,rp');\nvar optionTag = createMapFromString('option,optgroup');\nvar tableContentTags = createMapFromString('tbody,tfoot');\nvar tableSectionTags = createMapFromString('thead,tbody,tfoot');\nvar cellTags = createMapFromString('td,th');\nvar topLevelTags = createMapFromString('html,head,body');\nvar compactTags = createMapFromString('html,body');\nvar looseTags = createMapFromString('head,colgroup,caption');\nvar trailingTags = createMapFromString('dt,thead');\nvar htmlTags = createMapFromString('a,abbr,acronym,address,applet,area,article,aside,audio,b,base,basefont,bdi,bdo,bgsound,big,blink,blockquote,body,br,button,canvas,caption,center,cite,code,col,colgroup,command,content,data,datalist,dd,del,details,dfn,dialog,dir,div,dl,dt,element,em,embed,fieldset,figcaption,figure,font,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,i,iframe,image,img,input,ins,isindex,kbd,keygen,label,legend,li,link,listing,main,map,mark,marquee,menu,menuitem,meta,meter,multicol,nav,nobr,noembed,noframes,noscript,object,ol,optgroup,option,output,p,param,picture,plaintext,pre,progress,q,rb,rp,rt,rtc,ruby,s,samp,script,section,select,shadow,small,source,spacer,span,strike,strong,style,sub,summary,sup,table,tbody,td,template,textarea,tfoot,th,thead,time,title,tr,track,tt,u,ul,var,video,wbr,xmp');\nfunction canRemoveParentTag(optionalStartTag, tag) {\n  switch (optionalStartTag) {\n    case 'html':\n    case 'head':\n      return true;\n    case 'body':\n      return !headerTags(tag);\n    case 'colgroup':\n      return tag === 'col';\n    case 'tbody':\n      return tag === 'tr';\n  }\n  return false;\n}\nfunction isStartTagMandatory(optionalEndTag, tag) {\n  switch (tag) {\n    case 'colgroup':\n      return optionalEndTag === 'colgroup';\n    case 'tbody':\n      return tableSectionTags(optionalEndTag);\n  }\n  return false;\n}\nfunction canRemovePrecedingTag(optionalEndTag, tag) {\n  switch (optionalEndTag) {\n    case 'html':\n    case 'head':\n    case 'body':\n    case 'colgroup':\n    case 'caption':\n      return true;\n    case 'li':\n    case 'optgroup':\n    case 'tr':\n      return tag === optionalEndTag;\n    case 'dt':\n    case 'dd':\n      return descriptionTags(tag);\n    case 'p':\n      return pBlockTags(tag);\n    case 'rb':\n    case 'rt':\n    case 'rp':\n      return rubyTags(tag);\n    case 'rtc':\n      return rtcTag(tag);\n    case 'option':\n      return optionTag(tag);\n    case 'thead':\n    case 'tbody':\n      return tableContentTags(tag);\n    case 'tfoot':\n      return tag === 'tbody';\n    case 'td':\n    case 'th':\n      return cellTags(tag);\n  }\n  return false;\n}\nvar reEmptyAttribute = new RegExp('^(?:class|id|style|title|lang|dir|on(?:focus|blur|change|click|dblclick|mouse(' + '?:down|up|over|move|out)|key(?:press|down|up)))$');\nfunction canDeleteEmptyAttribute(tag, attrName, attrValue, options) {\n  var isValueEmpty = !attrValue || /^\\s*$/.test(attrValue);\n  if (!isValueEmpty) {\n    return false;\n  }\n  if (typeof options.removeEmptyAttributes === 'function') {\n    return options.removeEmptyAttributes(attrName, tag);\n  }\n  return tag === 'input' && attrName === 'value' || reEmptyAttribute.test(attrName);\n}\nfunction hasAttrName(name, attrs) {\n  for (var i = attrs.length - 1; i >= 0; i--) {\n    if (attrs[i].name === name) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction canRemoveElement(tag, attrs) {\n  switch (tag) {\n    case 'textarea':\n      return false;\n    case 'audio':\n    case 'script':\n    case 'video':\n      if (hasAttrName('src', attrs)) {\n        return false;\n      }\n      break;\n    case 'iframe':\n      if (hasAttrName('src', attrs) || hasAttrName('srcdoc', attrs)) {\n        return false;\n      }\n      break;\n    case 'object':\n      if (hasAttrName('data', attrs)) {\n        return false;\n      }\n      break;\n    case 'applet':\n      if (hasAttrName('code', attrs)) {\n        return false;\n      }\n      break;\n  }\n  return true;\n}\nfunction canCollapseWhitespace(tag) {\n  return !/^(?:script|style|pre|textarea)$/.test(tag);\n}\nfunction canTrimWhitespace(tag) {\n  return !/^(?:pre|textarea)$/.test(tag);\n}\nfunction normalizeAttr(attr, attrs, tag, options) {\n  var attrName = options.name(attr.name),\n    attrValue = attr.value;\n  if (options.decodeEntities && attrValue) {\n    attrValue = decode(attrValue, {\n      isAttributeValue: true\n    });\n  }\n  if (options.removeRedundantAttributes && isAttributeRedundant(tag, attrName, attrValue, attrs) || options.removeScriptTypeAttributes && tag === 'script' && attrName === 'type' && isScriptTypeAttribute(attrValue) || options.removeStyleLinkTypeAttributes && (tag === 'style' || tag === 'link') && attrName === 'type' && isStyleLinkTypeAttribute(attrValue)) {\n    return;\n  }\n  if (attrValue) {\n    attrValue = cleanAttributeValue(tag, attrName, attrValue, options, attrs);\n  }\n  if (options.removeEmptyAttributes && canDeleteEmptyAttribute(tag, attrName, attrValue, options)) {\n    return;\n  }\n  if (options.decodeEntities && attrValue) {\n    attrValue = attrValue.replace(/&(#?[0-9a-zA-Z]+;)/g, '&amp;$1');\n  }\n  return {\n    attr: attr,\n    name: attrName,\n    value: attrValue\n  };\n}\nfunction buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr) {\n  var attrName = normalized.name,\n    attrValue = normalized.value,\n    attr = normalized.attr,\n    attrQuote = attr.quote,\n    attrFragment,\n    emittedAttrValue;\n  if (typeof attrValue !== 'undefined' && (!options.removeAttributeQuotes || ~attrValue.indexOf(uidAttr) || !canRemoveAttributeQuotes(attrValue))) {\n    if (!options.preventAttributesEscaping) {\n      if (typeof options.quoteCharacter === 'undefined') {\n        var apos = (attrValue.match(/'/g) || []).length;\n        var quot = (attrValue.match(/\"/g) || []).length;\n        attrQuote = apos < quot ? '\\'' : '\"';\n      } else {\n        attrQuote = options.quoteCharacter === '\\'' ? '\\'' : '\"';\n      }\n      if (attrQuote === '\"') {\n        attrValue = attrValue.replace(/\"/g, '&#34;');\n      } else {\n        attrValue = attrValue.replace(/'/g, '&#39;');\n      }\n    }\n    emittedAttrValue = attrQuote + attrValue + attrQuote;\n    if (!isLast && !options.removeTagWhitespace) {\n      emittedAttrValue += ' ';\n    }\n  }\n  // make sure trailing slash is not interpreted as HTML self-closing tag\n  else if (isLast && !hasUnarySlash && !/\\/$/.test(attrValue)) {\n    emittedAttrValue = attrValue;\n  } else {\n    emittedAttrValue = attrValue + ' ';\n  }\n  if (typeof attrValue === 'undefined' || options.collapseBooleanAttributes && isBooleanAttribute(attrName.toLowerCase(), attrValue.toLowerCase())) {\n    attrFragment = attrName;\n    if (!isLast) {\n      attrFragment += ' ';\n    }\n  } else {\n    attrFragment = attrName + attr.customAssign + emittedAttrValue;\n  }\n  return attr.customOpen + attrFragment + attr.customClose;\n}\nfunction identity(value) {\n  return value;\n}\nfunction processOptions(values) {\n  var options = {\n    name: function (name) {\n      return name.toLowerCase();\n    },\n    canCollapseWhitespace: canCollapseWhitespace,\n    canTrimWhitespace: canTrimWhitespace,\n    html5: true,\n    ignoreCustomComments: [/^!/],\n    ignoreCustomFragments: [/<%[\\s\\S]*?%>/, /<\\?[\\s\\S]*?\\?>/],\n    includeAutoGeneratedTags: true,\n    log: identity,\n    minifyCSS: identity,\n    minifyJS: identity,\n    minifyURLs: identity\n  };\n  Object.keys(values).forEach(function (key) {\n    var value = values[key];\n    if (key === 'caseSensitive') {\n      if (value) {\n        options.name = identity;\n      }\n    } else if (key === 'log') {\n      if (typeof value === 'function') {\n        options.log = value;\n      }\n    } else if (key === 'minifyCSS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyCSS = function (text, type) {\n        text = text.replace(/(url\\s*\\(\\s*)(\"|'|)(.*?)\\2(\\s*\\))/ig, function (match, prefix, quote, url, suffix) {\n          return prefix + quote + options.minifyURLs(url) + quote + suffix;\n        });\n        var cleanCssOutput = new CleanCSS(value).minify(wrapCSS(text, type));\n        if (cleanCssOutput.errors.length > 0) {\n          cleanCssOutput.errors.forEach(options.log);\n          return text;\n        }\n        return unwrapCSS(cleanCssOutput.styles, type);\n      };\n    } else if (key === 'minifyJS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      (value.parse || (value.parse = {})).bare_returns = false;\n      options.minifyJS = function (text, inline) {\n        var start = text.match(/^\\s*<!--.*/);\n        var code = start ? text.slice(start[0].length).replace(/\\n\\s*-->\\s*$/, '') : text;\n        value.parse.bare_returns = inline;\n        var result = UglifyJS.minify(code, value);\n        if (result.error) {\n          options.log(result.error);\n          return text;\n        }\n        return result.code.replace(/;$/, '');\n      };\n    } else if (key === 'minifyURLs' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value === 'string') {\n        value = {\n          site: value\n        };\n      } else if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyURLs = function (text) {\n        try {\n          return RelateUrl.relate(text, value);\n        } catch (err) {\n          options.log(err);\n          return text;\n        }\n      };\n    } else {\n      options[key] = value;\n    }\n  });\n  return options;\n}\nfunction uniqueId(value) {\n  var id;\n  do {\n    id = Math.random().toString(36).replace(/^0\\.[0-9]*/, '');\n  } while (~value.indexOf(id));\n  return id;\n}\nvar specialContentTags = createMapFromString('script,style');\nfunction createSortFns(value, options, uidIgnore, uidAttr) {\n  var attrChains = options.sortAttributes && Object.create(null);\n  var classChain = options.sortClassName && new TokenChain();\n  function attrNames(attrs) {\n    return attrs.map(function (attr) {\n      return options.name(attr.name);\n    });\n  }\n  function shouldSkipUID(token, uid) {\n    return !uid || token.indexOf(uid) === -1;\n  }\n  function shouldSkipUIDs(token) {\n    return shouldSkipUID(token, uidIgnore) && shouldSkipUID(token, uidAttr);\n  }\n  function scan(input) {\n    var currentTag, currentType;\n    new HTMLParser(input, {\n      start: function (tag, attrs) {\n        if (attrChains) {\n          if (!attrChains[tag]) {\n            attrChains[tag] = new TokenChain();\n          }\n          attrChains[tag].add(attrNames(attrs).filter(shouldSkipUIDs));\n        }\n        for (var i = 0, len = attrs.length; i < len; i++) {\n          var attr = attrs[i];\n          if (classChain && attr.value && options.name(attr.name) === 'class') {\n            classChain.add(trimWhitespace(attr.value).split(/[ \\t\\n\\f\\r]+/).filter(shouldSkipUIDs));\n          } else if (options.processScripts && attr.name.toLowerCase() === 'type') {\n            currentTag = tag;\n            currentType = attr.value;\n          }\n        }\n      },\n      end: function () {\n        currentTag = '';\n      },\n      chars: function (text) {\n        if (options.processScripts && specialContentTags(currentTag) && options.processScripts.indexOf(currentType) > -1) {\n          scan(text);\n        }\n      }\n    });\n  }\n  var log = options.log;\n  options.log = identity;\n  options.sortAttributes = false;\n  options.sortClassName = false;\n  scan(minify(value, options));\n  options.log = log;\n  if (attrChains) {\n    var attrSorters = Object.create(null);\n    for (var tag in attrChains) {\n      attrSorters[tag] = attrChains[tag].createSorter();\n    }\n    options.sortAttributes = function (tag, attrs) {\n      var sorter = attrSorters[tag];\n      if (sorter) {\n        var attrMap = Object.create(null);\n        var names = attrNames(attrs);\n        names.forEach(function (name, index) {\n          (attrMap[name] || (attrMap[name] = [])).push(attrs[index]);\n        });\n        sorter.sort(names).forEach(function (name, index) {\n          attrs[index] = attrMap[name].shift();\n        });\n      }\n    };\n  }\n  if (classChain) {\n    var sorter = classChain.createSorter();\n    options.sortClassName = function (value) {\n      return sorter.sort(value.split(/[ \\n\\f\\r]+/)).join(' ');\n    };\n  }\n}\nfunction minify(value, options, partialMarkup) {\n  if (options.collapseWhitespace) {\n    value = collapseWhitespace(value, options, true, true);\n  }\n  var buffer = [],\n    charsPrevTag,\n    currentChars = '',\n    hasChars,\n    currentTag = '',\n    currentAttrs = [],\n    stackNoTrimWhitespace = [],\n    stackNoCollapseWhitespace = [],\n    optionalStartTag = '',\n    optionalEndTag = '',\n    ignoredMarkupChunks = [],\n    ignoredCustomMarkupChunks = [],\n    uidIgnore,\n    uidAttr,\n    uidPattern;\n\n  // temporarily replace ignored chunks with comments,\n  // so that we don't have to worry what's there.\n  // for all we care there might be\n  // completely-horribly-broken-alien-non-html-emoj-cthulhu-filled content\n  value = value.replace(/<!-- htmlmin:ignore -->([\\s\\S]*?)<!-- htmlmin:ignore -->/g, function (match, group1) {\n    if (!uidIgnore) {\n      uidIgnore = uniqueId(value);\n      var pattern = new RegExp('^' + uidIgnore + '([0-9]+)$');\n      if (options.ignoreCustomComments) {\n        options.ignoreCustomComments = options.ignoreCustomComments.slice();\n      } else {\n        options.ignoreCustomComments = [];\n      }\n      options.ignoreCustomComments.push(pattern);\n    }\n    var token = '<!--' + uidIgnore + ignoredMarkupChunks.length + '-->';\n    ignoredMarkupChunks.push(group1);\n    return token;\n  });\n  var customFragments = options.ignoreCustomFragments.map(function (re) {\n    return re.source;\n  });\n  if (customFragments.length) {\n    var reCustomIgnore = new RegExp('\\\\s*(?:' + customFragments.join('|') + ')+\\\\s*', 'g');\n    // temporarily replace custom ignored fragments with unique attributes\n    value = value.replace(reCustomIgnore, function (match) {\n      if (!uidAttr) {\n        uidAttr = uniqueId(value);\n        uidPattern = new RegExp('(\\\\s*)' + uidAttr + '([0-9]+)' + uidAttr + '(\\\\s*)', 'g');\n        if (options.minifyCSS) {\n          options.minifyCSS = function (fn) {\n            return function (text, type) {\n              text = text.replace(uidPattern, function (match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              });\n              var ids = [];\n              new CleanCSS().minify(wrapCSS(text, type)).warnings.forEach(function (warning) {\n                var match = uidPattern.exec(warning);\n                if (match) {\n                  var id = uidAttr + match[2] + uidAttr;\n                  text = text.replace(id, ignoreCSS(id));\n                  ids.push(id);\n                }\n              });\n              text = fn(text, type);\n              ids.forEach(function (id) {\n                text = text.replace(ignoreCSS(id), id);\n              });\n              return text;\n            };\n          }(options.minifyCSS);\n        }\n        if (options.minifyJS) {\n          options.minifyJS = function (fn) {\n            return function (text, type) {\n              return fn(text.replace(uidPattern, function (match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              }), type);\n            };\n          }(options.minifyJS);\n        }\n      }\n      var token = uidAttr + ignoredCustomMarkupChunks.length + uidAttr;\n      ignoredCustomMarkupChunks.push(/^(\\s*)[\\s\\S]*?(\\s*)$/.exec(match));\n      return '\\t' + token + '\\t';\n    });\n  }\n  if (options.sortAttributes && typeof options.sortAttributes !== 'function' || options.sortClassName && typeof options.sortClassName !== 'function') {\n    createSortFns(value, options, uidIgnore, uidAttr);\n  }\n  function _canCollapseWhitespace(tag, attrs) {\n    return options.canCollapseWhitespace(tag, attrs, canCollapseWhitespace);\n  }\n  function _canTrimWhitespace(tag, attrs) {\n    return options.canTrimWhitespace(tag, attrs, canTrimWhitespace);\n  }\n  function removeStartTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<[^/!]/.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n  function removeEndTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<\\//.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  // look for trailing whitespaces, bypass any inline tags\n  function trimTrailingWhitespace(index, nextTag) {\n    for (var endTag = null; index >= 0 && _canTrimWhitespace(endTag); index--) {\n      var str = buffer[index];\n      var match = str.match(/^<\\/([\\w:-]+)>$/);\n      if (match) {\n        endTag = match[1];\n      } else if (/>$/.test(str) || (buffer[index] = collapseWhitespaceSmart(str, null, nextTag, options))) {\n        break;\n      }\n    }\n  }\n\n  // look for trailing whitespaces from previously processed text\n  // which may not be trimmed due to a following comment or an empty\n  // element which has now been removed\n  function squashTrailingWhitespace(nextTag) {\n    var charsIndex = buffer.length - 1;\n    if (buffer.length > 1) {\n      var item = buffer[buffer.length - 1];\n      if (/^(?:<!|$)/.test(item) && item.indexOf(uidIgnore) === -1) {\n        charsIndex--;\n      }\n    }\n    trimTrailingWhitespace(charsIndex, nextTag);\n  }\n  new HTMLParser(value, {\n    partialMarkup: partialMarkup,\n    continueOnParseError: options.continueOnParseError,\n    customAttrAssign: options.customAttrAssign,\n    customAttrSurround: options.customAttrSurround,\n    html5: options.html5,\n    start: function (tag, attrs, unary, unarySlash, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.create(options);\n        options.caseSensitive = true;\n        options.keepClosingSlash = true;\n        options.name = identity;\n      }\n      tag = options.name(tag);\n      currentTag = tag;\n      charsPrevTag = tag;\n      if (!inlineTextTags(tag)) {\n        currentChars = '';\n      }\n      hasChars = false;\n      currentAttrs = attrs;\n      var optional = options.removeOptionalTags;\n      if (optional) {\n        var htmlTag = htmlTags(tag);\n        // <html> may be omitted if first thing inside is not comment\n        // <head> may be omitted if first thing inside is an element\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        // <colgroup> may be omitted if first thing inside is <col>\n        // <tbody> may be omitted if first thing inside is <tr>\n        if (htmlTag && canRemoveParentTag(optionalStartTag, tag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // end-tag-followed-by-start-tag omission rules\n        if (htmlTag && canRemovePrecedingTag(optionalEndTag, tag)) {\n          removeEndTag();\n          // <colgroup> cannot be omitted if preceding </colgroup> is omitted\n          // <tbody> cannot be omitted if preceding </tbody>, </thead> or </tfoot> is omitted\n          optional = !isStartTagMandatory(optionalEndTag, tag);\n        }\n        optionalEndTag = '';\n      }\n\n      // set whitespace flags for nested tags (eg. <code> within a <pre>)\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          squashTrailingWhitespace(tag);\n        }\n        if (!unary) {\n          if (!_canTrimWhitespace(tag, attrs) || stackNoTrimWhitespace.length) {\n            stackNoTrimWhitespace.push(tag);\n          }\n          if (!_canCollapseWhitespace(tag, attrs) || stackNoCollapseWhitespace.length) {\n            stackNoCollapseWhitespace.push(tag);\n          }\n        }\n      }\n      var openTag = '<' + tag;\n      var hasUnarySlash = unarySlash && options.keepClosingSlash;\n      buffer.push(openTag);\n      if (options.sortAttributes) {\n        options.sortAttributes(tag, attrs);\n      }\n      var parts = [];\n      for (var i = attrs.length, isLast = true; --i >= 0;) {\n        var normalized = normalizeAttr(attrs[i], attrs, tag, options);\n        if (normalized) {\n          parts.unshift(buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr));\n          isLast = false;\n        }\n      }\n      if (parts.length > 0) {\n        buffer.push(' ');\n        buffer.push.apply(buffer, parts);\n      }\n      // start tag must never be omitted if it has any attributes\n      else if (optional && optionalStartTags(tag)) {\n        optionalStartTag = tag;\n      }\n      buffer.push(buffer.pop() + (hasUnarySlash ? '/' : '') + '>');\n      if (autoGenerated && !options.includeAutoGeneratedTags) {\n        removeStartTag();\n        optionalStartTag = '';\n      }\n    },\n    end: function (tag, attrs, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.getPrototypeOf(options);\n      }\n      tag = options.name(tag);\n\n      // check if current tag is in a whitespace stack\n      if (options.collapseWhitespace) {\n        if (stackNoTrimWhitespace.length) {\n          if (tag === stackNoTrimWhitespace[stackNoTrimWhitespace.length - 1]) {\n            stackNoTrimWhitespace.pop();\n          }\n        } else {\n          squashTrailingWhitespace('/' + tag);\n        }\n        if (stackNoCollapseWhitespace.length && tag === stackNoCollapseWhitespace[stackNoCollapseWhitespace.length - 1]) {\n          stackNoCollapseWhitespace.pop();\n        }\n      }\n      var isElementEmpty = false;\n      if (tag === currentTag) {\n        currentTag = '';\n        isElementEmpty = !hasChars;\n      }\n      if (options.removeOptionalTags) {\n        // <html>, <head> or <body> may be omitted if the element is empty\n        if (isElementEmpty && topLevelTags(optionalStartTag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head> may be omitted if not followed by space or comment\n        // </p> may be omitted if no more content in non-</a> parent\n        // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n        if (htmlTags(tag) && optionalEndTag && !trailingTags(optionalEndTag) && (optionalEndTag !== 'p' || !pInlineTags(tag))) {\n          removeEndTag();\n        }\n        optionalEndTag = optionalEndTags(tag) ? tag : '';\n      }\n      if (options.removeEmptyElements && isElementEmpty && canRemoveElement(tag, attrs)) {\n        // remove last \"element\" from buffer\n        removeStartTag();\n        optionalStartTag = '';\n        optionalEndTag = '';\n      } else {\n        if (autoGenerated && !options.includeAutoGeneratedTags) {\n          optionalEndTag = '';\n        } else {\n          buffer.push('</' + tag + '>');\n        }\n        charsPrevTag = '/' + tag;\n        if (!inlineTags(tag)) {\n          currentChars = '';\n        } else if (isElementEmpty) {\n          currentChars += '|';\n        }\n      }\n    },\n    chars: function (text, prevTag, nextTag) {\n      prevTag = prevTag === '' ? 'comment' : prevTag;\n      nextTag = nextTag === '' ? 'comment' : nextTag;\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        text = decode(text);\n      }\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          if (prevTag === 'comment') {\n            var prevComment = buffer[buffer.length - 1];\n            if (prevComment.indexOf(uidIgnore) === -1) {\n              if (!prevComment) {\n                prevTag = charsPrevTag;\n              }\n              if (buffer.length > 1 && (!prevComment || !options.conservativeCollapse && / $/.test(currentChars))) {\n                var charsIndex = buffer.length - 2;\n                buffer[charsIndex] = buffer[charsIndex].replace(/\\s+$/, function (trailingSpaces) {\n                  text = trailingSpaces + text;\n                  return '';\n                });\n              }\n            }\n          }\n          if (prevTag) {\n            if (prevTag === '/nobr' || prevTag === 'wbr') {\n              if (/^\\s/.test(text)) {\n                var tagIndex = buffer.length - 1;\n                while (tagIndex > 0 && buffer[tagIndex].lastIndexOf('<' + prevTag) !== 0) {\n                  tagIndex--;\n                }\n                trimTrailingWhitespace(tagIndex - 1, 'br');\n              }\n            } else if (inlineTextTags(prevTag.charAt(0) === '/' ? prevTag.slice(1) : prevTag)) {\n              text = collapseWhitespace(text, options, /(?:^|\\s)$/.test(currentChars));\n            }\n          }\n          if (prevTag || nextTag) {\n            text = collapseWhitespaceSmart(text, prevTag, nextTag, options);\n          } else {\n            text = collapseWhitespace(text, options, true, true);\n          }\n          if (!text && /\\s$/.test(currentChars) && prevTag && prevTag.charAt(0) === '/') {\n            trimTrailingWhitespace(buffer.length - 1, nextTag);\n          }\n        }\n        if (!stackNoCollapseWhitespace.length && nextTag !== 'html' && !(prevTag && nextTag)) {\n          text = collapseWhitespace(text, options, false, false, true);\n        }\n      }\n      if (options.processScripts && specialContentTags(currentTag)) {\n        text = processScript(text, options, currentAttrs);\n      }\n      if (isExecutableScript(currentTag, currentAttrs)) {\n        text = options.minifyJS(text);\n      }\n      if (isStyleSheet(currentTag, currentAttrs)) {\n        text = options.minifyCSS(text);\n      }\n      if (options.removeOptionalTags && text) {\n        // <html> may be omitted if first thing inside is not comment\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        if (optionalStartTag === 'html' || optionalStartTag === 'body' && !/^\\s/.test(text)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head>, </colgroup> or </caption> may be omitted if not followed by space or comment\n        if (compactTags(optionalEndTag) || looseTags(optionalEndTag) && !/^\\s/.test(text)) {\n          removeEndTag();\n        }\n        optionalEndTag = '';\n      }\n      charsPrevTag = /^\\s*$/.test(text) ? prevTag : 'comment';\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        // Escape any `&` symbols that start either:\n        // 1) a legacy named character reference (i.e. one that doesn't end with `;`)\n        // 2) or any other character reference (i.e. one that does end with `;`)\n        // Note that `&` can be escaped as `&amp`, without the semi-colon.\n        // https://mathiasbynens.be/notes/ambiguous-ampersands\n        text = text.replace(/&((?:Iacute|aacute|uacute|plusmn|Otilde|otilde|agrave|Agrave|Yacute|yacute|Oslash|oslash|atilde|Atilde|brvbar|ccedil|Ccedil|Ograve|curren|divide|eacute|Eacute|ograve|Oacute|egrave|Egrave|Ugrave|frac12|frac14|frac34|ugrave|oacute|iacute|Ntilde|ntilde|Uacute|middot|igrave|Igrave|iquest|Aacute|cedil|laquo|micro|iexcl|Icirc|icirc|acirc|Ucirc|Ecirc|ocirc|Ocirc|ecirc|ucirc|Aring|aring|AElig|aelig|acute|pound|raquo|Acirc|times|THORN|szlig|thorn|COPY|auml|ordf|ordm|Uuml|macr|uuml|Auml|ouml|Ouml|para|nbsp|euml|quot|QUOT|Euml|yuml|cent|sect|copy|sup1|sup2|sup3|iuml|Iuml|ETH|shy|reg|not|yen|amp|AMP|REG|uml|eth|deg|gt|GT|LT|lt)(?!;)|(?:#?[0-9a-zA-Z]+;))/g, '&amp$1').replace(/</g, '&lt;');\n      }\n      if (uidPattern && options.collapseWhitespace && stackNoTrimWhitespace.length) {\n        text = text.replace(uidPattern, function (match, prefix, index) {\n          return ignoredCustomMarkupChunks[+index][0];\n        });\n      }\n      currentChars += text;\n      if (text) {\n        hasChars = true;\n      }\n      buffer.push(text);\n    },\n    comment: function (text, nonStandard) {\n      var prefix = nonStandard ? '<!' : '<!--';\n      var suffix = nonStandard ? '>' : '-->';\n      if (isConditionalComment(text)) {\n        text = prefix + cleanConditionalComment(text, options) + suffix;\n      } else if (options.removeComments) {\n        if (isIgnoredComment(text, options)) {\n          text = '<!--' + text + '-->';\n        } else {\n          text = '';\n        }\n      } else {\n        text = prefix + text + suffix;\n      }\n      if (options.removeOptionalTags && text) {\n        // preceding comments suppress tag omissions\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      buffer.push(text);\n    },\n    doctype: function (doctype) {\n      buffer.push(options.useShortDoctype ? '<!doctype' + (options.removeTagWhitespace ? '' : ' ') + 'html>' : collapseWhitespaceAll(doctype));\n    }\n  });\n  if (options.removeOptionalTags) {\n    // <html> may be omitted if first thing inside is not comment\n    // <head> or <body> may be omitted if empty\n    if (topLevelTags(optionalStartTag)) {\n      removeStartTag();\n    }\n    // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n    if (optionalEndTag && !trailingTags(optionalEndTag)) {\n      removeEndTag();\n    }\n  }\n  if (options.collapseWhitespace) {\n    squashTrailingWhitespace('br');\n  }\n  return joinResultSegments(buffer, options, uidPattern ? function (str) {\n    return str.replace(uidPattern, function (match, prefix, index, suffix) {\n      var chunk = ignoredCustomMarkupChunks[+index][0];\n      if (options.collapseWhitespace) {\n        if (prefix !== '\\t') {\n          chunk = prefix + chunk;\n        }\n        if (suffix !== '\\t') {\n          chunk += suffix;\n        }\n        return collapseWhitespace(chunk, {\n          preserveLineBreaks: options.preserveLineBreaks,\n          conservativeCollapse: !options.trimCustomFragments\n        }, /^[ \\n\\r\\t\\f]/.test(chunk), /[ \\n\\r\\t\\f]$/.test(chunk));\n      }\n      return chunk;\n    });\n  } : identity, uidIgnore ? function (str) {\n    return str.replace(new RegExp('<!--' + uidIgnore + '([0-9]+)-->', 'g'), function (match, index) {\n      return ignoredMarkupChunks[+index];\n    });\n  } : identity);\n}\nfunction joinResultSegments(results, options, restoreCustom, restoreIgnore) {\n  var str;\n  var maxLineLength = options.maxLineLength;\n  if (maxLineLength) {\n    var line = '',\n      lines = [];\n    while (results.length) {\n      var len = line.length;\n      var end = results[0].indexOf('\\n');\n      if (end < 0) {\n        line += restoreIgnore(restoreCustom(results.shift()));\n      } else {\n        line += restoreIgnore(restoreCustom(results[0].slice(0, end)));\n        results[0] = results[0].slice(end + 1);\n      }\n      if (len > 0 && line.length > maxLineLength) {\n        lines.push(line.slice(0, len));\n        line = line.slice(len);\n      } else if (end >= 0) {\n        lines.push(line);\n        line = '';\n      }\n    }\n    if (line) {\n      lines.push(line);\n    }\n    str = lines.join('\\n');\n  } else {\n    str = restoreIgnore(restoreCustom(results.join('')));\n  }\n  return options.collapseWhitespace ? collapseWhitespace(str, options, true, true) : str;\n}\nexports.minify = function (value, options) {\n  var start = Date.now();\n  options = processOptions(options || {});\n  var result = minify(value, options);\n  options.log('minified in: ' + (Date.now() - start) + 'ms');\n  return result;\n};","map":{"version":3,"names":["CleanCSS","require","decode","HTMLParser","RelateUrl","TokenChain","UglifyJS","utils","trimWhitespace","str","replace","collapseWhitespaceAll","spaces","collapseWhitespace","options","trimLeft","trimRight","collapseAll","lineBreakBefore","lineBreakAfter","preserveLineBreaks","conservative","conservativeCollapse","createMapFromString","inlineTags","inlineTextTags","selfClosingInlineTags","collapseWhitespaceSmart","prevTag","nextTag","collapseInlineTagWhitespace","charAt","slice","isConditionalComment","text","test","isIgnoredComment","i","len","ignoreCustomComments","length","isEventAttribute","attrName","patterns","customEventAttributes","canRemoveAttributeQuotes","value","attributesInclude","attributes","attribute","name","toLowerCase","isAttributeRedundant","tag","attrValue","attrs","executableScriptsMimetypes","createMap","isScriptTypeAttribute","split","isExecutableScript","isStyleLinkTypeAttribute","isStyleSheet","isSimpleBoolean","isBooleanValue","isBooleanAttribute","isUriTypeAttribute","isNumberTypeAttribute","isLinkType","isMediaQuery","srcsetTags","isSrcset","cleanAttributeValue","minifyJS","sortClassName","minifyURLs","minifyCSS","map","candidate","url","descriptor","match","num","suffix","join","isMetaViewport","numString","toString","isContentSecurityPolicy","customAttrCollapse","ignoreCSS","id","wrapCSS","type","unwrapCSS","matches","cleanConditionalComment","comment","processConditionalComments","prefix","minify","processScript","currentAttrs","processScripts","indexOf","optionalStartTags","optionalEndTags","headerTags","descriptionTags","pBlockTags","pInlineTags","rubyTags","rtcTag","optionTag","tableContentTags","tableSectionTags","cellTags","topLevelTags","compactTags","looseTags","trailingTags","htmlTags","canRemoveParentTag","optionalStartTag","isStartTagMandatory","optionalEndTag","canRemovePrecedingTag","reEmptyAttribute","RegExp","canDeleteEmptyAttribute","isValueEmpty","removeEmptyAttributes","hasAttrName","canRemoveElement","canCollapseWhitespace","canTrimWhitespace","normalizeAttr","attr","decodeEntities","isAttributeValue","removeRedundantAttributes","removeScriptTypeAttributes","removeStyleLinkTypeAttributes","buildAttr","normalized","hasUnarySlash","isLast","uidAttr","attrQuote","quote","attrFragment","emittedAttrValue","removeAttributeQuotes","preventAttributesEscaping","quoteCharacter","apos","quot","removeTagWhitespace","collapseBooleanAttributes","customAssign","customOpen","customClose","identity","processOptions","values","html5","ignoreCustomFragments","includeAutoGeneratedTags","log","Object","keys","forEach","key","cleanCssOutput","errors","styles","parse","bare_returns","inline","start","code","result","error","site","relate","err","uniqueId","Math","random","specialContentTags","createSortFns","uidIgnore","attrChains","sortAttributes","create","classChain","attrNames","shouldSkipUID","token","uid","shouldSkipUIDs","scan","input","currentTag","currentType","add","filter","end","chars","attrSorters","createSorter","sorter","attrMap","names","index","push","sort","shift","partialMarkup","buffer","charsPrevTag","currentChars","hasChars","stackNoTrimWhitespace","stackNoCollapseWhitespace","ignoredMarkupChunks","ignoredCustomMarkupChunks","uidPattern","group1","pattern","customFragments","re","source","reCustomIgnore","fn","chunks","ids","warnings","warning","exec","_canCollapseWhitespace","_canTrimWhitespace","removeStartTag","max","removeEndTag","trimTrailingWhitespace","endTag","squashTrailingWhitespace","charsIndex","item","continueOnParseError","customAttrAssign","customAttrSurround","unary","unarySlash","autoGenerated","caseSensitive","keepClosingSlash","optional","removeOptionalTags","htmlTag","openTag","parts","unshift","apply","pop","getPrototypeOf","isElementEmpty","removeEmptyElements","prevComment","trailingSpaces","tagIndex","lastIndexOf","nonStandard","removeComments","doctype","useShortDoctype","joinResultSegments","chunk","trimCustomFragments","results","restoreCustom","restoreIgnore","maxLineLength","line","lines","exports","Date","now"],"sources":["F:/landinghub-iconic/node_modules/.pnpm/html-minifier@4.0.0/node_modules/html-minifier/src/htmlminifier.js"],"sourcesContent":["'use strict';\n\nvar CleanCSS = require('clean-css');\nvar decode = require('he').decode;\nvar HTMLParser = require('./htmlparser').HTMLParser;\nvar RelateUrl = require('relateurl');\nvar TokenChain = require('./tokenchain');\nvar UglifyJS = require('uglify-js');\nvar utils = require('./utils');\n\nfunction trimWhitespace(str) {\n  return str && str.replace(/^[ \\n\\r\\t\\f]+/, '').replace(/[ \\n\\r\\t\\f]+$/, '');\n}\n\nfunction collapseWhitespaceAll(str) {\n  // Non-breaking space is specifically handled inside the replacer function here:\n  return str && str.replace(/[ \\n\\r\\t\\f\\xA0]+/g, function(spaces) {\n    return spaces === '\\t' ? '\\t' : spaces.replace(/(^|\\xA0+)[^\\xA0]+/g, '$1 ');\n  });\n}\n\nfunction collapseWhitespace(str, options, trimLeft, trimRight, collapseAll) {\n  var lineBreakBefore = '', lineBreakAfter = '';\n\n  if (options.preserveLineBreaks) {\n    str = str.replace(/^[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*/, function() {\n      lineBreakBefore = '\\n';\n      return '';\n    }).replace(/[ \\n\\r\\t\\f]*?[\\n\\r][ \\n\\r\\t\\f]*$/, function() {\n      lineBreakAfter = '\\n';\n      return '';\n    });\n  }\n\n  if (trimLeft) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/^[ \\n\\r\\t\\f\\xA0]+/, function(spaces) {\n      var conservative = !lineBreakBefore && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/^[^\\xA0]+/, '').replace(/(\\xA0+)[^\\xA0]+/g, '$1 ') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (trimRight) {\n    // Non-breaking space is specifically handled inside the replacer function here:\n    str = str.replace(/[ \\n\\r\\t\\f\\xA0]+$/, function(spaces) {\n      var conservative = !lineBreakAfter && options.conservativeCollapse;\n      if (conservative && spaces === '\\t') {\n        return '\\t';\n      }\n      return spaces.replace(/[^\\xA0]+(\\xA0+)/g, ' $1').replace(/[^\\xA0]+$/, '') || (conservative ? ' ' : '');\n    });\n  }\n\n  if (collapseAll) {\n    // strip non space whitespace then compress spaces to one\n    str = collapseWhitespaceAll(str);\n  }\n\n  return lineBreakBefore + str + lineBreakAfter;\n}\n\nvar createMapFromString = utils.createMapFromString;\n// non-empty tags that will maintain whitespace around them\nvar inlineTags = createMapFromString('a,abbr,acronym,b,bdi,bdo,big,button,cite,code,del,dfn,em,font,i,ins,kbd,label,mark,math,nobr,object,q,rp,rt,rtc,ruby,s,samp,select,small,span,strike,strong,sub,sup,svg,textarea,time,tt,u,var');\n// non-empty tags that will maintain whitespace within them\nvar inlineTextTags = createMapFromString('a,abbr,acronym,b,big,del,em,font,i,ins,kbd,mark,nobr,rp,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var');\n// self-closing tags that will maintain whitespace around them\nvar selfClosingInlineTags = createMapFromString('comment,img,input,wbr');\n\nfunction collapseWhitespaceSmart(str, prevTag, nextTag, options) {\n  var trimLeft = prevTag && !selfClosingInlineTags(prevTag);\n  if (trimLeft && !options.collapseInlineTagWhitespace) {\n    trimLeft = prevTag.charAt(0) === '/' ? !inlineTags(prevTag.slice(1)) : !inlineTextTags(prevTag);\n  }\n  var trimRight = nextTag && !selfClosingInlineTags(nextTag);\n  if (trimRight && !options.collapseInlineTagWhitespace) {\n    trimRight = nextTag.charAt(0) === '/' ? !inlineTextTags(nextTag.slice(1)) : !inlineTags(nextTag);\n  }\n  return collapseWhitespace(str, options, trimLeft, trimRight, prevTag && nextTag);\n}\n\nfunction isConditionalComment(text) {\n  return /^\\[if\\s[^\\]]+]|\\[endif]$/.test(text);\n}\n\nfunction isIgnoredComment(text, options) {\n  for (var i = 0, len = options.ignoreCustomComments.length; i < len; i++) {\n    if (options.ignoreCustomComments[i].test(text)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isEventAttribute(attrName, options) {\n  var patterns = options.customEventAttributes;\n  if (patterns) {\n    for (var i = patterns.length; i--;) {\n      if (patterns[i].test(attrName)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  return /^on[a-z]{3,}$/.test(attrName);\n}\n\nfunction canRemoveAttributeQuotes(value) {\n  // https://mathiasbynens.be/notes/unquoted-attribute-values\n  return /^[^ \\t\\n\\f\\r\"'`=<>]+$/.test(value);\n}\n\nfunction attributesInclude(attributes, attribute) {\n  for (var i = attributes.length; i--;) {\n    if (attributes[i].name.toLowerCase() === attribute) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isAttributeRedundant(tag, attrName, attrValue, attrs) {\n  attrValue = attrValue ? trimWhitespace(attrValue.toLowerCase()) : '';\n\n  return (\n    tag === 'script' &&\n    attrName === 'language' &&\n    attrValue === 'javascript' ||\n\n    tag === 'form' &&\n    attrName === 'method' &&\n    attrValue === 'get' ||\n\n    tag === 'input' &&\n    attrName === 'type' &&\n    attrValue === 'text' ||\n\n    tag === 'script' &&\n    attrName === 'charset' &&\n    !attributesInclude(attrs, 'src') ||\n\n    tag === 'a' &&\n    attrName === 'name' &&\n    attributesInclude(attrs, 'id') ||\n\n    tag === 'area' &&\n    attrName === 'shape' &&\n    attrValue === 'rect'\n  );\n}\n\n// https://mathiasbynens.be/demo/javascript-mime-type\n// https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-type\nvar executableScriptsMimetypes = utils.createMap([\n  'text/javascript',\n  'text/ecmascript',\n  'text/jscript',\n  'application/javascript',\n  'application/x-javascript',\n  'application/ecmascript'\n]);\n\nfunction isScriptTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue.split(/;/, 2)[0]).toLowerCase();\n  return attrValue === '' || executableScriptsMimetypes(attrValue);\n}\n\nfunction isExecutableScript(tag, attrs) {\n  if (tag !== 'script') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isScriptTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\n\nfunction isStyleLinkTypeAttribute(attrValue) {\n  attrValue = trimWhitespace(attrValue).toLowerCase();\n  return attrValue === '' || attrValue === 'text/css';\n}\n\nfunction isStyleSheet(tag, attrs) {\n  if (tag !== 'style') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    var attrName = attrs[i].name.toLowerCase();\n    if (attrName === 'type') {\n      return isStyleLinkTypeAttribute(attrs[i].value);\n    }\n  }\n  return true;\n}\n\nvar isSimpleBoolean = createMapFromString('allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible');\nvar isBooleanValue = createMapFromString('true,false');\n\nfunction isBooleanAttribute(attrName, attrValue) {\n  return isSimpleBoolean(attrName) || attrName === 'draggable' && !isBooleanValue(attrValue);\n}\n\nfunction isUriTypeAttribute(attrName, tag) {\n  return (\n    /^(?:a|area|link|base)$/.test(tag) && attrName === 'href' ||\n    tag === 'img' && /^(?:src|longdesc|usemap)$/.test(attrName) ||\n    tag === 'object' && /^(?:classid|codebase|data|usemap)$/.test(attrName) ||\n    tag === 'q' && attrName === 'cite' ||\n    tag === 'blockquote' && attrName === 'cite' ||\n    (tag === 'ins' || tag === 'del') && attrName === 'cite' ||\n    tag === 'form' && attrName === 'action' ||\n    tag === 'input' && (attrName === 'src' || attrName === 'usemap') ||\n    tag === 'head' && attrName === 'profile' ||\n    tag === 'script' && (attrName === 'src' || attrName === 'for')\n  );\n}\n\nfunction isNumberTypeAttribute(attrName, tag) {\n  return (\n    /^(?:a|area|object|button)$/.test(tag) && attrName === 'tabindex' ||\n    tag === 'input' && (attrName === 'maxlength' || attrName === 'tabindex') ||\n    tag === 'select' && (attrName === 'size' || attrName === 'tabindex') ||\n    tag === 'textarea' && /^(?:rows|cols|tabindex)$/.test(attrName) ||\n    tag === 'colgroup' && attrName === 'span' ||\n    tag === 'col' && attrName === 'span' ||\n    (tag === 'th' || tag === 'td') && (attrName === 'rowspan' || attrName === 'colspan')\n  );\n}\n\nfunction isLinkType(tag, attrs, value) {\n  if (tag !== 'link') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'rel' && attrs[i].value === value) {\n      return true;\n    }\n  }\n}\n\nfunction isMediaQuery(tag, attrs, attrName) {\n  return attrName === 'media' && (isLinkType(tag, attrs, 'stylesheet') || isStyleSheet(tag, attrs));\n}\n\nvar srcsetTags = createMapFromString('img,source');\n\nfunction isSrcset(attrName, tag) {\n  return attrName === 'srcset' && srcsetTags(tag);\n}\n\nfunction cleanAttributeValue(tag, attrName, attrValue, options, attrs) {\n  if (isEventAttribute(attrName, options)) {\n    attrValue = trimWhitespace(attrValue).replace(/^javascript:\\s*/i, '');\n    return options.minifyJS(attrValue, true);\n  }\n  else if (attrName === 'class') {\n    attrValue = trimWhitespace(attrValue);\n    if (options.sortClassName) {\n      attrValue = options.sortClassName(attrValue);\n    }\n    else {\n      attrValue = collapseWhitespaceAll(attrValue);\n    }\n    return attrValue;\n  }\n  else if (isUriTypeAttribute(attrName, tag)) {\n    attrValue = trimWhitespace(attrValue);\n    return isLinkType(tag, attrs, 'canonical') ? attrValue : options.minifyURLs(attrValue);\n  }\n  else if (isNumberTypeAttribute(attrName, tag)) {\n    return trimWhitespace(attrValue);\n  }\n  else if (attrName === 'style') {\n    attrValue = trimWhitespace(attrValue);\n    if (attrValue) {\n      if (/;$/.test(attrValue) && !/&#?[0-9a-zA-Z]+;$/.test(attrValue)) {\n        attrValue = attrValue.replace(/\\s*;$/, ';');\n      }\n      attrValue = options.minifyCSS(attrValue, 'inline');\n    }\n    return attrValue;\n  }\n  else if (isSrcset(attrName, tag)) {\n    // https://html.spec.whatwg.org/multipage/embedded-content.html#attr-img-srcset\n    attrValue = trimWhitespace(attrValue).split(/\\s+,\\s*|\\s*,\\s+/).map(function(candidate) {\n      var url = candidate;\n      var descriptor = '';\n      var match = candidate.match(/\\s+([1-9][0-9]*w|[0-9]+(?:\\.[0-9]+)?x)$/);\n      if (match) {\n        url = url.slice(0, -match[0].length);\n        var num = +match[1].slice(0, -1);\n        var suffix = match[1].slice(-1);\n        if (num !== 1 || suffix !== 'x') {\n          descriptor = ' ' + num + suffix;\n        }\n      }\n      return options.minifyURLs(url) + descriptor;\n    }).join(', ');\n  }\n  else if (isMetaViewport(tag, attrs) && attrName === 'content') {\n    attrValue = attrValue.replace(/\\s+/g, '').replace(/[0-9]+\\.[0-9]+/g, function(numString) {\n      // \"0.90000\" -> \"0.9\"\n      // \"1.0\" -> \"1\"\n      // \"1.0001\" -> \"1.0001\" (unchanged)\n      return (+numString).toString();\n    });\n  }\n  else if (isContentSecurityPolicy(tag, attrs) && attrName.toLowerCase() === 'content') {\n    return collapseWhitespaceAll(attrValue);\n  }\n  else if (options.customAttrCollapse && options.customAttrCollapse.test(attrName)) {\n    attrValue = attrValue.replace(/\\n+|\\r+|\\s{2,}/g, '');\n  }\n  else if (tag === 'script' && attrName === 'type') {\n    attrValue = trimWhitespace(attrValue.replace(/\\s*;\\s*/g, ';'));\n  }\n  else if (isMediaQuery(tag, attrs, attrName)) {\n    attrValue = trimWhitespace(attrValue);\n    return options.minifyCSS(attrValue, 'media');\n  }\n  return attrValue;\n}\n\nfunction isMetaViewport(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name === 'name' && attrs[i].value === 'viewport') {\n      return true;\n    }\n  }\n}\n\nfunction isContentSecurityPolicy(tag, attrs) {\n  if (tag !== 'meta') {\n    return false;\n  }\n  for (var i = 0, len = attrs.length; i < len; i++) {\n    if (attrs[i].name.toLowerCase() === 'http-equiv' && attrs[i].value.toLowerCase() === 'content-security-policy') {\n      return true;\n    }\n  }\n}\n\nfunction ignoreCSS(id) {\n  return '/* clean-css ignore:start */' + id + '/* clean-css ignore:end */';\n}\n\n// Wrap CSS declarations for CleanCSS > 3.x\n// See https://github.com/jakubpawlowicz/clean-css/issues/418\nfunction wrapCSS(text, type) {\n  switch (type) {\n    case 'inline':\n      return '*{' + text + '}';\n    case 'media':\n      return '@media ' + text + '{a{top:0}}';\n    default:\n      return text;\n  }\n}\n\nfunction unwrapCSS(text, type) {\n  var matches;\n  switch (type) {\n    case 'inline':\n      matches = text.match(/^\\*\\{([\\s\\S]*)\\}$/);\n      break;\n    case 'media':\n      matches = text.match(/^@media ([\\s\\S]*?)\\s*{[\\s\\S]*}$/);\n      break;\n  }\n  return matches ? matches[1] : text;\n}\n\nfunction cleanConditionalComment(comment, options) {\n  return options.processConditionalComments ? comment.replace(/^(\\[if\\s[^\\]]+]>)([\\s\\S]*?)(<!\\[endif])$/, function(match, prefix, text, suffix) {\n    return prefix + minify(text, options, true) + suffix;\n  }) : comment;\n}\n\nfunction processScript(text, options, currentAttrs) {\n  for (var i = 0, len = currentAttrs.length; i < len; i++) {\n    if (currentAttrs[i].name.toLowerCase() === 'type' &&\n        options.processScripts.indexOf(currentAttrs[i].value) > -1) {\n      return minify(text, options);\n    }\n  }\n  return text;\n}\n\n// Tag omission rules from https://html.spec.whatwg.org/multipage/syntax.html#optional-tags\n// with the following deviations:\n// - retain <body> if followed by <noscript>\n// - </rb>, </rt>, </rtc>, </rp> & </tfoot> follow https://www.w3.org/TR/html5/syntax.html#optional-tags\n// - retain all tags which are adjacent to non-standard HTML tags\nvar optionalStartTags = createMapFromString('html,head,body,colgroup,tbody');\nvar optionalEndTags = createMapFromString('html,head,body,li,dt,dd,p,rb,rt,rtc,rp,optgroup,option,colgroup,caption,thead,tbody,tfoot,tr,td,th');\nvar headerTags = createMapFromString('meta,link,script,style,template,noscript');\nvar descriptionTags = createMapFromString('dt,dd');\nvar pBlockTags = createMapFromString('address,article,aside,blockquote,details,div,dl,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,hr,main,menu,nav,ol,p,pre,section,table,ul');\nvar pInlineTags = createMapFromString('a,audio,del,ins,map,noscript,video');\nvar rubyTags = createMapFromString('rb,rt,rtc,rp');\nvar rtcTag = createMapFromString('rb,rtc,rp');\nvar optionTag = createMapFromString('option,optgroup');\nvar tableContentTags = createMapFromString('tbody,tfoot');\nvar tableSectionTags = createMapFromString('thead,tbody,tfoot');\nvar cellTags = createMapFromString('td,th');\nvar topLevelTags = createMapFromString('html,head,body');\nvar compactTags = createMapFromString('html,body');\nvar looseTags = createMapFromString('head,colgroup,caption');\nvar trailingTags = createMapFromString('dt,thead');\nvar htmlTags = createMapFromString('a,abbr,acronym,address,applet,area,article,aside,audio,b,base,basefont,bdi,bdo,bgsound,big,blink,blockquote,body,br,button,canvas,caption,center,cite,code,col,colgroup,command,content,data,datalist,dd,del,details,dfn,dialog,dir,div,dl,dt,element,em,embed,fieldset,figcaption,figure,font,footer,form,frame,frameset,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,i,iframe,image,img,input,ins,isindex,kbd,keygen,label,legend,li,link,listing,main,map,mark,marquee,menu,menuitem,meta,meter,multicol,nav,nobr,noembed,noframes,noscript,object,ol,optgroup,option,output,p,param,picture,plaintext,pre,progress,q,rb,rp,rt,rtc,ruby,s,samp,script,section,select,shadow,small,source,spacer,span,strike,strong,style,sub,summary,sup,table,tbody,td,template,textarea,tfoot,th,thead,time,title,tr,track,tt,u,ul,var,video,wbr,xmp');\n\nfunction canRemoveParentTag(optionalStartTag, tag) {\n  switch (optionalStartTag) {\n    case 'html':\n    case 'head':\n      return true;\n    case 'body':\n      return !headerTags(tag);\n    case 'colgroup':\n      return tag === 'col';\n    case 'tbody':\n      return tag === 'tr';\n  }\n  return false;\n}\n\nfunction isStartTagMandatory(optionalEndTag, tag) {\n  switch (tag) {\n    case 'colgroup':\n      return optionalEndTag === 'colgroup';\n    case 'tbody':\n      return tableSectionTags(optionalEndTag);\n  }\n  return false;\n}\n\nfunction canRemovePrecedingTag(optionalEndTag, tag) {\n  switch (optionalEndTag) {\n    case 'html':\n    case 'head':\n    case 'body':\n    case 'colgroup':\n    case 'caption':\n      return true;\n    case 'li':\n    case 'optgroup':\n    case 'tr':\n      return tag === optionalEndTag;\n    case 'dt':\n    case 'dd':\n      return descriptionTags(tag);\n    case 'p':\n      return pBlockTags(tag);\n    case 'rb':\n    case 'rt':\n    case 'rp':\n      return rubyTags(tag);\n    case 'rtc':\n      return rtcTag(tag);\n    case 'option':\n      return optionTag(tag);\n    case 'thead':\n    case 'tbody':\n      return tableContentTags(tag);\n    case 'tfoot':\n      return tag === 'tbody';\n    case 'td':\n    case 'th':\n      return cellTags(tag);\n  }\n  return false;\n}\n\nvar reEmptyAttribute = new RegExp(\n  '^(?:class|id|style|title|lang|dir|on(?:focus|blur|change|click|dblclick|mouse(' +\n    '?:down|up|over|move|out)|key(?:press|down|up)))$');\n\nfunction canDeleteEmptyAttribute(tag, attrName, attrValue, options) {\n  var isValueEmpty = !attrValue || /^\\s*$/.test(attrValue);\n  if (!isValueEmpty) {\n    return false;\n  }\n  if (typeof options.removeEmptyAttributes === 'function') {\n    return options.removeEmptyAttributes(attrName, tag);\n  }\n  return tag === 'input' && attrName === 'value' || reEmptyAttribute.test(attrName);\n}\n\nfunction hasAttrName(name, attrs) {\n  for (var i = attrs.length - 1; i >= 0; i--) {\n    if (attrs[i].name === name) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction canRemoveElement(tag, attrs) {\n  switch (tag) {\n    case 'textarea':\n      return false;\n    case 'audio':\n    case 'script':\n    case 'video':\n      if (hasAttrName('src', attrs)) {\n        return false;\n      }\n      break;\n    case 'iframe':\n      if (hasAttrName('src', attrs) || hasAttrName('srcdoc', attrs)) {\n        return false;\n      }\n      break;\n    case 'object':\n      if (hasAttrName('data', attrs)) {\n        return false;\n      }\n      break;\n    case 'applet':\n      if (hasAttrName('code', attrs)) {\n        return false;\n      }\n      break;\n  }\n  return true;\n}\n\nfunction canCollapseWhitespace(tag) {\n  return !/^(?:script|style|pre|textarea)$/.test(tag);\n}\n\nfunction canTrimWhitespace(tag) {\n  return !/^(?:pre|textarea)$/.test(tag);\n}\n\nfunction normalizeAttr(attr, attrs, tag, options) {\n  var attrName = options.name(attr.name),\n      attrValue = attr.value;\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = decode(attrValue, { isAttributeValue: true });\n  }\n\n  if (options.removeRedundantAttributes &&\n    isAttributeRedundant(tag, attrName, attrValue, attrs) ||\n    options.removeScriptTypeAttributes && tag === 'script' &&\n    attrName === 'type' && isScriptTypeAttribute(attrValue) ||\n    options.removeStyleLinkTypeAttributes && (tag === 'style' || tag === 'link') &&\n    attrName === 'type' && isStyleLinkTypeAttribute(attrValue)) {\n    return;\n  }\n\n  if (attrValue) {\n    attrValue = cleanAttributeValue(tag, attrName, attrValue, options, attrs);\n  }\n\n  if (options.removeEmptyAttributes &&\n      canDeleteEmptyAttribute(tag, attrName, attrValue, options)) {\n    return;\n  }\n\n  if (options.decodeEntities && attrValue) {\n    attrValue = attrValue.replace(/&(#?[0-9a-zA-Z]+;)/g, '&amp;$1');\n  }\n\n  return {\n    attr: attr,\n    name: attrName,\n    value: attrValue\n  };\n}\n\nfunction buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr) {\n  var attrName = normalized.name,\n      attrValue = normalized.value,\n      attr = normalized.attr,\n      attrQuote = attr.quote,\n      attrFragment,\n      emittedAttrValue;\n\n  if (typeof attrValue !== 'undefined' && (!options.removeAttributeQuotes ||\n      ~attrValue.indexOf(uidAttr) || !canRemoveAttributeQuotes(attrValue))) {\n    if (!options.preventAttributesEscaping) {\n      if (typeof options.quoteCharacter === 'undefined') {\n        var apos = (attrValue.match(/'/g) || []).length;\n        var quot = (attrValue.match(/\"/g) || []).length;\n        attrQuote = apos < quot ? '\\'' : '\"';\n      }\n      else {\n        attrQuote = options.quoteCharacter === '\\'' ? '\\'' : '\"';\n      }\n      if (attrQuote === '\"') {\n        attrValue = attrValue.replace(/\"/g, '&#34;');\n      }\n      else {\n        attrValue = attrValue.replace(/'/g, '&#39;');\n      }\n    }\n    emittedAttrValue = attrQuote + attrValue + attrQuote;\n    if (!isLast && !options.removeTagWhitespace) {\n      emittedAttrValue += ' ';\n    }\n  }\n  // make sure trailing slash is not interpreted as HTML self-closing tag\n  else if (isLast && !hasUnarySlash && !/\\/$/.test(attrValue)) {\n    emittedAttrValue = attrValue;\n  }\n  else {\n    emittedAttrValue = attrValue + ' ';\n  }\n\n  if (typeof attrValue === 'undefined' || options.collapseBooleanAttributes &&\n      isBooleanAttribute(attrName.toLowerCase(), attrValue.toLowerCase())) {\n    attrFragment = attrName;\n    if (!isLast) {\n      attrFragment += ' ';\n    }\n  }\n  else {\n    attrFragment = attrName + attr.customAssign + emittedAttrValue;\n  }\n\n  return attr.customOpen + attrFragment + attr.customClose;\n}\n\nfunction identity(value) {\n  return value;\n}\n\nfunction processOptions(values) {\n  var options = {\n    name: function(name) {\n      return name.toLowerCase();\n    },\n    canCollapseWhitespace: canCollapseWhitespace,\n    canTrimWhitespace: canTrimWhitespace,\n    html5: true,\n    ignoreCustomComments: [/^!/],\n    ignoreCustomFragments: [\n      /<%[\\s\\S]*?%>/,\n      /<\\?[\\s\\S]*?\\?>/\n    ],\n    includeAutoGeneratedTags: true,\n    log: identity,\n    minifyCSS: identity,\n    minifyJS: identity,\n    minifyURLs: identity\n  };\n  Object.keys(values).forEach(function(key) {\n    var value = values[key];\n    if (key === 'caseSensitive') {\n      if (value) {\n        options.name = identity;\n      }\n    }\n    else if (key === 'log') {\n      if (typeof value === 'function') {\n        options.log = value;\n      }\n    }\n    else if (key === 'minifyCSS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyCSS = function(text, type) {\n        text = text.replace(/(url\\s*\\(\\s*)(\"|'|)(.*?)\\2(\\s*\\))/ig, function(match, prefix, quote, url, suffix) {\n          return prefix + quote + options.minifyURLs(url) + quote + suffix;\n        });\n        var cleanCssOutput = new CleanCSS(value).minify(wrapCSS(text, type));\n        if (cleanCssOutput.errors.length > 0) {\n          cleanCssOutput.errors.forEach(options.log);\n          return text;\n        }\n        return unwrapCSS(cleanCssOutput.styles, type);\n      };\n    }\n    else if (key === 'minifyJS' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value !== 'object') {\n        value = {};\n      }\n      (value.parse || (value.parse = {})).bare_returns = false;\n      options.minifyJS = function(text, inline) {\n        var start = text.match(/^\\s*<!--.*/);\n        var code = start ? text.slice(start[0].length).replace(/\\n\\s*-->\\s*$/, '') : text;\n        value.parse.bare_returns = inline;\n        var result = UglifyJS.minify(code, value);\n        if (result.error) {\n          options.log(result.error);\n          return text;\n        }\n        return result.code.replace(/;$/, '');\n      };\n    }\n    else if (key === 'minifyURLs' && typeof value !== 'function') {\n      if (!value) {\n        return;\n      }\n      if (typeof value === 'string') {\n        value = { site: value };\n      }\n      else if (typeof value !== 'object') {\n        value = {};\n      }\n      options.minifyURLs = function(text) {\n        try {\n          return RelateUrl.relate(text, value);\n        }\n        catch (err) {\n          options.log(err);\n          return text;\n        }\n      };\n    }\n    else {\n      options[key] = value;\n    }\n  });\n  return options;\n}\n\nfunction uniqueId(value) {\n  var id;\n  do {\n    id = Math.random().toString(36).replace(/^0\\.[0-9]*/, '');\n  } while (~value.indexOf(id));\n  return id;\n}\n\nvar specialContentTags = createMapFromString('script,style');\n\nfunction createSortFns(value, options, uidIgnore, uidAttr) {\n  var attrChains = options.sortAttributes && Object.create(null);\n  var classChain = options.sortClassName && new TokenChain();\n\n  function attrNames(attrs) {\n    return attrs.map(function(attr) {\n      return options.name(attr.name);\n    });\n  }\n\n  function shouldSkipUID(token, uid) {\n    return !uid || token.indexOf(uid) === -1;\n  }\n\n  function shouldSkipUIDs(token) {\n    return shouldSkipUID(token, uidIgnore) && shouldSkipUID(token, uidAttr);\n  }\n\n  function scan(input) {\n    var currentTag, currentType;\n    new HTMLParser(input, {\n      start: function(tag, attrs) {\n        if (attrChains) {\n          if (!attrChains[tag]) {\n            attrChains[tag] = new TokenChain();\n          }\n          attrChains[tag].add(attrNames(attrs).filter(shouldSkipUIDs));\n        }\n        for (var i = 0, len = attrs.length; i < len; i++) {\n          var attr = attrs[i];\n          if (classChain && attr.value && options.name(attr.name) === 'class') {\n            classChain.add(trimWhitespace(attr.value).split(/[ \\t\\n\\f\\r]+/).filter(shouldSkipUIDs));\n          }\n          else if (options.processScripts && attr.name.toLowerCase() === 'type') {\n            currentTag = tag;\n            currentType = attr.value;\n          }\n        }\n      },\n      end: function() {\n        currentTag = '';\n      },\n      chars: function(text) {\n        if (options.processScripts && specialContentTags(currentTag) &&\n            options.processScripts.indexOf(currentType) > -1) {\n          scan(text);\n        }\n      }\n    });\n  }\n\n  var log = options.log;\n  options.log = identity;\n  options.sortAttributes = false;\n  options.sortClassName = false;\n  scan(minify(value, options));\n  options.log = log;\n  if (attrChains) {\n    var attrSorters = Object.create(null);\n    for (var tag in attrChains) {\n      attrSorters[tag] = attrChains[tag].createSorter();\n    }\n    options.sortAttributes = function(tag, attrs) {\n      var sorter = attrSorters[tag];\n      if (sorter) {\n        var attrMap = Object.create(null);\n        var names = attrNames(attrs);\n        names.forEach(function(name, index) {\n          (attrMap[name] || (attrMap[name] = [])).push(attrs[index]);\n        });\n        sorter.sort(names).forEach(function(name, index) {\n          attrs[index] = attrMap[name].shift();\n        });\n      }\n    };\n  }\n  if (classChain) {\n    var sorter = classChain.createSorter();\n    options.sortClassName = function(value) {\n      return sorter.sort(value.split(/[ \\n\\f\\r]+/)).join(' ');\n    };\n  }\n}\n\nfunction minify(value, options, partialMarkup) {\n  if (options.collapseWhitespace) {\n    value = collapseWhitespace(value, options, true, true);\n  }\n\n  var buffer = [],\n      charsPrevTag,\n      currentChars = '',\n      hasChars,\n      currentTag = '',\n      currentAttrs = [],\n      stackNoTrimWhitespace = [],\n      stackNoCollapseWhitespace = [],\n      optionalStartTag = '',\n      optionalEndTag = '',\n      ignoredMarkupChunks = [],\n      ignoredCustomMarkupChunks = [],\n      uidIgnore,\n      uidAttr,\n      uidPattern;\n\n  // temporarily replace ignored chunks with comments,\n  // so that we don't have to worry what's there.\n  // for all we care there might be\n  // completely-horribly-broken-alien-non-html-emoj-cthulhu-filled content\n  value = value.replace(/<!-- htmlmin:ignore -->([\\s\\S]*?)<!-- htmlmin:ignore -->/g, function(match, group1) {\n    if (!uidIgnore) {\n      uidIgnore = uniqueId(value);\n      var pattern = new RegExp('^' + uidIgnore + '([0-9]+)$');\n      if (options.ignoreCustomComments) {\n        options.ignoreCustomComments = options.ignoreCustomComments.slice();\n      }\n      else {\n        options.ignoreCustomComments = [];\n      }\n      options.ignoreCustomComments.push(pattern);\n    }\n    var token = '<!--' + uidIgnore + ignoredMarkupChunks.length + '-->';\n    ignoredMarkupChunks.push(group1);\n    return token;\n  });\n\n  var customFragments = options.ignoreCustomFragments.map(function(re) {\n    return re.source;\n  });\n  if (customFragments.length) {\n    var reCustomIgnore = new RegExp('\\\\s*(?:' + customFragments.join('|') + ')+\\\\s*', 'g');\n    // temporarily replace custom ignored fragments with unique attributes\n    value = value.replace(reCustomIgnore, function(match) {\n      if (!uidAttr) {\n        uidAttr = uniqueId(value);\n        uidPattern = new RegExp('(\\\\s*)' + uidAttr + '([0-9]+)' + uidAttr + '(\\\\s*)', 'g');\n        if (options.minifyCSS) {\n          options.minifyCSS = (function(fn) {\n            return function(text, type) {\n              text = text.replace(uidPattern, function(match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              });\n              var ids = [];\n              new CleanCSS().minify(wrapCSS(text, type)).warnings.forEach(function(warning) {\n                var match = uidPattern.exec(warning);\n                if (match) {\n                  var id = uidAttr + match[2] + uidAttr;\n                  text = text.replace(id, ignoreCSS(id));\n                  ids.push(id);\n                }\n              });\n              text = fn(text, type);\n              ids.forEach(function(id) {\n                text = text.replace(ignoreCSS(id), id);\n              });\n              return text;\n            };\n          })(options.minifyCSS);\n        }\n        if (options.minifyJS) {\n          options.minifyJS = (function(fn) {\n            return function(text, type) {\n              return fn(text.replace(uidPattern, function(match, prefix, index) {\n                var chunks = ignoredCustomMarkupChunks[+index];\n                return chunks[1] + uidAttr + index + uidAttr + chunks[2];\n              }), type);\n            };\n          })(options.minifyJS);\n        }\n      }\n      var token = uidAttr + ignoredCustomMarkupChunks.length + uidAttr;\n      ignoredCustomMarkupChunks.push(/^(\\s*)[\\s\\S]*?(\\s*)$/.exec(match));\n      return '\\t' + token + '\\t';\n    });\n  }\n\n  if (options.sortAttributes && typeof options.sortAttributes !== 'function' ||\n      options.sortClassName && typeof options.sortClassName !== 'function') {\n    createSortFns(value, options, uidIgnore, uidAttr);\n  }\n\n  function _canCollapseWhitespace(tag, attrs) {\n    return options.canCollapseWhitespace(tag, attrs, canCollapseWhitespace);\n  }\n\n  function _canTrimWhitespace(tag, attrs) {\n    return options.canTrimWhitespace(tag, attrs, canTrimWhitespace);\n  }\n\n  function removeStartTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<[^/!]/.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  function removeEndTag() {\n    var index = buffer.length - 1;\n    while (index > 0 && !/^<\\//.test(buffer[index])) {\n      index--;\n    }\n    buffer.length = Math.max(0, index);\n  }\n\n  // look for trailing whitespaces, bypass any inline tags\n  function trimTrailingWhitespace(index, nextTag) {\n    for (var endTag = null; index >= 0 && _canTrimWhitespace(endTag); index--) {\n      var str = buffer[index];\n      var match = str.match(/^<\\/([\\w:-]+)>$/);\n      if (match) {\n        endTag = match[1];\n      }\n      else if (/>$/.test(str) || (buffer[index] = collapseWhitespaceSmart(str, null, nextTag, options))) {\n        break;\n      }\n    }\n  }\n\n  // look for trailing whitespaces from previously processed text\n  // which may not be trimmed due to a following comment or an empty\n  // element which has now been removed\n  function squashTrailingWhitespace(nextTag) {\n    var charsIndex = buffer.length - 1;\n    if (buffer.length > 1) {\n      var item = buffer[buffer.length - 1];\n      if (/^(?:<!|$)/.test(item) && item.indexOf(uidIgnore) === -1) {\n        charsIndex--;\n      }\n    }\n    trimTrailingWhitespace(charsIndex, nextTag);\n  }\n\n  new HTMLParser(value, {\n    partialMarkup: partialMarkup,\n    continueOnParseError: options.continueOnParseError,\n    customAttrAssign: options.customAttrAssign,\n    customAttrSurround: options.customAttrSurround,\n    html5: options.html5,\n\n    start: function(tag, attrs, unary, unarySlash, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.create(options);\n        options.caseSensitive = true;\n        options.keepClosingSlash = true;\n        options.name = identity;\n      }\n      tag = options.name(tag);\n      currentTag = tag;\n      charsPrevTag = tag;\n      if (!inlineTextTags(tag)) {\n        currentChars = '';\n      }\n      hasChars = false;\n      currentAttrs = attrs;\n\n      var optional = options.removeOptionalTags;\n      if (optional) {\n        var htmlTag = htmlTags(tag);\n        // <html> may be omitted if first thing inside is not comment\n        // <head> may be omitted if first thing inside is an element\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        // <colgroup> may be omitted if first thing inside is <col>\n        // <tbody> may be omitted if first thing inside is <tr>\n        if (htmlTag && canRemoveParentTag(optionalStartTag, tag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // end-tag-followed-by-start-tag omission rules\n        if (htmlTag && canRemovePrecedingTag(optionalEndTag, tag)) {\n          removeEndTag();\n          // <colgroup> cannot be omitted if preceding </colgroup> is omitted\n          // <tbody> cannot be omitted if preceding </tbody>, </thead> or </tfoot> is omitted\n          optional = !isStartTagMandatory(optionalEndTag, tag);\n        }\n        optionalEndTag = '';\n      }\n\n      // set whitespace flags for nested tags (eg. <code> within a <pre>)\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          squashTrailingWhitespace(tag);\n        }\n        if (!unary) {\n          if (!_canTrimWhitespace(tag, attrs) || stackNoTrimWhitespace.length) {\n            stackNoTrimWhitespace.push(tag);\n          }\n          if (!_canCollapseWhitespace(tag, attrs) || stackNoCollapseWhitespace.length) {\n            stackNoCollapseWhitespace.push(tag);\n          }\n        }\n      }\n\n      var openTag = '<' + tag;\n      var hasUnarySlash = unarySlash && options.keepClosingSlash;\n\n      buffer.push(openTag);\n\n      if (options.sortAttributes) {\n        options.sortAttributes(tag, attrs);\n      }\n\n      var parts = [];\n      for (var i = attrs.length, isLast = true; --i >= 0;) {\n        var normalized = normalizeAttr(attrs[i], attrs, tag, options);\n        if (normalized) {\n          parts.unshift(buildAttr(normalized, hasUnarySlash, options, isLast, uidAttr));\n          isLast = false;\n        }\n      }\n      if (parts.length > 0) {\n        buffer.push(' ');\n        buffer.push.apply(buffer, parts);\n      }\n      // start tag must never be omitted if it has any attributes\n      else if (optional && optionalStartTags(tag)) {\n        optionalStartTag = tag;\n      }\n\n      buffer.push(buffer.pop() + (hasUnarySlash ? '/' : '') + '>');\n\n      if (autoGenerated && !options.includeAutoGeneratedTags) {\n        removeStartTag();\n        optionalStartTag = '';\n      }\n    },\n    end: function(tag, attrs, autoGenerated) {\n      if (tag.toLowerCase() === 'svg') {\n        options = Object.getPrototypeOf(options);\n      }\n      tag = options.name(tag);\n\n      // check if current tag is in a whitespace stack\n      if (options.collapseWhitespace) {\n        if (stackNoTrimWhitespace.length) {\n          if (tag === stackNoTrimWhitespace[stackNoTrimWhitespace.length - 1]) {\n            stackNoTrimWhitespace.pop();\n          }\n        }\n        else {\n          squashTrailingWhitespace('/' + tag);\n        }\n        if (stackNoCollapseWhitespace.length &&\n          tag === stackNoCollapseWhitespace[stackNoCollapseWhitespace.length - 1]) {\n          stackNoCollapseWhitespace.pop();\n        }\n      }\n\n      var isElementEmpty = false;\n      if (tag === currentTag) {\n        currentTag = '';\n        isElementEmpty = !hasChars;\n      }\n\n      if (options.removeOptionalTags) {\n        // <html>, <head> or <body> may be omitted if the element is empty\n        if (isElementEmpty && topLevelTags(optionalStartTag)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head> may be omitted if not followed by space or comment\n        // </p> may be omitted if no more content in non-</a> parent\n        // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n        if (htmlTags(tag) && optionalEndTag && !trailingTags(optionalEndTag) && (optionalEndTag !== 'p' || !pInlineTags(tag))) {\n          removeEndTag();\n        }\n        optionalEndTag = optionalEndTags(tag) ? tag : '';\n      }\n\n      if (options.removeEmptyElements && isElementEmpty && canRemoveElement(tag, attrs)) {\n        // remove last \"element\" from buffer\n        removeStartTag();\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      else {\n        if (autoGenerated && !options.includeAutoGeneratedTags) {\n          optionalEndTag = '';\n        }\n        else {\n          buffer.push('</' + tag + '>');\n        }\n        charsPrevTag = '/' + tag;\n        if (!inlineTags(tag)) {\n          currentChars = '';\n        }\n        else if (isElementEmpty) {\n          currentChars += '|';\n        }\n      }\n    },\n    chars: function(text, prevTag, nextTag) {\n      prevTag = prevTag === '' ? 'comment' : prevTag;\n      nextTag = nextTag === '' ? 'comment' : nextTag;\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        text = decode(text);\n      }\n      if (options.collapseWhitespace) {\n        if (!stackNoTrimWhitespace.length) {\n          if (prevTag === 'comment') {\n            var prevComment = buffer[buffer.length - 1];\n            if (prevComment.indexOf(uidIgnore) === -1) {\n              if (!prevComment) {\n                prevTag = charsPrevTag;\n              }\n              if (buffer.length > 1 && (!prevComment || !options.conservativeCollapse && / $/.test(currentChars))) {\n                var charsIndex = buffer.length - 2;\n                buffer[charsIndex] = buffer[charsIndex].replace(/\\s+$/, function(trailingSpaces) {\n                  text = trailingSpaces + text;\n                  return '';\n                });\n              }\n            }\n          }\n          if (prevTag) {\n            if (prevTag === '/nobr' || prevTag === 'wbr') {\n              if (/^\\s/.test(text)) {\n                var tagIndex = buffer.length - 1;\n                while (tagIndex > 0 && buffer[tagIndex].lastIndexOf('<' + prevTag) !== 0) {\n                  tagIndex--;\n                }\n                trimTrailingWhitespace(tagIndex - 1, 'br');\n              }\n            }\n            else if (inlineTextTags(prevTag.charAt(0) === '/' ? prevTag.slice(1) : prevTag)) {\n              text = collapseWhitespace(text, options, /(?:^|\\s)$/.test(currentChars));\n            }\n          }\n          if (prevTag || nextTag) {\n            text = collapseWhitespaceSmart(text, prevTag, nextTag, options);\n          }\n          else {\n            text = collapseWhitespace(text, options, true, true);\n          }\n          if (!text && /\\s$/.test(currentChars) && prevTag && prevTag.charAt(0) === '/') {\n            trimTrailingWhitespace(buffer.length - 1, nextTag);\n          }\n        }\n        if (!stackNoCollapseWhitespace.length && nextTag !== 'html' && !(prevTag && nextTag)) {\n          text = collapseWhitespace(text, options, false, false, true);\n        }\n      }\n      if (options.processScripts && specialContentTags(currentTag)) {\n        text = processScript(text, options, currentAttrs);\n      }\n      if (isExecutableScript(currentTag, currentAttrs)) {\n        text = options.minifyJS(text);\n      }\n      if (isStyleSheet(currentTag, currentAttrs)) {\n        text = options.minifyCSS(text);\n      }\n      if (options.removeOptionalTags && text) {\n        // <html> may be omitted if first thing inside is not comment\n        // <body> may be omitted if first thing inside is not space, comment, <meta>, <link>, <script>, <style> or <template>\n        if (optionalStartTag === 'html' || optionalStartTag === 'body' && !/^\\s/.test(text)) {\n          removeStartTag();\n        }\n        optionalStartTag = '';\n        // </html> or </body> may be omitted if not followed by comment\n        // </head>, </colgroup> or </caption> may be omitted if not followed by space or comment\n        if (compactTags(optionalEndTag) || looseTags(optionalEndTag) && !/^\\s/.test(text)) {\n          removeEndTag();\n        }\n        optionalEndTag = '';\n      }\n      charsPrevTag = /^\\s*$/.test(text) ? prevTag : 'comment';\n      if (options.decodeEntities && text && !specialContentTags(currentTag)) {\n        // Escape any `&` symbols that start either:\n        // 1) a legacy named character reference (i.e. one that doesn't end with `;`)\n        // 2) or any other character reference (i.e. one that does end with `;`)\n        // Note that `&` can be escaped as `&amp`, without the semi-colon.\n        // https://mathiasbynens.be/notes/ambiguous-ampersands\n        text = text.replace(/&((?:Iacute|aacute|uacute|plusmn|Otilde|otilde|agrave|Agrave|Yacute|yacute|Oslash|oslash|atilde|Atilde|brvbar|ccedil|Ccedil|Ograve|curren|divide|eacute|Eacute|ograve|Oacute|egrave|Egrave|Ugrave|frac12|frac14|frac34|ugrave|oacute|iacute|Ntilde|ntilde|Uacute|middot|igrave|Igrave|iquest|Aacute|cedil|laquo|micro|iexcl|Icirc|icirc|acirc|Ucirc|Ecirc|ocirc|Ocirc|ecirc|ucirc|Aring|aring|AElig|aelig|acute|pound|raquo|Acirc|times|THORN|szlig|thorn|COPY|auml|ordf|ordm|Uuml|macr|uuml|Auml|ouml|Ouml|para|nbsp|euml|quot|QUOT|Euml|yuml|cent|sect|copy|sup1|sup2|sup3|iuml|Iuml|ETH|shy|reg|not|yen|amp|AMP|REG|uml|eth|deg|gt|GT|LT|lt)(?!;)|(?:#?[0-9a-zA-Z]+;))/g, '&amp$1').replace(/</g, '&lt;');\n      }\n      if (uidPattern && options.collapseWhitespace && stackNoTrimWhitespace.length) {\n        text = text.replace(uidPattern, function(match, prefix, index) {\n          return ignoredCustomMarkupChunks[+index][0];\n        });\n      }\n      currentChars += text;\n      if (text) {\n        hasChars = true;\n      }\n      buffer.push(text);\n    },\n    comment: function(text, nonStandard) {\n      var prefix = nonStandard ? '<!' : '<!--';\n      var suffix = nonStandard ? '>' : '-->';\n      if (isConditionalComment(text)) {\n        text = prefix + cleanConditionalComment(text, options) + suffix;\n      }\n      else if (options.removeComments) {\n        if (isIgnoredComment(text, options)) {\n          text = '<!--' + text + '-->';\n        }\n        else {\n          text = '';\n        }\n      }\n      else {\n        text = prefix + text + suffix;\n      }\n      if (options.removeOptionalTags && text) {\n        // preceding comments suppress tag omissions\n        optionalStartTag = '';\n        optionalEndTag = '';\n      }\n      buffer.push(text);\n    },\n    doctype: function(doctype) {\n      buffer.push(options.useShortDoctype ? '<!doctype' +\n        (options.removeTagWhitespace ? '' : ' ') + 'html>' :\n        collapseWhitespaceAll(doctype));\n    }\n  });\n\n  if (options.removeOptionalTags) {\n    // <html> may be omitted if first thing inside is not comment\n    // <head> or <body> may be omitted if empty\n    if (topLevelTags(optionalStartTag)) {\n      removeStartTag();\n    }\n    // except for </dt> or </thead>, end tags may be omitted if no more content in parent element\n    if (optionalEndTag && !trailingTags(optionalEndTag)) {\n      removeEndTag();\n    }\n  }\n  if (options.collapseWhitespace) {\n    squashTrailingWhitespace('br');\n  }\n\n  return joinResultSegments(buffer, options, uidPattern ? function(str) {\n    return str.replace(uidPattern, function(match, prefix, index, suffix) {\n      var chunk = ignoredCustomMarkupChunks[+index][0];\n      if (options.collapseWhitespace) {\n        if (prefix !== '\\t') {\n          chunk = prefix + chunk;\n        }\n        if (suffix !== '\\t') {\n          chunk += suffix;\n        }\n        return collapseWhitespace(chunk, {\n          preserveLineBreaks: options.preserveLineBreaks,\n          conservativeCollapse: !options.trimCustomFragments\n        }, /^[ \\n\\r\\t\\f]/.test(chunk), /[ \\n\\r\\t\\f]$/.test(chunk));\n      }\n      return chunk;\n    });\n  } : identity, uidIgnore ? function(str) {\n    return str.replace(new RegExp('<!--' + uidIgnore + '([0-9]+)-->', 'g'), function(match, index) {\n      return ignoredMarkupChunks[+index];\n    });\n  } : identity);\n}\n\nfunction joinResultSegments(results, options, restoreCustom, restoreIgnore) {\n  var str;\n  var maxLineLength = options.maxLineLength;\n  if (maxLineLength) {\n    var line = '', lines = [];\n    while (results.length) {\n      var len = line.length;\n      var end = results[0].indexOf('\\n');\n      if (end < 0) {\n        line += restoreIgnore(restoreCustom(results.shift()));\n      }\n      else {\n        line += restoreIgnore(restoreCustom(results[0].slice(0, end)));\n        results[0] = results[0].slice(end + 1);\n      }\n      if (len > 0 && line.length > maxLineLength) {\n        lines.push(line.slice(0, len));\n        line = line.slice(len);\n      }\n      else if (end >= 0) {\n        lines.push(line);\n        line = '';\n      }\n    }\n    if (line) {\n      lines.push(line);\n    }\n    str = lines.join('\\n');\n  }\n  else {\n    str = restoreIgnore(restoreCustom(results.join('')));\n  }\n  return options.collapseWhitespace ? collapseWhitespace(str, options, true, true) : str;\n}\n\nexports.minify = function(value, options) {\n  var start = Date.now();\n  options = processOptions(options || {});\n  var result = minify(value, options);\n  options.log('minified in: ' + (Date.now() - start) + 'ms');\n  return result;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}