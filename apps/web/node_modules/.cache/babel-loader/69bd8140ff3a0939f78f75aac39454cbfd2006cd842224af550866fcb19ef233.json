{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useRef, useCallback, useState, useEffect } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { getEmptyImage } from 'react-dnd-html5-backend';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport { sections } from '../../constants/sections';\nimport Guidelines from './Guidelines';\nimport SelectionOverlay from './SelectionOverlay';\nimport QuickEditToolkit from './QuickEditToolkit';\nimport '../../styles/CreateLanding.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  ELEMENT: 'element',\n  EXISTING_ELEMENT: 'existingElement',\n  CHILD_ELEMENT: 'childElement'\n};\n\n// Calculate precise coordinates within canvas or section\nconst getCanvasPosition = (mouseX, mouseY, containerElement, zoomLevel, viewMode) => {\n  if (!containerElement) {\n    console.error('Container element is null in getCanvasPosition');\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  const rect = containerElement.getBoundingClientRect();\n  const scrollX = containerElement.scrollLeft || 0;\n  const scrollY = containerElement.scrollTop || 0;\n\n  // Adjust for mobile viewport\n  const scaleFactor = viewMode === 'mobile' ? 0.9 : 1;\n  const rawX = (mouseX - rect.left + scrollX) / (zoomLevel / 100) * scaleFactor;\n  const rawY = (mouseY - rect.top + scrollY) / (zoomLevel / 100) * scaleFactor;\n  return {\n    x: Math.max(0, rawX),\n    y: Math.max(0, rawY)\n  };\n};\n\n// Snap to grid with snap points\nconst snapToGrid = (x, y, gridSize, snapPoints = []) => {\n  let snappedX = Math.round(x / gridSize) * gridSize;\n  let snappedY = Math.round(y / gridSize) * gridSize;\n  snapPoints.forEach(point => {\n    if (Math.abs(x - point.x) < 15) snappedX = point.x;\n    if (Math.abs(y - point.y) < 15) snappedY = point.y;\n  });\n  return {\n    x: snappedX,\n    y: snappedY\n  };\n};\n\n// Calculate element bounds\nconst getElementBounds = (element, viewMode) => {\n  var _element$position$vie, _element$position$vie2, _element$position$vie3, _element$size, _element$position$vie4, _element$size2, _element$position$vie5, _element$size3, _element$position$vie6, _element$size4;\n  return {\n    left: ((_element$position$vie = element.position[viewMode]) === null || _element$position$vie === void 0 ? void 0 : _element$position$vie.x) || 0,\n    top: ((_element$position$vie2 = element.position[viewMode]) === null || _element$position$vie2 === void 0 ? void 0 : _element$position$vie2.y) || 0,\n    right: (((_element$position$vie3 = element.position[viewMode]) === null || _element$position$vie3 === void 0 ? void 0 : _element$position$vie3.x) || 0) + (((_element$size = element.size) === null || _element$size === void 0 ? void 0 : _element$size.width) || (viewMode === 'mobile' ? 375 : 1200)),\n    bottom: (((_element$position$vie4 = element.position[viewMode]) === null || _element$position$vie4 === void 0 ? void 0 : _element$position$vie4.y) || 0) + (((_element$size2 = element.size) === null || _element$size2 === void 0 ? void 0 : _element$size2.height) || 400),\n    centerX: (((_element$position$vie5 = element.position[viewMode]) === null || _element$position$vie5 === void 0 ? void 0 : _element$position$vie5.x) || 0) + (((_element$size3 = element.size) === null || _element$size3 === void 0 ? void 0 : _element$size3.width) || (viewMode === 'mobile' ? 375 : 1200)) / 2,\n    centerY: (((_element$position$vie6 = element.position[viewMode]) === null || _element$position$vie6 === void 0 ? void 0 : _element$position$vie6.y) || 0) + (((_element$size4 = element.size) === null || _element$size4 === void 0 ? void 0 : _element$size4.height) || 400) / 2\n  };\n};\n\n// Render component content with responsive styles\nconst renderComponentContent = (type, componentData = {}, styles = {}, children = [], viewMode) => {\n  var _componentData$dragga;\n  const isMobile = viewMode === 'mobile';\n  const responsiveStyles = {\n    fontSize: isMobile ? '0.9em' : '1em',\n    padding: isMobile ? '0.5rem' : '1rem',\n    margin: isMobile ? '0.5rem 0' : '1rem 0'\n  };\n  if (!type || typeof type !== 'string') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#ff0000',\n        padding: '10px',\n        border: '1px dashed #ff0000',\n        borderRadius: '4px',\n        ...styles,\n        ...responsiveStyles\n      },\n      children: [\"Unknown Component: \", type || 'Không xác định']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this);\n  }\n  if (type === 'section' && componentData.structure === 'ladi-standard') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ladi-section\",\n      style: {\n        ...styles,\n        width: '100%',\n        height: '100%',\n        ...responsiveStyles\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ladi-section-background\",\n        style: {\n          backgroundColor: componentData.backgroundColor || 'transparent',\n          backgroundImage: componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none',\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          zIndex: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ladi-overlay\",\n        style: {\n          backgroundColor: componentData.overlayColor || 'transparent',\n          opacity: componentData.overlayOpacity || 0,\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          zIndex: 0\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ladi-container\",\n        style: {\n          position: 'relative',\n          zIndex: 1,\n          padding: componentData.padding || (isMobile ? '10px' : '20px'),\n          width: '100%',\n          height: '100%'\n        },\n        children: children.map((child, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: child.marginBottom || (isMobile ? '5px' : '10px')\n          },\n          children: renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)\n        }, child.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this);\n  }\n  switch (type) {\n    case 'heading':\n      const headingLevel = componentData.level && ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(componentData.level) ? componentData.level : 'h2';\n      const HeadingTag = headingLevel;\n      return /*#__PURE__*/_jsxDEV(HeadingTag, {\n        style: {\n          fontSize: componentData.fontSize || (isMobile ? '1.2rem' : '1.5rem'),\n          color: componentData.color || '#1f2937',\n          margin: componentData.margin || '0',\n          padding: componentData.padding || '0',\n          fontWeight: componentData.fontWeight || '700',\n          textAlign: componentData.textAlign || 'left',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: componentData.content || 'Tiêu đề'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this);\n    case 'paragraph':\n      return /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          fontSize: componentData.fontSize || (isMobile ? '0.9rem' : '1rem'),\n          color: componentData.color || '#1f2937',\n          margin: componentData.margin || '0',\n          padding: componentData.padding || '0',\n          fontWeight: componentData.fontWeight || '400',\n          lineHeight: componentData.lineHeight || '1.6',\n          textAlign: componentData.textAlign || 'left',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: componentData.content || 'Đoạn văn'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this);\n    case 'button':\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          padding: componentData.padding || (isMobile ? '6px 12px' : '8px 16px'),\n          borderRadius: componentData.borderRadius || '8px',\n          background: componentData.background || '#2563eb',\n          color: componentData.color || '#fff',\n          border: componentData.border || 'none',\n          cursor: 'pointer',\n          fontSize: componentData.fontSize || (isMobile ? '0.9rem' : '1rem'),\n          fontWeight: componentData.fontWeight || '600',\n          textAlign: componentData.textAlign || 'center',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: componentData.content || 'Nút'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }, this);\n    case 'image':\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        src: componentData.src || 'https://via.placeholder.com/150?text=Image',\n        alt: componentData.alt || 'Hình ảnh',\n        style: {\n          maxWidth: componentData.maxWidth || '100%',\n          height: componentData.height || 'auto',\n          borderRadius: componentData.borderRadius || '0',\n          ...styles,\n          width: isMobile ? '100%' : 'auto'\n        },\n        draggable: (_componentData$dragga = componentData.draggable) !== null && _componentData$dragga !== void 0 ? _componentData$dragga : false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this);\n    case 'form':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: componentData.direction || 'column',\n          gap: componentData.gap || (isMobile ? '8px' : '10px'),\n          ...styles,\n          ...responsiveStyles\n        },\n        children: [componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') && /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: componentData.titleMargin || '0',\n            fontSize: componentData.titleFontSize || (isMobile ? '1rem' : '1.2rem'),\n            color: componentData.titleColor || '#1f2937',\n            fontWeight: componentData.titleFontWeight || '600'\n          },\n          children: componentData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 25\n        }, this), Array.isArray(componentData.fields) && componentData.fields.length > 0 ? componentData.fields.map((field, index) => /*#__PURE__*/_jsxDEV(\"input\", {\n          type: field.type || 'text',\n          placeholder: field.placeholder || field.label || 'Nhập...',\n          style: {\n            padding: field.padding || (isMobile ? '6px' : '8px'),\n            borderRadius: field.borderRadius || '8px',\n            border: field.border || '1px solid #ccc',\n            fontSize: field.fontSize || (isMobile ? '0.9rem' : '1rem')\n          }\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 29\n        }, this)) : !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'input') && /*#__PURE__*/_jsxDEV(\"input\", {\n          type: componentData.inputType || 'text',\n          placeholder: componentData.placeholder || 'Nhập...',\n          style: {\n            padding: componentData.inputPadding || (isMobile ? '6px' : '8px'),\n            borderRadius: componentData.inputBorderRadius || '8px',\n            border: componentData.inputBorder || '1px solid #ccc',\n            fontSize: componentData.inputFontSize || (isMobile ? '0.9rem' : '1rem')\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 29\n        }, this), !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') && /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          style: {\n            background: componentData.buttonBackground || '#2563eb',\n            color: componentData.buttonColor || '#fff',\n            padding: componentData.buttonPadding || (isMobile ? '6px 12px' : '8px 16px'),\n            borderRadius: componentData.buttonBorderRadius || '8px',\n            border: componentData.buttonBorder || 'none',\n            cursor: 'pointer',\n            fontSize: componentData.buttonFontSize || (isMobile ? '0.9rem' : '1rem'),\n            fontWeight: componentData.buttonFontWeight || '600'\n          },\n          children: componentData.buttonText || 'Gửi'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 25\n        }, this), Array.isArray(children) && children.length > 0 && children.map((child, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: child.marginBottom || (isMobile ? '5px' : '10px')\n          },\n          children: renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)\n        }, child.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }, this);\n    case 'section':\n    case 'container':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: componentData.layoutType || 'flex',\n          flexDirection: componentData.direction || 'column',\n          gap: componentData.gap || (isMobile ? '8px' : '10px'),\n          padding: componentData.padding || (isMobile ? '10px' : '0'),\n          background: componentData.background || 'transparent',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: [componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') && /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            fontSize: componentData.titleFontSize || (isMobile ? '1.5rem' : '1.8rem'),\n            margin: componentData.titleMargin || '0',\n            color: componentData.titleColor || '#1f2937',\n            fontWeight: componentData.titleFontWeight || '700'\n          },\n          children: componentData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 25\n        }, this), componentData.subtitle && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: componentData.subtitleFontSize || (isMobile ? '1rem' : '1.2rem'),\n            margin: componentData.subtitleMargin || '0',\n            color: componentData.subtitleColor || '#4b5563'\n          },\n          children: componentData.subtitle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 25\n        }, this), componentData.content && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: componentData.contentFontSize || (isMobile ? '0.9rem' : '1rem'),\n            margin: componentData.contentMargin || '0',\n            color: componentData.contentColor || '#4b5563'\n          },\n          children: componentData.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 25\n        }, this), Array.isArray(componentData.features) && componentData.features.length > 0 && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'list') && /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            listStyle: 'none',\n            padding: componentData.featuresPadding || 0,\n            margin: componentData.featuresMargin || '0',\n            display: 'flex',\n            flexDirection: componentData.featuresDirection || 'column',\n            gap: componentData.featuresGap || (isMobile ? '6px' : '8px')\n          },\n          children: componentData.features.map((feature, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            style: {\n              fontSize: componentData.featureFontSize || (isMobile ? '0.9rem' : '1rem'),\n              color: componentData.featureColor || '#1f2937'\n            },\n            children: feature\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 25\n        }, this), componentData.ctaText && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') && /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            padding: componentData.ctaPadding || (isMobile ? '8px 16px' : '10px 20px'),\n            borderRadius: componentData.ctaBorderRadius || '8px',\n            background: componentData.ctaBackground || '#2563eb',\n            color: componentData.ctaColor || '#fff',\n            border: componentData.ctaBorder || 'none',\n            cursor: 'pointer',\n            fontSize: componentData.ctaFontSize || (isMobile ? '0.9rem' : '1rem'),\n            fontWeight: componentData.ctaFontWeight || '600'\n          },\n          children: componentData.ctaText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 25\n        }, this), componentData.contact && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: componentData.contactFontSize || (isMobile ? '0.8rem' : '0.9rem'),\n            margin: componentData.contactMargin || '0',\n            color: componentData.contactColor || '#4b5563'\n          },\n          children: componentData.contact\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 25\n        }, this), Array.isArray(children) && children.length > 0 && children.map((child, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: child.marginBottom || (isMobile ? '5px' : '10px')\n          },\n          children: renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)\n        }, child.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 17\n      }, this);\n    case 'divider':\n      return /*#__PURE__*/_jsxDEV(\"hr\", {\n        style: {\n          border: 'none',\n          background: componentData.color || '#e5e7eb',\n          height: componentData.thickness || '2px',\n          width: componentData.width || '100%',\n          margin: componentData.margin || '0',\n          ...styles,\n          ...responsiveStyles\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 17\n      }, this);\n    case 'spacer':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: componentData.background || 'transparent',\n          height: componentData.height || (isMobile ? '20px' : '40px'),\n          width: componentData.width || '100%',\n          ...styles,\n          ...responsiveStyles\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 17\n      }, this);\n    case 'popup':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: componentData.direction || 'column',\n          gap: componentData.gap || (isMobile ? '8px' : '10px'),\n          textAlign: componentData.textAlign || 'center',\n          padding: componentData.padding || (isMobile ? '10px' : '20px'),\n          background: componentData.background || '#ffffff',\n          borderRadius: componentData.borderRadius || '12px',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: [componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') && /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: componentData.titleFontSize || (isMobile ? '1.2rem' : '1.5rem'),\n            margin: componentData.titleMargin || '0',\n            color: componentData.titleColor || '#1f2937',\n            fontWeight: componentData.titleFontWeight || '600'\n          },\n          children: componentData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 25\n        }, this), componentData.content && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: componentData.contentFontSize || (isMobile ? '0.9rem' : '1rem'),\n            margin: componentData.contentMargin || '0',\n            color: componentData.contentColor || '#4b5563'\n          },\n          children: componentData.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 25\n        }, this), componentData.buttonText && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') && /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            padding: componentData.buttonPadding || (isMobile ? '8px 16px' : '10px 20px'),\n            borderRadius: componentData.buttonBorderRadius || '8px',\n            background: componentData.buttonBackground || '#2563eb',\n            color: componentData.buttonColor || '#fff',\n            border: componentData.buttonBorder || 'none',\n            cursor: 'pointer',\n            fontSize: componentData.buttonFontSize || (isMobile ? '0.9rem' : '1rem'),\n            fontWeight: componentData.buttonFontWeight || '600'\n          },\n          children: componentData.buttonText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 25\n        }, this), Array.isArray(children) && children.length > 0 && children.map((child, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: child.marginBottom || (isMobile ? '5px' : '10px')\n          },\n          children: renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)\n        }, child.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 17\n      }, this);\n    case 'modal':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: componentData.direction || 'column',\n          gap: componentData.gap || (isMobile ? '8px' : '10px'),\n          padding: componentData.padding || (isMobile ? '10px' : '20px'),\n          background: componentData.background || '#ffffff',\n          borderRadius: componentData.borderRadius || '12px',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: [componentData.title && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'heading') && /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: componentData.titleFontSize || (isMobile ? '1.2rem' : '1.5rem'),\n            margin: componentData.titleMargin || '0',\n            color: componentData.titleColor || '#1f2937',\n            fontWeight: componentData.titleFontWeight || '600'\n          },\n          children: componentData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 25\n        }, this), componentData.content && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'paragraph') && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: componentData.contentFontSize || (isMobile ? '0.9rem' : '1rem'),\n            margin: componentData.contentMargin || '0',\n            color: componentData.contentColor || '#4b5563'\n          },\n          children: componentData.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 25\n        }, this), componentData.closeButton && !children.some(child => (child === null || child === void 0 ? void 0 : child.type) === 'button') && /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            padding: componentData.buttonPadding || (isMobile ? '6px 10px' : '8px 12px'),\n            borderRadius: componentData.buttonBorderRadius || '8px',\n            background: componentData.buttonBackground || '#6b7280',\n            color: componentData.buttonColor || '#fff',\n            border: componentData.buttonBorder || 'none',\n            cursor: 'pointer',\n            alignSelf: 'flex-end',\n            fontSize: componentData.buttonFontSize || (isMobile ? '0.9rem' : '1rem'),\n            fontWeight: componentData.buttonFontWeight || '600'\n          },\n          children: componentData.buttonText || 'Đóng'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 25\n        }, this), Array.isArray(children) && children.length > 0 && children.map((child, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: child.marginBottom || (isMobile ? '5px' : '10px')\n          },\n          children: renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)\n        }, child.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 17\n      }, this);\n    case 'card':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: componentData.padding || (isMobile ? '10px' : '20px'),\n          background: componentData.background || '#ffffff',\n          borderRadius: componentData.borderRadius || '8px',\n          boxShadow: componentData.boxShadow || '0 2px 8px rgba(0,0,0,0.1)',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: [componentData.title && /*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            fontSize: componentData.titleFontSize || (isMobile ? '1rem' : '1.2rem'),\n            margin: componentData.titleMargin || '0',\n            color: componentData.titleColor || '#1f2937'\n          },\n          children: componentData.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 25\n        }, this), componentData.content && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: componentData.contentFontSize || (isMobile ? '0.9rem' : '1rem'),\n            margin: componentData.contentMargin || (isMobile ? '5px 0 0' : '10px 0 0'),\n            color: componentData.contentColor || '#4b5563'\n          },\n          children: componentData.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 17\n      }, this);\n    case 'testimonial':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: componentData.padding || (isMobile ? '10px' : '20px'),\n          background: componentData.background || '#f9fafb',\n          borderRadius: componentData.borderRadius || '8px',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: [componentData.quote && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: componentData.quoteFontSize || (isMobile ? '0.9rem' : '1rem'),\n            margin: componentData.quoteMargin || '0',\n            color: componentData.quoteColor || '#1f2937',\n            fontStyle: 'italic'\n          },\n          children: [\"\\\"\", componentData.quote, \"\\\"\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 516,\n          columnNumber: 25\n        }, this), componentData.author && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: componentData.authorFontSize || (isMobile ? '0.8rem' : '0.9rem'),\n            margin: componentData.authorMargin || (isMobile ? '5px 0 0' : '10px 0 0'),\n            color: componentData.authorColor || '#4b5563',\n            textAlign: 'right'\n          },\n          children: [\"- \", componentData.author]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 17\n      }, this);\n    case 'menu':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: componentData.layoutType || 'flex',\n          gap: componentData.gap || (isMobile ? '10px' : '20px'),\n          ...styles,\n          ...responsiveStyles\n        },\n        children: Array.isArray(componentData.items) && componentData.items.map((item, index) => /*#__PURE__*/_jsxDEV(\"a\", {\n          href: item.url || '#',\n          style: {\n            color: componentData.color || '#1f2937',\n            textDecoration: 'none',\n            fontSize: componentData.fontSize || (isMobile ? '0.9rem' : '1rem')\n          },\n          children: item.label\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 17\n      }, this);\n    case 'grid':\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: componentData.columns ? `repeat(${componentData.columns}, 1fr)` : isMobile ? '1fr' : 'repeat(2, 1fr)',\n          gap: componentData.gap || (isMobile ? '10px' : '20px'),\n          ...styles,\n          ...responsiveStyles\n        },\n        children: Array.isArray(componentData.items) && componentData.items.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: componentData.itemBackground || '#ffffff',\n            borderRadius: componentData.itemBorderRadius || '8px',\n            padding: componentData.itemPadding || (isMobile ? '8px' : '10px')\n          },\n          children: [item.image && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: item.image,\n            alt: item.title || 'Product',\n            style: {\n              maxWidth: '100%',\n              height: 'auto'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 33\n          }, this), item.title && /*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              fontSize: componentData.titleFontSize || (isMobile ? '0.9rem' : '1rem'),\n              margin: componentData.titleMargin || (isMobile ? '5px 0 0' : '10px 0 0'),\n              color: componentData.titleColor || '#1f2937'\n            },\n            children: item.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 33\n          }, this), item.price && /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: componentData.priceFontSize || (isMobile ? '0.8rem' : '0.9rem'),\n              margin: componentData.priceMargin || (isMobile ? '3px 0 0' : '5px 0 0'),\n              color: componentData.priceColor || '#4b5563'\n            },\n            children: item.price\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 592,\n            columnNumber: 33\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 570,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 17\n      }, this);\n    case 'list':\n      return /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyleType: componentData.listStyleType || 'none',\n          padding: componentData.padding || '0',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: Array.isArray(componentData.items) && componentData.items.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            fontSize: componentData.itemFontSize || (isMobile ? '0.9rem' : '1rem'),\n            margin: componentData.itemMargin || (isMobile ? '3px 0' : '5px 0'),\n            color: componentData.itemColor || '#1f2937'\n          },\n          children: item.title || item\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 17\n      }, this);\n    default:\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: componentData.errorColor || '#ff0000',\n          padding: '10px',\n          border: '1px dashed #ff0000',\n          borderRadius: '4px',\n          ...styles,\n          ...responsiveStyles\n        },\n        children: [\"Unknown Component: \", type]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 17\n      }, this);\n  }\n};\n\n// ChildElement Component\nconst ChildElement = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  parentId,\n  id,\n  type,\n  componentData = {},\n  styles = {},\n  isSelected,\n  onSelectChild,\n  zoomLevel,\n  gridSize,\n  showGrid,\n  onUpdateChildPosition,\n  onMoveChild,\n  position,\n  size,\n  viewMode\n}) => {\n  var _position$viewMode, _position$viewMode2;\n  _s();\n  const dragRef = useRef(null);\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: ItemTypes.CHILD_ELEMENT,\n    item: () => {\n      console.log('ChildElement drag started:', {\n        childId: id,\n        parentId\n      });\n      return {\n        childId: id,\n        parentId,\n        isExisting: true,\n        position,\n        size\n      };\n    },\n    end: (item, monitor) => {\n      if (!monitor.didDrop()) {\n        console.log('ChildElement drag ended without drop');\n      }\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  }));\n  const handleClick = e => {\n    e.stopPropagation();\n    console.log('ChildElement clicked:', {\n      parentId,\n      id,\n      isSelected\n    });\n    if (typeof onSelectChild === 'function') {\n      onSelectChild(parentId, id);\n    } else {\n      console.warn('onSelectChild is not a function');\n    }\n  };\n  useEffect(() => {\n    drag(dragRef);\n  }, [drag]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `lpb-child-element ${isSelected ? 'lpb-child-element-selected' : ''} ${isDragging ? 'lpb-child-element-dragging' : ''}`,\n    style: {\n      position: 'absolute',\n      left: ((_position$viewMode = position[viewMode]) === null || _position$viewMode === void 0 ? void 0 : _position$viewMode.x) || 0,\n      top: ((_position$viewMode2 = position[viewMode]) === null || _position$viewMode2 === void 0 ? void 0 : _position$viewMode2.y) || 0,\n      width: (size === null || size === void 0 ? void 0 : size.width) || (viewMode === 'mobile' ? '90%' : 200),\n      height: (size === null || size === void 0 ? void 0 : size.height) || (viewMode === 'mobile' ? 'auto' : 50),\n      zIndex: isDragging ? 1000 : position.z || 10,\n      cursor: isDragging ? 'grabbing' : 'grab',\n      opacity: isDragging ? 0.5 : 1,\n      ...styles\n    },\n    onClick: handleClick,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      ref: dragRef,\n      children: renderComponentContent(type, componentData, styles, [], viewMode)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 706,\n      columnNumber: 17\n    }, this), isSelected && /*#__PURE__*/_jsxDEV(QuickEditToolkit, {\n      element: {\n        id,\n        type,\n        styles\n      },\n      position: {\n        x: 0,\n        y: -40\n      },\n      onEdit: () => console.log('Edit child:', id),\n      onDuplicate: () => console.log('Duplicate child:', id),\n      onDelete: () => console.log('Delete child:', id),\n      onClose: () => onSelectChild(parentId, null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 691,\n    columnNumber: 13\n  }, this);\n}, \"69ZjtV8RmaixMExTxwxOB17H2zg=\", false, function () {\n  return [useDrag];\n})), \"69ZjtV8RmaixMExTxwxOB17H2zg=\", false, function () {\n  return [useDrag];\n});\n\n// Element Component\n_c2 = ChildElement;\nconst Element = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c3 = _s2(({\n  element,\n  isSelected,\n  onSelectElement,\n  onUpdatePosition,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  onContextMenu,\n  canvasBounds,\n  canvasRef,\n  onSelectChild,\n  selectedChildId,\n  onAddChild,\n  onUpdateChildPosition,\n  onMoveChild,\n  showGrid,\n  setDragPreview\n}) => {\n  var _position$viewMode4;\n  _s2();\n  const {\n    id,\n    type,\n    componentData = {},\n    position = {},\n    size = {\n      width: viewMode === 'mobile' ? '100%' : '90vw',\n      height: 400,\n      maxWidth: viewMode === 'mobile' ? 375 : 1200\n    },\n    styles = {},\n    children = []\n  } = element;\n  const elementRef = useRef(null);\n  const containerRef = useRef(null);\n  const handleMouseDown = useCallback(e => {\n    e.stopPropagation();\n    onSelectElement(id, e.ctrlKey);\n    onSelectChild(id, null);\n  }, [id, onSelectElement, onSelectChild]);\n  const handleContextMenu = useCallback(e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onContextMenu(id, {\n      x: e.clientX,\n      y: e.clientY\n    });\n  }, [id, onContextMenu]);\n  const snapPoints = [{\n    x: 0,\n    y: 0\n  }, {\n    x: size.maxWidth || (viewMode === 'mobile' ? 375 : 1200),\n    y: size.height\n  }, {\n    x: (size.maxWidth || (viewMode === 'mobile' ? 375 : 1200)) / 2,\n    y: size.height / 2\n  }];\n  children.forEach(child => {\n    const bounds = getElementBounds(child, viewMode);\n    snapPoints.push({\n      x: bounds.left,\n      y: bounds.top\n    }, {\n      x: bounds.right,\n      y: bounds.bottom\n    }, {\n      x: bounds.centerX,\n      y: bounds.centerY\n    }, {\n      x: bounds.left,\n      y: bounds.centerY\n    }, {\n      x: bounds.right,\n      y: bounds.centerY\n    }, {\n      x: bounds.centerX,\n      y: bounds.top\n    }, {\n      x: bounds.centerX,\n      y: bounds.bottom\n    });\n  });\n  if (type === 'section' && componentData.structure === 'ladi-standard') {\n    var _position$viewMode3;\n    const [{\n      isOverContainer,\n      canDropContainer\n    }, drop] = useDrop(() => ({\n      accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\n      canDrop: (item, monitor) => {\n        if (!type || type !== 'section' || (componentData === null || componentData === void 0 ? void 0 : componentData.structure) !== 'ladi-standard') {\n          return false;\n        }\n        if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT && item.parentId && item.parentId !== id) {\n          return false;\n        }\n        return true;\n      },\n      drop: (item, monitor) => {\n        if (!monitor.canDrop()) {\n          toast.error('Không thể thả vào container này!');\n          setDragPreview(null);\n          return {\n            moved: false\n          };\n        }\n        const clientOffset = monitor.getClientOffset();\n        if (!clientOffset || !containerRef.current) {\n          toast.error('Không thể xác định vị trí thả!');\n          setDragPreview(null);\n          return {\n            moved: false\n          };\n        }\n        const pos = getCanvasPosition(clientOffset.x, clientOffset.y, containerRef.current, zoomLevel, viewMode);\n        const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n        if (monitor.getItemType() === ItemTypes.ELEMENT) {\n          const newId = `${item.id}-${Date.now()}`;\n          const newChild = {\n            id: newId,\n            type: item.json.type,\n            componentData: item.json.componentData || {},\n            position: {\n              [viewMode]: snapped,\n              desktop: snapped,\n              tablet: snapped,\n              mobile: snapped\n            },\n            size: item.json.size || {\n              width: viewMode === 'mobile' ? '90%' : 200,\n              height: 'auto'\n            },\n            styles: item.json.styles || {},\n            children: []\n          };\n          onAddChild(id, newChild);\n          toast.success('Đã thêm thành phần con!');\n          setDragPreview(null);\n          return {\n            moved: true,\n            newPosition: snapped\n          };\n        } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n          if (item.parentId === id) {\n            onUpdateChildPosition(id, item.childId, snapped);\n            toast.success('Đã di chuyển thành phần con trong section!');\n          } else {\n            onMoveChild(item.parentId, item.childId, id, snapped);\n            toast.success('Đã di chuyển thành phần con sang section khác!');\n          }\n          setDragPreview(null);\n          return {\n            moved: true,\n            newPosition: snapped\n          };\n        }\n        setDragPreview(null);\n        return {\n          moved: false\n        };\n      },\n      collect: monitor => ({\n        isOverContainer: monitor.isOver(),\n        canDropContainer: monitor.canDrop()\n      })\n    }), [id, type, componentData, viewMode, zoomLevel, gridSize, showGrid, onAddChild, onUpdateChildPosition, onMoveChild]);\n    useEffect(() => {\n      drop(containerRef);\n    }, [drop]);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: elementRef,\n      className: `lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''}`,\n      style: {\n        position: 'absolute',\n        top: ((_position$viewMode3 = position[viewMode]) === null || _position$viewMode3 === void 0 ? void 0 : _position$viewMode3.y) || 0,\n        width: size.width,\n        maxWidth: size.maxWidth,\n        height: size.height,\n        left: '50%',\n        transform: `translateX(-50%)`,\n        zIndex: position.z || 1,\n        userSelect: 'none'\n      },\n      onMouseDown: handleMouseDown,\n      onContextMenu: handleContextMenu,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ladi-section\",\n        style: {\n          width: '100%',\n          height: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ladi-section-background\",\n          style: {\n            backgroundColor: componentData.backgroundColor || 'transparent',\n            backgroundImage: componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none',\n            backgroundSize: 'cover',\n            backgroundPosition: 'center',\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            zIndex: 0\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 876,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ladi-overlay\",\n          style: {\n            backgroundColor: componentData.overlayColor || 'transparent',\n            opacity: componentData.overlayOpacity || 0,\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            zIndex: 0\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: containerRef,\n          className: `ladi-container ${isOverContainer && canDropContainer ? 'lpb-child-element-hover' : ''}`,\n          style: {\n            position: 'relative',\n            zIndex: 1,\n            padding: componentData.padding || (viewMode === 'mobile' ? '10px' : '20px'),\n            width: '100%',\n            height: '100%',\n            border: isOverContainer && canDropContainer ? '2px dashed #2563eb' : 'none'\n          },\n          children: children.map(child => /*#__PURE__*/_jsxDEV(ChildElement, {\n            parentId: id,\n            id: child.id,\n            type: child.type,\n            componentData: child.componentData || {},\n            styles: child.styles || {},\n            position: child.position || {},\n            size: child.size || {\n              width: viewMode === 'mobile' ? '90%' : 200,\n              height: 'auto'\n            },\n            isSelected: selectedChildId === child.id,\n            onSelectChild: onSelectChild,\n            zoomLevel: zoomLevel,\n            gridSize: gridSize,\n            showGrid: showGrid,\n            onUpdateChildPosition: onUpdateChildPosition,\n            onMoveChild: onMoveChild,\n            viewMode: viewMode,\n            setDragPreview: setDragPreview\n          }, child.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 911,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 898,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 875,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 858,\n      columnNumber: 17\n    }, this);\n  }\n  const [{\n    isDragging\n  }, drag, preview] = useDrag(() => ({\n    type: ItemTypes.EXISTING_ELEMENT,\n    item: () => {\n      console.log('Element drag started:', {\n        id,\n        position: position[viewMode]\n      });\n      return {\n        id,\n        elementSize: size,\n        elementPosition: position[viewMode] || {\n          x: 0,\n          y: 0\n        },\n        isExisting: true\n      };\n    },\n    end: (item, monitor) => {\n      if (!monitor.didDrop()) {\n        console.log('Element drag ended without drop');\n      }\n    },\n    collect: monitor => ({\n      isDragging: monitor.isDragging()\n    })\n  }), [id, size, position, viewMode]);\n  useEffect(() => {\n    preview(getEmptyImage(), {\n      captureDraggingState: true\n    });\n  }, [preview]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: node => {\n      elementRef.current = node;\n      drag(node);\n    },\n    className: `lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`,\n    style: {\n      position: 'absolute',\n      top: ((_position$viewMode4 = position[viewMode]) === null || _position$viewMode4 === void 0 ? void 0 : _position$viewMode4.y) || 0,\n      width: size.width,\n      maxWidth: size.maxWidth,\n      height: size.height,\n      left: '50%',\n      transform: `translateX(-50%)`,\n      zIndex: position.z || 1,\n      opacity: isDragging ? 0.5 : 1,\n      cursor: isDragging ? 'grabbing' : 'grab',\n      userSelect: 'none',\n      ...styles\n    },\n    onMouseDown: handleMouseDown,\n    onContextMenu: handleContextMenu,\n    children: renderComponentContent(type, componentData, styles, children, viewMode)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 963,\n    columnNumber: 13\n  }, this);\n}, \"O+/QKVrk7OnfSaV6CxKrKQ2YtiM=\", false, function () {\n  return [useDrop, useDrag];\n})), \"O+/QKVrk7OnfSaV6CxKrKQ2YtiM=\", false, function () {\n  return [useDrop, useDrag];\n});\n\n// Canvas Component\n_c4 = Element;\nconst Canvas = /*#__PURE__*/_s3(/*#__PURE__*/React.memo(_c5 = _s3(({\n  pageData,\n  selectedIds,\n  onSelectElement,\n  onUpdatePosition,\n  onUpdateSize,\n  onDeleteElement,\n  onAddElement,\n  onGroupElements,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  showGrid,\n  onEditElement,\n  onDuplicateElement,\n  onMoveElementUp,\n  onMoveElementDown,\n  onSelectChild,\n  selectedChildId,\n  onAddChild,\n  onUpdateChildPosition,\n  onMoveChild,\n  guideLine,\n  onShowAddSectionPopup,\n  onUpdateCanvasHeight\n}) => {\n  var _sections$subCategori;\n  _s3();\n  const canvasRef = useRef(null);\n  const [guidelines, setGuidelines] = useState([]);\n  const [contextMenu, setContextMenu] = useState(null);\n  const [dragPreview, setDragPreview] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const [guideLinePosition, setGuideLinePosition] = useState((guideLine === null || guideLine === void 0 ? void 0 : guideLine.y) || 0);\n  const [popupPosition, setPopupPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [activeTab, setActiveTab] = useState(((_sections$subCategori = sections.subCategories[0]) === null || _sections$subCategori === void 0 ? void 0 : _sections$subCategori.id) || '');\n  const canvasBounds = canvasRef.current ? {\n    width: canvasRef.current.offsetWidth / (zoomLevel / 100),\n    height: canvasRef.current.offsetHeight / (zoomLevel / 100)\n  } : {\n    width: viewMode === 'mobile' ? 375 : 1200,\n    height: 1000\n  };\n  const updateCanvasHeight = useCallback(() => {\n    var _lastSection$position, _lastSection$position2, _lastSection$size, _lastSection$position3, _lastSection$position4, _lastSection$size2;\n    const lastSection = pageData.elements.filter(el => el.type === 'section').sort((a, b) => {\n      var _b$position, _b$position$viewMode, _a$position, _a$position$viewMode;\n      return (((_b$position = b.position) === null || _b$position === void 0 ? void 0 : (_b$position$viewMode = _b$position[viewMode]) === null || _b$position$viewMode === void 0 ? void 0 : _b$position$viewMode.y) || 0) - (((_a$position = a.position) === null || _a$position === void 0 ? void 0 : (_a$position$viewMode = _a$position[viewMode]) === null || _a$position$viewMode === void 0 ? void 0 : _a$position$viewMode.y) || 0);\n    })[0];\n    const newHeight = lastSection ? (((_lastSection$position = lastSection.position) === null || _lastSection$position === void 0 ? void 0 : (_lastSection$position2 = _lastSection$position[viewMode]) === null || _lastSection$position2 === void 0 ? void 0 : _lastSection$position2.y) || 0) + (((_lastSection$size = lastSection.size) === null || _lastSection$size === void 0 ? void 0 : _lastSection$size.height) || 400) + 50 : 1000;\n    if (newHeight !== pageData.canvas.height) {\n      onUpdateCanvasHeight(newHeight);\n    }\n    setGuideLinePosition(lastSection ? (((_lastSection$position3 = lastSection.position) === null || _lastSection$position3 === void 0 ? void 0 : (_lastSection$position4 = _lastSection$position3[viewMode]) === null || _lastSection$position4 === void 0 ? void 0 : _lastSection$position4.y) || 0) + (((_lastSection$size2 = lastSection.size) === null || _lastSection$size2 === void 0 ? void 0 : _lastSection$size2.height) || 400) + 10 : 0);\n  }, [pageData.elements, viewMode, onUpdateCanvasHeight]);\n  useEffect(() => {\n    updateCanvasHeight();\n  }, [pageData.elements, updateCanvasHeight]);\n  const getSnapPoints = useCallback(() => {\n    const points = [{\n      x: 0,\n      y: 0\n    }, {\n      x: viewMode === 'mobile' ? 375 : 1200,\n      y: canvasBounds.height\n    }, {\n      x: (viewMode === 'mobile' ? 375 : 1200) / 2,\n      y: canvasBounds.height / 2\n    }];\n    pageData.elements.forEach(el => {\n      var _el$children;\n      const bounds = getElementBounds(el, viewMode);\n      points.push({\n        x: bounds.left,\n        y: bounds.top\n      }, {\n        x: bounds.right,\n        y: bounds.bottom\n      }, {\n        x: bounds.centerX,\n        y: bounds.centerY\n      }, {\n        x: bounds.left,\n        y: bounds.centerY\n      }, {\n        x: bounds.right,\n        y: bounds.centerY\n      }, {\n        x: bounds.centerX,\n        y: bounds.top\n      }, {\n        x: bounds.centerX,\n        y: bounds.bottom\n      });\n      (_el$children = el.children) === null || _el$children === void 0 ? void 0 : _el$children.forEach(child => {\n        const childBounds = getElementBounds(child, viewMode);\n        points.push({\n          x: childBounds.left,\n          y: childBounds.top\n        }, {\n          x: childBounds.right,\n          y: childBounds.bottom\n        }, {\n          x: childBounds.centerX,\n          y: childBounds.centerY\n        }, {\n          x: childBounds.left,\n          y: childBounds.centerY\n        }, {\n          x: childBounds.right,\n          y: childBounds.centerY\n        }, {\n          x: childBounds.centerX,\n          y: childBounds.top\n        }, {\n          x: childBounds.centerX,\n          y: childBounds.bottom\n        });\n      });\n    });\n    return points;\n  }, [pageData.elements, canvasBounds, viewMode]);\n  const [{\n    isOver,\n    dragItem\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        setDragPreview(null);\n        return;\n      }\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef.current, zoomLevel, viewMode);\n      const snapPoints = getSnapPoints();\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\n        setDragPreview({\n          id: 'preview',\n          x: snapped.x,\n          y: snapped.y,\n          size: item.json.size || {\n            width: viewMode === 'mobile' ? '100%' : '90vw',\n            height: 400,\n            maxWidth: viewMode === 'mobile' ? 375 : 1200\n          },\n          type: item.json.type,\n          componentData: item.json.componentData || {\n            structure: 'ladi-standard'\n          },\n          styles: item.json.styles\n        });\n      } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        var _pageData$elements$fi, _pageData$elements$fi2, _pageData$elements$fi3, _pageData$elements$fi4, _pageData$elements$fi5, _pageData$elements$fi6;\n        setDragPreview({\n          id: item.childId,\n          x: snapped.x,\n          y: snapped.y,\n          size: item.size || {\n            width: viewMode === 'mobile' ? '90%' : 200,\n            height: 'auto'\n          },\n          type: (_pageData$elements$fi = pageData.elements.find(el => el.id === item.parentId)) === null || _pageData$elements$fi === void 0 ? void 0 : (_pageData$elements$fi2 = _pageData$elements$fi.children.find(child => child.id === item.childId)) === null || _pageData$elements$fi2 === void 0 ? void 0 : _pageData$elements$fi2.type,\n          componentData: (_pageData$elements$fi3 = pageData.elements.find(el => el.id === item.parentId)) === null || _pageData$elements$fi3 === void 0 ? void 0 : (_pageData$elements$fi4 = _pageData$elements$fi3.children.find(child => child.id === item.childId)) === null || _pageData$elements$fi4 === void 0 ? void 0 : _pageData$elements$fi4.componentData,\n          styles: (_pageData$elements$fi5 = pageData.elements.find(el => el.id === item.parentId)) === null || _pageData$elements$fi5 === void 0 ? void 0 : (_pageData$elements$fi6 = _pageData$elements$fi5.children.find(child => child.id === item.childId)) === null || _pageData$elements$fi6 === void 0 ? void 0 : _pageData$elements$fi6.styles\n        });\n      }\n      const newGuidelines = [];\n      pageData.elements.forEach(el => {\n        var _el$children2;\n        if (el.id === item.id) return;\n        const bounds = getElementBounds(el, viewMode);\n        if (Math.abs(snapped.x - bounds.left) < 15) newGuidelines.push({\n          vertical: true,\n          position: bounds.left\n        });\n        if (Math.abs(snapped.x - bounds.right) < 15) newGuidelines.push({\n          vertical: true,\n          position: bounds.right\n        });\n        if (Math.abs(snapped.x - bounds.centerX) < 15) newGuidelines.push({\n          vertical: true,\n          position: bounds.centerX\n        });\n        if (Math.abs(snapped.y - bounds.top) < 15) newGuidelines.push({\n          vertical: false,\n          position: bounds.top\n        });\n        if (Math.abs(snapped.y - bounds.bottom) < 15) newGuidelines.push({\n          vertical: false,\n          position: bounds.bottom\n        });\n        if (Math.abs(snapped.y - bounds.centerY) < 15) newGuidelines.push({\n          vertical: false,\n          position: bounds.centerY\n        });\n        (_el$children2 = el.children) === null || _el$children2 === void 0 ? void 0 : _el$children2.forEach(child => {\n          const childBounds = getElementBounds(child, viewMode);\n          if (Math.abs(snapped.x - childBounds.left) < 15) newGuidelines.push({\n            vertical: true,\n            position: childBounds.left\n          });\n          if (Math.abs(snapped.x - childBounds.right) < 15) newGuidelines.push({\n            vertical: true,\n            position: childBounds.right\n          });\n          if (Math.abs(snapped.x - childBounds.centerX) < 15) newGuidelines.push({\n            vertical: true,\n            position: childBounds.centerX\n          });\n          if (Math.abs(snapped.y - childBounds.top) < 15) newGuidelines.push({\n            vertical: false,\n            position: childBounds.top\n          });\n          if (Math.abs(snapped.y - childBounds.bottom) < 15) newGuidelines.push({\n            vertical: false,\n            position: childBounds.bottom\n          });\n          if (Math.abs(snapped.y - childBounds.centerY) < 15) newGuidelines.push({\n            vertical: false,\n            position: childBounds.centerY\n          });\n        });\n      });\n      if (Math.abs(snapped.x) < 15) newGuidelines.push({\n        vertical: true,\n        position: 0\n      });\n      if (Math.abs(snapped.x - (viewMode === 'mobile' ? 375 : 1200)) < 15) newGuidelines.push({\n        vertical: true,\n        position: viewMode === 'mobile' ? 375 : 1200\n      });\n      if (Math.abs(snapped.x - (viewMode === 'mobile' ? 375 : 1200) / 2) < 15) newGuidelines.push({\n        vertical: true,\n        position: (viewMode === 'mobile' ? 375 : 1200) / 2\n      });\n      if (Math.abs(snapped.y) < 15) newGuidelines.push({\n        vertical: false,\n        position: 0\n      });\n      if (Math.abs(snapped.y - canvasBounds.height) < 15) newGuidelines.push({\n        vertical: false,\n        position: canvasBounds.height\n      });\n      if (Math.abs(snapped.y - canvasBounds.height / 2) < 15) newGuidelines.push({\n        vertical: false,\n        position: canvasBounds.height / 2\n      });\n      setGuidelines(newGuidelines);\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả!');\n        setDragPreview(null);\n        setGuidelines([]);\n        return {\n          moved: false\n        };\n      }\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef.current, zoomLevel, viewMode);\n      const snapPoints = getSnapPoints();\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        const sourceSection = pageData.elements.find(el => el.id === item.parentId);\n        if (!sourceSection) {\n          console.error('Source section not found:', item.parentId);\n          setDragPreview(null);\n          setGuidelines([]);\n          return {\n            moved: false\n          };\n        }\n        onMoveChild(item.parentId, item.childId, null, snapped);\n        toast.success('Đã di chuyển thành phần con ra canvas!');\n        setDragPreview(null);\n        setGuidelines([]);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      } else if (monitor.getItemType() === ItemTypes.ELEMENT) {\n        if (item.json.type !== 'section') {\n          toast.error('Chỉ có thể thả section lên canvas!');\n          setDragPreview(null);\n          setGuidelines([]);\n          return {\n            moved: false\n          };\n        }\n        const lastSectionY = pageData.elements.filter(el => el.type === 'section').sort((a, b) => {\n          var _b$position2, _b$position2$viewMode, _a$position2, _a$position2$viewMode;\n          return (((_b$position2 = b.position) === null || _b$position2 === void 0 ? void 0 : (_b$position2$viewMode = _b$position2[viewMode]) === null || _b$position2$viewMode === void 0 ? void 0 : _b$position2$viewMode.y) || 0) - (((_a$position2 = a.position) === null || _a$position2 === void 0 ? void 0 : (_a$position2$viewMode = _a$position2[viewMode]) === null || _a$position2$viewMode === void 0 ? void 0 : _a$position2$viewMode.y) || 0);\n        }).reduce((maxY, el) => {\n          var _el$position, _el$position$viewMode, _el$size;\n          const y = ((_el$position = el.position) === null || _el$position === void 0 ? void 0 : (_el$position$viewMode = _el$position[viewMode]) === null || _el$position$viewMode === void 0 ? void 0 : _el$position$viewMode.y) || 0;\n          const height = ((_el$size = el.size) === null || _el$size === void 0 ? void 0 : _el$size.height) || 400;\n          return Math.max(maxY, y + height);\n        }, 0);\n        const newElement = {\n          id: `${item.id}-${Date.now()}`,\n          type: item.json.type,\n          componentData: JSON.parse(JSON.stringify(item.json.componentData || {\n            structure: 'ladi-standard'\n          })),\n          position: {\n            [viewMode]: {\n              x: 0,\n              y: lastSectionY + 10\n            },\n            desktop: {\n              x: 0,\n              y: lastSectionY + 10\n            },\n            tablet: {\n              x: 0,\n              y: lastSectionY + 10\n            },\n            mobile: {\n              x: 0,\n              y: lastSectionY + 10\n            }\n          },\n          size: {\n            width: viewMode === 'mobile' ? '100%' : '90vw',\n            height: 400,\n            maxWidth: viewMode === 'mobile' ? 375 : 1200\n          },\n          styles: JSON.parse(JSON.stringify(item.json.styles || {})),\n          children: JSON.parse(JSON.stringify(item.json.children || []))\n        };\n        onAddElement(newElement);\n        setGuideLinePosition(lastSectionY + 10 + 400);\n        updateCanvasHeight();\n        toast.success('Đã thêm section mới!');\n        setDragPreview(null);\n        setGuidelines([]);\n        return {\n          moved: true,\n          newPosition: {\n            x: 0,\n            y: lastSectionY + 10\n          }\n        };\n      }\n      setDragPreview(null);\n      setGuidelines([]);\n      return {\n        moved: false\n      };\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      dragItem: monitor.getItem()\n    })\n  }), [pageData.elements, viewMode, zoomLevel, gridSize, showGrid, canvasBounds, onAddElement, onMoveChild, updateCanvasHeight]);\n  const handleContextMenu = useCallback((id, position) => {\n    setContextMenu({\n      id,\n      position\n    });\n  }, []);\n  const handleCanvasClick = useCallback(e => {\n    if (e.target === canvasRef.current) {\n      onSelectElement([]);\n      onSelectChild(null, null);\n      setContextMenu(null);\n      setDragPreview(null);\n    }\n  }, [onSelectElement, onSelectChild]);\n  const handleKeyDown = useCallback(e => {\n    const ids = Array.isArray(selectedIds) ? selectedIds : [];\n    if (!ids.length) return;\n    e.preventDefault();\n    e.stopPropagation();\n    const step = e.shiftKey ? 10 : 1;\n    ids.forEach(id => {\n      var _element$position$vie1, _element$position$vie10;\n      const element = pageData.elements.find(el => el.id === id);\n      if (element && element.type !== 'section') {\n        var _element$position$vie7, _element$position$vie8, _element$position$vie9, _element$position$vie0;\n        const newY = e.key === 'ArrowUp' ? Math.max(0, (((_element$position$vie7 = element.position[viewMode]) === null || _element$position$vie7 === void 0 ? void 0 : _element$position$vie7.y) || 0) - step) : (((_element$position$vie8 = element.position[viewMode]) === null || _element$position$vie8 === void 0 ? void 0 : _element$position$vie8.y) || 0) + step;\n        const newX = e.key === 'ArrowLeft' ? Math.max(0, (((_element$position$vie9 = element.position[viewMode]) === null || _element$position$vie9 === void 0 ? void 0 : _element$position$vie9.x) || 0) - step) : (((_element$position$vie0 = element.position[viewMode]) === null || _element$position$vie0 === void 0 ? void 0 : _element$position$vie0.x) || 0) + step;\n        switch (e.key) {\n          case 'ArrowUp':\n          case 'ArrowDown':\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: ((_element$position$vie1 = element.position[viewMode]) === null || _element$position$vie1 === void 0 ? void 0 : _element$position$vie1.x) || 0,\n                y: newY\n              }\n            }, 'absolute');\n            break;\n          case 'ArrowLeft':\n          case 'ArrowRight':\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: newX,\n                y: ((_element$position$vie10 = element.position[viewMode]) === null || _element$position$vie10 === void 0 ? void 0 : _element$position$vie10.y) || 0\n              }\n            }, 'absolute');\n            break;\n          case 'Delete':\n          case 'Backspace':\n            onDeleteElement(id);\n            break;\n          case 'Escape':\n            onSelectElement([]);\n            onSelectChild(null, null);\n            setContextMenu(null);\n            setDragPreview(null);\n            setShowPopup(false);\n            break;\n          default:\n            break;\n        }\n      }\n    });\n  }, [selectedIds, onUpdatePosition, onDeleteElement, onSelectElement, onSelectChild, viewMode, pageData.elements]);\n  useHotkeys('ctrl+a', e => {\n    e.preventDefault();\n    onSelectElement(pageData.elements.map(el => el.id));\n  }, [pageData.elements, onSelectElement]);\n  useHotkeys('ctrl+g', e => {\n    e.preventDefault();\n    const ids = Array.isArray(selectedIds) ? selectedIds : [];\n    if (ids.length > 1) {\n      onGroupElements(ids);\n    }\n  }, [selectedIds, onGroupElements]);\n  useEffect(() => {\n    const handleClickOutside = () => {\n      setContextMenu(null);\n      setDragPreview(null);\n      setShowPopup(false);\n    };\n    if (contextMenu || showPopup) {\n      document.addEventListener('click', handleClickOutside);\n      document.addEventListener('touchstart', handleClickOutside);\n      return () => {\n        document.removeEventListener('click', handleClickOutside);\n        document.removeEventListener('touchstart', handleClickOutside);\n      };\n    }\n  }, [contextMenu, showPopup]);\n  const handleAddSection = section => {\n    const lastSectionY = pageData.elements.filter(el => el.type === 'section').sort((a, b) => {\n      var _b$position3, _b$position3$viewMode, _a$position3, _a$position3$viewMode;\n      return (((_b$position3 = b.position) === null || _b$position3 === void 0 ? void 0 : (_b$position3$viewMode = _b$position3[viewMode]) === null || _b$position3$viewMode === void 0 ? void 0 : _b$position3$viewMode.y) || 0) - (((_a$position3 = a.position) === null || _a$position3 === void 0 ? void 0 : (_a$position3$viewMode = _a$position3[viewMode]) === null || _a$position3$viewMode === void 0 ? void 0 : _a$position3$viewMode.y) || 0);\n    }).reduce((maxY, el) => {\n      var _el$position2, _el$position2$viewMod, _el$size2;\n      const y = ((_el$position2 = el.position) === null || _el$position2 === void 0 ? void 0 : (_el$position2$viewMod = _el$position2[viewMode]) === null || _el$position2$viewMod === void 0 ? void 0 : _el$position2$viewMod.y) || 0;\n      const height = ((_el$size2 = el.size) === null || _el$size2 === void 0 ? void 0 : _el$size2.height) || 400;\n      return Math.max(maxY, y + height);\n    }, 0);\n    const newElement = {\n      id: `${section.id}-${Date.now()}`,\n      type: section.json.type,\n      componentData: JSON.parse(JSON.stringify(section.json.componentData || {\n        structure: 'ladi-standard'\n      })),\n      position: {\n        [viewMode]: {\n          x: 0,\n          y: lastSectionY + 10\n        },\n        desktop: {\n          x: 0,\n          y: lastSectionY + 10\n        },\n        tablet: {\n          x: 0,\n          y: lastSectionY + 10\n        },\n        mobile: {\n          x: 0,\n          y: lastSectionY + 10\n        }\n      },\n      size: {\n        width: viewMode === 'mobile' ? '100%' : '90vw',\n        height: 400,\n        maxWidth: viewMode === 'mobile' ? 375 : 1200\n      },\n      styles: JSON.parse(JSON.stringify(section.json.styles || {})),\n      children: JSON.parse(JSON.stringify(section.json.children || []))\n    };\n    onAddElement(newElement);\n    setGuideLinePosition(lastSectionY + 10 + 400);\n    updateCanvasHeight();\n    toast.success('Đã thêm section mới!');\n    setShowPopup(false);\n  };\n  const renderDragPreview = () => {\n    if (!dragPreview) return null;\n    const {\n      x,\n      y,\n      size,\n      type,\n      componentData,\n      styles\n    } = dragPreview;\n    const previewStyle = {\n      position: 'absolute',\n      transform: `translate(${x}px, ${y}px)`,\n      width: size.width,\n      maxWidth: size.maxWidth,\n      height: size.height,\n      border: '2px dashed #2563eb',\n      background: 'rgba(59, 130, 246, 0.1)',\n      pointerEvents: 'none',\n      zIndex: 1000,\n      opacity: 0.5,\n      ...styles\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-drag-preview\",\n      style: previewStyle,\n      children: renderComponentContent(type, componentData || {}, {}, [], viewMode)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1372,\n      columnNumber: 17\n    }, this);\n  };\n  const renderAddSectionButton = () => {\n    if (pageData.elements.length > 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        zIndex: 1000\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          var _e$touches, _e$touches$, _e$touches2, _e$touches2$;\n          e.stopPropagation();\n          setPopupPosition({\n            x: e.clientX || ((_e$touches = e.touches) === null || _e$touches === void 0 ? void 0 : (_e$touches$ = _e$touches[0]) === null || _e$touches$ === void 0 ? void 0 : _e$touches$.clientX) || 0,\n            y: e.clientY || ((_e$touches2 = e.touches) === null || _e$touches2 === void 0 ? void 0 : (_e$touches2$ = _e$touches2[0]) === null || _e$touches2$ === void 0 ? void 0 : _e$touches2$.clientY) || 0\n          });\n          setShowPopup(true);\n        },\n        onTouchStart: e => {\n          e.stopPropagation();\n          setPopupPosition({\n            x: e.touches[0].clientX,\n            y: e.touches[0].clientY\n          });\n          setShowPopup(true);\n        },\n        style: {\n          padding: viewMode === 'mobile' ? '10px 20px' : '12px 24px',\n          background: '#2563eb',\n          color: '#fff',\n          border: 'none',\n          borderRadius: '8px',\n          fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem',\n          fontWeight: '600',\n          cursor: 'pointer'\n        },\n        children: \"Th\\xEAm Section\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1390,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1381,\n      columnNumber: 17\n    }, this);\n  };\n  const renderSectionPopup = () => {\n    var _sections$subCategori2;\n    if (!showPopup) return null;\n    const popupWidth = viewMode === 'mobile' ? '90vw' : '600px';\n    const popupHeight = viewMode === 'mobile' ? '70vh' : '80vh';\n    const offset = 20;\n    let adjustedX = popupPosition.x + offset;\n    let adjustedY = popupPosition.y + offset;\n    if (viewMode === 'mobile' && (popupPosition.x === 0 || popupPosition.y === 0)) {\n      adjustedX = (window.innerWidth - (viewMode === 'mobile' ? window.innerWidth * 0.9 : 600)) / 2;\n      adjustedY = (window.innerHeight - (viewMode === 'mobile' ? window.innerHeight * 0.7 : window.innerHeight * 0.8)) / 2;\n    } else {\n      const parsedWidth = viewMode === 'mobile' ? window.innerWidth * 0.9 : 600;\n      const parsedHeight = viewMode === 'mobile' ? window.innerHeight * 0.7 : window.innerHeight * 0.8;\n      if (adjustedX + parsedWidth > window.innerWidth) {\n        adjustedX = window.innerWidth - parsedWidth - 10;\n      }\n      if (adjustedY + parsedHeight > window.innerHeight) {\n        adjustedY = window.innerHeight - parsedHeight - 10;\n      }\n      if (adjustedX < 10) adjustedX = 10;\n      if (adjustedY < 10) adjustedY = 10;\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'rgba(0, 0, 0, 0.3)',\n          zIndex: 9999\n        },\n        onClick: () => setShowPopup(false),\n        onTouchStart: () => setShowPopup(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1445,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-section-popup\",\n        style: {\n          position: 'fixed',\n          left: adjustedX,\n          top: adjustedY,\n          background: '#ffffff',\n          color: '#1f2937',\n          borderRadius: '16px',\n          boxShadow: '0 4px 16px rgba(0,0,0,0.2)',\n          zIndex: 10000,\n          width: popupWidth,\n          maxHeight: popupHeight,\n          overflowY: 'auto',\n          padding: viewMode === 'mobile' ? '16px' : '24px'\n        },\n        onClick: e => e.stopPropagation(),\n        onTouchStart: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            fontSize: viewMode === 'mobile' ? '1.2rem' : '1.5rem',\n            marginBottom: '10px',\n            textAlign: 'center',\n            color: '#1f2937'\n          },\n          children: \"Ch\\u1ECDn Section\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1477,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            borderBottom: '1px solid #e5e7eb',\n            marginBottom: '20px',\n            overflowX: 'auto',\n            whiteSpace: 'nowrap'\n          },\n          children: sections.subCategories.map(category => /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              padding: viewMode === 'mobile' ? '8px 12px' : '10px 16px',\n              marginRight: '8px',\n              background: activeTab === category.id ? '#ffffff' : '#f3f4f6',\n              border: activeTab === category.id ? '2px solid #2563eb' : 'none',\n              borderBottom: activeTab === category.id ? 'none' : '2px solid #e5e7eb',\n              borderRadius: '8px 8px 0 0',\n              cursor: 'pointer',\n              fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem',\n              fontWeight: activeTab === category.id ? '600' : '400',\n              color: activeTab === category.id ? '#2563eb' : '#4b5563',\n              transition: 'all 0.2s'\n            },\n            onClick: () => setActiveTab(category.id),\n            onTouchStart: () => setActiveTab(category.id),\n            children: category.name\n          }, category.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1488,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1480,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            transition: 'opacity 0.2s',\n            opacity: 1\n          },\n          children: (_sections$subCategori2 = sections.subCategories.find(cat => cat.id === activeTab)) === null || _sections$subCategori2 === void 0 ? void 0 : _sections$subCategori2.templates.map(template => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              border: '1px solid #e5e7eb',\n              borderRadius: '8px',\n              padding: viewMode === 'mobile' ? '8px' : '10px',\n              marginBottom: '10px',\n              textAlign: 'center',\n              cursor: 'pointer',\n              background: '#f9fafb',\n              transition: 'transform 0.2s, background 0.2s'\n            },\n            onClick: () => handleAddSection(template),\n            onTouchStart: () => handleAddSection(template),\n            onMouseEnter: e => {\n              e.currentTarget.style.transform = 'scale(1.02)';\n              e.currentTarget.style.background = '#e5e7eb';\n            },\n            onMouseLeave: e => {\n              e.currentTarget.style.transform = 'scale(1)';\n              e.currentTarget.style.background = '#f9fafb';\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: template.previewImage,\n              alt: template.name,\n              style: {\n                width: '100%',\n                height: viewMode === 'mobile' ? '100px' : '150px',\n                objectFit: 'cover',\n                borderRadius: '4px',\n                marginBottom: '10px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1538,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              style: {\n                fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem',\n                margin: '0 0 5px',\n                color: '#1f2937'\n              },\n              children: template.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1549,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: viewMode === 'mobile' ? '0.8rem' : '0.9rem',\n                color: '#4b5563',\n                margin: '0'\n              },\n              children: template.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1552,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                marginTop: '10px',\n                padding: viewMode === 'mobile' ? '6px 12px' : '8px 16px',\n                background: '#2563eb',\n                color: '#fff',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer',\n                fontWeight: '600',\n                fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem'\n              },\n              children: \"Th\\xEAm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1555,\n              columnNumber: 37\n            }, this)]\n          }, template.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1515,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1510,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowPopup(false),\n          onTouchStart: () => setShowPopup(false),\n          style: {\n            position: 'absolute',\n            top: viewMode === 'mobile' ? '12px' : '16px',\n            right: viewMode === 'mobile' ? '12px' : '16px',\n            padding: viewMode === 'mobile' ? '6px 10px' : '8px 12px',\n            background: '#6b7280',\n            color: '#fff',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem',\n            fontWeight: '600'\n          },\n          children: \"\\u0110\\xF3ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1573,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1458,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: node => {\n      canvasRef.current = node;\n      drop(node);\n    },\n    className: `lpb-canvas ${isOver ? 'lpb-canvas-over' : ''}`,\n    style: {\n      position: 'relative',\n      width: viewMode === 'mobile' ? '375px' : '100%',\n      maxWidth: viewMode === 'mobile' ? '375px' : '1200px',\n      height: pageData.canvas.height || '1000px',\n      margin: '0 auto',\n      background: '#fff',\n      border: '1px solid #e5e7eb',\n      transform: `scale(${zoomLevel / 100})`,\n      transformOrigin: 'top center',\n      overflow: 'visible'\n    },\n    onClick: handleCanvasClick,\n    onKeyDown: handleKeyDown,\n    tabIndex: 0,\n    children: [showGrid && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-grid-overlay\",\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundImage: `linear-gradient(to right, rgba(0,0,0,0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,0.1) 1px, transparent 1px)`,\n        backgroundSize: `${gridSize}px ${gridSize}px`,\n        pointerEvents: 'none',\n        zIndex: 0\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1621,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Guidelines, {\n      guidelines: guidelines,\n      canvasBounds: canvasBounds,\n      zoomLevel: zoomLevel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1633,\n      columnNumber: 17\n    }, this), pageData.elements.map(element => /*#__PURE__*/_jsxDEV(Element, {\n      element: element,\n      isSelected: selectedIds.includes(element.id),\n      onSelectElement: onSelectElement,\n      onUpdatePosition: onUpdatePosition,\n      viewMode: viewMode,\n      zoomLevel: zoomLevel,\n      gridSize: gridSize,\n      onContextMenu: handleContextMenu,\n      canvasBounds: canvasBounds,\n      canvasRef: canvasRef,\n      onSelectChild: onSelectChild,\n      selectedChildId: selectedChildId,\n      onAddChild: onAddChild,\n      onUpdateChildPosition: onUpdateChildPosition,\n      onMoveChild: onMoveChild,\n      showGrid: showGrid,\n      setDragPreview: setDragPreview\n    }, element.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1635,\n      columnNumber: 21\n    }, this)), renderDragPreview(), renderAddSectionButton(), renderSectionPopup(), contextMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: contextMenu.position.y,\n        left: contextMenu.position.x,\n        background: '#ffffff',\n        border: '1px solid #e5e7eb',\n        borderRadius: '8px',\n        boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\n        zIndex: 10000,\n        padding: '8px 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px 16px',\n          cursor: 'pointer',\n          fontSize: '0.9rem',\n          color: '#1f2937'\n        },\n        onClick: () => {\n          onEditElement(contextMenu.id);\n          setContextMenu(null);\n        },\n        children: \"Ch\\u1EC9nh s\\u1EEDa\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1673,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px 16px',\n          cursor: 'pointer',\n          fontSize: '0.9rem',\n          color: '#1f2937'\n        },\n        onClick: () => {\n          onDuplicateElement(contextMenu.id);\n          setContextMenu(null);\n        },\n        children: \"Nh\\xE2n b\\u1EA3n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1687,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px 16px',\n          cursor: 'pointer',\n          fontSize: '0.9rem',\n          color: '#1f2937'\n        },\n        onClick: () => {\n          onMoveElementUp(contextMenu.id);\n          setContextMenu(null);\n        },\n        children: \"Di chuy\\u1EC3n l\\xEAn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1701,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px 16px',\n          cursor: 'pointer',\n          fontSize: '0.9rem',\n          color: '#1f2937'\n        },\n        onClick: () => {\n          onMoveElementDown(contextMenu.id);\n          setContextMenu(null);\n        },\n        children: \"Di chuy\\u1EC3n xu\\u1ED1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1715,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '8px 16px',\n          cursor: 'pointer',\n          fontSize: '0.9rem',\n          color: '#dc2626'\n        },\n        onClick: () => {\n          onDeleteElement(contextMenu.id);\n          setContextMenu(null);\n        },\n        children: \"X\\xF3a\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1729,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1660,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1598,\n    columnNumber: 13\n  }, this);\n}, \"/z/IiCs51/LhjzJqMWQfUz5DgiE=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys];\n})), \"/z/IiCs51/LhjzJqMWQfUz5DgiE=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys];\n});\n_c6 = Canvas;\nexport default Canvas;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"ChildElement$React.memo\");\n$RefreshReg$(_c2, \"ChildElement\");\n$RefreshReg$(_c3, \"Element$React.memo\");\n$RefreshReg$(_c4, \"Element\");\n$RefreshReg$(_c5, \"Canvas$React.memo\");\n$RefreshReg$(_c6, \"Canvas\");","map":{"version":3,"names":["React","useRef","useCallback","useState","useEffect","useDrop","useDrag","getEmptyImage","useHotkeys","toast","sections","Guidelines","SelectionOverlay","QuickEditToolkit","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemTypes","ELEMENT","EXISTING_ELEMENT","CHILD_ELEMENT","getCanvasPosition","mouseX","mouseY","containerElement","zoomLevel","viewMode","console","error","x","y","rect","getBoundingClientRect","scrollX","scrollLeft","scrollY","scrollTop","scaleFactor","rawX","left","rawY","top","Math","max","snapToGrid","gridSize","snapPoints","snappedX","round","snappedY","forEach","point","abs","getElementBounds","element","_element$position$vie","_element$position$vie2","_element$position$vie3","_element$size","_element$position$vie4","_element$size2","_element$position$vie5","_element$size3","_element$position$vie6","_element$size4","position","right","size","width","bottom","height","centerX","centerY","renderComponentContent","type","componentData","styles","children","_componentData$dragga","isMobile","responsiveStyles","fontSize","padding","margin","style","color","border","borderRadius","fileName","_jsxFileName","lineNumber","columnNumber","structure","className","backgroundColor","backgroundImage","backgroundSize","backgroundPosition","zIndex","overlayColor","opacity","overlayOpacity","map","child","index","marginBottom","id","headingLevel","level","includes","HeadingTag","fontWeight","textAlign","content","lineHeight","background","cursor","src","alt","maxWidth","draggable","display","flexDirection","direction","gap","title","some","titleMargin","titleFontSize","titleColor","titleFontWeight","Array","isArray","fields","length","field","placeholder","label","inputType","inputPadding","inputBorderRadius","inputBorder","inputFontSize","buttonBackground","buttonColor","buttonPadding","buttonBorderRadius","buttonBorder","buttonFontSize","buttonFontWeight","buttonText","layoutType","subtitle","subtitleFontSize","subtitleMargin","subtitleColor","contentFontSize","contentMargin","contentColor","features","listStyle","featuresPadding","featuresMargin","featuresDirection","featuresGap","feature","featureFontSize","featureColor","ctaText","ctaPadding","ctaBorderRadius","ctaBackground","ctaColor","ctaBorder","ctaFontSize","ctaFontWeight","contact","contactFontSize","contactMargin","contactColor","thickness","closeButton","alignSelf","boxShadow","quote","quoteFontSize","quoteMargin","quoteColor","fontStyle","author","authorFontSize","authorMargin","authorColor","items","item","href","url","textDecoration","gridTemplateColumns","columns","itemBackground","itemBorderRadius","itemPadding","image","price","priceFontSize","priceMargin","priceColor","listStyleType","itemFontSize","itemMargin","itemColor","errorColor","ChildElement","_s","memo","_c","parentId","isSelected","onSelectChild","showGrid","onUpdateChildPosition","onMoveChild","_position$viewMode","_position$viewMode2","dragRef","isDragging","drag","log","childId","isExisting","end","monitor","didDrop","collect","handleClick","e","stopPropagation","warn","z","onClick","ref","onEdit","onDuplicate","onDelete","onClose","_c2","Element","_s2","_c3","onSelectElement","onUpdatePosition","onContextMenu","canvasBounds","canvasRef","selectedChildId","onAddChild","setDragPreview","_position$viewMode4","elementRef","containerRef","handleMouseDown","ctrlKey","handleContextMenu","preventDefault","clientX","clientY","bounds","push","_position$viewMode3","isOverContainer","canDropContainer","drop","accept","canDrop","getItemType","moved","clientOffset","getClientOffset","current","pos","snapped","Infinity","newId","Date","now","newChild","json","desktop","tablet","mobile","success","newPosition","isOver","transform","userSelect","onMouseDown","preview","elementSize","elementPosition","captureDraggingState","node","_c4","Canvas","_s3","_c5","pageData","selectedIds","onUpdateSize","onDeleteElement","onAddElement","onGroupElements","onEditElement","onDuplicateElement","onMoveElementUp","onMoveElementDown","guideLine","onShowAddSectionPopup","onUpdateCanvasHeight","_sections$subCategori","guidelines","setGuidelines","contextMenu","setContextMenu","dragPreview","showPopup","setShowPopup","guideLinePosition","setGuideLinePosition","popupPosition","setPopupPosition","activeTab","setActiveTab","subCategories","offsetWidth","offsetHeight","updateCanvasHeight","_lastSection$position","_lastSection$position2","_lastSection$size","_lastSection$position3","_lastSection$position4","_lastSection$size2","lastSection","elements","filter","el","sort","a","b","_b$position","_b$position$viewMode","_a$position","_a$position$viewMode","newHeight","canvas","getSnapPoints","points","_el$children","childBounds","dragItem","hover","_pageData$elements$fi","_pageData$elements$fi2","_pageData$elements$fi3","_pageData$elements$fi4","_pageData$elements$fi5","_pageData$elements$fi6","find","newGuidelines","_el$children2","vertical","sourceSection","lastSectionY","_b$position2","_b$position2$viewMode","_a$position2","_a$position2$viewMode","reduce","maxY","_el$position","_el$position$viewMode","_el$size","newElement","JSON","parse","stringify","getItem","handleCanvasClick","target","handleKeyDown","ids","step","shiftKey","_element$position$vie1","_element$position$vie10","_element$position$vie7","_element$position$vie8","_element$position$vie9","_element$position$vie0","newY","key","newX","handleClickOutside","document","addEventListener","removeEventListener","handleAddSection","section","_b$position3","_b$position3$viewMode","_a$position3","_a$position3$viewMode","_el$position2","_el$position2$viewMod","_el$size2","renderDragPreview","previewStyle","pointerEvents","renderAddSectionButton","_e$touches","_e$touches$","_e$touches2","_e$touches2$","touches","onTouchStart","renderSectionPopup","_sections$subCategori2","popupWidth","popupHeight","offset","adjustedX","adjustedY","window","innerWidth","innerHeight","parsedWidth","parsedHeight","maxHeight","overflowY","borderBottom","overflowX","whiteSpace","category","marginRight","transition","name","cat","templates","template","onMouseEnter","currentTarget","onMouseLeave","previewImage","objectFit","description","marginTop","transformOrigin","overflow","onKeyDown","tabIndex","_c6","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef, useCallback, useState, useEffect } from 'react';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport { getEmptyImage } from 'react-dnd-html5-backend';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport { sections } from '../../constants/sections';\r\nimport Guidelines from './Guidelines';\r\nimport SelectionOverlay from './SelectionOverlay';\r\nimport QuickEditToolkit from './QuickEditToolkit';\r\nimport '../../styles/CreateLanding.css';\r\n\r\nconst ItemTypes = {\r\n    ELEMENT: 'element',\r\n    EXISTING_ELEMENT: 'existingElement',\r\n    CHILD_ELEMENT: 'childElement',\r\n};\r\n\r\n// Calculate precise coordinates within canvas or section\r\nconst getCanvasPosition = (mouseX, mouseY, containerElement, zoomLevel, viewMode) => {\r\n    if (!containerElement) {\r\n        console.error('Container element is null in getCanvasPosition');\r\n        return { x: 0, y: 0 };\r\n    }\r\n\r\n    const rect = containerElement.getBoundingClientRect();\r\n    const scrollX = containerElement.scrollLeft || 0;\r\n    const scrollY = containerElement.scrollTop || 0;\r\n\r\n    // Adjust for mobile viewport\r\n    const scaleFactor = viewMode === 'mobile' ? 0.9 : 1;\r\n    const rawX = (mouseX - rect.left + scrollX) / (zoomLevel / 100) * scaleFactor;\r\n    const rawY = (mouseY - rect.top + scrollY) / (zoomLevel / 100) * scaleFactor;\r\n\r\n    return { x: Math.max(0, rawX), y: Math.max(0, rawY) };\r\n};\r\n\r\n// Snap to grid with snap points\r\nconst snapToGrid = (x, y, gridSize, snapPoints = []) => {\r\n    let snappedX = Math.round(x / gridSize) * gridSize;\r\n    let snappedY = Math.round(y / gridSize) * gridSize;\r\n\r\n    snapPoints.forEach((point) => {\r\n        if (Math.abs(x - point.x) < 15) snappedX = point.x;\r\n        if (Math.abs(y - point.y) < 15) snappedY = point.y;\r\n    });\r\n\r\n    return { x: snappedX, y: snappedY };\r\n};\r\n\r\n// Calculate element bounds\r\nconst getElementBounds = (element, viewMode) => ({\r\n    left: element.position[viewMode]?.x || 0,\r\n    top: element.position[viewMode]?.y || 0,\r\n    right: (element.position[viewMode]?.x || 0) + (element.size?.width || (viewMode === 'mobile' ? 375 : 1200)),\r\n    bottom: (element.position[viewMode]?.y || 0) + (element.size?.height || 400),\r\n    centerX: (element.position[viewMode]?.x || 0) + (element.size?.width || (viewMode === 'mobile' ? 375 : 1200)) / 2,\r\n    centerY: (element.position[viewMode]?.y || 0) + (element.size?.height || 400) / 2,\r\n});\r\n\r\n// Render component content with responsive styles\r\nconst renderComponentContent = (type, componentData = {}, styles = {}, children = [], viewMode) => {\r\n    const isMobile = viewMode === 'mobile';\r\n    const responsiveStyles = {\r\n        fontSize: isMobile ? '0.9em' : '1em',\r\n        padding: isMobile ? '0.5rem' : '1rem',\r\n        margin: isMobile ? '0.5rem 0' : '1rem 0',\r\n    };\r\n\r\n    if (!type || typeof type !== 'string') {\r\n        return (\r\n            <div style={{ color: '#ff0000', padding: '10px', border: '1px dashed #ff0000', borderRadius: '4px', ...styles, ...responsiveStyles }}>\r\n                Unknown Component: {type || 'Không xác định'}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (type === 'section' && componentData.structure === 'ladi-standard') {\r\n        return (\r\n            <div className=\"ladi-section\" style={{ ...styles, width: '100%', height: '100%', ...responsiveStyles }}>\r\n                <div className=\"ladi-section-background\" style={{\r\n                    backgroundColor: componentData.backgroundColor || 'transparent',\r\n                    backgroundImage: componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none',\r\n                    backgroundSize: 'cover',\r\n                    backgroundPosition: 'center',\r\n                    position: 'absolute',\r\n                    top: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    zIndex: 0\r\n                }}></div>\r\n                <div className=\"ladi-overlay\" style={{\r\n                    backgroundColor: componentData.overlayColor || 'transparent',\r\n                    opacity: componentData.overlayOpacity || 0,\r\n                    position: 'absolute',\r\n                    top: 0,\r\n                    left: 0,\r\n                    right: 0,\r\n                    bottom: 0,\r\n                    zIndex: 0\r\n                }}></div>\r\n                <div className=\"ladi-container\" style={{\r\n                    position: 'relative',\r\n                    zIndex: 1,\r\n                    padding: componentData.padding || (isMobile ? '10px' : '20px'),\r\n                    width: '100%',\r\n                    height: '100%',\r\n                }}>\r\n                    {children.map((child, index) => (\r\n                        <div key={child.id || index} style={{ marginBottom: child.marginBottom || (isMobile ? '5px' : '10px') }}>\r\n                            {renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    switch (type) {\r\n        case 'heading':\r\n            const headingLevel = componentData.level && ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(componentData.level)\r\n                ? componentData.level\r\n                : 'h2';\r\n            const HeadingTag = headingLevel;\r\n            return (\r\n                <HeadingTag style={{\r\n                    fontSize: componentData.fontSize || (isMobile ? '1.2rem' : '1.5rem'),\r\n                    color: componentData.color || '#1f2937',\r\n                    margin: componentData.margin || '0',\r\n                    padding: componentData.padding || '0',\r\n                    fontWeight: componentData.fontWeight || '700',\r\n                    textAlign: componentData.textAlign || 'left',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {componentData.content || 'Tiêu đề'}\r\n                </HeadingTag>\r\n            );\r\n        case 'paragraph':\r\n            return (\r\n                <p style={{\r\n                    fontSize: componentData.fontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                    color: componentData.color || '#1f2937',\r\n                    margin: componentData.margin || '0',\r\n                    padding: componentData.padding || '0',\r\n                    fontWeight: componentData.fontWeight || '400',\r\n                    lineHeight: componentData.lineHeight || '1.6',\r\n                    textAlign: componentData.textAlign || 'left',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {componentData.content || 'Đoạn văn'}\r\n                </p>\r\n            );\r\n        case 'button':\r\n            return (\r\n                <button style={{\r\n                    padding: componentData.padding || (isMobile ? '6px 12px' : '8px 16px'),\r\n                    borderRadius: componentData.borderRadius || '8px',\r\n                    background: componentData.background || '#2563eb',\r\n                    color: componentData.color || '#fff',\r\n                    border: componentData.border || 'none',\r\n                    cursor: 'pointer',\r\n                    fontSize: componentData.fontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                    fontWeight: componentData.fontWeight || '600',\r\n                    textAlign: componentData.textAlign || 'center',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {componentData.content || 'Nút'}\r\n                </button>\r\n            );\r\n        case 'image':\r\n            return (\r\n                <img\r\n                    src={componentData.src || 'https://via.placeholder.com/150?text=Image'}\r\n                    alt={componentData.alt || 'Hình ảnh'}\r\n                    style={{\r\n                        maxWidth: componentData.maxWidth || '100%',\r\n                        height: componentData.height || 'auto',\r\n                        borderRadius: componentData.borderRadius || '0',\r\n                        ...styles,\r\n                        width: isMobile ? '100%' : 'auto'\r\n                    }}\r\n                    draggable={componentData.draggable ?? false}\r\n                />\r\n            );\r\n        case 'form':\r\n            return (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    flexDirection: componentData.direction || 'column',\r\n                    gap: componentData.gap || (isMobile ? '8px' : '10px'),\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {componentData.title && !children.some(child => child?.type === 'heading') && (\r\n                        <h3 style={{\r\n                            margin: componentData.titleMargin || '0',\r\n                            fontSize: componentData.titleFontSize || (isMobile ? '1rem' : '1.2rem'),\r\n                            color: componentData.titleColor || '#1f2937',\r\n                            fontWeight: componentData.titleFontWeight || '600'\r\n                        }}>\r\n                            {componentData.title}\r\n                        </h3>\r\n                    )}\r\n                    {Array.isArray(componentData.fields) && componentData.fields.length > 0 ? (\r\n                        componentData.fields.map((field, index) => (\r\n                            <input\r\n                                key={index}\r\n                                type={field.type || 'text'}\r\n                                placeholder={field.placeholder || field.label || 'Nhập...'}\r\n                                style={{\r\n                                    padding: field.padding || (isMobile ? '6px' : '8px'),\r\n                                    borderRadius: field.borderRadius || '8px',\r\n                                    border: field.border || '1px solid #ccc',\r\n                                    fontSize: field.fontSize || (isMobile ? '0.9rem' : '1rem')\r\n                                }}\r\n                            />\r\n                        ))\r\n                    ) : (\r\n                        !children.some(child => child?.type === 'input') && (\r\n                            <input\r\n                                type={componentData.inputType || 'text'}\r\n                                placeholder={componentData.placeholder || 'Nhập...'}\r\n                                style={{\r\n                                    padding: componentData.inputPadding || (isMobile ? '6px' : '8px'),\r\n                                    borderRadius: componentData.inputBorderRadius || '8px',\r\n                                    border: componentData.inputBorder || '1px solid #ccc',\r\n                                    fontSize: componentData.inputFontSize || (isMobile ? '0.9rem' : '1rem')\r\n                                }}\r\n                            />\r\n                        )\r\n                    )}\r\n                    {!children.some(child => child?.type === 'button') && (\r\n                        <button\r\n                            type=\"submit\"\r\n                            style={{\r\n                                background: componentData.buttonBackground || '#2563eb',\r\n                                color: componentData.buttonColor || '#fff',\r\n                                padding: componentData.buttonPadding || (isMobile ? '6px 12px' : '8px 16px'),\r\n                                borderRadius: componentData.buttonBorderRadius || '8px',\r\n                                border: componentData.buttonBorder || 'none',\r\n                                cursor: 'pointer',\r\n                                fontSize: componentData.buttonFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                                fontWeight: componentData.buttonFontWeight || '600'\r\n                            }}\r\n                        >\r\n                            {componentData.buttonText || 'Gửi'}\r\n                        </button>\r\n                    )}\r\n                    {Array.isArray(children) && children.length > 0 && children.map((child, index) => (\r\n                        <div key={child.id || index} style={{ marginBottom: child.marginBottom || (isMobile ? '5px' : '10px') }}>\r\n                            {renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            );\r\n        case 'section':\r\n        case 'container':\r\n            return (\r\n                <div style={{\r\n                    display: componentData.layoutType || 'flex',\r\n                    flexDirection: componentData.direction || 'column',\r\n                    gap: componentData.gap || (isMobile ? '8px' : '10px'),\r\n                    padding: componentData.padding || (isMobile ? '10px' : '0'),\r\n                    background: componentData.background || 'transparent',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {componentData.title && !children.some(child => child?.type === 'heading') && (\r\n                        <h2 style={{\r\n                            fontSize: componentData.titleFontSize || (isMobile ? '1.5rem' : '1.8rem'),\r\n                            margin: componentData.titleMargin || '0',\r\n                            color: componentData.titleColor || '#1f2937',\r\n                            fontWeight: componentData.titleFontWeight || '700'\r\n                        }}>\r\n                            {componentData.title}\r\n                        </h2>\r\n                    )}\r\n                    {componentData.subtitle && !children.some(child => child?.type === 'paragraph') && (\r\n                        <p style={{\r\n                            fontSize: componentData.subtitleFontSize || (isMobile ? '1rem' : '1.2rem'),\r\n                            margin: componentData.subtitleMargin || '0',\r\n                            color: componentData.subtitleColor || '#4b5563'\r\n                        }}>\r\n                            {componentData.subtitle}\r\n                        </p>\r\n                    )}\r\n                    {componentData.content && !children.some(child => child?.type === 'paragraph') && (\r\n                        <p style={{\r\n                            fontSize: componentData.contentFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                            margin: componentData.contentMargin || '0',\r\n                            color: componentData.contentColor || '#4b5563'\r\n                        }}>\r\n                            {componentData.content}\r\n                        </p>\r\n                    )}\r\n                    {Array.isArray(componentData.features) && componentData.features.length > 0 && !children.some(child => child?.type === 'list') && (\r\n                        <ul style={{\r\n                            listStyle: 'none',\r\n                            padding: componentData.featuresPadding || 0,\r\n                            margin: componentData.featuresMargin || '0',\r\n                            display: 'flex',\r\n                            flexDirection: componentData.featuresDirection || 'column',\r\n                            gap: componentData.featuresGap || (isMobile ? '6px' : '8px')\r\n                        }}>\r\n                            {componentData.features.map((feature, index) => (\r\n                                <li key={index} style={{\r\n                                    fontSize: componentData.featureFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                                    color: componentData.featureColor || '#1f2937'\r\n                                }}>\r\n                                    {feature}\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    )}\r\n                    {componentData.ctaText && !children.some(child => child?.type === 'button') && (\r\n                        <button style={{\r\n                            padding: componentData.ctaPadding || (isMobile ? '8px 16px' : '10px 20px'),\r\n                            borderRadius: componentData.ctaBorderRadius || '8px',\r\n                            background: componentData.ctaBackground || '#2563eb',\r\n                            color: componentData.ctaColor || '#fff',\r\n                            border: componentData.ctaBorder || 'none',\r\n                            cursor: 'pointer',\r\n                            fontSize: componentData.ctaFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                            fontWeight: componentData.ctaFontWeight || '600'\r\n                        }}>\r\n                            {componentData.ctaText}\r\n                        </button>\r\n                    )}\r\n                    {componentData.contact && !children.some(child => child?.type === 'paragraph') && (\r\n                        <p style={{\r\n                            fontSize: componentData.contactFontSize || (isMobile ? '0.8rem' : '0.9rem'),\r\n                            margin: componentData.contactMargin || '0',\r\n                            color: componentData.contactColor || '#4b5563'\r\n                        }}>\r\n                            {componentData.contact}\r\n                        </p>\r\n                    )}\r\n                    {Array.isArray(children) && children.length > 0 && children.map((child, index) => (\r\n                        <div key={child.id || index} style={{ marginBottom: child.marginBottom || (isMobile ? '5px' : '10px') }}>\r\n                            {renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            );\r\n        case 'divider':\r\n            return (\r\n                <hr style={{\r\n                    border: 'none',\r\n                    background: componentData.color || '#e5e7eb',\r\n                    height: componentData.thickness || '2px',\r\n                    width: componentData.width || '100%',\r\n                    margin: componentData.margin || '0',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }} />\r\n            );\r\n        case 'spacer':\r\n            return (\r\n                <div style={{\r\n                    background: componentData.background || 'transparent',\r\n                    height: componentData.height || (isMobile ? '20px' : '40px'),\r\n                    width: componentData.width || '100%',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }} />\r\n            );\r\n        case 'popup':\r\n            return (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    flexDirection: componentData.direction || 'column',\r\n                    gap: componentData.gap || (isMobile ? '8px' : '10px'),\r\n                    textAlign: componentData.textAlign || 'center',\r\n                    padding: componentData.padding || (isMobile ? '10px' : '20px'),\r\n                    background: componentData.background || '#ffffff',\r\n                    borderRadius: componentData.borderRadius || '12px',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {componentData.title && !children.some(child => child?.type === 'heading') && (\r\n                        <h3 style={{\r\n                            fontSize: componentData.titleFontSize || (isMobile ? '1.2rem' : '1.5rem'),\r\n                            margin: componentData.titleMargin || '0',\r\n                            color: componentData.titleColor || '#1f2937',\r\n                            fontWeight: componentData.titleFontWeight || '600'\r\n                        }}>\r\n                            {componentData.title}\r\n                        </h3>\r\n                    )}\r\n                    {componentData.content && !children.some(child => child?.type === 'paragraph') && (\r\n                        <p style={{\r\n                            fontSize: componentData.contentFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                            margin: componentData.contentMargin || '0',\r\n                            color: componentData.contentColor || '#4b5563'\r\n                        }}>\r\n                            {componentData.content}\r\n                        </p>\r\n                    )}\r\n                    {componentData.buttonText && !children.some(child => child?.type === 'button') && (\r\n                        <button style={{\r\n                            padding: componentData.buttonPadding || (isMobile ? '8px 16px' : '10px 20px'),\r\n                            borderRadius: componentData.buttonBorderRadius || '8px',\r\n                            background: componentData.buttonBackground || '#2563eb',\r\n                            color: componentData.buttonColor || '#fff',\r\n                            border: componentData.buttonBorder || 'none',\r\n                            cursor: 'pointer',\r\n                            fontSize: componentData.buttonFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                            fontWeight: componentData.buttonFontWeight || '600'\r\n                        }}>\r\n                            {componentData.buttonText}\r\n                        </button>\r\n                    )}\r\n                    {Array.isArray(children) && children.length > 0 && children.map((child, index) => (\r\n                        <div key={child.id || index} style={{ marginBottom: child.marginBottom || (isMobile ? '5px' : '10px') }}>\r\n                            {renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            );\r\n        case 'modal':\r\n            return (\r\n                <div style={{\r\n                    display: 'flex',\r\n                    flexDirection: componentData.direction || 'column',\r\n                    gap: componentData.gap || (isMobile ? '8px' : '10px'),\r\n                    padding: componentData.padding || (isMobile ? '10px' : '20px'),\r\n                    background: componentData.background || '#ffffff',\r\n                    borderRadius: componentData.borderRadius || '12px',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {componentData.title && !children.some(child => child?.type === 'heading') && (\r\n                        <h3 style={{\r\n                            fontSize: componentData.titleFontSize || (isMobile ? '1.2rem' : '1.5rem'),\r\n                            margin: componentData.titleMargin || '0',\r\n                            color: componentData.titleColor || '#1f2937',\r\n                            fontWeight: componentData.titleFontWeight || '600'\r\n                        }}>\r\n                            {componentData.title}\r\n                        </h3>\r\n                    )}\r\n                    {componentData.content && !children.some(child => child?.type === 'paragraph') && (\r\n                        <p style={{\r\n                            fontSize: componentData.contentFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                            margin: componentData.contentMargin || '0',\r\n                            color: componentData.contentColor || '#4b5563'\r\n                        }}>\r\n                            {componentData.content}\r\n                        </p>\r\n                    )}\r\n                    {componentData.closeButton && !children.some(child => child?.type === 'button') && (\r\n                        <button style={{\r\n                            padding: componentData.buttonPadding || (isMobile ? '6px 10px' : '8px 12px'),\r\n                            borderRadius: componentData.buttonBorderRadius || '8px',\r\n                            background: componentData.buttonBackground || '#6b7280',\r\n                            color: componentData.buttonColor || '#fff',\r\n                            border: componentData.buttonBorder || 'none',\r\n                            cursor: 'pointer',\r\n                            alignSelf: 'flex-end',\r\n                            fontSize: componentData.buttonFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                            fontWeight: componentData.buttonFontWeight || '600'\r\n                        }}>\r\n                            {componentData.buttonText || 'Đóng'}\r\n                        </button>\r\n                    )}\r\n                    {Array.isArray(children) && children.length > 0 && children.map((child, index) => (\r\n                        <div key={child.id || index} style={{ marginBottom: child.marginBottom || (isMobile ? '5px' : '10px') }}>\r\n                            {renderComponentContent(child.type, child.componentData || {}, child.styles || {}, [], viewMode)}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            );\r\n        case 'card':\r\n            return (\r\n                <div style={{\r\n                    padding: componentData.padding || (isMobile ? '10px' : '20px'),\r\n                    background: componentData.background || '#ffffff',\r\n                    borderRadius: componentData.borderRadius || '8px',\r\n                    boxShadow: componentData.boxShadow || '0 2px 8px rgba(0,0,0,0.1)',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {componentData.title && (\r\n                        <h3 style={{\r\n                            fontSize: componentData.titleFontSize || (isMobile ? '1rem' : '1.2rem'),\r\n                            margin: componentData.titleMargin || '0',\r\n                            color: componentData.titleColor || '#1f2937'\r\n                        }}>\r\n                            {componentData.title}\r\n                        </h3>\r\n                    )}\r\n                    {componentData.content && (\r\n                        <p style={{\r\n                            fontSize: componentData.contentFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                            margin: componentData.contentMargin || (isMobile ? '5px 0 0' : '10px 0 0'),\r\n                            color: componentData.contentColor || '#4b5563'\r\n                        }}>\r\n                            {componentData.content}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            );\r\n        case 'testimonial':\r\n            return (\r\n                <div style={{\r\n                    padding: componentData.padding || (isMobile ? '10px' : '20px'),\r\n                    background: componentData.background || '#f9fafb',\r\n                    borderRadius: componentData.borderRadius || '8px',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {componentData.quote && (\r\n                        <p style={{\r\n                            fontSize: componentData.quoteFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                            margin: componentData.quoteMargin || '0',\r\n                            color: componentData.quoteColor || '#1f2937',\r\n                            fontStyle: 'italic'\r\n                        }}>\r\n                            \"{componentData.quote}\"\r\n                        </p>\r\n                    )}\r\n                    {componentData.author && (\r\n                        <p style={{\r\n                            fontSize: componentData.authorFontSize || (isMobile ? '0.8rem' : '0.9rem'),\r\n                            margin: componentData.authorMargin || (isMobile ? '5px 0 0' : '10px 0 0'),\r\n                            color: componentData.authorColor || '#4b5563',\r\n                            textAlign: 'right'\r\n                        }}>\r\n                            - {componentData.author}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            );\r\n        case 'menu':\r\n            return (\r\n                <div style={{\r\n                    display: componentData.layoutType || 'flex',\r\n                    gap: componentData.gap || (isMobile ? '10px' : '20px'),\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {Array.isArray(componentData.items) && componentData.items.map((item, index) => (\r\n                        <a\r\n                            key={index}\r\n                            href={item.url || '#'}\r\n                            style={{\r\n                                color: componentData.color || '#1f2937',\r\n                                textDecoration: 'none',\r\n                                fontSize: componentData.fontSize || (isMobile ? '0.9rem' : '1rem')\r\n                            }}\r\n                        >\r\n                            {item.label}\r\n                        </a>\r\n                    ))}\r\n                </div>\r\n            );\r\n        case 'grid':\r\n            return (\r\n                <div style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: componentData.columns ? `repeat(${componentData.columns}, 1fr)` : (isMobile ? '1fr' : 'repeat(2, 1fr)'),\r\n                    gap: componentData.gap || (isMobile ? '10px' : '20px'),\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {Array.isArray(componentData.items) && componentData.items.map((item, index) => (\r\n                        <div key={index} style={{\r\n                            background: componentData.itemBackground || '#ffffff',\r\n                            borderRadius: componentData.itemBorderRadius || '8px',\r\n                            padding: componentData.itemPadding || (isMobile ? '8px' : '10px')\r\n                        }}>\r\n                            {item.image && (\r\n                                <img\r\n                                    src={item.image}\r\n                                    alt={item.title || 'Product'}\r\n                                    style={{ maxWidth: '100%', height: 'auto' }}\r\n                                />\r\n                            )}\r\n                            {item.title && (\r\n                                <h4 style={{\r\n                                    fontSize: componentData.titleFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                                    margin: componentData.titleMargin || (isMobile ? '5px 0 0' : '10px 0 0'),\r\n                                    color: componentData.titleColor || '#1f2937'\r\n                                }}>\r\n                                    {item.title}\r\n                                </h4>\r\n                            )}\r\n                            {item.price && (\r\n                                <p style={{\r\n                                    fontSize: componentData.priceFontSize || (isMobile ? '0.8rem' : '0.9rem'),\r\n                                    margin: componentData.priceMargin || (isMobile ? '3px 0 0' : '5px 0 0'),\r\n                                    color: componentData.priceColor || '#4b5563'\r\n                                }}>\r\n                                    {item.price}\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            );\r\n        case 'list':\r\n            return (\r\n                <ul style={{\r\n                    listStyleType: componentData.listStyleType || 'none',\r\n                    padding: componentData.padding || '0',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    {Array.isArray(componentData.items) && componentData.items.map((item, index) => (\r\n                        <li key={index} style={{\r\n                            fontSize: componentData.itemFontSize || (isMobile ? '0.9rem' : '1rem'),\r\n                            margin: componentData.itemMargin || (isMobile ? '3px 0' : '5px 0'),\r\n                            color: componentData.itemColor || '#1f2937'\r\n                        }}>\r\n                            {item.title || item}\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            );\r\n        default:\r\n            return (\r\n                <div style={{\r\n                    color: componentData.errorColor || '#ff0000',\r\n                    padding: '10px',\r\n                    border: '1px dashed #ff0000',\r\n                    borderRadius: '4px',\r\n                    ...styles,\r\n                    ...responsiveStyles\r\n                }}>\r\n                    Unknown Component: {type}\r\n                </div>\r\n            );\r\n    }\r\n};\r\n\r\n// ChildElement Component\r\nconst ChildElement = React.memo(\r\n    ({\r\n         parentId,\r\n         id,\r\n         type,\r\n         componentData = {},\r\n         styles = {},\r\n         isSelected,\r\n         onSelectChild,\r\n         zoomLevel,\r\n         gridSize,\r\n         showGrid,\r\n         onUpdateChildPosition,\r\n         onMoveChild,\r\n         position,\r\n         size,\r\n         viewMode,\r\n     }) => {\r\n        const dragRef = useRef(null);\r\n\r\n        const [{ isDragging }, drag] = useDrag(() => ({\r\n            type: ItemTypes.CHILD_ELEMENT,\r\n            item: () => {\r\n                console.log('ChildElement drag started:', { childId: id, parentId });\r\n                return { childId: id, parentId, isExisting: true, position, size };\r\n            },\r\n            end: (item, monitor) => {\r\n                if (!monitor.didDrop()) {\r\n                    console.log('ChildElement drag ended without drop');\r\n                }\r\n            },\r\n            collect: (monitor) => ({\r\n                isDragging: monitor.isDragging(),\r\n            }),\r\n        }));\r\n\r\n        const handleClick = (e) => {\r\n            e.stopPropagation();\r\n            console.log('ChildElement clicked:', { parentId, id, isSelected });\r\n            if (typeof onSelectChild === 'function') {\r\n                onSelectChild(parentId, id);\r\n            } else {\r\n                console.warn('onSelectChild is not a function');\r\n            }\r\n        };\r\n\r\n        useEffect(() => {\r\n            drag(dragRef);\r\n        }, [drag]);\r\n\r\n        return (\r\n            <div\r\n                className={`lpb-child-element ${isSelected ? 'lpb-child-element-selected' : ''} ${isDragging ? 'lpb-child-element-dragging' : ''}`}\r\n                style={{\r\n                    position: 'absolute',\r\n                    left: position[viewMode]?.x || 0,\r\n                    top: position[viewMode]?.y || 0,\r\n                    width: size?.width || (viewMode === 'mobile' ? '90%' : 200),\r\n                    height: size?.height || (viewMode === 'mobile' ? 'auto' : 50),\r\n                    zIndex: isDragging ? 1000 : (position.z || 10),\r\n                    cursor: isDragging ? 'grabbing' : 'grab',\r\n                    opacity: isDragging ? 0.5 : 1,\r\n                    ...styles,\r\n                }}\r\n                onClick={handleClick}\r\n            >\r\n                <div ref={dragRef}>\r\n                    {renderComponentContent(type, componentData, styles, [], viewMode)}\r\n                </div>\r\n                {isSelected && (\r\n                    <QuickEditToolkit\r\n                        element={{ id, type, styles }}\r\n                        position={{ x: 0, y: -40 }}\r\n                        onEdit={() => console.log('Edit child:', id)}\r\n                        onDuplicate={() => console.log('Duplicate child:', id)}\r\n                        onDelete={() => console.log('Delete child:', id)}\r\n                        onClose={() => onSelectChild(parentId, null)}\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\n// Element Component\r\nconst Element = React.memo(\r\n    ({\r\n         element,\r\n         isSelected,\r\n         onSelectElement,\r\n         onUpdatePosition,\r\n         viewMode,\r\n         zoomLevel,\r\n         gridSize,\r\n         onContextMenu,\r\n         canvasBounds,\r\n         canvasRef,\r\n         onSelectChild,\r\n         selectedChildId,\r\n         onAddChild,\r\n         onUpdateChildPosition,\r\n         onMoveChild,\r\n         showGrid,\r\n         setDragPreview,\r\n     }) => {\r\n        const { id, type, componentData = {}, position = {}, size = { width: viewMode === 'mobile' ? '100%' : '90vw', height: 400, maxWidth: viewMode === 'mobile' ? 375 : 1200 }, styles = {}, children = [] } = element;\r\n        const elementRef = useRef(null);\r\n        const containerRef = useRef(null);\r\n\r\n        const handleMouseDown = useCallback(\r\n            (e) => {\r\n                e.stopPropagation();\r\n                onSelectElement(id, e.ctrlKey);\r\n                onSelectChild(id, null);\r\n            },\r\n            [id, onSelectElement, onSelectChild]\r\n        );\r\n\r\n        const handleContextMenu = useCallback(\r\n            (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                onContextMenu(id, { x: e.clientX, y: e.clientY });\r\n            },\r\n            [id, onContextMenu]\r\n        );\r\n\r\n        const snapPoints = [\r\n            { x: 0, y: 0 },\r\n            { x: size.maxWidth || (viewMode === 'mobile' ? 375 : 1200), y: size.height },\r\n            { x: (size.maxWidth || (viewMode === 'mobile' ? 375 : 1200)) / 2, y: size.height / 2 },\r\n        ];\r\n        children.forEach((child) => {\r\n            const bounds = getElementBounds(child, viewMode);\r\n            snapPoints.push(\r\n                { x: bounds.left, y: bounds.top },\r\n                { x: bounds.right, y: bounds.bottom },\r\n                { x: bounds.centerX, y: bounds.centerY },\r\n                { x: bounds.left, y: bounds.centerY },\r\n                { x: bounds.right, y: bounds.centerY },\r\n                { x: bounds.centerX, y: bounds.top },\r\n                { x: bounds.centerX, y: bounds.bottom }\r\n            );\r\n        });\r\n\r\n        if (type === 'section' && componentData.structure === 'ladi-standard') {\r\n            const [{ isOverContainer, canDropContainer }, drop] = useDrop(() => ({\r\n                accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\r\n                canDrop: (item, monitor) => {\r\n                    if (!type || type !== 'section' || componentData?.structure !== 'ladi-standard') {\r\n                        return false;\r\n                    }\r\n                    if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT && item.parentId && item.parentId !== id) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                },\r\n                drop: (item, monitor) => {\r\n                    if (!monitor.canDrop()) {\r\n                        toast.error('Không thể thả vào container này!');\r\n                        setDragPreview(null);\r\n                        return { moved: false };\r\n                    }\r\n                    const clientOffset = monitor.getClientOffset();\r\n                    if (!clientOffset || !containerRef.current) {\r\n                        toast.error('Không thể xác định vị trí thả!');\r\n                        setDragPreview(null);\r\n                        return { moved: false };\r\n                    }\r\n\r\n                    const pos = getCanvasPosition(clientOffset.x, clientOffset.y, containerRef.current, zoomLevel, viewMode);\r\n                    const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n                    if (monitor.getItemType() === ItemTypes.ELEMENT) {\r\n                        const newId = `${item.id}-${Date.now()}`;\r\n                        const newChild = {\r\n                            id: newId,\r\n                            type: item.json.type,\r\n                            componentData: item.json.componentData || {},\r\n                            position: {\r\n                                [viewMode]: snapped,\r\n                                desktop: snapped,\r\n                                tablet: snapped,\r\n                                mobile: snapped,\r\n                            },\r\n                            size: item.json.size || { width: viewMode === 'mobile' ? '90%' : 200, height: 'auto' },\r\n                            styles: item.json.styles || {},\r\n                            children: [],\r\n                        };\r\n                        onAddChild(id, newChild);\r\n                        toast.success('Đã thêm thành phần con!');\r\n                        setDragPreview(null);\r\n                        return { moved: true, newPosition: snapped };\r\n                    } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                        if (item.parentId === id) {\r\n                            onUpdateChildPosition(id, item.childId, snapped);\r\n                            toast.success('Đã di chuyển thành phần con trong section!');\r\n                        } else {\r\n                            onMoveChild(item.parentId, item.childId, id, snapped);\r\n                            toast.success('Đã di chuyển thành phần con sang section khác!');\r\n                        }\r\n                        setDragPreview(null);\r\n                        return { moved: true, newPosition: snapped };\r\n                    }\r\n                    setDragPreview(null);\r\n                    return { moved: false };\r\n                },\r\n                collect: (monitor) => ({\r\n                    isOverContainer: monitor.isOver(),\r\n                    canDropContainer: monitor.canDrop(),\r\n                }),\r\n            }), [id, type, componentData, viewMode, zoomLevel, gridSize, showGrid, onAddChild, onUpdateChildPosition, onMoveChild]);\r\n\r\n            useEffect(() => {\r\n                drop(containerRef);\r\n            }, [drop]);\r\n\r\n            return (\r\n                <div\r\n                    ref={elementRef}\r\n                    className={`lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''}`}\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: position[viewMode]?.y || 0,\r\n                        width: size.width,\r\n                        maxWidth: size.maxWidth,\r\n                        height: size.height,\r\n                        left: '50%',\r\n                        transform: `translateX(-50%)`,\r\n                        zIndex: position.z || 1,\r\n                        userSelect: 'none'\r\n                    }}\r\n                    onMouseDown={handleMouseDown}\r\n                    onContextMenu={handleContextMenu}\r\n                >\r\n                    <div className=\"ladi-section\" style={{ width: '100%', height: '100%' }}>\r\n                        <div className=\"ladi-section-background\" style={{\r\n                            backgroundColor: componentData.backgroundColor || 'transparent',\r\n                            backgroundImage: componentData.backgroundImage ? `url(${componentData.backgroundImage})` : 'none',\r\n                            backgroundSize: 'cover',\r\n                            backgroundPosition: 'center',\r\n                            position: 'absolute',\r\n                            top: 0,\r\n                            left: 0,\r\n                            right: 0,\r\n                            bottom: 0,\r\n                            zIndex: 0\r\n                        }}></div>\r\n                        <div className=\"ladi-overlay\" style={{\r\n                            backgroundColor: componentData.overlayColor || 'transparent',\r\n                            opacity: componentData.overlayOpacity || 0,\r\n                            position: 'absolute',\r\n                            top: 0,\r\n                            left: 0,\r\n                            right: 0,\r\n                            bottom: 0,\r\n                            zIndex: 0\r\n                        }}></div>\r\n                        <div\r\n                            ref={containerRef}\r\n                            className={`ladi-container ${isOverContainer && canDropContainer ? 'lpb-child-element-hover' : ''}`}\r\n                            style={{\r\n                                position: 'relative',\r\n                                zIndex: 1,\r\n                                padding: componentData.padding || (viewMode === 'mobile' ? '10px' : '20px'),\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                border: isOverContainer && canDropContainer ? '2px dashed #2563eb' : 'none',\r\n                            }}\r\n                        >\r\n                            {children.map((child) => (\r\n                                <ChildElement\r\n                                    key={child.id}\r\n                                    parentId={id}\r\n                                    id={child.id}\r\n                                    type={child.type}\r\n                                    componentData={child.componentData || {}}\r\n                                    styles={child.styles || {}}\r\n                                    position={child.position || {}}\r\n                                    size={child.size || { width: viewMode === 'mobile' ? '90%' : 200, height: 'auto' }}\r\n                                    isSelected={selectedChildId === child.id}\r\n                                    onSelectChild={onSelectChild}\r\n                                    zoomLevel={zoomLevel}\r\n                                    gridSize={gridSize}\r\n                                    showGrid={showGrid}\r\n                                    onUpdateChildPosition={onUpdateChildPosition}\r\n                                    onMoveChild={onMoveChild}\r\n                                    viewMode={viewMode}\r\n                                    setDragPreview={setDragPreview}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const [{ isDragging }, drag, preview] = useDrag(() => ({\r\n            type: ItemTypes.EXISTING_ELEMENT,\r\n            item: () => {\r\n                console.log('Element drag started:', { id, position: position[viewMode] });\r\n                return {\r\n                    id,\r\n                    elementSize: size,\r\n                    elementPosition: position[viewMode] || { x: 0, y: 0 },\r\n                    isExisting: true,\r\n                };\r\n            },\r\n            end: (item, monitor) => {\r\n                if (!monitor.didDrop()) {\r\n                    console.log('Element drag ended without drop');\r\n                }\r\n            },\r\n            collect: (monitor) => ({\r\n                isDragging: monitor.isDragging(),\r\n            }),\r\n        }), [id, size, position, viewMode]);\r\n\r\n        useEffect(() => {\r\n            preview(getEmptyImage(), { captureDraggingState: true });\r\n        }, [preview]);\r\n\r\n        return (\r\n            <div\r\n                ref={(node) => {\r\n                    elementRef.current = node;\r\n                    drag(node);\r\n                }}\r\n                className={`lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`}\r\n                style={{\r\n                    position: 'absolute',\r\n                    top: position[viewMode]?.y || 0,\r\n                    width: size.width,\r\n                    maxWidth: size.maxWidth,\r\n                    height: size.height,\r\n                    left: '50%',\r\n                    transform: `translateX(-50%)`,\r\n                    zIndex: position.z || 1,\r\n                    opacity: isDragging ? 0.5 : 1,\r\n                    cursor: isDragging ? 'grabbing' : 'grab',\r\n                    userSelect: 'none',\r\n                    ...styles,\r\n                }}\r\n                onMouseDown={handleMouseDown}\r\n                onContextMenu={handleContextMenu}\r\n            >\r\n                {renderComponentContent(type, componentData, styles, children, viewMode)}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\n// Canvas Component\r\nconst Canvas = React.memo(\r\n    ({\r\n         pageData,\r\n         selectedIds,\r\n         onSelectElement,\r\n         onUpdatePosition,\r\n         onUpdateSize,\r\n         onDeleteElement,\r\n         onAddElement,\r\n         onGroupElements,\r\n         viewMode,\r\n         zoomLevel,\r\n         gridSize,\r\n         showGrid,\r\n         onEditElement,\r\n         onDuplicateElement,\r\n         onMoveElementUp,\r\n         onMoveElementDown,\r\n         onSelectChild,\r\n         selectedChildId,\r\n         onAddChild,\r\n         onUpdateChildPosition,\r\n         onMoveChild,\r\n         guideLine,\r\n         onShowAddSectionPopup,\r\n         onUpdateCanvasHeight,\r\n     }) => {\r\n        const canvasRef = useRef(null);\r\n        const [guidelines, setGuidelines] = useState([]);\r\n        const [contextMenu, setContextMenu] = useState(null);\r\n        const [dragPreview, setDragPreview] = useState(null);\r\n        const [showPopup, setShowPopup] = useState(false);\r\n        const [guideLinePosition, setGuideLinePosition] = useState(guideLine?.y || 0);\r\n        const [popupPosition, setPopupPosition] = useState({ x: 0, y: 0 });\r\n        const [activeTab, setActiveTab] = useState(sections.subCategories[0]?.id || '');\r\n\r\n        const canvasBounds = canvasRef.current\r\n            ? {\r\n                width: canvasRef.current.offsetWidth / (zoomLevel / 100),\r\n                height: canvasRef.current.offsetHeight / (zoomLevel / 100),\r\n            }\r\n            : { width: viewMode === 'mobile' ? 375 : 1200, height: 1000 };\r\n\r\n        const updateCanvasHeight = useCallback(() => {\r\n            const lastSection = pageData.elements\r\n                .filter((el) => el.type === 'section')\r\n                .sort((a, b) => (b.position?.[viewMode]?.y || 0) - (a.position?.[viewMode]?.y || 0))[0];\r\n            const newHeight = lastSection\r\n                ? (lastSection.position?.[viewMode]?.y || 0) + (lastSection.size?.height || 400) + 50\r\n                : 1000;\r\n            if (newHeight !== pageData.canvas.height) {\r\n                onUpdateCanvasHeight(newHeight);\r\n            }\r\n            setGuideLinePosition(lastSection ? (lastSection.position?.[viewMode]?.y || 0) + (lastSection.size?.height || 400) + 10 : 0);\r\n        }, [pageData.elements, viewMode, onUpdateCanvasHeight]);\r\n\r\n        useEffect(() => {\r\n            updateCanvasHeight();\r\n        }, [pageData.elements, updateCanvasHeight]);\r\n\r\n        const getSnapPoints = useCallback(() => {\r\n            const points = [\r\n                { x: 0, y: 0 },\r\n                { x: viewMode === 'mobile' ? 375 : 1200, y: canvasBounds.height },\r\n                { x: (viewMode === 'mobile' ? 375 : 1200) / 2, y: canvasBounds.height / 2 },\r\n            ];\r\n\r\n            pageData.elements.forEach((el) => {\r\n                const bounds = getElementBounds(el, viewMode);\r\n                points.push(\r\n                    { x: bounds.left, y: bounds.top },\r\n                    { x: bounds.right, y: bounds.bottom },\r\n                    { x: bounds.centerX, y: bounds.centerY },\r\n                    { x: bounds.left, y: bounds.centerY },\r\n                    { x: bounds.right, y: bounds.centerY },\r\n                    { x: bounds.centerX, y: bounds.top },\r\n                    { x: bounds.centerX, y: bounds.bottom }\r\n                );\r\n                el.children?.forEach((child) => {\r\n                    const childBounds = getElementBounds(child, viewMode);\r\n                    points.push(\r\n                        { x: childBounds.left, y: childBounds.top },\r\n                        { x: childBounds.right, y: childBounds.bottom },\r\n                        { x: childBounds.centerX, y: childBounds.centerY },\r\n                        { x: childBounds.left, y: childBounds.centerY },\r\n                        { x: childBounds.right, y: childBounds.centerY },\r\n                        { x: childBounds.centerX, y: childBounds.top },\r\n                        { x: childBounds.centerX, y: childBounds.bottom }\r\n                    );\r\n                });\r\n            });\r\n\r\n            return points;\r\n        }, [pageData.elements, canvasBounds, viewMode]);\r\n\r\n        const [{ isOver, dragItem }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\r\n            hover: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    setDragPreview(null);\r\n                    return;\r\n                }\r\n\r\n                const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef.current, zoomLevel, viewMode);\r\n                const snapPoints = getSnapPoints();\r\n                const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n                if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\r\n                    setDragPreview({\r\n                        id: 'preview',\r\n                        x: snapped.x,\r\n                        y: snapped.y,\r\n                        size: item.json.size || { width: viewMode === 'mobile' ? '100%' : '90vw', height: 400, maxWidth: viewMode === 'mobile' ? 375 : 1200 },\r\n                        type: item.json.type,\r\n                        componentData: item.json.componentData || { structure: 'ladi-standard' },\r\n                        styles: item.json.styles,\r\n                    });\r\n                } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                    setDragPreview({\r\n                        id: item.childId,\r\n                        x: snapped.x,\r\n                        y: snapped.y,\r\n                        size: item.size || { width: viewMode === 'mobile' ? '90%' : 200, height: 'auto' },\r\n                        type: pageData.elements\r\n                            .find((el) => el.id === item.parentId)\r\n                            ?.children.find((child) => child.id === item.childId)?.type,\r\n                        componentData: pageData.elements\r\n                            .find((el) => el.id === item.parentId)\r\n                            ?.children.find((child) => child.id === item.childId)?.componentData,\r\n                        styles: pageData.elements\r\n                            .find((el) => el.id === item.parentId)\r\n                            ?.children.find((child) => child.id === item.childId)?.styles,\r\n                    });\r\n                }\r\n\r\n                const newGuidelines = [];\r\n                pageData.elements.forEach((el) => {\r\n                    if (el.id === item.id) return;\r\n                    const bounds = getElementBounds(el, viewMode);\r\n                    if (Math.abs(snapped.x - bounds.left) < 15) newGuidelines.push({ vertical: true, position: bounds.left });\r\n                    if (Math.abs(snapped.x - bounds.right) < 15) newGuidelines.push({ vertical: true, position: bounds.right });\r\n                    if (Math.abs(snapped.x - bounds.centerX) < 15) newGuidelines.push({ vertical: true, position: bounds.centerX });\r\n                    if (Math.abs(snapped.y - bounds.top) < 15) newGuidelines.push({ vertical: false, position: bounds.top });\r\n                    if (Math.abs(snapped.y - bounds.bottom) < 15) newGuidelines.push({ vertical: false, position: bounds.bottom });\r\n                    if (Math.abs(snapped.y - bounds.centerY) < 15) newGuidelines.push({ vertical: false, position: bounds.centerY });\r\n                    el.children?.forEach((child) => {\r\n                        const childBounds = getElementBounds(child, viewMode);\r\n                        if (Math.abs(snapped.x - childBounds.left) < 15) newGuidelines.push({ vertical: true, position: childBounds.left });\r\n                        if (Math.abs(snapped.x - childBounds.right) < 15) newGuidelines.push({ vertical: true, position: childBounds.right });\r\n                        if (Math.abs(snapped.x - childBounds.centerX) < 15) newGuidelines.push({ vertical: true, position: childBounds.centerX });\r\n                        if (Math.abs(snapped.y - childBounds.top) < 15) newGuidelines.push({ vertical: false, position: childBounds.top });\r\n                        if (Math.abs(snapped.y - childBounds.bottom) < 15) newGuidelines.push({ vertical: false, position: childBounds.bottom });\r\n                        if (Math.abs(snapped.y - childBounds.centerY) < 15) newGuidelines.push({ vertical: false, position: childBounds.centerY });\r\n                    });\r\n                });\r\n\r\n                if (Math.abs(snapped.x) < 15) newGuidelines.push({ vertical: true, position: 0 });\r\n                if (Math.abs(snapped.x - (viewMode === 'mobile' ? 375 : 1200)) < 15) newGuidelines.push({ vertical: true, position: viewMode === 'mobile' ? 375 : 1200 });\r\n                if (Math.abs(snapped.x - (viewMode === 'mobile' ? 375 : 1200) / 2) < 15) newGuidelines.push({ vertical: true, position: (viewMode === 'mobile' ? 375 : 1200) / 2 });\r\n                if (Math.abs(snapped.y) < 15) newGuidelines.push({ vertical: false, position: 0 });\r\n                if (Math.abs(snapped.y - canvasBounds.height) < 15) newGuidelines.push({ vertical: false, position: canvasBounds.height });\r\n                if (Math.abs(snapped.y - canvasBounds.height / 2) < 15) newGuidelines.push({ vertical: false, position: canvasBounds.height / 2 });\r\n\r\n                setGuidelines(newGuidelines);\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    toast.error('Không thể xác định vị trí thả!');\r\n                    setDragPreview(null);\r\n                    setGuidelines([]);\r\n                    return { moved: false };\r\n                }\r\n\r\n                const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef.current, zoomLevel, viewMode);\r\n                const snapPoints = getSnapPoints();\r\n                const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n                if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                    const sourceSection = pageData.elements.find((el) => el.id === item.parentId);\r\n                    if (!sourceSection) {\r\n                        console.error('Source section not found:', item.parentId);\r\n                        setDragPreview(null);\r\n                        setGuidelines([]);\r\n                        return { moved: false };\r\n                    }\r\n                    onMoveChild(item.parentId, item.childId, null, snapped);\r\n                    toast.success('Đã di chuyển thành phần con ra canvas!');\r\n                    setDragPreview(null);\r\n                    setGuidelines([]);\r\n                    return { moved: true, newPosition: snapped };\r\n                } else if (monitor.getItemType() === ItemTypes.ELEMENT) {\r\n                    if (item.json.type !== 'section') {\r\n                        toast.error('Chỉ có thể thả section lên canvas!');\r\n                        setDragPreview(null);\r\n                        setGuidelines([]);\r\n                        return { moved: false };\r\n                    }\r\n                    const lastSectionY = pageData.elements\r\n                        .filter((el) => el.type === 'section')\r\n                        .sort((a, b) => (b.position?.[viewMode]?.y || 0) - (a.position?.[viewMode]?.y || 0))\r\n                        .reduce((maxY, el) => {\r\n                            const y = el.position?.[viewMode]?.y || 0;\r\n                            const height = el.size?.height || 400;\r\n                            return Math.max(maxY, y + height);\r\n                        }, 0);\r\n                    const newElement = {\r\n                        id: `${item.id}-${Date.now()}`,\r\n                        type: item.json.type,\r\n                        componentData: JSON.parse(JSON.stringify(item.json.componentData || { structure: 'ladi-standard' })),\r\n                        position: {\r\n                            [viewMode]: { x: 0, y: lastSectionY + 10 },\r\n                            desktop: { x: 0, y: lastSectionY + 10 },\r\n                            tablet: { x: 0, y: lastSectionY + 10 },\r\n                            mobile: { x: 0, y: lastSectionY + 10 },\r\n                        },\r\n                        size: { width: viewMode === 'mobile' ? '100%' : '90vw', height: 400, maxWidth: viewMode === 'mobile' ? 375 : 1200 },\r\n                        styles: JSON.parse(JSON.stringify(item.json.styles || {})),\r\n                        children: JSON.parse(JSON.stringify(item.json.children || []))\r\n                    };\r\n                    onAddElement(newElement);\r\n                    setGuideLinePosition(lastSectionY + 10 + 400);\r\n                    updateCanvasHeight();\r\n                    toast.success('Đã thêm section mới!');\r\n                    setDragPreview(null);\r\n                    setGuidelines([]);\r\n                    return { moved: true, newPosition: { x: 0, y: lastSectionY + 10 } };\r\n                }\r\n\r\n                setDragPreview(null);\r\n                setGuidelines([]);\r\n                return { moved: false };\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: monitor.isOver(),\r\n                dragItem: monitor.getItem(),\r\n            }),\r\n        }), [pageData.elements, viewMode, zoomLevel, gridSize, showGrid, canvasBounds, onAddElement, onMoveChild, updateCanvasHeight]);\r\n\r\n        const handleContextMenu = useCallback((id, position) => {\r\n            setContextMenu({ id, position });\r\n        }, []);\r\n\r\n        const handleCanvasClick = useCallback(\r\n            (e) => {\r\n                if (e.target === canvasRef.current) {\r\n                    onSelectElement([]);\r\n                    onSelectChild(null, null);\r\n                    setContextMenu(null);\r\n                    setDragPreview(null);\r\n                }\r\n            },\r\n            [onSelectElement, onSelectChild]\r\n        );\r\n\r\n        const handleKeyDown = useCallback(\r\n            (e) => {\r\n                const ids = Array.isArray(selectedIds) ? selectedIds : [];\r\n                if (!ids.length) return;\r\n\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                const step = e.shiftKey ? 10 : 1;\r\n\r\n                ids.forEach((id) => {\r\n                    const element = pageData.elements.find((el) => el.id === id);\r\n                    if (element && element.type !== 'section') {\r\n                        const newY = e.key === 'ArrowUp' ? Math.max(0, (element.position[viewMode]?.y || 0) - step) : (element.position[viewMode]?.y || 0) + step;\r\n                        const newX = e.key === 'ArrowLeft' ? Math.max(0, (element.position[viewMode]?.x || 0) - step) : (element.position[viewMode]?.x || 0) + step;\r\n                        switch (e.key) {\r\n                            case 'ArrowUp':\r\n                            case 'ArrowDown':\r\n                                onUpdatePosition(id, { [viewMode]: { x: element.position[viewMode]?.x || 0, y: newY } }, 'absolute');\r\n                                break;\r\n                            case 'ArrowLeft':\r\n                            case 'ArrowRight':\r\n                                onUpdatePosition(id, { [viewMode]: { x: newX, y: element.position[viewMode]?.y || 0 } }, 'absolute');\r\n                                break;\r\n                            case 'Delete':\r\n                            case 'Backspace':\r\n                                onDeleteElement(id);\r\n                                break;\r\n                            case 'Escape':\r\n                                onSelectElement([]);\r\n                                onSelectChild(null, null);\r\n                                setContextMenu(null);\r\n                                setDragPreview(null);\r\n                                setShowPopup(false);\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            [selectedIds, onUpdatePosition, onDeleteElement, onSelectElement, onSelectChild, viewMode, pageData.elements]\r\n        );\r\n\r\n        useHotkeys('ctrl+a', (e) => {\r\n            e.preventDefault();\r\n            onSelectElement(pageData.elements.map((el) => el.id));\r\n        }, [pageData.elements, onSelectElement]);\r\n\r\n        useHotkeys('ctrl+g', (e) => {\r\n            e.preventDefault();\r\n            const ids = Array.isArray(selectedIds) ? selectedIds : [];\r\n            if (ids.length > 1) {\r\n                onGroupElements(ids);\r\n            }\r\n        }, [selectedIds, onGroupElements]);\r\n\r\n        useEffect(() => {\r\n            const handleClickOutside = () => {\r\n                setContextMenu(null);\r\n                setDragPreview(null);\r\n                setShowPopup(false);\r\n            };\r\n            if (contextMenu || showPopup) {\r\n                document.addEventListener('click', handleClickOutside);\r\n                document.addEventListener('touchstart', handleClickOutside);\r\n                return () => {\r\n                    document.removeEventListener('click', handleClickOutside);\r\n                    document.removeEventListener('touchstart', handleClickOutside);\r\n                };\r\n            }\r\n        }, [contextMenu, showPopup]);\r\n\r\n        const handleAddSection = (section) => {\r\n            const lastSectionY = pageData.elements\r\n                .filter((el) => el.type === 'section')\r\n                .sort((a, b) => (b.position?.[viewMode]?.y || 0) - (a.position?.[viewMode]?.y || 0))\r\n                .reduce((maxY, el) => {\r\n                    const y = el.position?.[viewMode]?.y || 0;\r\n                    const height = el.size?.height || 400;\r\n                    return Math.max(maxY, y + height);\r\n                }, 0);\r\n\r\n            const newElement = {\r\n                id: `${section.id}-${Date.now()}`,\r\n                type: section.json.type,\r\n                componentData: JSON.parse(JSON.stringify(section.json.componentData || { structure: 'ladi-standard' })),\r\n                position: {\r\n                    [viewMode]: { x: 0, y: lastSectionY + 10 },\r\n                    desktop: { x: 0, y: lastSectionY + 10 },\r\n                    tablet: { x: 0, y: lastSectionY + 10 },\r\n                    mobile: { x: 0, y: lastSectionY + 10 },\r\n                },\r\n                size: { width: viewMode === 'mobile' ? '100%' : '90vw', height: 400, maxWidth: viewMode === 'mobile' ? 375 : 1200 },\r\n                styles: JSON.parse(JSON.stringify(section.json.styles || {})),\r\n                children: JSON.parse(JSON.stringify(section.json.children || []))\r\n            };\r\n            onAddElement(newElement);\r\n            setGuideLinePosition(lastSectionY + 10 + 400);\r\n            updateCanvasHeight();\r\n            toast.success('Đã thêm section mới!');\r\n            setShowPopup(false);\r\n        };\r\n\r\n        const renderDragPreview = () => {\r\n            if (!dragPreview) return null;\r\n\r\n            const { x, y, size, type, componentData, styles } = dragPreview;\r\n            const previewStyle = {\r\n                position: 'absolute',\r\n                transform: `translate(${x}px, ${y}px)`,\r\n                width: size.width,\r\n                maxWidth: size.maxWidth,\r\n                height: size.height,\r\n                border: '2px dashed #2563eb',\r\n                background: 'rgba(59, 130, 246, 0.1)',\r\n                pointerEvents: 'none',\r\n                zIndex: 1000,\r\n                opacity: 0.5,\r\n                ...styles,\r\n            };\r\n\r\n            return (\r\n                <div className=\"lpb-drag-preview\" style={previewStyle}>\r\n                    {renderComponentContent(type, componentData || {}, {}, [], viewMode)}\r\n                </div>\r\n            );\r\n        };\r\n\r\n        const renderAddSectionButton = () => {\r\n            if (pageData.elements.length > 0) return null;\r\n            return (\r\n                <div\r\n                    style={{\r\n                        position: 'absolute',\r\n                        top: '50%',\r\n                        left: '50%',\r\n                        transform: 'translate(-50%, -50%)',\r\n                        zIndex: 1000,\r\n                    }}\r\n                >\r\n                    <button\r\n                        onClick={(e) => {\r\n                            e.stopPropagation();\r\n                            setPopupPosition({ x: e.clientX || e.touches?.[0]?.clientX || 0, y: e.clientY || e.touches?.[0]?.clientY || 0 });\r\n                            setShowPopup(true);\r\n                        }}\r\n                        onTouchStart={(e) => {\r\n                            e.stopPropagation();\r\n                            setPopupPosition({ x: e.touches[0].clientX, y: e.touches[0].clientY });\r\n                            setShowPopup(true);\r\n                        }}\r\n                        style={{\r\n                            padding: viewMode === 'mobile' ? '10px 20px' : '12px 24px',\r\n                            background: '#2563eb',\r\n                            color: '#fff',\r\n                            border: 'none',\r\n                            borderRadius: '8px',\r\n                            fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem',\r\n                            fontWeight: '600',\r\n                            cursor: 'pointer',\r\n                        }}\r\n                    >\r\n                        Thêm Section\r\n                    </button>\r\n                </div>\r\n            );\r\n        };\r\n\r\n        const renderSectionPopup = () => {\r\n            if (!showPopup) return null;\r\n\r\n            const popupWidth = viewMode === 'mobile' ? '90vw' : '600px';\r\n            const popupHeight = viewMode === 'mobile' ? '70vh' : '80vh';\r\n            const offset = 20;\r\n            let adjustedX = popupPosition.x + offset;\r\n            let adjustedY = popupPosition.y + offset;\r\n\r\n            if (viewMode === 'mobile' && (popupPosition.x === 0 || popupPosition.y === 0)) {\r\n                adjustedX = (window.innerWidth - (viewMode === 'mobile' ? window.innerWidth * 0.9 : 600)) / 2;\r\n                adjustedY = (window.innerHeight - (viewMode === 'mobile' ? window.innerHeight * 0.7 : window.innerHeight * 0.8)) / 2;\r\n            } else {\r\n                const parsedWidth = viewMode === 'mobile' ? window.innerWidth * 0.9 : 600;\r\n                const parsedHeight = viewMode === 'mobile' ? window.innerHeight * 0.7 : window.innerHeight * 0.8;\r\n                if (adjustedX + parsedWidth > window.innerWidth) {\r\n                    adjustedX = window.innerWidth - parsedWidth - 10;\r\n                }\r\n                if (adjustedY + parsedHeight > window.innerHeight) {\r\n                    adjustedY = window.innerHeight - parsedHeight - 10;\r\n                }\r\n                if (adjustedX < 10) adjustedX = 10;\r\n                if (adjustedY < 10) adjustedY = 10;\r\n            }\r\n\r\n            return (\r\n                <>\r\n                    <div\r\n                        style={{\r\n                            position: 'fixed',\r\n                            top: 0,\r\n                            left: 0,\r\n                            right: 0,\r\n                            bottom: 0,\r\n                            background: 'rgba(0, 0, 0, 0.3)',\r\n                            zIndex: 9999,\r\n                        }}\r\n                        onClick={() => setShowPopup(false)}\r\n                        onTouchStart={() => setShowPopup(false)}\r\n                    />\r\n                    <div\r\n                        className=\"lpb-section-popup\"\r\n                        style={{\r\n                            position: 'fixed',\r\n                            left: adjustedX,\r\n                            top: adjustedY,\r\n                            background: '#ffffff',\r\n                            color: '#1f2937',\r\n                            borderRadius: '16px',\r\n                            boxShadow: '0 4px 16px rgba(0,0,0,0.2)',\r\n                            zIndex: 10000,\r\n                            width: popupWidth,\r\n                            maxHeight: popupHeight,\r\n                            overflowY: 'auto',\r\n                            padding: viewMode === 'mobile' ? '16px' : '24px',\r\n                        }}\r\n                        onClick={(e) => e.stopPropagation()}\r\n                        onTouchStart={(e) => e.stopPropagation()}\r\n                    >\r\n                        <h2 style={{ fontSize: viewMode === 'mobile' ? '1.2rem' : '1.5rem', marginBottom: '10px', textAlign: 'center', color: '#1f2937' }}>\r\n                            Chọn Section\r\n                        </h2>\r\n                        <div style={{\r\n                            display: 'flex',\r\n                            borderBottom: '1px solid #e5e7eb',\r\n                            marginBottom: '20px',\r\n                            overflowX: 'auto',\r\n                            whiteSpace: 'nowrap',\r\n                        }}>\r\n                            {sections.subCategories.map((category) => (\r\n                                <button\r\n                                    key={category.id}\r\n                                    style={{\r\n                                        padding: viewMode === 'mobile' ? '8px 12px' : '10px 16px',\r\n                                        marginRight: '8px',\r\n                                        background: activeTab === category.id ? '#ffffff' : '#f3f4f6',\r\n                                        border: activeTab === category.id ? '2px solid #2563eb' : 'none',\r\n                                        borderBottom: activeTab === category.id ? 'none' : '2px solid #e5e7eb',\r\n                                        borderRadius: '8px 8px 0 0',\r\n                                        cursor: 'pointer',\r\n                                        fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem',\r\n                                        fontWeight: activeTab === category.id ? '600' : '400',\r\n                                        color: activeTab === category.id ? '#2563eb' : '#4b5563',\r\n                                        transition: 'all 0.2s',\r\n                                    }}\r\n                                    onClick={() => setActiveTab(category.id)}\r\n                                    onTouchStart={() => setActiveTab(category.id)}\r\n                                >\r\n                                    {category.name}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                        <div style={{\r\n                            transition: 'opacity 0.2s',\r\n                            opacity: 1,\r\n                        }}>\r\n                            {sections.subCategories.find(cat => cat.id === activeTab)?.templates.map((template) => (\r\n                                <div\r\n                                    key={template.id}\r\n                                    style={{\r\n                                        border: '1px solid #e5e7eb',\r\n                                        borderRadius: '8px',\r\n                                        padding: viewMode === 'mobile' ? '8px' : '10px',\r\n                                        marginBottom: '10px',\r\n                                        textAlign: 'center',\r\n                                        cursor: 'pointer',\r\n                                        background: '#f9fafb',\r\n                                        transition: 'transform 0.2s, background 0.2s',\r\n                                    }}\r\n                                    onClick={() => handleAddSection(template)}\r\n                                    onTouchStart={() => handleAddSection(template)}\r\n                                    onMouseEnter={(e) => {\r\n                                        e.currentTarget.style.transform = 'scale(1.02)';\r\n                                        e.currentTarget.style.background = '#e5e7eb';\r\n                                    }}\r\n                                    onMouseLeave={(e) => {\r\n                                        e.currentTarget.style.transform = 'scale(1)';\r\n                                        e.currentTarget.style.background = '#f9fafb';\r\n                                    }}\r\n                                >\r\n                                    <img\r\n                                        src={template.previewImage}\r\n                                        alt={template.name}\r\n                                        style={{\r\n                                            width: '100%',\r\n                                            height: viewMode === 'mobile' ? '100px' : '150px',\r\n                                            objectFit: 'cover',\r\n                                            borderRadius: '4px',\r\n                                            marginBottom: '10px',\r\n                                        }}\r\n                                    />\r\n                                    <h4 style={{ fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem', margin: '0 0 5px', color: '#1f2937' }}>\r\n                                        {template.name}\r\n                                    </h4>\r\n                                    <p style={{ fontSize: viewMode === 'mobile' ? '0.8rem' : '0.9rem', color: '#4b5563', margin: '0' }}>\r\n                                        {template.description}\r\n                                    </p>\r\n                                    <button\r\n                                        style={{\r\n                                            marginTop: '10px',\r\n                                            padding: viewMode === 'mobile' ? '6px 12px' : '8px 16px',\r\n                                            background: '#2563eb',\r\n                                            color: '#fff',\r\n                                            border: 'none',\r\n                                            borderRadius: '4px',\r\n                                            cursor: 'pointer',\r\n                                            fontWeight: '600',\r\n                                            fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem',\r\n                                        }}\r\n                                    >\r\n                                        Thêm\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setShowPopup(false)}\r\n                            onTouchStart={() => setShowPopup(false)}\r\n                            style={{\r\n                                position: 'absolute',\r\n                                top: viewMode === 'mobile' ? '12px' : '16px',\r\n                                right: viewMode === 'mobile' ? '12px' : '16px',\r\n                                padding: viewMode === 'mobile' ? '6px 10px' : '8px 12px',\r\n                                background: '#6b7280',\r\n                                color: '#fff',\r\n                                border: 'none',\r\n                                borderRadius: '4px',\r\n                                cursor: 'pointer',\r\n                                fontSize: viewMode === 'mobile' ? '0.9rem' : '1rem',\r\n                                fontWeight: '600',\r\n                            }}\r\n                        >\r\n                            Đóng\r\n                        </button>\r\n                    </div>\r\n                </>\r\n            );\r\n        };\r\n\r\n        return (\r\n            <div\r\n                ref={(node) => {\r\n                    canvasRef.current = node;\r\n                    drop(node);\r\n                }}\r\n                className={`lpb-canvas ${isOver ? 'lpb-canvas-over' : ''}`}\r\n                style={{\r\n                    position: 'relative',\r\n                    width: viewMode === 'mobile' ? '375px' : '100%',\r\n                    maxWidth: viewMode === 'mobile' ? '375px' : '1200px',\r\n                    height: pageData.canvas.height || '1000px',\r\n                    margin: '0 auto',\r\n                    background: '#fff',\r\n                    border: '1px solid #e5e7eb',\r\n                    transform: `scale(${zoomLevel / 100})`,\r\n                    transformOrigin: 'top center',\r\n                    overflow: 'visible',\r\n                }}\r\n                onClick={handleCanvasClick}\r\n                onKeyDown={handleKeyDown}\r\n                tabIndex={0}\r\n            >\r\n                {showGrid && (\r\n                    <div className=\"lpb-grid-overlay\" style={{\r\n                        position: 'absolute',\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        backgroundImage: `linear-gradient(to right, rgba(0,0,0,0.1) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,0.1) 1px, transparent 1px)`,\r\n                        backgroundSize: `${gridSize}px ${gridSize}px`,\r\n                        pointerEvents: 'none',\r\n                        zIndex: 0,\r\n                    }} />\r\n                )}\r\n                <Guidelines guidelines={guidelines} canvasBounds={canvasBounds} zoomLevel={zoomLevel} />\r\n                {pageData.elements.map((element) => (\r\n                    <Element\r\n                        key={element.id}\r\n                        element={element}\r\n                        isSelected={selectedIds.includes(element.id)}\r\n                        onSelectElement={onSelectElement}\r\n                        onUpdatePosition={onUpdatePosition}\r\n                        viewMode={viewMode}\r\n                        zoomLevel={zoomLevel}\r\n                        gridSize={gridSize}\r\n                        onContextMenu={handleContextMenu}\r\n                        canvasBounds={canvasBounds}\r\n                        canvasRef={canvasRef}\r\n                        onSelectChild={onSelectChild}\r\n                        selectedChildId={selectedChildId}\r\n                        onAddChild={onAddChild}\r\n                        onUpdateChildPosition={onUpdateChildPosition}\r\n                        onMoveChild={onMoveChild}\r\n                        showGrid={showGrid}\r\n                        setDragPreview={setDragPreview}\r\n                    />\r\n                ))}\r\n                {renderDragPreview()}\r\n                {renderAddSectionButton()}\r\n                {renderSectionPopup()}\r\n                {contextMenu && (\r\n                    <div\r\n                        style={{\r\n                            position: 'fixed',\r\n                            top: contextMenu.position.y,\r\n                            left: contextMenu.position.x,\r\n                            background: '#ffffff',\r\n                            border: '1px solid #e5e7eb',\r\n                            borderRadius: '8px',\r\n                            boxShadow: '0 2px 8px rgba(0,0,0,0.15)',\r\n                            zIndex: 10000,\r\n                            padding: '8px 0',\r\n                        }}\r\n                    >\r\n                        <div\r\n                            style={{\r\n                                padding: '8px 16px',\r\n                                cursor: 'pointer',\r\n                                fontSize: '0.9rem',\r\n                                color: '#1f2937',\r\n                            }}\r\n                            onClick={() => {\r\n                                onEditElement(contextMenu.id);\r\n                                setContextMenu(null);\r\n                            }}\r\n                        >\r\n                            Chỉnh sửa\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                padding: '8px 16px',\r\n                                cursor: 'pointer',\r\n                                fontSize: '0.9rem',\r\n                                color: '#1f2937',\r\n                            }}\r\n                            onClick={() => {\r\n                                onDuplicateElement(contextMenu.id);\r\n                                setContextMenu(null);\r\n                            }}\r\n                        >\r\n                            Nhân bản\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                padding: '8px 16px',\r\n                                cursor: 'pointer',\r\n                                fontSize: '0.9rem',\r\n                                color: '#1f2937',\r\n                            }}\r\n                            onClick={() => {\r\n                                onMoveElementUp(contextMenu.id);\r\n                                setContextMenu(null);\r\n                            }}\r\n                        >\r\n                            Di chuyển lên\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                padding: '8px 16px',\r\n                                cursor: 'pointer',\r\n                                fontSize: '0.9rem',\r\n                                color: '#1f2937',\r\n                            }}\r\n                            onClick={() => {\r\n                                onMoveElementDown(contextMenu.id);\r\n                                setContextMenu(null);\r\n                            }}\r\n                        >\r\n                            Di chuyển xuống\r\n                        </div>\r\n                        <div\r\n                            style={{\r\n                                padding: '8px 16px',\r\n                                cursor: 'pointer',\r\n                                fontSize: '0.9rem',\r\n                                color: '#dc2626',\r\n                            }}\r\n                            onClick={() => {\r\n                                onDeleteElement(contextMenu.id);\r\n                                setContextMenu(null);\r\n                            }}\r\n                        >\r\n                            Xóa\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}