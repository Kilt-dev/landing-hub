{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useRef, useMemo, useCallback, useState } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport QuickEditToolkit from './QuickEditToolkit';\nimport '../../styles/CreateLanding.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  SECTION: 'section',\n  ELEMENT: 'element',\n  EXISTING_ELEMENT: 'existingElement'\n};\nconst Element = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  component,\n  index,\n  isSelected,\n  onSelectElement,\n  handleElementHover,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  updatePosition,\n  canvasRef,\n  sectionId,\n  onInlineEdit,\n  pageStructure,\n  zoomLevel\n}) => {\n  var _component$json$style, _component$json$style2;\n  _s();\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: ItemTypes.EXISTING_ELEMENT,\n    item: {\n      id: component.id,\n      sectionId\n    },\n    end: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset && canvasRef.current && sectionId) {\n        const rect = canvasRef.current.getBoundingClientRect();\n        const newX = Math.round((clientOffset.x - rect.left) / (zoomLevel / 100) / 10) * 10;\n        const newY = Math.round((clientOffset.y - rect.top) / (zoomLevel / 100) / 10) * 10;\n        const section = pageStructure.find(s => s.id === sectionId);\n        let adjustedY = newY;\n        if (section) {\n          section.elements.forEach(el => {\n            if (el.id !== component.id) {\n              var _el$json$styles$posit, _el$json$styles$posit2;\n              const elX = ((_el$json$styles$posit = el.json.styles.position) === null || _el$json$styles$posit === void 0 ? void 0 : _el$json$styles$posit.x) || 0;\n              const elY = ((_el$json$styles$posit2 = el.json.styles.position) === null || _el$json$styles$posit2 === void 0 ? void 0 : _el$json$styles$posit2.y) || 0;\n              if (Math.abs(newX - elX) < 50 && Math.abs(newY - elY) < 50) {\n                adjustedY = elY + 20;\n              }\n            }\n          });\n        }\n        updatePosition(component.id, sectionId, {\n          x: newX,\n          y: adjustedY\n        });\n      }\n    },\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging()\n    })\n  }));\n  const handleMouseDown = e => {\n    e.stopPropagation();\n    onSelectElement(component);\n  };\n  const handleInlineEdit = e => {\n    if (onInlineEdit && e.target.contentEditable === 'true') {\n      onInlineEdit(component.id, sectionId, e.target.innerText);\n    }\n  };\n  const renderContent = () => {\n    var _styles$position, _styles$position2;\n    const {\n      type,\n      content,\n      styles = {},\n      isContainer = false\n    } = component.json;\n    const containerStyle = {\n      ...styles,\n      position: 'absolute',\n      left: ((_styles$position = styles.position) === null || _styles$position === void 0 ? void 0 : _styles$position.x) || 0,\n      top: ((_styles$position2 = styles.position) === null || _styles$position2 === void 0 ? void 0 : _styles$position2.y) || 0,\n      maxWidth: '100%',\n      boxSizing: 'border-box',\n      transform: isSelected ? 'translate(-2px, -2px)' : 'none',\n      width: styles.width || 'auto',\n      height: styles.height || 'auto'\n    };\n    if (isContainer) {\n      switch (type) {\n        case 'form':\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: containerStyle,\n            className: \"lpb-form-container\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: e => e.preventDefault(),\n              onMouseDown: e => e.stopPropagation(),\n              children: [((content === null || content === void 0 ? void 0 : content.fields) || []).map((field, idx) => /*#__PURE__*/_jsxDEV(\"input\", {\n                type: field.type || 'text',\n                placeholder: field.placeholder || `Trường ${idx + 1}`,\n                style: {\n                  marginBottom: '8px',\n                  width: '100%',\n                  ...field.style,\n                  ...styles\n                },\n                onMouseDown: e => e.stopPropagation()\n              }, field.id || idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 41\n              }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                style: {\n                  marginTop: '8px',\n                  ...styles\n                },\n                onMouseDown: e => e.stopPropagation(),\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }, this);\n        case 'button-group':\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: containerStyle,\n            className: \"lpb-button-group-container\",\n            children: (content || []).map((btn, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n              style: {\n                marginRight: idx < content.length - 1 ? '10px' : 0,\n                ...btn.style,\n                ...styles\n              },\n              onMouseDown: e => e.stopPropagation(),\n              children: btn.label || btn || `Nút ${idx + 1}`\n            }, btn.id || idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 29\n          }, this);\n        case 'gallery':\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: containerStyle,\n            className: \"lpb-gallery-container\",\n            children: (content || []).map((img, idx) => /*#__PURE__*/_jsxDEV(\"img\", {\n              src: img.src || 'https://via.placeholder.com/100',\n              alt: img.alt || `Gallery ${idx}`,\n              style: {\n                width: '100px',\n                marginRight: idx < content.length - 1 ? '10px' : 0,\n                ...img.style,\n                ...styles\n              }\n            }, img.id || idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 29\n          }, this);\n        case 'card':\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: containerStyle,\n            className: \"lpb-card-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: content.icon,\n              style: {\n                fontSize: '24px',\n                color: '#4a90e2',\n                ...styles\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              style: {\n                margin: '10px 0',\n                ...styles\n              },\n              children: content.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '0',\n                ...styles\n              },\n              children: content.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 29\n          }, this);\n        default:\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: containerStyle,\n            children: component.name || 'Unknown'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 32\n          }, this);\n      }\n    }\n    switch (type) {\n      case 'heading':\n        return /*#__PURE__*/_jsxDEV(\"h2\", {\n          style: containerStyle,\n          contentEditable: true,\n          suppressContentEditableWarning: true,\n          onBlur: handleInlineEdit,\n          onMouseDown: e => e.stopPropagation(),\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 25\n        }, this);\n      case 'paragraph':\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          style: containerStyle,\n          contentEditable: true,\n          suppressContentEditableWarning: true,\n          onBlur: handleInlineEdit,\n          onMouseDown: e => e.stopPropagation(),\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 25\n        }, this);\n      case 'button':\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          style: containerStyle,\n          contentEditable: true,\n          suppressContentEditableWarning: true,\n          onBlur: handleInlineEdit,\n          onMouseDown: e => e.stopPropagation(),\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 25\n        }, this);\n      case 'image':\n        return /*#__PURE__*/_jsxDEV(\"img\", {\n          src: content,\n          alt: \"Image\",\n          style: containerStyle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 28\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: containerStyle,\n          children: component.name || 'Unknown'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 28\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drag,\n    className: `lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`,\n    onMouseEnter: e => handleElementHover(e, component),\n    onMouseDown: handleMouseDown,\n    style: {\n      position: 'absolute',\n      left: ((_component$json$style = component.json.styles.position) === null || _component$json$style === void 0 ? void 0 : _component$json$style.x) || 0,\n      top: ((_component$json$style2 = component.json.styles.position) === null || _component$json$style2 === void 0 ? void 0 : _component$json$style2.y) || 0,\n      zIndex: isSelected ? 10 : 1,\n      boxSizing: 'border-box',\n      ...component.json.styles\n    },\n    children: renderContent()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 13\n  }, this);\n}, \"wuumsFp4qAni9XRJfRhQAZjuD/k=\", false, function () {\n  return [useDrag];\n})), \"wuumsFp4qAni9XRJfRhQAZjuD/k=\", false, function () {\n  return [useDrag];\n});\n_c2 = Element;\nconst Section = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c3 = _s2(({\n  section,\n  index,\n  selectedElement,\n  onSelectElement,\n  handleElementHover,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  updatePosition,\n  addElement,\n  canvasRef,\n  moveElement,\n  onInlineEdit,\n  onSelectSection,\n  viewMode,\n  pageStructure,\n  zoomLevel\n}) => {\n  var _section$json$styles, _section$json$styles2;\n  _s2();\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset && canvasRef.current) {\n        const rect = canvasRef.current.getBoundingClientRect();\n        const y = clientOffset.y - rect.top;\n        item.dropPosition = {\n          x: Math.round((clientOffset.x - rect.left) / (zoomLevel / 100) / 10) * 10,\n          y: Math.round((y - 50) / (zoomLevel / 100) / 10) * 10 + 50\n        };\n      }\n    },\n    drop: (item, monitor) => {\n      var _pageStructure$find;\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\n        return;\n      }\n      const rect = canvasRef.current.getBoundingClientRect();\n      let position = {\n        x: Math.round((clientOffset.x - rect.left) / (zoomLevel / 100) / 10) * 10,\n        y: Math.round((clientOffset.y - rect.top - 50) / (zoomLevel / 100) / 10) * 10 + 50\n      };\n      const sectionElements = ((_pageStructure$find = pageStructure.find(s => s.id === section.id)) === null || _pageStructure$find === void 0 ? void 0 : _pageStructure$find.elements) || [];\n      sectionElements.forEach(el => {\n        if (el.id !== item.id) {\n          var _el$json$styles$posit3, _el$json$styles$posit4;\n          const elX = ((_el$json$styles$posit3 = el.json.styles.position) === null || _el$json$styles$posit3 === void 0 ? void 0 : _el$json$styles$posit3.x) || 0;\n          const elY = ((_el$json$styles$posit4 = el.json.styles.position) === null || _el$json$styles$posit4 === void 0 ? void 0 : _el$json$styles$posit4.y) || 0;\n          if (Math.abs(position.x - elX) < 50 && Math.abs(position.y - elY) < 50) {\n            position.y = elY + 20;\n          }\n        }\n      });\n      if (item.componentData) {\n        addElement(section.id, {\n          ...item.componentData,\n          json: {\n            ...item.componentData.json,\n            styles: {\n              ...item.componentData.json.styles,\n              position,\n              width: item.componentData.json.styles.width || 'auto',\n              height: item.componentData.json.styles.height || 'auto'\n            }\n          }\n        }, section.elements.length);\n      } else {\n        updatePosition(item.id, section.id, position);\n        moveElement(section.id, item.id, section.elements.length);\n      }\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  const handleSectionClick = e => {\n    e.stopPropagation();\n    onSelectSection(section);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: drop,\n    className: `lpb-canvas-section ${isOver ? 'lpb-canvas-section-over' : ''} ${(selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id) === section.id ? 'lpb-canvas-section-selected' : ''}`,\n    style: {\n      width: ((_section$json$styles = section.json.styles) === null || _section$json$styles === void 0 ? void 0 : _section$json$styles.width) || '1200px',\n      height: ((_section$json$styles2 = section.json.styles) === null || _section$json$styles2 === void 0 ? void 0 : _section$json$styles2.height) || 'auto',\n      minHeight: '200px',\n      position: 'relative',\n      margin: '0 auto 20px auto',\n      border: '1px solid #ddd',\n      padding: '20px',\n      boxSizing: 'border-box'\n    },\n    onMouseDown: handleSectionClick,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: section.json.content.title || 'Section'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lpb-canvas-section-content\",\n      children: section.elements.map((element, idx) => /*#__PURE__*/_jsxDEV(Element, {\n        component: element,\n        index: idx,\n        isSelected: (selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id) === element.id,\n        onSelectElement: onSelectElement,\n        handleElementHover: handleElementHover,\n        onDuplicateElement: onDuplicateElement,\n        onDeleteElement: onDeleteElement,\n        onMoveElement: onMoveElement,\n        updatePosition: updatePosition,\n        canvasRef: canvasRef,\n        sectionId: section.id,\n        onInlineEdit: onInlineEdit,\n        pageStructure: pageStructure,\n        zoomLevel: zoomLevel\n      }, element.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 300,\n    columnNumber: 13\n  }, this);\n}, \"9166pYLrZ/JzF75YDim8ZjfICTM=\", false, function () {\n  return [useDrop];\n})), \"9166pYLrZ/JzF75YDim8ZjfICTM=\", false, function () {\n  return [useDrop];\n});\n_c4 = Section;\nconst Canvas = /*#__PURE__*/_s3(/*#__PURE__*/React.memo(_c5 = _s3(({\n  pageStructure,\n  selectedElement,\n  onSelectElement,\n  quickEditElement,\n  quickEditPosition,\n  onQuickEdit,\n  onCloseQuickEdit,\n  onDuplicateElement,\n  onDeleteElement,\n  onMoveElement,\n  viewMode,\n  addSection,\n  addElement,\n  moveElement,\n  ItemTypes,\n  zoomLevel,\n  setPageStructure,\n  updatePosition,\n  onInlineEdit\n}) => {\n  _s3();\n  const canvasRef = useRef(null);\n  const [dropIndex, setDropIndex] = useState(null);\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.SECTION],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (clientOffset && canvasRef.current) {\n        const rect = canvasRef.current.getBoundingClientRect();\n        const y = clientOffset.y - rect.top;\n        const index = Math.min(pageStructure.length, Math.floor(y / 200));\n        setDropIndex(index);\n        if (item.componentData) {\n          item.componentData.json.styles = {\n            ...item.componentData.json.styles,\n            width: '1200px',\n            height: 'auto'\n          };\n        }\n      }\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\n        return;\n      }\n      const rect = canvasRef.current.getBoundingClientRect();\n      const index = Math.min(pageStructure.length, Math.floor((clientOffset.y - rect.top) / 200));\n      addSection({\n        ...item.componentData,\n        json: {\n          ...item.componentData.json,\n          styles: {\n            ...item.componentData.json.styles,\n            width: '1200px',\n            height: 'auto'\n          }\n        }\n      }, index);\n      setDropIndex(null);\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }));\n  const handleElementHover = useCallback((e, component) => {\n    var _canvasRef$current;\n    if ((quickEditElement === null || quickEditElement === void 0 ? void 0 : quickEditElement.id) === component.id) return;\n    const rect = e.currentTarget.getBoundingClientRect();\n    const canvasRect = ((_canvasRef$current = canvasRef.current) === null || _canvasRef$current === void 0 ? void 0 : _canvasRef$current.getBoundingClientRect()) || {\n      left: 0,\n      top: 0\n    };\n    onQuickEdit(component, {\n      x: (rect.left - canvasRect.left) / (zoomLevel / 100),\n      y: (rect.top - canvasRect.top + 20) / (zoomLevel / 100)\n    });\n  }, [quickEditElement, onQuickEdit, zoomLevel]);\n  const handleSelectSection = useCallback(section => {\n    onSelectElement(section);\n  }, [onSelectElement]);\n  useHotkeys('delete', () => {\n    if (selectedElement) {\n      onDeleteElement(selectedElement);\n    }\n  }, [selectedElement, onDeleteElement]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lpb-canvas-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        canvasRef.current = node;\n        drop(node);\n      },\n      className: `lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`,\n      onMouseLeave: onCloseQuickEdit,\n      style: {\n        zoom: `${zoomLevel / 100}`,\n        position: 'relative'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-canvas-content\",\n        children: pageStructure.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-canvas-empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-layer-group\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"K\\xE9o th\\u1EA3 section \\u0111\\u1EC3 b\\u1EAFt \\u0111\\u1EA7u\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [pageStructure.map((section, index) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [dropIndex === index && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"lpb-canvas-drop-zone\",\n              style: {\n                height: '50px',\n                background: 'rgba(0, 128, 255, 0.1)',\n                border: '2px dashed #0080ff',\n                margin: '10px auto',\n                width: '1200px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(Section, {\n              section: section,\n              index: index,\n              selectedElement: selectedElement,\n              onSelectElement: onSelectElement,\n              handleElementHover: handleElementHover,\n              onDuplicateElement: onDuplicateElement,\n              onDeleteElement: onDeleteElement,\n              onMoveElement: onMoveElement,\n              updatePosition: updatePosition,\n              addElement: addElement,\n              canvasRef: canvasRef,\n              moveElement: moveElement,\n              onInlineEdit: onInlineEdit,\n              onSelectSection: handleSelectSection,\n              viewMode: viewMode,\n              pageStructure: pageStructure,\n              zoomLevel: zoomLevel\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 41\n            }, this)]\n          }, section.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 37\n          }, this)), dropIndex === pageStructure.length && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lpb-canvas-drop-zone\",\n            style: {\n              height: '50px',\n              background: 'rgba(0, 128, 255, 0.1)',\n              border: '2px dashed #0080ff',\n              margin: '10px auto',\n              width: '1200px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(QuickEditToolkit, {\n        element: quickEditElement,\n        position: quickEditPosition,\n        onEdit: () => onSelectElement(quickEditElement),\n        onDuplicate: () => onDuplicateElement(quickEditElement),\n        onDelete: () => onDeleteElement(quickEditElement),\n        onMoveUp: () => onMoveElement(quickEditElement, 'up'),\n        onMoveDown: () => onMoveElement(quickEditElement, 'down'),\n        onClose: onCloseQuickEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 446,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 445,\n    columnNumber: 13\n  }, this);\n}, \"scAB/rDIK+1X1cBUTb+EobmliG0=\", false, function () {\n  return [useDrop, useHotkeys];\n})), \"scAB/rDIK+1X1cBUTb+EobmliG0=\", false, function () {\n  return [useDrop, useHotkeys];\n});\n_c6 = Canvas;\nexport default Canvas;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"Element$React.memo\");\n$RefreshReg$(_c2, \"Element\");\n$RefreshReg$(_c3, \"Section$React.memo\");\n$RefreshReg$(_c4, \"Section\");\n$RefreshReg$(_c5, \"Canvas$React.memo\");\n$RefreshReg$(_c6, \"Canvas\");","map":{"version":3,"names":["React","useRef","useMemo","useCallback","useState","useDrop","useDrag","useHotkeys","toast","QuickEditToolkit","jsxDEV","_jsxDEV","Fragment","_Fragment","ItemTypes","SECTION","ELEMENT","EXISTING_ELEMENT","Element","_s","memo","_c","component","index","isSelected","onSelectElement","handleElementHover","onDuplicateElement","onDeleteElement","onMoveElement","updatePosition","canvasRef","sectionId","onInlineEdit","pageStructure","zoomLevel","_component$json$style","_component$json$style2","isDragging","drag","type","item","id","end","monitor","clientOffset","getClientOffset","current","rect","getBoundingClientRect","newX","Math","round","x","left","newY","y","top","section","find","s","adjustedY","elements","forEach","el","_el$json$styles$posit","_el$json$styles$posit2","elX","json","styles","position","elY","abs","collect","handleMouseDown","e","stopPropagation","handleInlineEdit","target","contentEditable","innerText","renderContent","_styles$position","_styles$position2","content","isContainer","containerStyle","maxWidth","boxSizing","transform","width","height","style","className","children","onSubmit","preventDefault","onMouseDown","fields","map","field","idx","placeholder","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","btn","marginRight","length","label","img","src","alt","icon","fontSize","color","margin","title","description","name","suppressContentEditableWarning","onBlur","ref","onMouseEnter","zIndex","_c2","Section","_s2","_c3","selectedElement","addElement","moveElement","onSelectSection","viewMode","_section$json$styles","_section$json$styles2","isOver","drop","accept","hover","dropPosition","_pageStructure$find","error","sectionElements","_el$json$styles$posit3","_el$json$styles$posit4","componentData","handleSectionClick","minHeight","border","padding","element","_c4","Canvas","_s3","_c5","quickEditElement","quickEditPosition","onQuickEdit","onCloseQuickEdit","addSection","setPageStructure","dropIndex","setDropIndex","min","floor","_canvasRef$current","currentTarget","canvasRect","handleSelectSection","node","onMouseLeave","zoom","background","onEdit","onDuplicate","onDelete","onMoveUp","onMoveDown","onClose","_c6","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef, useMemo, useCallback, useState } from 'react';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport QuickEditToolkit from './QuickEditToolkit';\r\nimport '../../styles/CreateLanding.css';\r\n\r\nconst ItemTypes = {\r\n    SECTION: 'section',\r\n    ELEMENT: 'element',\r\n    EXISTING_ELEMENT: 'existingElement',\r\n};\r\n\r\nconst Element = React.memo(\r\n    ({\r\n         component,\r\n         index,\r\n         isSelected,\r\n         onSelectElement,\r\n         handleElementHover,\r\n         onDuplicateElement,\r\n         onDeleteElement,\r\n         onMoveElement,\r\n         updatePosition,\r\n         canvasRef,\r\n         sectionId,\r\n         onInlineEdit,\r\n         pageStructure,\r\n         zoomLevel,\r\n     }) => {\r\n        const [{ isDragging }, drag] = useDrag(() => ({\r\n            type: ItemTypes.EXISTING_ELEMENT,\r\n            item: { id: component.id, sectionId },\r\n            end: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (clientOffset && canvasRef.current && sectionId) {\r\n                    const rect = canvasRef.current.getBoundingClientRect();\r\n                    const newX = Math.round((clientOffset.x - rect.left) / (zoomLevel / 100) / 10) * 10;\r\n                    const newY = Math.round((clientOffset.y - rect.top) / (zoomLevel / 100) / 10) * 10;\r\n\r\n                    const section = pageStructure.find((s) => s.id === sectionId);\r\n                    let adjustedY = newY;\r\n                    if (section) {\r\n                        section.elements.forEach((el) => {\r\n                            if (el.id !== component.id) {\r\n                                const elX = el.json.styles.position?.x || 0;\r\n                                const elY = el.json.styles.position?.y || 0;\r\n                                if (Math.abs(newX - elX) < 50 && Math.abs(newY - elY) < 50) {\r\n                                    adjustedY = elY + 20;\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    updatePosition(component.id, sectionId, { x: newX, y: adjustedY });\r\n                }\r\n            },\r\n            collect: (monitor) => ({\r\n                isDragging: !!monitor.isDragging(),\r\n            }),\r\n        }));\r\n\r\n        const handleMouseDown = (e) => {\r\n            e.stopPropagation();\r\n            onSelectElement(component);\r\n        };\r\n\r\n        const handleInlineEdit = (e) => {\r\n            if (onInlineEdit && e.target.contentEditable === 'true') {\r\n                onInlineEdit(component.id, sectionId, e.target.innerText);\r\n            }\r\n        };\r\n\r\n        const renderContent = () => {\r\n            const { type, content, styles = {}, isContainer = false } = component.json;\r\n            const containerStyle = {\r\n                ...styles,\r\n                position: 'absolute',\r\n                left: styles.position?.x || 0,\r\n                top: styles.position?.y || 0,\r\n                maxWidth: '100%',\r\n                boxSizing: 'border-box',\r\n                transform: isSelected ? 'translate(-2px, -2px)' : 'none',\r\n                width: styles.width || 'auto',\r\n                height: styles.height || 'auto',\r\n            };\r\n\r\n            if (isContainer) {\r\n                switch (type) {\r\n                    case 'form':\r\n                        return (\r\n                            <div style={containerStyle} className=\"lpb-form-container\">\r\n                                <form onSubmit={(e) => e.preventDefault()} onMouseDown={(e) => e.stopPropagation()}>\r\n                                    {(content?.fields || []).map((field, idx) => (\r\n                                        <input\r\n                                            key={field.id || idx}\r\n                                            type={field.type || 'text'}\r\n                                            placeholder={field.placeholder || `Trường ${idx + 1}`}\r\n                                            style={{ marginBottom: '8px', width: '100%', ...field.style, ...styles }}\r\n                                            onMouseDown={(e) => e.stopPropagation()}\r\n                                        />\r\n                                    ))}\r\n                                    <button\r\n                                        type=\"submit\"\r\n                                        style={{ marginTop: '8px', ...styles }}\r\n                                        onMouseDown={(e) => e.stopPropagation()}\r\n                                    >\r\n                                        Submit\r\n                                    </button>\r\n                                </form>\r\n                            </div>\r\n                        );\r\n                    case 'button-group':\r\n                        return (\r\n                            <div style={containerStyle} className=\"lpb-button-group-container\">\r\n                                {(content || []).map((btn, idx) => (\r\n                                    <button\r\n                                        key={btn.id || idx}\r\n                                        style={{ marginRight: idx < content.length - 1 ? '10px' : 0, ...btn.style, ...styles }}\r\n                                        onMouseDown={(e) => e.stopPropagation()}\r\n                                    >\r\n                                        {btn.label || btn || `Nút ${idx + 1}`}\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        );\r\n                    case 'gallery':\r\n                        return (\r\n                            <div style={containerStyle} className=\"lpb-gallery-container\">\r\n                                {(content || []).map((img, idx) => (\r\n                                    <img\r\n                                        key={img.id || idx}\r\n                                        src={img.src || 'https://via.placeholder.com/100'}\r\n                                        alt={img.alt || `Gallery ${idx}`}\r\n                                        style={{ width: '100px', marginRight: idx < content.length - 1 ? '10px' : 0, ...img.style, ...styles }}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        );\r\n                    case 'card':\r\n                        return (\r\n                            <div style={containerStyle} className=\"lpb-card-container\">\r\n                                <i className={content.icon} style={{ fontSize: '24px', color: '#4a90e2', ...styles }} />\r\n                                <h3 style={{ margin: '10px 0', ...styles }}>{content.title}</h3>\r\n                                <p style={{ margin: '0', ...styles }}>{content.description}</p>\r\n                            </div>\r\n                        );\r\n                    default:\r\n                        return <div style={containerStyle}>{component.name || 'Unknown'}</div>;\r\n                }\r\n            }\r\n\r\n            switch (type) {\r\n                case 'heading':\r\n                    return (\r\n                        <h2\r\n                            style={containerStyle}\r\n                            contentEditable\r\n                            suppressContentEditableWarning\r\n                            onBlur={handleInlineEdit}\r\n                            onMouseDown={(e) => e.stopPropagation()}\r\n                        >\r\n                            {content}\r\n                        </h2>\r\n                    );\r\n                case 'paragraph':\r\n                    return (\r\n                        <p\r\n                            style={containerStyle}\r\n                            contentEditable\r\n                            suppressContentEditableWarning\r\n                            onBlur={handleInlineEdit}\r\n                            onMouseDown={(e) => e.stopPropagation()}\r\n                        >\r\n                            {content}\r\n                        </p>\r\n                    );\r\n                case 'button':\r\n                    return (\r\n                        <button\r\n                            style={containerStyle}\r\n                            contentEditable\r\n                            suppressContentEditableWarning\r\n                            onBlur={handleInlineEdit}\r\n                            onMouseDown={(e) => e.stopPropagation()}\r\n                        >\r\n                            {content}\r\n                        </button>\r\n                    );\r\n                case 'image':\r\n                    return <img src={content} alt=\"Image\" style={containerStyle} />;\r\n                default:\r\n                    return <div style={containerStyle}>{component.name || 'Unknown'}</div>;\r\n            }\r\n        };\r\n\r\n        return (\r\n            <div\r\n                ref={drag}\r\n                className={`lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`}\r\n                onMouseEnter={(e) => handleElementHover(e, component)}\r\n                onMouseDown={handleMouseDown}\r\n                style={{\r\n                    position: 'absolute',\r\n                    left: component.json.styles.position?.x || 0,\r\n                    top: component.json.styles.position?.y || 0,\r\n                    zIndex: isSelected ? 10 : 1,\r\n                    boxSizing: 'border-box',\r\n                    ...component.json.styles,\r\n                }}\r\n            >\r\n                {renderContent()}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nconst Section = React.memo(\r\n    ({\r\n         section,\r\n         index,\r\n         selectedElement,\r\n         onSelectElement,\r\n         handleElementHover,\r\n         onDuplicateElement,\r\n         onDeleteElement,\r\n         onMoveElement,\r\n         updatePosition,\r\n         addElement,\r\n         canvasRef,\r\n         moveElement,\r\n         onInlineEdit,\r\n         onSelectSection,\r\n         viewMode,\r\n         pageStructure,\r\n         zoomLevel,\r\n     }) => {\r\n        const [{ isOver }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\r\n            hover: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (clientOffset && canvasRef.current) {\r\n                    const rect = canvasRef.current.getBoundingClientRect();\r\n                    const y = clientOffset.y - rect.top;\r\n                    item.dropPosition = {\r\n                        x: Math.round((clientOffset.x - rect.left) / (zoomLevel / 100) / 10) * 10,\r\n                        y: Math.round((y - 50) / (zoomLevel / 100) / 10) * 10 + 50,\r\n                    };\r\n                }\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\r\n                    return;\r\n                }\r\n                const rect = canvasRef.current.getBoundingClientRect();\r\n                let position = {\r\n                    x: Math.round((clientOffset.x - rect.left) / (zoomLevel / 100) / 10) * 10,\r\n                    y: Math.round((clientOffset.y - rect.top - 50) / (zoomLevel / 100) / 10) * 10 + 50,\r\n                };\r\n                const sectionElements = pageStructure.find((s) => s.id === section.id)?.elements || [];\r\n                sectionElements.forEach((el) => {\r\n                    if (el.id !== item.id) {\r\n                        const elX = el.json.styles.position?.x || 0;\r\n                        const elY = el.json.styles.position?.y || 0;\r\n                        if (Math.abs(position.x - elX) < 50 && Math.abs(position.y - elY) < 50) {\r\n                            position.y = elY + 20;\r\n                        }\r\n                    }\r\n                });\r\n                if (item.componentData) {\r\n                    addElement(section.id, {\r\n                        ...item.componentData,\r\n                        json: {\r\n                            ...item.componentData.json,\r\n                            styles: {\r\n                                ...item.componentData.json.styles,\r\n                                position,\r\n                                width: item.componentData.json.styles.width || 'auto',\r\n                                height: item.componentData.json.styles.height || 'auto',\r\n                            },\r\n                        },\r\n                    }, section.elements.length);\r\n                } else {\r\n                    updatePosition(item.id, section.id, position);\r\n                    moveElement(section.id, item.id, section.elements.length);\r\n                }\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: !!monitor.isOver(),\r\n            }),\r\n        }));\r\n\r\n        const handleSectionClick = (e) => {\r\n            e.stopPropagation();\r\n            onSelectSection(section);\r\n        };\r\n\r\n        return (\r\n            <div\r\n                ref={drop}\r\n                className={`lpb-canvas-section ${isOver ? 'lpb-canvas-section-over' : ''} ${selectedElement?.id === section.id ? 'lpb-canvas-section-selected' : ''}`}\r\n                style={{\r\n                    width: section.json.styles?.width || '1200px',\r\n                    height: section.json.styles?.height || 'auto',\r\n                    minHeight: '200px',\r\n                    position: 'relative',\r\n                    margin: '0 auto 20px auto',\r\n                    border: '1px solid #ddd',\r\n                    padding: '20px',\r\n                    boxSizing: 'border-box',\r\n                }}\r\n                onMouseDown={handleSectionClick}\r\n            >\r\n                <h3>{section.json.content.title || 'Section'}</h3>\r\n                <div className=\"lpb-canvas-section-content\">\r\n                    {section.elements.map((element, idx) => (\r\n                        <Element\r\n                            key={element.id}\r\n                            component={element}\r\n                            index={idx}\r\n                            isSelected={selectedElement?.id === element.id}\r\n                            onSelectElement={onSelectElement}\r\n                            handleElementHover={handleElementHover}\r\n                            onDuplicateElement={onDuplicateElement}\r\n                            onDeleteElement={onDeleteElement}\r\n                            onMoveElement={onMoveElement}\r\n                            updatePosition={updatePosition}\r\n                            canvasRef={canvasRef}\r\n                            sectionId={section.id}\r\n                            onInlineEdit={onInlineEdit}\r\n                            pageStructure={pageStructure}\r\n                            zoomLevel={zoomLevel}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nconst Canvas = React.memo(\r\n    ({\r\n         pageStructure,\r\n         selectedElement,\r\n         onSelectElement,\r\n         quickEditElement,\r\n         quickEditPosition,\r\n         onQuickEdit,\r\n         onCloseQuickEdit,\r\n         onDuplicateElement,\r\n         onDeleteElement,\r\n         onMoveElement,\r\n         viewMode,\r\n         addSection,\r\n         addElement,\r\n         moveElement,\r\n         ItemTypes,\r\n         zoomLevel,\r\n         setPageStructure,\r\n         updatePosition,\r\n         onInlineEdit,\r\n     }) => {\r\n        const canvasRef = useRef(null);\r\n        const [dropIndex, setDropIndex] = useState(null);\r\n\r\n        const [{ isOver }, drop] = useDrop(() => ({\r\n            accept: [ItemTypes.SECTION],\r\n            hover: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (clientOffset && canvasRef.current) {\r\n                    const rect = canvasRef.current.getBoundingClientRect();\r\n                    const y = clientOffset.y - rect.top;\r\n                    const index = Math.min(pageStructure.length, Math.floor(y / 200));\r\n                    setDropIndex(index);\r\n                    if (item.componentData) {\r\n                        item.componentData.json.styles = {\r\n                            ...item.componentData.json.styles,\r\n                            width: '1200px',\r\n                            height: 'auto',\r\n                        };\r\n                    }\r\n                }\r\n            },\r\n            drop: (item, monitor) => {\r\n                const clientOffset = monitor.getClientOffset();\r\n                if (!clientOffset || !canvasRef.current) {\r\n                    toast.error('Không thể xác định vị trí thả. Vui lòng thử lại!');\r\n                    return;\r\n                }\r\n                const rect = canvasRef.current.getBoundingClientRect();\r\n                const index = Math.min(pageStructure.length, Math.floor((clientOffset.y - rect.top) / 200));\r\n                addSection(\r\n                    {\r\n                        ...item.componentData,\r\n                        json: {\r\n                            ...item.componentData.json,\r\n                            styles: {\r\n                                ...item.componentData.json.styles,\r\n                                width: '1200px',\r\n                                height: 'auto',\r\n                            },\r\n                        },\r\n                    },\r\n                    index\r\n                );\r\n                setDropIndex(null);\r\n            },\r\n            collect: (monitor) => ({\r\n                isOver: !!monitor.isOver(),\r\n            }),\r\n        }));\r\n\r\n        const handleElementHover = useCallback(\r\n            (e, component) => {\r\n                if (quickEditElement?.id === component.id) return;\r\n                const rect = e.currentTarget.getBoundingClientRect();\r\n                const canvasRect = canvasRef.current?.getBoundingClientRect() || { left: 0, top: 0 };\r\n                onQuickEdit(component, {\r\n                    x: (rect.left - canvasRect.left) / (zoomLevel / 100),\r\n                    y: (rect.top - canvasRect.top + 20) / (zoomLevel / 100),\r\n                });\r\n            },\r\n            [quickEditElement, onQuickEdit, zoomLevel]\r\n        );\r\n\r\n        const handleSelectSection = useCallback(\r\n            (section) => {\r\n                onSelectElement(section);\r\n            },\r\n            [onSelectElement]\r\n        );\r\n\r\n        useHotkeys(\r\n            'delete',\r\n            () => {\r\n                if (selectedElement) {\r\n                    onDeleteElement(selectedElement);\r\n                }\r\n            },\r\n            [selectedElement, onDeleteElement]\r\n        );\r\n\r\n        return (\r\n            <div className=\"lpb-canvas-wrapper\">\r\n                <div\r\n                    ref={(node) => {\r\n                        canvasRef.current = node;\r\n                        drop(node);\r\n                    }}\r\n                    className={`lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`}\r\n                    onMouseLeave={onCloseQuickEdit}\r\n                    style={{ zoom: `${zoomLevel / 100}`, position: 'relative' }}\r\n                >\r\n                    <div className=\"lpb-canvas-content\">\r\n                        {pageStructure.length === 0 ? (\r\n                            <div className=\"lpb-canvas-empty-state\">\r\n                                <i className=\"fas fa-layer-group\"></i>\r\n                                <p>Kéo thả section để bắt đầu</p>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                {pageStructure.map((section, index) => (\r\n                                    <React.Fragment key={section.id}>\r\n                                        {dropIndex === index && (\r\n                                            <div\r\n                                                className=\"lpb-canvas-drop-zone\"\r\n                                                style={{\r\n                                                    height: '50px',\r\n                                                    background: 'rgba(0, 128, 255, 0.1)',\r\n                                                    border: '2px dashed #0080ff',\r\n                                                    margin: '10px auto',\r\n                                                    width: '1200px',\r\n                                                }}\r\n                                            />\r\n                                        )}\r\n                                        <Section\r\n                                            section={section}\r\n                                            index={index}\r\n                                            selectedElement={selectedElement}\r\n                                            onSelectElement={onSelectElement}\r\n                                            handleElementHover={handleElementHover}\r\n                                            onDuplicateElement={onDuplicateElement}\r\n                                            onDeleteElement={onDeleteElement}\r\n                                            onMoveElement={onMoveElement}\r\n                                            updatePosition={updatePosition}\r\n                                            addElement={addElement}\r\n                                            canvasRef={canvasRef}\r\n                                            moveElement={moveElement}\r\n                                            onInlineEdit={onInlineEdit}\r\n                                            onSelectSection={handleSelectSection}\r\n                                            viewMode={viewMode}\r\n                                            pageStructure={pageStructure}\r\n                                            zoomLevel={zoomLevel}\r\n                                        />\r\n                                    </React.Fragment>\r\n                                ))}\r\n                                {dropIndex === pageStructure.length && (\r\n                                    <div\r\n                                        className=\"lpb-canvas-drop-zone\"\r\n                                        style={{\r\n                                            height: '50px',\r\n                                            background: 'rgba(0, 128, 255, 0.1)',\r\n                                            border: '2px dashed #0080ff',\r\n                                            margin: '10px auto',\r\n                                            width: '1200px',\r\n                                        }}\r\n                                    />\r\n                                )}\r\n                            </>\r\n                        )}\r\n                    </div>\r\n                    <QuickEditToolkit\r\n                        element={quickEditElement}\r\n                        position={quickEditPosition}\r\n                        onEdit={() => onSelectElement(quickEditElement)}\r\n                        onDuplicate={() => onDuplicateElement(quickEditElement)}\r\n                        onDelete={() => onDeleteElement(quickEditElement)}\r\n                        onMoveUp={() => onMoveElement(quickEditElement, 'up')}\r\n                        onMoveDown={() => onMoveElement(quickEditElement, 'down')}\r\n                        onClose={onCloseQuickEdit}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}