{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useRef, useCallback, useState, useEffect, useMemo } from 'react';\nimport { useDrop } from 'react-dnd';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\nimport Guidelines from './Guidelines';\nimport SelectionOverlay from './SelectionOverlay';\nimport { Element } from './Element';\nimport { ItemTypes, getCanvasPosition, snapToGrid, getElementBounds, renderComponentContent } from './helpers';\nimport AddSectionButton from './AddSectionButton';\nimport eventController from '../../utils/EventController';\n\n// Custom hook để quản lý drag-and-drop\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useCanvasDrop = ({\n  pageData,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  showGrid,\n  canvasBounds,\n  onAddElement,\n  onMoveChild,\n  updateCanvasHeight\n}) => {\n  _s();\n  const [{\n    isOver,\n    dragItem\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\n    hover: (item, monitor, setDragPreview, setGuidelines) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset) {\n        setDragPreview(null);\n        return;\n      }\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, monitor.getSourceClientOffset(), zoomLevel);\n      const snapPoints = getSnapPoints(pageData.elements, canvasBounds, viewMode);\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\n        setDragPreview({\n          id: 'preview',\n          x: snapped.x,\n          y: snapped.y,\n          size: item.json.size || {\n            width: viewMode === 'mobile' ? 375 : 1200,\n            height: 400\n          },\n          type: item.json.type,\n          componentData: item.json.componentData || {\n            structure: 'ladi-standard'\n          },\n          styles: item.json.styles || {},\n          children: item.json.children || []\n        });\n      } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        const sourceElement = pageData.elements.find(el => el.id === item.parentId);\n        const child = sourceElement === null || sourceElement === void 0 ? void 0 : sourceElement.children.find(c => c.id === item.childId);\n        if (child) {\n          setDragPreview({\n            id: item.childId,\n            x: snapped.x,\n            y: snapped.y,\n            size: item.size || {\n              width: 200,\n              height: 50\n            },\n            type: child.type,\n            componentData: child.componentData || {},\n            styles: child.styles || {},\n            children: []\n          });\n        }\n      }\n      const newGuidelines = calculateGuidelines(pageData.elements, snapped, viewMode, canvasBounds);\n      setGuidelines(newGuidelines);\n    },\n    drop: (item, monitor, setDragPreview, setGuidelines) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset) {\n        toast.error('Không thể xác định vị trí thả!');\n        setDragPreview(null);\n        setGuidelines([]);\n        return {\n          moved: false\n        };\n      }\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, monitor.getSourceClientOffset(), zoomLevel);\n      const snapPoints = getSnapPoints(pageData.elements, canvasBounds, viewMode);\n      const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\n      if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\n        const sourceSection = pageData.elements.find(el => el.id === item.parentId);\n        if (!sourceSection) {\n          toast.error('Không tìm thấy section nguồn!');\n          setDragPreview(null);\n          setGuidelines([]);\n          return {\n            moved: false\n          };\n        }\n        onMoveChild(item.parentId, item.childId, null, snapped);\n        toast.success('Đã di chuyển thành phần con ra canvas!');\n        setDragPreview(null);\n        setGuidelines([]);\n        return {\n          moved: true,\n          newPosition: snapped\n        };\n      } else if (monitor.getItemType() === ItemTypes.ELEMENT) {\n        if (item.json.type !== 'section' && item.json.type !== 'popup' && item.json.type !== 'modal') {\n          toast.error('Chỉ có thể thả section, popup hoặc modal lên canvas!');\n          setDragPreview(null);\n          setGuidelines([]);\n          return {\n            moved: false\n          };\n        }\n        const lastSectionY = pageData.elements.filter(el => el.type === 'section').reduce((maxY, el) => {\n          var _el$position, _el$position$viewMode, _el$size;\n          return Math.max(maxY, (((_el$position = el.position) === null || _el$position === void 0 ? void 0 : (_el$position$viewMode = _el$position[viewMode]) === null || _el$position$viewMode === void 0 ? void 0 : _el$position$viewMode.y) || 0) + (((_el$size = el.size) === null || _el$size === void 0 ? void 0 : _el$size.height) || 400));\n        }, 0);\n        const newElement = {\n          id: `${item.json.type}-${Date.now()}`,\n          type: item.json.type,\n          componentData: JSON.parse(JSON.stringify(item.json.componentData || {\n            structure: item.json.type === 'section' ? 'ladi-standard' : undefined\n          })),\n          position: {\n            [viewMode]: {\n              x: item.json.type === 'section' ? 0 : snapped.x,\n              y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y\n            },\n            desktop: {\n              x: item.json.type === 'section' ? 0 : snapped.x,\n              y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y\n            },\n            tablet: {\n              x: item.json.type === 'section' ? 0 : snapped.x,\n              y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y\n            },\n            mobile: {\n              x: item.json.type === 'section' ? 0 : snapped.x,\n              y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y\n            }\n          },\n          size: {\n            ...item.json.size,\n            width: viewMode === 'mobile' ? 375 : item.json.type === 'section' ? 1200 : 600\n          },\n          styles: JSON.parse(JSON.stringify(item.json.styles || {})),\n          children: JSON.parse(JSON.stringify(item.json.children || [])),\n          visible: true,\n          locked: false\n        };\n        onAddElement(newElement);\n        if (item.json.type === 'section') {\n          updateCanvasHeight();\n        }\n        toast.success(`Đã thêm ${item.json.type} mới!`);\n        setDragPreview(null);\n        setGuidelines([]);\n        return {\n          moved: true,\n          newPosition: {\n            x: item.json.type === 'section' ? 0 : snapped.x,\n            y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y\n          }\n        };\n      }\n      setDragPreview(null);\n      setGuidelines([]);\n      return {\n        moved: false\n      };\n    },\n    collect: monitor => ({\n      isOver: monitor.isOver(),\n      dragItem: monitor.getItem()\n    })\n  }), [pageData.elements, viewMode, zoomLevel, gridSize, showGrid, canvasBounds, onAddElement, onMoveChild, updateCanvasHeight]);\n  return {\n    isOver,\n    dragItem,\n    drop\n  };\n};\n\n// Custom hook để quản lý guidelines\n_s(useCanvasDrop, \"x11ABS5oa+Txa7zAYeWrrleHuRQ=\", false, function () {\n  return [useDrop];\n});\nconst useGuidelines = (pageData, viewMode, canvasBounds) => {\n  _s2();\n  const [guidelines, setGuidelines] = useState([]);\n  return {\n    guidelines,\n    setGuidelines\n  };\n};\n\n// Custom hook để quản lý popups\n_s2(useGuidelines, \"7KlrYhT6fl/V+KO6x61fAAmTwhw=\");\nconst usePopupManager = (pageData, selectedIds, onSelectElement, handleSelectElement) => {\n  _s3();\n  const [visiblePopups, setVisiblePopups] = useState([]);\n  useEffect(() => {\n    const unsubscribeOpen = eventController.subscribe(\"popup-open\", payload => {\n      const popupElement = pageData.elements.find(el => el.id === payload.popupId);\n      if (!popupElement) {\n        toast.error(`Popup \"${payload.popupId}\" not found!`);\n        return;\n      }\n      setVisiblePopups(prev => [...new Set([...prev, payload.popupId])]);\n      onSelectElement([payload.popupId]);\n    });\n    const unsubscribeClose = eventController.subscribe(\"popup-close\", payload => {\n      setVisiblePopups(prev => prev.filter(popupId => popupId !== payload.popupId));\n      if (selectedIds.includes(payload.popupId)) {\n        handleSelectElement([]);\n      }\n    });\n    return () => {\n      unsubscribeOpen();\n      unsubscribeClose();\n    };\n  }, [pageData.elements, onSelectElement, selectedIds, handleSelectElement]);\n  return {\n    visiblePopups,\n    setVisiblePopups\n  };\n};\n\n// Hàm tính toán snap points\n_s3(usePopupManager, \"E62hIMvDYUBbPwwcJR0OtI7WkZ0=\");\nconst getSnapPoints = (elements, canvasBounds, viewMode) => {\n  const points = [{\n    x: 0,\n    y: 0\n  }, {\n    x: viewMode === 'mobile' ? 375 : 1200,\n    y: canvasBounds.height\n  }, {\n    x: (viewMode === 'mobile' ? 375 : 1200) / 2,\n    y: canvasBounds.height / 2\n  }];\n  elements.forEach(el => {\n    var _el$children;\n    const bounds = getElementBounds(el);\n    points.push({\n      x: bounds.left,\n      y: bounds.top\n    }, {\n      x: bounds.right,\n      y: bounds.bottom\n    }, {\n      x: bounds.centerX,\n      y: bounds.centerY\n    }, {\n      x: bounds.left,\n      y: bounds.centerY\n    }, {\n      x: bounds.right,\n      y: bounds.centerY\n    }, {\n      x: bounds.centerX,\n      y: bounds.top\n    }, {\n      x: bounds.centerX,\n      y: bounds.bottom\n    });\n    (_el$children = el.children) === null || _el$children === void 0 ? void 0 : _el$children.forEach(child => {\n      const childBounds = getElementBounds(child);\n      points.push({\n        x: childBounds.left,\n        y: childBounds.top\n      }, {\n        x: childBounds.right,\n        y: childBounds.bottom\n      }, {\n        x: childBounds.centerX,\n        y: childBounds.centerY\n      }, {\n        x: childBounds.left,\n        y: childBounds.centerY\n      }, {\n        x: childBounds.right,\n        y: childBounds.centerY\n      }, {\n        x: childBounds.centerX,\n        y: childBounds.top\n      }, {\n        x: childBounds.centerX,\n        y: childBounds.bottom\n      });\n    });\n  });\n  return points;\n};\n\n// Hàm tính toán guidelines\nconst calculateGuidelines = (elements, snapped, viewMode, canvasBounds) => {\n  const newGuidelines = [];\n  elements.forEach(el => {\n    var _el$children2;\n    const bounds = getElementBounds(el);\n    if (Math.abs(snapped.x - bounds.left) < 15) newGuidelines.push({\n      vertical: true,\n      position: bounds.left\n    });\n    if (Math.abs(snapped.x - bounds.right) < 15) newGuidelines.push({\n      vertical: true,\n      position: bounds.right\n    });\n    if (Math.abs(snapped.x - bounds.centerX) < 15) newGuidelines.push({\n      vertical: true,\n      position: bounds.centerX\n    });\n    if (Math.abs(snapped.y - bounds.top) < 15) newGuidelines.push({\n      vertical: false,\n      position: bounds.top\n    });\n    if (Math.abs(snapped.y - bounds.bottom) < 15) newGuidelines.push({\n      vertical: false,\n      position: bounds.bottom\n    });\n    if (Math.abs(snapped.y - bounds.centerY) < 15) newGuidelines.push({\n      vertical: false,\n      position: bounds.centerY\n    });\n    (_el$children2 = el.children) === null || _el$children2 === void 0 ? void 0 : _el$children2.forEach(child => {\n      const childBounds = getElementBounds(child);\n      if (Math.abs(snapped.x - childBounds.left) < 15) newGuidelines.push({\n        vertical: true,\n        position: childBounds.left\n      });\n      if (Math.abs(snapped.x - childBounds.right) < 15) newGuidelines.push({\n        vertical: true,\n        position: childBounds.right\n      });\n      if (Math.abs(snapped.x - childBounds.centerX) < 15) newGuidelines.push({\n        vertical: true,\n        position: childBounds.centerX\n      });\n      if (Math.abs(snapped.y - childBounds.top) < 15) newGuidelines.push({\n        vertical: false,\n        position: childBounds.top\n      });\n      if (Math.abs(snapped.y - childBounds.bottom) < 15) newGuidelines.push({\n        vertical: false,\n        position: childBounds.bottom\n      });\n      if (Math.abs(snapped.y - childBounds.centerY) < 15) newGuidelines.push({\n        vertical: false,\n        position: childBounds.centerY\n      });\n    });\n  });\n  if (Math.abs(snapped.x) < 15) newGuidelines.push({\n    vertical: true,\n    position: 0\n  });\n  if (Math.abs(snapped.x - (viewMode === 'mobile' ? 375 : 1200)) < 15) newGuidelines.push({\n    vertical: true,\n    position: viewMode === 'mobile' ? 375 : 1200\n  });\n  if (Math.abs(snapped.x - (viewMode === 'mobile' ? 375 : 1200) / 2) < 15) newGuidelines.push({\n    vertical: true,\n    position: (viewMode === 'mobile' ? 375 : 1200) / 2\n  });\n  if (Math.abs(snapped.y) < 15) newGuidelines.push({\n    vertical: false,\n    position: 0\n  });\n  if (Math.abs(snapped.y - canvasBounds.height) < 15) newGuidelines.push({\n    vertical: false,\n    position: canvasBounds.height\n  });\n  if (Math.abs(snapped.y - canvasBounds.height / 2) < 15) newGuidelines.push({\n    vertical: false,\n    position: canvasBounds.height / 2\n  });\n  return newGuidelines;\n};\nconst Canvas = /*#__PURE__*/_s4(/*#__PURE__*/React.memo(_c = _s4(({\n  pageData,\n  selectedIds,\n  onSelectElement,\n  onUpdatePosition,\n  onUpdateSize,\n  onDeleteElement,\n  onAddElement,\n  onGroupElements,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  showGrid,\n  onEditElement,\n  onDuplicateElement,\n  onMoveElementUp,\n  onMoveElementDown,\n  onSelectChild,\n  selectedChildId,\n  onAddChild,\n  onUpdateChildPosition,\n  onMoveChild,\n  guideLine,\n  onShowAddSectionPopup,\n  onSaveTemplate,\n  onToggleVisibility,\n  onDeleteChild\n}) => {\n  _s4();\n  const canvasRef = useRef(null);\n  const [contextMenu, setContextMenu] = useState(null);\n  const [dragPreview, setDragPreview] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const [guideLinePosition, setGuideLinePosition] = useState((guideLine === null || guideLine === void 0 ? void 0 : guideLine.y) || 0);\n  const {\n    guidelines,\n    setGuidelines\n  } = useGuidelines(pageData, viewMode, canvasBounds);\n  const {\n    visiblePopups,\n    setVisiblePopups\n  } = usePopupManager(pageData, selectedIds, onSelectElement, handleSelectElement);\n  const {\n    isOver,\n    dragItem,\n    drop\n  } = useCanvasDrop({\n    pageData,\n    viewMode,\n    zoomLevel,\n    gridSize,\n    showGrid,\n    canvasBounds,\n    onAddElement,\n    onMoveChild,\n    updateCanvasHeight\n  });\n  const canvasBounds = useMemo(() => ({\n    width: canvasRef.current ? canvasRef.current.offsetWidth / (zoomLevel / 100) : viewMode === 'mobile' ? 375 : 1200,\n    height: canvasRef.current ? canvasRef.current.offsetHeight / (zoomLevel / 100) : 1000\n  }), [zoomLevel, viewMode, canvasRef.current]);\n  const handleSelectElement = useCallback((ids, ctrlKey) => {\n    if (typeof onSelectElement !== 'function') {\n      console.error('onSelectElement is not a function');\n      return;\n    }\n    onSelectElement(ids, ctrlKey);\n    const selectedElements = pageData.elements.filter(el => ids.includes(el.id));\n    const popupIds = selectedElements.filter(el => el.type === 'popup' || el.type === 'modal').map(el => el.id);\n    setVisiblePopups(popupIds);\n  }, [onSelectElement, pageData.elements, setVisiblePopups]);\n  const updateCanvasHeight = useCallback(() => {\n    const lastSection = pageData.elements.filter(el => el.type === 'section').reduce((maxY, el) => {\n      var _el$position2, _el$position2$viewMod, _el$size2;\n      return Math.max(maxY, (((_el$position2 = el.position) === null || _el$position2 === void 0 ? void 0 : (_el$position2$viewMod = _el$position2[viewMode]) === null || _el$position2$viewMod === void 0 ? void 0 : _el$position2$viewMod.y) || 0) + (((_el$size2 = el.size) === null || _el$size2 === void 0 ? void 0 : _el$size2.height) || 400));\n    }, 0);\n    const newHeight = lastSection + 50;\n    setGuideLinePosition(lastSection + 10);\n    return newHeight;\n  }, [pageData.elements, viewMode]);\n  useEffect(() => {\n    updateCanvasHeight();\n  }, [updateCanvasHeight]);\n  const handleContextMenu = useCallback((id, position) => {\n    setContextMenu({\n      id,\n      position\n    });\n  }, []);\n  const handleCanvasClick = useCallback(e => {\n    e.stopPropagation();\n    if (e.target === canvasRef.current) {\n      handleSelectElement([]);\n      onSelectChild(null, null);\n      setContextMenu(null);\n      setDragPreview(null);\n      setVisiblePopups([]);\n    }\n  }, [handleSelectElement, onSelectChild]);\n  const handleKeyDown = useCallback(e => {\n    if (!selectedIds.length) return;\n    e.preventDefault();\n    e.stopPropagation();\n    const step = e.shiftKey ? 10 : 1;\n    selectedIds.forEach(id => {\n      var _element$position$vie5, _element$position$vie6;\n      const element = pageData.elements.find(el => el.id === id);\n      if (element && element.type !== 'section' && element.type !== 'popup' && element.type !== 'modal') {\n        var _element$position$vie, _element$position$vie2, _element$position$vie3, _element$position$vie4;\n        const newY = e.key === 'ArrowUp' ? Math.max(0, (((_element$position$vie = element.position[viewMode]) === null || _element$position$vie === void 0 ? void 0 : _element$position$vie.y) || 0) - step) : (((_element$position$vie2 = element.position[viewMode]) === null || _element$position$vie2 === void 0 ? void 0 : _element$position$vie2.y) || 0) + step;\n        const newX = e.key === 'ArrowLeft' ? Math.max(0, (((_element$position$vie3 = element.position[viewMode]) === null || _element$position$vie3 === void 0 ? void 0 : _element$position$vie3.x) || 0) - step) : (((_element$position$vie4 = element.position[viewMode]) === null || _element$position$vie4 === void 0 ? void 0 : _element$position$vie4.x) || 0) + step;\n        switch (e.key) {\n          case 'ArrowUp':\n          case 'ArrowDown':\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: ((_element$position$vie5 = element.position[viewMode]) === null || _element$position$vie5 === void 0 ? void 0 : _element$position$vie5.x) || 0,\n                y: newY\n              }\n            }, 'absolute');\n            break;\n          case 'ArrowLeft':\n          case 'ArrowRight':\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: newX,\n                y: ((_element$position$vie6 = element.position[viewMode]) === null || _element$position$vie6 === void 0 ? void 0 : _element$position$vie6.y) || 0\n              }\n            }, 'absolute');\n            break;\n          case 'Delete':\n          case 'Backspace':\n            onDeleteElement(id);\n            setVisiblePopups(prev => prev.filter(popupId => popupId !== id));\n            break;\n          case 'Escape':\n            handleSelectElement([]);\n            onSelectChild(null, null);\n            setContextMenu(null);\n            setDragPreview(null);\n            setVisiblePopups([]);\n            break;\n          default:\n            break;\n        }\n      }\n    });\n  }, [selectedIds, onUpdatePosition, onDeleteElement, handleSelectElement, onSelectChild, viewMode, pageData.elements]);\n  useHotkeys('ctrl+a', e => {\n    e.preventDefault();\n    handleSelectElement(pageData.elements.map(el => el.id));\n  }, [pageData.elements, handleSelectElement]);\n  useHotkeys('ctrl+g', e => {\n    e.preventDefault();\n    if (selectedIds.length > 1) {\n      onGroupElements(selectedIds);\n    }\n  }, [selectedIds, onGroupElements]);\n  useEffect(() => {\n    const handleClickOutside = () => {\n      setContextMenu(null);\n      setDragPreview(null);\n      setVisiblePopups([]);\n    };\n    if (contextMenu || visiblePopups.length > 0) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [contextMenu, visiblePopups]);\n  const handleClosePopup = useCallback(id => {\n    setVisiblePopups(prev => prev.filter(popupId => popupId !== id));\n    handleSelectElement([]);\n  }, [handleSelectElement]);\n  const renderDragPreview = () => {\n    if (!dragPreview) return null;\n    const {\n      x,\n      y,\n      size,\n      type,\n      componentData,\n      styles,\n      children\n    } = dragPreview;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute border-2 border-dashed border-blue-500 bg-blue-100/50 pointer-events-none z-[1000] opacity-50\",\n      style: {\n        transform: `translate(${x}px, ${y}px)`,\n        width: size.width,\n        height: size.height,\n        ...styles\n      },\n      children: renderComponentContent(type, componentData || {}, styles || {}, children || [])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 13\n    }, this);\n  };\n  const renderAddSectionButton = () => {\n    if (pageData.elements.length > 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[1000]\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: e => {\n          e.stopPropagation();\n          setShowPopup(true);\n          if (typeof onShowAddSectionPopup === 'function') {\n            onShowAddSectionPopup();\n          }\n        },\n        className: \"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold cursor-pointer hover:bg-blue-700\",\n        children: \"Th\\xEAm Section\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 13\n    }, this);\n  };\n  const renderContextMenu = () => {\n    if (!contextMenu) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bg-white border border-gray-300 rounded shadow-lg min-w-[120px] z-[10000]\",\n      style: {\n        left: contextMenu.position.x,\n        top: contextMenu.position.y\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-3 py-2 cursor-pointer hover:bg-gray-100\",\n        onClick: () => {\n          onDeleteElement(contextMenu.id);\n          setContextMenu(null);\n          setVisiblePopups(prev => prev.filter(id => id !== contextMenu.id));\n        },\n        children: \"X\\xF3a\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-3 py-2 cursor-pointer hover:bg-gray-100\",\n        onClick: () => {\n          onGroupElements([contextMenu.id]);\n          setContextMenu(null);\n        },\n        children: \"Nh\\xF3m\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-3 py-2 cursor-pointer hover:bg-gray-100\",\n        onClick: () => {\n          onToggleVisibility(contextMenu.id);\n          setContextMenu(null);\n        },\n        children: \"\\u1EA8n/Hi\\u1EC7n\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 13\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full h-screen overflow-y-auto focus:outline-none\",\n    onKeyDown: handleKeyDown,\n    tabIndex: 0,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        canvasRef.current = node;\n        drop(node);\n      },\n      className: `relative mx-auto ${viewMode === 'mobile' ? 'w-[375px]' : viewMode === 'tablet' ? 'w-[768px]' : 'w-[1200px]'}`,\n      onClick: handleCanvasClick,\n      style: {\n        height: pageData.canvas.height ? `${pageData.canvas.height}px` : 'auto',\n        background: pageData.canvas.background,\n        transform: `scale(${zoomLevel / 100})`,\n        transformOrigin: 'top center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Guidelines, {\n        guidelines: guidelines,\n        zoomLevel: zoomLevel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 17\n      }, this), pageData.elements.map(element => /*#__PURE__*/_jsxDEV(Element, {\n        element: element,\n        isSelected: selectedIds.includes(element.id),\n        onSelectElement: handleSelectElement,\n        onUpdatePosition: onUpdatePosition,\n        viewMode: viewMode,\n        zoomLevel: zoomLevel,\n        gridSize: gridSize,\n        onContextMenu: handleContextMenu,\n        canvasBounds: canvasBounds,\n        canvasRef: canvasRef,\n        onSelectChild: onSelectChild,\n        selectedChildId: selectedChildId,\n        onAddChild: onAddChild,\n        onUpdateChildPosition: onUpdateChildPosition,\n        onMoveChild: onMoveChild,\n        showGrid: showGrid,\n        setDragPreview: setDragPreview,\n        visiblePopups: visiblePopups,\n        onClosePopup: handleClosePopup,\n        onSaveTemplate: onSaveTemplate,\n        onToggleVisibility: onToggleVisibility,\n        onEditElement: onEditElement,\n        onDuplicateElement: onDuplicateElement,\n        onMoveElementUp: onMoveElementUp,\n        onMoveElementDown: onMoveElementDown,\n        onDeleteElement: onDeleteElement,\n        onDeleteChild: onDeleteChild\n      }, element.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 21\n      }, this)), renderDragPreview(), (guideLine === null || guideLine === void 0 ? void 0 : guideLine.show) && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute left-1/2 transform -translate-x-1/2 w-full h-px bg-blue-500 opacity-50 z-[1001]\",\n          style: {\n            top: guideLinePosition\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 25\n        }, this), pageData.elements.length > 0 && /*#__PURE__*/_jsxDEV(AddSectionButton, {\n          guideLinePosition: guideLinePosition,\n          setShowPopup: setShowPopup,\n          onShowAddSectionPopup: onShowAddSectionPopup\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-0 w-px h-full bg-blue-500 opacity-50 z-[1001]\",\n          style: {\n            left: viewMode === 'mobile' ? 'calc(50% - 187.5px)' : 'calc(50% - 600px)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-0 w-px h-full bg-blue-500 opacity-50 z-[1001]\",\n          style: {\n            left: viewMode === 'mobile' ? 'calc(50% + 187.5px)' : 'calc(50% + 600px)'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(SelectionOverlay, {\n        selectedElements: pageData.elements.filter(el => selectedIds.includes(el.id)),\n        onResize: onUpdateSize,\n        zoomLevel: zoomLevel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 17\n      }, this), renderContextMenu(), renderAddSectionButton()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 441,\n    columnNumber: 9\n  }, this);\n}, \"5bRG4vceoEGWgK/ETXqytX+cdOY=\", false, function () {\n  return [useGuidelines, usePopupManager, useCanvasDrop, useHotkeys, useHotkeys];\n})), \"5bRG4vceoEGWgK/ETXqytX+cdOY=\", false, function () {\n  return [useGuidelines, usePopupManager, useCanvasDrop, useHotkeys, useHotkeys];\n});\n_c2 = Canvas;\nCanvas.propTypes = {\n  pageData: PropTypes.shape({\n    canvas: PropTypes.shape({\n      width: PropTypes.number,\n      height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n      background: PropTypes.string\n    }).isRequired,\n    elements: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      type: PropTypes.string.isRequired,\n      position: PropTypes.object,\n      size: PropTypes.shape({\n        width: PropTypes.number,\n        height: PropTypes.number\n      }),\n      styles: PropTypes.object,\n      children: PropTypes.array,\n      visible: PropTypes.bool,\n      locked: PropTypes.bool\n    })).isRequired,\n    meta: PropTypes.shape({\n      created_at: PropTypes.string,\n      updated_at: PropTypes.string\n    })\n  }).isRequired,\n  selectedIds: PropTypes.arrayOf(PropTypes.string).isRequired,\n  onSelectElement: PropTypes.func.isRequired,\n  onUpdatePosition: PropTypes.func.isRequired,\n  onUpdateSize: PropTypes.func.isRequired,\n  onDeleteElement: PropTypes.func.isRequired,\n  onAddElement: PropTypes.func.isRequired,\n  onGroupElements: PropTypes.func.isRequired,\n  viewMode: PropTypes.oneOf(['desktop', 'tablet', 'mobile']).isRequired,\n  zoomLevel: PropTypes.number.isRequired,\n  gridSize: PropTypes.number.isRequired,\n  showGrid: PropTypes.bool.isRequired,\n  onEditElement: PropTypes.func.isRequired,\n  onDuplicateElement: PropTypes.func.isRequired,\n  onMoveElementUp: PropTypes.func.isRequired,\n  onMoveElementDown: PropTypes.func.isRequired,\n  onSelectChild: PropTypes.func.isRequired,\n  selectedChildId: PropTypes.string,\n  onAddChild: PropTypes.func.isRequired,\n  onUpdateChildPosition: PropTypes.func.isRequired,\n  onMoveChild: PropTypes.func.isRequired,\n  guideLine: PropTypes.shape({\n    show: PropTypes.bool,\n    y: PropTypes.number\n  }),\n  onShowAddSectionPopup: PropTypes.func.isRequired,\n  onSaveTemplate: PropTypes.func.isRequired,\n  onToggleVisibility: PropTypes.func.isRequired,\n  onDeleteChild: PropTypes.func.isRequired\n};\nexport default Canvas;\nvar _c, _c2;\n$RefreshReg$(_c, \"Canvas$React.memo\");\n$RefreshReg$(_c2, \"Canvas\");","map":{"version":3,"names":["React","useRef","useCallback","useState","useEffect","useMemo","useDrop","useHotkeys","toast","PropTypes","Guidelines","SelectionOverlay","Element","ItemTypes","getCanvasPosition","snapToGrid","getElementBounds","renderComponentContent","AddSectionButton","eventController","jsxDEV","_jsxDEV","Fragment","_Fragment","useCanvasDrop","pageData","viewMode","zoomLevel","gridSize","showGrid","canvasBounds","onAddElement","onMoveChild","updateCanvasHeight","_s","isOver","dragItem","drop","accept","ELEMENT","CHILD_ELEMENT","hover","item","monitor","setDragPreview","setGuidelines","clientOffset","getClientOffset","pos","x","y","getSourceClientOffset","snapPoints","getSnapPoints","elements","snapped","Infinity","getItemType","json","id","size","width","height","type","componentData","structure","styles","children","sourceElement","find","el","parentId","child","c","childId","newGuidelines","calculateGuidelines","error","moved","sourceSection","success","newPosition","lastSectionY","filter","reduce","maxY","_el$position","_el$position$viewMode","_el$size","Math","max","position","newElement","Date","now","JSON","parse","stringify","undefined","desktop","tablet","mobile","visible","locked","collect","getItem","useGuidelines","_s2","guidelines","usePopupManager","selectedIds","onSelectElement","handleSelectElement","_s3","visiblePopups","setVisiblePopups","unsubscribeOpen","subscribe","payload","popupElement","popupId","prev","Set","unsubscribeClose","includes","points","forEach","_el$children","bounds","push","left","top","right","bottom","centerX","centerY","childBounds","_el$children2","abs","vertical","Canvas","_s4","memo","_c","onUpdatePosition","onUpdateSize","onDeleteElement","onGroupElements","onEditElement","onDuplicateElement","onMoveElementUp","onMoveElementDown","onSelectChild","selectedChildId","onAddChild","onUpdateChildPosition","guideLine","onShowAddSectionPopup","onSaveTemplate","onToggleVisibility","onDeleteChild","canvasRef","contextMenu","setContextMenu","dragPreview","showPopup","setShowPopup","guideLinePosition","setGuideLinePosition","current","offsetWidth","offsetHeight","ids","ctrlKey","console","selectedElements","popupIds","map","lastSection","_el$position2","_el$position2$viewMod","_el$size2","newHeight","handleContextMenu","handleCanvasClick","e","stopPropagation","target","handleKeyDown","length","preventDefault","step","shiftKey","_element$position$vie5","_element$position$vie6","element","_element$position$vie","_element$position$vie2","_element$position$vie3","_element$position$vie4","newY","key","newX","handleClickOutside","document","addEventListener","removeEventListener","handleClosePopup","renderDragPreview","className","style","transform","fileName","_jsxFileName","lineNumber","columnNumber","renderAddSectionButton","onClick","renderContextMenu","onKeyDown","tabIndex","ref","node","canvas","background","transformOrigin","isSelected","onContextMenu","onClosePopup","show","onResize","_c2","propTypes","shape","number","oneOfType","string","isRequired","arrayOf","object","array","bool","meta","created_at","updated_at","func","oneOf","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef, useCallback, useState, useEffect, useMemo } from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\nimport Guidelines from './Guidelines';\r\nimport SelectionOverlay from './SelectionOverlay';\r\nimport { Element } from './Element';\r\nimport { ItemTypes, getCanvasPosition, snapToGrid, getElementBounds, renderComponentContent } from './helpers';\r\nimport AddSectionButton from './AddSectionButton';\r\nimport eventController from '../../utils/EventController';\r\n\r\n// Custom hook để quản lý drag-and-drop\r\nconst useCanvasDrop = ({ pageData, viewMode, zoomLevel, gridSize, showGrid, canvasBounds, onAddElement, onMoveChild, updateCanvasHeight }) => {\r\n    const [{ isOver, dragItem }, drop] = useDrop(() => ({\r\n        accept: [ItemTypes.ELEMENT, ItemTypes.CHILD_ELEMENT],\r\n        hover: (item, monitor, setDragPreview, setGuidelines) => {\r\n            const clientOffset = monitor.getClientOffset();\r\n            if (!clientOffset) {\r\n                setDragPreview(null);\r\n                return;\r\n            }\r\n            const pos = getCanvasPosition(clientOffset.x, clientOffset.y, monitor.getSourceClientOffset(), zoomLevel);\r\n            const snapPoints = getSnapPoints(pageData.elements, canvasBounds, viewMode);\r\n            const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n            if (monitor.getItemType() === ItemTypes.ELEMENT && item.json) {\r\n                setDragPreview({\r\n                    id: 'preview',\r\n                    x: snapped.x,\r\n                    y: snapped.y,\r\n                    size: item.json.size || { width: viewMode === 'mobile' ? 375 : 1200, height: 400 },\r\n                    type: item.json.type,\r\n                    componentData: item.json.componentData || { structure: 'ladi-standard' },\r\n                    styles: item.json.styles || {},\r\n                    children: item.json.children || [],\r\n                });\r\n            } else if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                const sourceElement = pageData.elements.find((el) => el.id === item.parentId);\r\n                const child = sourceElement?.children.find((c) => c.id === item.childId);\r\n                if (child) {\r\n                    setDragPreview({\r\n                        id: item.childId,\r\n                        x: snapped.x,\r\n                        y: snapped.y,\r\n                        size: item.size || { width: 200, height: 50 },\r\n                        type: child.type,\r\n                        componentData: child.componentData || {},\r\n                        styles: child.styles || {},\r\n                        children: [],\r\n                    });\r\n                }\r\n            }\r\n\r\n            const newGuidelines = calculateGuidelines(pageData.elements, snapped, viewMode, canvasBounds);\r\n            setGuidelines(newGuidelines);\r\n        },\r\n        drop: (item, monitor, setDragPreview, setGuidelines) => {\r\n            const clientOffset = monitor.getClientOffset();\r\n            if (!clientOffset) {\r\n                toast.error('Không thể xác định vị trí thả!');\r\n                setDragPreview(null);\r\n                setGuidelines([]);\r\n                return { moved: false };\r\n            }\r\n            const pos = getCanvasPosition(clientOffset.x, clientOffset.y, monitor.getSourceClientOffset(), zoomLevel);\r\n            const snapPoints = getSnapPoints(pageData.elements, canvasBounds, viewMode);\r\n            const snapped = snapToGrid(pos.x, pos.y, showGrid ? gridSize : Infinity, snapPoints);\r\n\r\n            if (monitor.getItemType() === ItemTypes.CHILD_ELEMENT) {\r\n                const sourceSection = pageData.elements.find((el) => el.id === item.parentId);\r\n                if (!sourceSection) {\r\n                    toast.error('Không tìm thấy section nguồn!');\r\n                    setDragPreview(null);\r\n                    setGuidelines([]);\r\n                    return { moved: false };\r\n                }\r\n                onMoveChild(item.parentId, item.childId, null, snapped);\r\n                toast.success('Đã di chuyển thành phần con ra canvas!');\r\n                setDragPreview(null);\r\n                setGuidelines([]);\r\n                return { moved: true, newPosition: snapped };\r\n            } else if (monitor.getItemType() === ItemTypes.ELEMENT) {\r\n                if (item.json.type !== 'section' && item.json.type !== 'popup' && item.json.type !== 'modal') {\r\n                    toast.error('Chỉ có thể thả section, popup hoặc modal lên canvas!');\r\n                    setDragPreview(null);\r\n                    setGuidelines([]);\r\n                    return { moved: false };\r\n                }\r\n                const lastSectionY = pageData.elements\r\n                    .filter((el) => el.type === 'section')\r\n                    .reduce((maxY, el) => Math.max(maxY, (el.position?.[viewMode]?.y || 0) + (el.size?.height || 400)), 0);\r\n                const newElement = {\r\n                    id: `${item.json.type}-${Date.now()}`,\r\n                    type: item.json.type,\r\n                    componentData: JSON.parse(JSON.stringify(item.json.componentData || { structure: item.json.type === 'section' ? 'ladi-standard' : undefined })),\r\n                    position: {\r\n                        [viewMode]: { x: item.json.type === 'section' ? 0 : snapped.x, y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y },\r\n                        desktop: { x: item.json.type === 'section' ? 0 : snapped.x, y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y },\r\n                        tablet: { x: item.json.type === 'section' ? 0 : snapped.x, y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y },\r\n                        mobile: { x: item.json.type === 'section' ? 0 : snapped.x, y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y },\r\n                    },\r\n                    size: { ...item.json.size, width: viewMode === 'mobile' ? 375 : item.json.type === 'section' ? 1200 : 600 },\r\n                    styles: JSON.parse(JSON.stringify(item.json.styles || {})),\r\n                    children: JSON.parse(JSON.stringify(item.json.children || [])),\r\n                    visible: true,\r\n                    locked: false,\r\n                };\r\n                onAddElement(newElement);\r\n                if (item.json.type === 'section') {\r\n                    updateCanvasHeight();\r\n                }\r\n                toast.success(`Đã thêm ${item.json.type} mới!`);\r\n                setDragPreview(null);\r\n                setGuidelines([]);\r\n                return { moved: true, newPosition: { x: item.json.type === 'section' ? 0 : snapped.x, y: item.json.type === 'section' ? lastSectionY + 10 : snapped.y } };\r\n            }\r\n            setDragPreview(null);\r\n            setGuidelines([]);\r\n            return { moved: false };\r\n        },\r\n        collect: (monitor) => ({ isOver: monitor.isOver(), dragItem: monitor.getItem() }),\r\n    }), [pageData.elements, viewMode, zoomLevel, gridSize, showGrid, canvasBounds, onAddElement, onMoveChild, updateCanvasHeight]);\r\n\r\n    return { isOver, dragItem, drop };\r\n};\r\n\r\n// Custom hook để quản lý guidelines\r\nconst useGuidelines = (pageData, viewMode, canvasBounds) => {\r\n    const [guidelines, setGuidelines] = useState([]);\r\n    return { guidelines, setGuidelines };\r\n};\r\n\r\n// Custom hook để quản lý popups\r\nconst usePopupManager = (pageData, selectedIds, onSelectElement, handleSelectElement) => {\r\n    const [visiblePopups, setVisiblePopups] = useState([]);\r\n\r\n    useEffect(() => {\r\n        const unsubscribeOpen = eventController.subscribe(\"popup-open\", (payload) => {\r\n            const popupElement = pageData.elements.find((el) => el.id === payload.popupId);\r\n            if (!popupElement) {\r\n                toast.error(`Popup \"${payload.popupId}\" not found!`);\r\n                return;\r\n            }\r\n            setVisiblePopups((prev) => [...new Set([...prev, payload.popupId])]);\r\n            onSelectElement([payload.popupId]);\r\n        });\r\n\r\n        const unsubscribeClose = eventController.subscribe(\"popup-close\", (payload) => {\r\n            setVisiblePopups((prev) => prev.filter((popupId) => popupId !== payload.popupId));\r\n            if (selectedIds.includes(payload.popupId)) {\r\n                handleSelectElement([]);\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            unsubscribeOpen();\r\n            unsubscribeClose();\r\n        };\r\n    }, [pageData.elements, onSelectElement, selectedIds, handleSelectElement]);\r\n\r\n    return { visiblePopups, setVisiblePopups };\r\n};\r\n\r\n// Hàm tính toán snap points\r\nconst getSnapPoints = (elements, canvasBounds, viewMode) => {\r\n    const points = [\r\n        { x: 0, y: 0 },\r\n        { x: viewMode === 'mobile' ? 375 : 1200, y: canvasBounds.height },\r\n        { x: (viewMode === 'mobile' ? 375 : 1200) / 2, y: canvasBounds.height / 2 },\r\n    ];\r\n    elements.forEach((el) => {\r\n        const bounds = getElementBounds(el);\r\n        points.push(\r\n            { x: bounds.left, y: bounds.top },\r\n            { x: bounds.right, y: bounds.bottom },\r\n            { x: bounds.centerX, y: bounds.centerY },\r\n            { x: bounds.left, y: bounds.centerY },\r\n            { x: bounds.right, y: bounds.centerY },\r\n            { x: bounds.centerX, y: bounds.top },\r\n            { x: bounds.centerX, y: bounds.bottom }\r\n        );\r\n        el.children?.forEach((child) => {\r\n            const childBounds = getElementBounds(child);\r\n            points.push(\r\n                { x: childBounds.left, y: childBounds.top },\r\n                { x: childBounds.right, y: childBounds.bottom },\r\n                { x: childBounds.centerX, y: childBounds.centerY },\r\n                { x: childBounds.left, y: childBounds.centerY },\r\n                { x: childBounds.right, y: childBounds.centerY },\r\n                { x: childBounds.centerX, y: childBounds.top },\r\n                { x: childBounds.centerX, y: childBounds.bottom }\r\n            );\r\n        });\r\n    });\r\n    return points;\r\n};\r\n\r\n// Hàm tính toán guidelines\r\nconst calculateGuidelines = (elements, snapped, viewMode, canvasBounds) => {\r\n    const newGuidelines = [];\r\n    elements.forEach((el) => {\r\n        const bounds = getElementBounds(el);\r\n        if (Math.abs(snapped.x - bounds.left) < 15) newGuidelines.push({ vertical: true, position: bounds.left });\r\n        if (Math.abs(snapped.x - bounds.right) < 15) newGuidelines.push({ vertical: true, position: bounds.right });\r\n        if (Math.abs(snapped.x - bounds.centerX) < 15) newGuidelines.push({ vertical: true, position: bounds.centerX });\r\n        if (Math.abs(snapped.y - bounds.top) < 15) newGuidelines.push({ vertical: false, position: bounds.top });\r\n        if (Math.abs(snapped.y - bounds.bottom) < 15) newGuidelines.push({ vertical: false, position: bounds.bottom });\r\n        if (Math.abs(snapped.y - bounds.centerY) < 15) newGuidelines.push({ vertical: false, position: bounds.centerY });\r\n        el.children?.forEach((child) => {\r\n            const childBounds = getElementBounds(child);\r\n            if (Math.abs(snapped.x - childBounds.left) < 15) newGuidelines.push({ vertical: true, position: childBounds.left });\r\n            if (Math.abs(snapped.x - childBounds.right) < 15) newGuidelines.push({ vertical: true, position: childBounds.right });\r\n            if (Math.abs(snapped.x - childBounds.centerX) < 15) newGuidelines.push({ vertical: true, position: childBounds.centerX });\r\n            if (Math.abs(snapped.y - childBounds.top) < 15) newGuidelines.push({ vertical: false, position: childBounds.top });\r\n            if (Math.abs(snapped.y - childBounds.bottom) < 15) newGuidelines.push({ vertical: false, position: childBounds.bottom });\r\n            if (Math.abs(snapped.y - childBounds.centerY) < 15) newGuidelines.push({ vertical: false, position: childBounds.centerY });\r\n        });\r\n    });\r\n    if (Math.abs(snapped.x) < 15) newGuidelines.push({ vertical: true, position: 0 });\r\n    if (Math.abs(snapped.x - (viewMode === 'mobile' ? 375 : 1200)) < 15)\r\n        newGuidelines.push({ vertical: true, position: viewMode === 'mobile' ? 375 : 1200 });\r\n    if (Math.abs(snapped.x - (viewMode === 'mobile' ? 375 : 1200) / 2) < 15)\r\n        newGuidelines.push({ vertical: true, position: (viewMode === 'mobile' ? 375 : 1200) / 2 });\r\n    if (Math.abs(snapped.y) < 15) newGuidelines.push({ vertical: false, position: 0 });\r\n    if (Math.abs(snapped.y - canvasBounds.height) < 15) newGuidelines.push({ vertical: false, position: canvasBounds.height });\r\n    if (Math.abs(snapped.y - canvasBounds.height / 2) < 15)\r\n        newGuidelines.push({ vertical: false, position: canvasBounds.height / 2 });\r\n    return newGuidelines;\r\n};\r\n\r\nconst Canvas = React.memo(({\r\n                               pageData,\r\n                               selectedIds,\r\n                               onSelectElement,\r\n                               onUpdatePosition,\r\n                               onUpdateSize,\r\n                               onDeleteElement,\r\n                               onAddElement,\r\n                               onGroupElements,\r\n                               viewMode,\r\n                               zoomLevel,\r\n                               gridSize,\r\n                               showGrid,\r\n                               onEditElement,\r\n                               onDuplicateElement,\r\n                               onMoveElementUp,\r\n                               onMoveElementDown,\r\n                               onSelectChild,\r\n                               selectedChildId,\r\n                               onAddChild,\r\n                               onUpdateChildPosition,\r\n                               onMoveChild,\r\n                               guideLine,\r\n                               onShowAddSectionPopup,\r\n                               onSaveTemplate,\r\n                               onToggleVisibility,\r\n                               onDeleteChild,\r\n                           }) => {\r\n    const canvasRef = useRef(null);\r\n    const [contextMenu, setContextMenu] = useState(null);\r\n    const [dragPreview, setDragPreview] = useState(null);\r\n    const [showPopup, setShowPopup] = useState(false);\r\n    const [guideLinePosition, setGuideLinePosition] = useState(guideLine?.y || 0);\r\n\r\n    const { guidelines, setGuidelines } = useGuidelines(pageData, viewMode, canvasBounds);\r\n    const { visiblePopups, setVisiblePopups } = usePopupManager(pageData, selectedIds, onSelectElement, handleSelectElement);\r\n    const { isOver, dragItem, drop } = useCanvasDrop({\r\n        pageData,\r\n        viewMode,\r\n        zoomLevel,\r\n        gridSize,\r\n        showGrid,\r\n        canvasBounds,\r\n        onAddElement,\r\n        onMoveChild,\r\n        updateCanvasHeight,\r\n    });\r\n\r\n    const canvasBounds = useMemo(() => ({\r\n        width: canvasRef.current ? canvasRef.current.offsetWidth / (zoomLevel / 100) : (viewMode === 'mobile' ? 375 : 1200),\r\n        height: canvasRef.current ? canvasRef.current.offsetHeight / (zoomLevel / 100) : 1000,\r\n    }), [zoomLevel, viewMode, canvasRef.current]);\r\n\r\n    const handleSelectElement = useCallback((ids, ctrlKey) => {\r\n        if (typeof onSelectElement !== 'function') {\r\n            console.error('onSelectElement is not a function');\r\n            return;\r\n        }\r\n        onSelectElement(ids, ctrlKey);\r\n        const selectedElements = pageData.elements.filter((el) => ids.includes(el.id));\r\n        const popupIds = selectedElements\r\n            .filter((el) => el.type === 'popup' || el.type === 'modal')\r\n            .map((el) => el.id);\r\n        setVisiblePopups(popupIds);\r\n    }, [onSelectElement, pageData.elements, setVisiblePopups]);\r\n\r\n    const updateCanvasHeight = useCallback(() => {\r\n        const lastSection = pageData.elements\r\n            .filter((el) => el.type === 'section')\r\n            .reduce((maxY, el) => Math.max(maxY, (el.position?.[viewMode]?.y || 0) + (el.size?.height || 400)), 0);\r\n        const newHeight = lastSection + 50;\r\n        setGuideLinePosition(lastSection + 10);\r\n        return newHeight;\r\n    }, [pageData.elements, viewMode]);\r\n\r\n    useEffect(() => {\r\n        updateCanvasHeight();\r\n    }, [updateCanvasHeight]);\r\n\r\n    const handleContextMenu = useCallback((id, position) => {\r\n        setContextMenu({ id, position });\r\n    }, []);\r\n\r\n    const handleCanvasClick = useCallback((e) => {\r\n        e.stopPropagation();\r\n        if (e.target === canvasRef.current) {\r\n            handleSelectElement([]);\r\n            onSelectChild(null, null);\r\n            setContextMenu(null);\r\n            setDragPreview(null);\r\n            setVisiblePopups([]);\r\n        }\r\n    }, [handleSelectElement, onSelectChild]);\r\n\r\n    const handleKeyDown = useCallback((e) => {\r\n        if (!selectedIds.length) return;\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        const step = e.shiftKey ? 10 : 1;\r\n        selectedIds.forEach((id) => {\r\n            const element = pageData.elements.find((el) => el.id === id);\r\n            if (element && element.type !== 'section' && element.type !== 'popup' && element.type !== 'modal') {\r\n                const newY = e.key === 'ArrowUp' ? Math.max(0, (element.position[viewMode]?.y || 0) - step) : (element.position[viewMode]?.y || 0) + step;\r\n                const newX = e.key === 'ArrowLeft' ? Math.max(0, (element.position[viewMode]?.x || 0) - step) : (element.position[viewMode]?.x || 0) + step;\r\n                switch (e.key) {\r\n                    case 'ArrowUp':\r\n                    case 'ArrowDown':\r\n                        onUpdatePosition(id, { [viewMode]: { x: element.position[viewMode]?.x || 0, y: newY } }, 'absolute');\r\n                        break;\r\n                    case 'ArrowLeft':\r\n                    case 'ArrowRight':\r\n                        onUpdatePosition(id, { [viewMode]: { x: newX, y: element.position[viewMode]?.y || 0 } }, 'absolute');\r\n                        break;\r\n                    case 'Delete':\r\n                    case 'Backspace':\r\n                        onDeleteElement(id);\r\n                        setVisiblePopups((prev) => prev.filter((popupId) => popupId !== id));\r\n                        break;\r\n                    case 'Escape':\r\n                        handleSelectElement([]);\r\n                        onSelectChild(null, null);\r\n                        setContextMenu(null);\r\n                        setDragPreview(null);\r\n                        setVisiblePopups([]);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n    }, [selectedIds, onUpdatePosition, onDeleteElement, handleSelectElement, onSelectChild, viewMode, pageData.elements]);\r\n\r\n    useHotkeys('ctrl+a', (e) => {\r\n        e.preventDefault();\r\n        handleSelectElement(pageData.elements.map((el) => el.id));\r\n    }, [pageData.elements, handleSelectElement]);\r\n\r\n    useHotkeys('ctrl+g', (e) => {\r\n        e.preventDefault();\r\n        if (selectedIds.length > 1) {\r\n            onGroupElements(selectedIds);\r\n        }\r\n    }, [selectedIds, onGroupElements]);\r\n\r\n    useEffect(() => {\r\n        const handleClickOutside = () => {\r\n            setContextMenu(null);\r\n            setDragPreview(null);\r\n            setVisiblePopups([]);\r\n        };\r\n        if (contextMenu || visiblePopups.length > 0) {\r\n            document.addEventListener('click', handleClickOutside);\r\n            return () => document.removeEventListener('click', handleClickOutside);\r\n        }\r\n    }, [contextMenu, visiblePopups]);\r\n\r\n    const handleClosePopup = useCallback((id) => {\r\n        setVisiblePopups((prev) => prev.filter((popupId) => popupId !== id));\r\n        handleSelectElement([]);\r\n    }, [handleSelectElement]);\r\n\r\n    const renderDragPreview = () => {\r\n        if (!dragPreview) return null;\r\n        const { x, y, size, type, componentData, styles, children } = dragPreview;\r\n        return (\r\n            <div className=\"absolute border-2 border-dashed border-blue-500 bg-blue-100/50 pointer-events-none z-[1000] opacity-50\" style={{ transform: `translate(${x}px, ${y}px)`, width: size.width, height: size.height, ...styles }}>\r\n                {renderComponentContent(type, componentData || {}, styles || {}, children || [])}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const renderAddSectionButton = () => {\r\n        if (pageData.elements.length > 0) return null;\r\n        return (\r\n            <div className=\"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[1000]\">\r\n                <button\r\n                    onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setShowPopup(true);\r\n                        if (typeof onShowAddSectionPopup === 'function') {\r\n                            onShowAddSectionPopup();\r\n                        }\r\n                    }}\r\n                    className=\"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold cursor-pointer hover:bg-blue-700\"\r\n                >\r\n                    Thêm Section\r\n                </button>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const renderContextMenu = () => {\r\n        if (!contextMenu) return null;\r\n        return (\r\n            <div className=\"fixed bg-white border border-gray-300 rounded shadow-lg min-w-[120px] z-[10000]\" style={{ left: contextMenu.position.x, top: contextMenu.position.y }}>\r\n                <div className=\"px-3 py-2 cursor-pointer hover:bg-gray-100\" onClick={() => { onDeleteElement(contextMenu.id); setContextMenu(null); setVisiblePopups((prev) => prev.filter((id) => id !== contextMenu.id)); }}>\r\n                    Xóa\r\n                </div>\r\n                <div className=\"px-3 py-2 cursor-pointer hover:bg-gray-100\" onClick={() => { onGroupElements([contextMenu.id]); setContextMenu(null); }}>\r\n                    Nhóm\r\n                </div>\r\n                <div className=\"px-3 py-2 cursor-pointer hover:bg-gray-100\" onClick={() => { onToggleVisibility(contextMenu.id); setContextMenu(null); }}>\r\n                    Ẩn/Hiện\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative w-full h-screen overflow-y-auto focus:outline-none\" onKeyDown={handleKeyDown} tabIndex={0}>\r\n            <div\r\n                ref={(node) => {\r\n                    canvasRef.current = node;\r\n                    drop(node);\r\n                }}\r\n                className={`relative mx-auto ${viewMode === 'mobile' ? 'w-[375px]' : viewMode === 'tablet' ? 'w-[768px]' : 'w-[1200px]'}`}\r\n                onClick={handleCanvasClick}\r\n                style={{\r\n                    height: pageData.canvas.height ? `${pageData.canvas.height}px` : 'auto',\r\n                    background: pageData.canvas.background,\r\n                    transform: `scale(${zoomLevel / 100})`,\r\n                    transformOrigin: 'top center',\r\n                }}\r\n            >\r\n                <Guidelines guidelines={guidelines} zoomLevel={zoomLevel} />\r\n                {pageData.elements.map((element) => (\r\n                    <Element\r\n                        key={element.id}\r\n                        element={element}\r\n                        isSelected={selectedIds.includes(element.id)}\r\n                        onSelectElement={handleSelectElement}\r\n                        onUpdatePosition={onUpdatePosition}\r\n                        viewMode={viewMode}\r\n                        zoomLevel={zoomLevel}\r\n                        gridSize={gridSize}\r\n                        onContextMenu={handleContextMenu}\r\n                        canvasBounds={canvasBounds}\r\n                        canvasRef={canvasRef}\r\n                        onSelectChild={onSelectChild}\r\n                        selectedChildId={selectedChildId}\r\n                        onAddChild={onAddChild}\r\n                        onUpdateChildPosition={onUpdateChildPosition}\r\n                        onMoveChild={onMoveChild}\r\n                        showGrid={showGrid}\r\n                        setDragPreview={setDragPreview}\r\n                        visiblePopups={visiblePopups}\r\n                        onClosePopup={handleClosePopup}\r\n                        onSaveTemplate={onSaveTemplate}\r\n                        onToggleVisibility={onToggleVisibility}\r\n                        onEditElement={onEditElement}\r\n                        onDuplicateElement={onDuplicateElement}\r\n                        onMoveElementUp={onMoveElementUp}\r\n                        onMoveElementDown={onMoveElementDown}\r\n                        onDeleteElement={onDeleteElement}\r\n                        onDeleteChild={onDeleteChild}\r\n                    />\r\n                ))}\r\n                {renderDragPreview()}\r\n                {guideLine?.show && (\r\n                    <>\r\n                        <div className=\"absolute left-1/2 transform -translate-x-1/2 w-full h-px bg-blue-500 opacity-50 z-[1001]\" style={{ top: guideLinePosition }} />\r\n                        {pageData.elements.length > 0 && (\r\n                            <AddSectionButton guideLinePosition={guideLinePosition} setShowPopup={setShowPopup} onShowAddSectionPopup={onShowAddSectionPopup} />\r\n                        )}\r\n                        <div className=\"absolute top-0 w-px h-full bg-blue-500 opacity-50 z-[1001]\" style={{ left: viewMode === 'mobile' ? 'calc(50% - 187.5px)' : 'calc(50% - 600px)' }} />\r\n                        <div className=\"absolute top-0 w-px h-full bg-blue-500 opacity-50 z-[1001]\" style={{ left: viewMode === 'mobile' ? 'calc(50% + 187.5px)' : 'calc(50% + 600px)' }} />\r\n                    </>\r\n                )}\r\n                <SelectionOverlay\r\n                    selectedElements={pageData.elements.filter((el) => selectedIds.includes(el.id))}\r\n                    onResize={onUpdateSize}\r\n                    zoomLevel={zoomLevel}\r\n                />\r\n                {renderContextMenu()}\r\n                {renderAddSectionButton()}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nCanvas.propTypes = {\r\n    pageData: PropTypes.shape({\r\n        canvas: PropTypes.shape({\r\n            width: PropTypes.number,\r\n            height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n            background: PropTypes.string,\r\n        }).isRequired,\r\n        elements: PropTypes.arrayOf(PropTypes.shape({\r\n            id: PropTypes.string.isRequired,\r\n            type: PropTypes.string.isRequired,\r\n            position: PropTypes.object,\r\n            size: PropTypes.shape({\r\n                width: PropTypes.number,\r\n                height: PropTypes.number,\r\n            }),\r\n            styles: PropTypes.object,\r\n            children: PropTypes.array,\r\n            visible: PropTypes.bool,\r\n            locked: PropTypes.bool,\r\n        })).isRequired,\r\n        meta: PropTypes.shape({\r\n            created_at: PropTypes.string,\r\n            updated_at: PropTypes.string,\r\n        }),\r\n    }).isRequired,\r\n    selectedIds: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    onSelectElement: PropTypes.func.isRequired,\r\n    onUpdatePosition: PropTypes.func.isRequired,\r\n    onUpdateSize: PropTypes.func.isRequired,\r\n    onDeleteElement: PropTypes.func.isRequired,\r\n    onAddElement: PropTypes.func.isRequired,\r\n    onGroupElements: PropTypes.func.isRequired,\r\n    viewMode: PropTypes.oneOf(['desktop', 'tablet', 'mobile']).isRequired,\r\n    zoomLevel: PropTypes.number.isRequired,\r\n    gridSize: PropTypes.number.isRequired,\r\n    showGrid: PropTypes.bool.isRequired,\r\n    onEditElement: PropTypes.func.isRequired,\r\n    onDuplicateElement: PropTypes.func.isRequired,\r\n    onMoveElementUp: PropTypes.func.isRequired,\r\n    onMoveElementDown: PropTypes.func.isRequired,\r\n    onSelectChild: PropTypes.func.isRequired,\r\n    selectedChildId: PropTypes.string,\r\n    onAddChild: PropTypes.func.isRequired,\r\n    onUpdateChildPosition: PropTypes.func.isRequired,\r\n    onMoveChild: PropTypes.func.isRequired,\r\n    guideLine: PropTypes.shape({\r\n        show: PropTypes.bool,\r\n        y: PropTypes.number,\r\n    }),\r\n    onShowAddSectionPopup: PropTypes.func.isRequired,\r\n    onSaveTemplate: PropTypes.func.isRequired,\r\n    onToggleVisibility: PropTypes.func.isRequired,\r\n    onDeleteChild: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}