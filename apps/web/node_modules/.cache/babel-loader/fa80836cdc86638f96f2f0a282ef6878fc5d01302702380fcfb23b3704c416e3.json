{"ast":null,"code":"// services/imageService.js\nimport api from '@landinghub/api';\n\n/**\r\n * Upload single image to S3\r\n * @param {File} file - Image file to upload\r\n * @param {string} pageId - Optional page ID\r\n * @param {Function} onProgress - Progress callback\r\n */\nexport const uploadImage = async (file, pageId = null, onProgress) => {\n  try {\n    const formData = new FormData();\n    formData.append('image', file);\n    if (pageId) {\n      formData.append('pageId', pageId);\n    }\n    const response = await api.post('/images/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      onUploadProgress: progressEvent => {\n        const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n        if (onProgress) {\n          onProgress(percentCompleted);\n        }\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    throw new Error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'Failed to upload image');\n  }\n};\n\n/**\r\n * Upload multiple images to S3\r\n * @param {File[]} files - Array of image files\r\n * @param {string} pageId - Optional page ID\r\n * @param {Function} onProgress - Progress callback\r\n */\nexport const uploadMultipleImages = async (files, pageId = null, onProgress) => {\n  try {\n    const formData = new FormData();\n    files.forEach(file => {\n      formData.append('images', file);\n    });\n    if (pageId) {\n      formData.append('pageId', pageId);\n    }\n    const response = await api.post('/images/upload/multiple', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      onUploadProgress: progressEvent => {\n        const percentCompleted = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n        if (onProgress) {\n          onProgress(percentCompleted);\n        }\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    throw new Error(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || 'Failed to upload images');\n  }\n};\n\n/**\r\n * Get images by page ID\r\n * @param {string} pageId - Page ID\r\n */\nexport const getPageImages = async pageId => {\n  try {\n    const response = await api.get(`/images/page/${pageId}`);\n    return response.data;\n  } catch (error) {\n    var _error$response3, _error$response3$data;\n    throw new Error(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || 'Failed to fetch page images');\n  }\n};\n\n/**\r\n * Get all user's uploaded images\r\n */\nexport const getUserImages = async () => {\n  try {\n    const response = await api.get('/images/user');\n    return response.data;\n  } catch (error) {\n    var _error$response4, _error$response4$data;\n    throw new Error(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || 'Failed to fetch images');\n  }\n};\n\n/**\r\n * Delete image from S3\r\n * @param {string} key - S3 object key\r\n */\nexport const deleteImage = async key => {\n  try {\n    const response = await api.delete(`/images/${encodeURIComponent(key)}`);\n    return response.data;\n  } catch (error) {\n    var _error$response5, _error$response5$data;\n    throw new Error(((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.error) || 'Failed to delete image');\n  }\n};\n\n/**\r\n * Get presigned URL for direct S3 upload\r\n * @param {string} filename - File name\r\n * @param {string} filetype - File MIME type\r\n * @param {string} pageId - Optional page ID\r\n */\nexport const getPresignedUrl = async (filename, filetype, pageId = null) => {\n  try {\n    const response = await api.post('/images/presigned-url', {\n      filename,\n      filetype,\n      pageId\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response6, _error$response6$data;\n    throw new Error(((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.error) || 'Failed to get presigned URL');\n  }\n};\n\n/**\r\n * Upload image directly to S3 using presigned URL\r\n * @param {File} file - Image file\r\n * @param {string} pageId - Optional page ID\r\n * @param {Function} onProgress - Progress callback\r\n */\nexport const uploadImageDirect = async (file, pageId = null, onProgress) => {\n  try {\n    // Get presigned URL\n    const presignedData = await getPresignedUrl(file.name, file.type, pageId);\n\n    // Upload to S3 directly\n    await fetch(presignedData.data.uploadUrl, {\n      method: 'PUT',\n      body: file,\n      headers: {\n        'Content-Type': file.type\n      }\n    });\n    return {\n      success: true,\n      data: {\n        url: presignedData.data.publicUrl,\n        key: presignedData.data.key,\n        name: file.name\n      }\n    };\n  } catch (error) {\n    throw new Error('Failed to upload image directly to S3');\n  }\n};\n\n/**\r\n * Validate image file\r\n * @param {File} file - File to validate\r\n * @param {Object} options - Validation options\r\n */\nexport const validateImageFile = (file, options = {}) => {\n  const {\n    maxSize = 10 * 1024 * 1024,\n    // 10MB\n    allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp']\n  } = options;\n  if (!file) {\n    return {\n      valid: false,\n      error: 'No file provided'\n    };\n  }\n  if (!allowedTypes.includes(file.type)) {\n    return {\n      valid: false,\n      error: `File type not allowed. Allowed types: ${allowedTypes.join(', ')}`\n    };\n  }\n  if (file.size > maxSize) {\n    return {\n      valid: false,\n      error: `File size exceeds ${Math.round(maxSize / 1024 / 1024)}MB`\n    };\n  }\n  return {\n    valid: true\n  };\n};\n\n/**\r\n * Compress image before upload\r\n * @param {File} file - Image file to compress\r\n * @param {Object} options - Compression options\r\n */\nexport const compressImage = async (file, options = {}) => {\n  const {\n    maxWidth = 1920,\n    maxHeight = 1080,\n    quality = 0.8\n  } = options;\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = event => {\n      const img = new Image();\n      img.src = event.target.result;\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        let width = img.width;\n        let height = img.height;\n\n        // Calculate new dimensions\n        if (width > maxWidth) {\n          height = Math.round(height * maxWidth / width);\n          width = maxWidth;\n        }\n        if (height > maxHeight) {\n          width = Math.round(width * maxHeight / height);\n          height = maxHeight;\n        }\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0, width, height);\n        canvas.toBlob(blob => {\n          const compressedFile = new File([blob], file.name, {\n            type: file.type,\n            lastModified: Date.now()\n          });\n          resolve(compressedFile);\n        }, file.type, quality);\n      };\n      img.onerror = reject;\n    };\n    reader.onerror = reject;\n  });\n};","map":{"version":3,"names":["api","uploadImage","file","pageId","onProgress","formData","FormData","append","response","post","headers","onUploadProgress","progressEvent","percentCompleted","Math","round","loaded","total","data","error","_error$response","_error$response$data","Error","uploadMultipleImages","files","forEach","_error$response2","_error$response2$data","getPageImages","get","_error$response3","_error$response3$data","getUserImages","_error$response4","_error$response4$data","deleteImage","key","delete","encodeURIComponent","_error$response5","_error$response5$data","getPresignedUrl","filename","filetype","_error$response6","_error$response6$data","uploadImageDirect","presignedData","name","type","fetch","uploadUrl","method","body","success","url","publicUrl","validateImageFile","options","maxSize","allowedTypes","valid","includes","join","size","compressImage","maxWidth","maxHeight","quality","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","event","img","Image","src","target","result","canvas","document","createElement","width","height","ctx","getContext","drawImage","toBlob","blob","compressedFile","File","lastModified","Date","now","onerror"],"sources":["F:/landinghub-iconic/apps/web/src/components/imageService.js"],"sourcesContent":["// services/imageService.js\r\nimport api from '@landinghub/api';\r\n\r\n/**\r\n * Upload single image to S3\r\n * @param {File} file - Image file to upload\r\n * @param {string} pageId - Optional page ID\r\n * @param {Function} onProgress - Progress callback\r\n */\r\nexport const uploadImage = async (file, pageId = null, onProgress) => {\r\n    try {\r\n        const formData = new FormData();\r\n        formData.append('image', file);\r\n        if (pageId) {\r\n            formData.append('pageId', pageId);\r\n        }\r\n\r\n        const response = await api.post('/images/upload', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            },\r\n            onUploadProgress: (progressEvent) => {\r\n                const percentCompleted = Math.round(\r\n                    (progressEvent.loaded * 100) / progressEvent.total\r\n                );\r\n                if (onProgress) {\r\n                    onProgress(percentCompleted);\r\n                }\r\n            }\r\n        });\r\n\r\n        return response.data;\r\n    } catch (error) {\r\n        throw new Error(error.response?.data?.error || 'Failed to upload image');\r\n    }\r\n};\r\n\r\n/**\r\n * Upload multiple images to S3\r\n * @param {File[]} files - Array of image files\r\n * @param {string} pageId - Optional page ID\r\n * @param {Function} onProgress - Progress callback\r\n */\r\nexport const uploadMultipleImages = async (files, pageId = null, onProgress) => {\r\n    try {\r\n        const formData = new FormData();\r\n        files.forEach(file => {\r\n            formData.append('images', file);\r\n        });\r\n        if (pageId) {\r\n            formData.append('pageId', pageId);\r\n        }\r\n\r\n        const response = await api.post('/images/upload/multiple', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            },\r\n            onUploadProgress: (progressEvent) => {\r\n                const percentCompleted = Math.round(\r\n                    (progressEvent.loaded * 100) / progressEvent.total\r\n                );\r\n                if (onProgress) {\r\n                    onProgress(percentCompleted);\r\n                }\r\n            }\r\n        });\r\n\r\n        return response.data;\r\n    } catch (error) {\r\n        throw new Error(error.response?.data?.error || 'Failed to upload images');\r\n    }\r\n};\r\n\r\n/**\r\n * Get images by page ID\r\n * @param {string} pageId - Page ID\r\n */\r\nexport const getPageImages = async (pageId) => {\r\n    try {\r\n        const response = await api.get(`/images/page/${pageId}`);\r\n        return response.data;\r\n    } catch (error) {\r\n        throw new Error(error.response?.data?.error || 'Failed to fetch page images');\r\n    }\r\n};\r\n\r\n/**\r\n * Get all user's uploaded images\r\n */\r\nexport const getUserImages = async () => {\r\n    try {\r\n        const response = await api.get('/images/user');\r\n        return response.data;\r\n    } catch (error) {\r\n        throw new Error(error.response?.data?.error || 'Failed to fetch images');\r\n    }\r\n};\r\n\r\n/**\r\n * Delete image from S3\r\n * @param {string} key - S3 object key\r\n */\r\nexport const deleteImage = async (key) => {\r\n    try {\r\n        const response = await api.delete(`/images/${encodeURIComponent(key)}`);\r\n        return response.data;\r\n    } catch (error) {\r\n        throw new Error(error.response?.data?.error || 'Failed to delete image');\r\n    }\r\n};\r\n\r\n/**\r\n * Get presigned URL for direct S3 upload\r\n * @param {string} filename - File name\r\n * @param {string} filetype - File MIME type\r\n * @param {string} pageId - Optional page ID\r\n */\r\nexport const getPresignedUrl = async (filename, filetype, pageId = null) => {\r\n    try {\r\n        const response = await api.post('/images/presigned-url', {\r\n            filename,\r\n            filetype,\r\n            pageId\r\n        });\r\n        return response.data;\r\n    } catch (error) {\r\n        throw new Error(error.response?.data?.error || 'Failed to get presigned URL');\r\n    }\r\n};\r\n\r\n/**\r\n * Upload image directly to S3 using presigned URL\r\n * @param {File} file - Image file\r\n * @param {string} pageId - Optional page ID\r\n * @param {Function} onProgress - Progress callback\r\n */\r\nexport const uploadImageDirect = async (file, pageId = null, onProgress) => {\r\n    try {\r\n        // Get presigned URL\r\n        const presignedData = await getPresignedUrl(file.name, file.type, pageId);\r\n\r\n        // Upload to S3 directly\r\n        await fetch(presignedData.data.uploadUrl, {\r\n            method: 'PUT',\r\n            body: file,\r\n            headers: {\r\n                'Content-Type': file.type\r\n            }\r\n        });\r\n\r\n        return {\r\n            success: true,\r\n            data: {\r\n                url: presignedData.data.publicUrl,\r\n                key: presignedData.data.key,\r\n                name: file.name\r\n            }\r\n        };\r\n    } catch (error) {\r\n        throw new Error('Failed to upload image directly to S3');\r\n    }\r\n};\r\n\r\n/**\r\n * Validate image file\r\n * @param {File} file - File to validate\r\n * @param {Object} options - Validation options\r\n */\r\nexport const validateImageFile = (file, options = {}) => {\r\n    const {\r\n        maxSize = 10 * 1024 * 1024, // 10MB\r\n        allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp']\r\n    } = options;\r\n\r\n    if (!file) {\r\n        return { valid: false, error: 'No file provided' };\r\n    }\r\n\r\n    if (!allowedTypes.includes(file.type)) {\r\n        return {\r\n            valid: false,\r\n            error: `File type not allowed. Allowed types: ${allowedTypes.join(', ')}`\r\n        };\r\n    }\r\n\r\n    if (file.size > maxSize) {\r\n        return {\r\n            valid: false,\r\n            error: `File size exceeds ${Math.round(maxSize / 1024 / 1024)}MB`\r\n        };\r\n    }\r\n\r\n    return { valid: true };\r\n};\r\n\r\n/**\r\n * Compress image before upload\r\n * @param {File} file - Image file to compress\r\n * @param {Object} options - Compression options\r\n */\r\nexport const compressImage = async (file, options = {}) => {\r\n    const {\r\n        maxWidth = 1920,\r\n        maxHeight = 1080,\r\n        quality = 0.8\r\n    } = options;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n\r\n        reader.onload = (event) => {\r\n            const img = new Image();\r\n            img.src = event.target.result;\r\n\r\n            img.onload = () => {\r\n                const canvas = document.createElement('canvas');\r\n                let width = img.width;\r\n                let height = img.height;\r\n\r\n                // Calculate new dimensions\r\n                if (width > maxWidth) {\r\n                    height = Math.round((height * maxWidth) / width);\r\n                    width = maxWidth;\r\n                }\r\n                if (height > maxHeight) {\r\n                    width = Math.round((width * maxHeight) / height);\r\n                    height = maxHeight;\r\n                }\r\n\r\n                canvas.width = width;\r\n                canvas.height = height;\r\n\r\n                const ctx = canvas.getContext('2d');\r\n                ctx.drawImage(img, 0, 0, width, height);\r\n\r\n                canvas.toBlob(\r\n                    (blob) => {\r\n                        const compressedFile = new File([blob], file.name, {\r\n                            type: file.type,\r\n                            lastModified: Date.now()\r\n                        });\r\n                        resolve(compressedFile);\r\n                    },\r\n                    file.type,\r\n                    quality\r\n                );\r\n            };\r\n\r\n            img.onerror = reject;\r\n        };\r\n\r\n        reader.onerror = reject;\r\n    });\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}