{"ast":null,"code":"var _jsxFileName = \"F:\\\\landinghub-iconic\\\\apps\\\\web\\\\src\\\\components\\\\create-page\\\\Canvas.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useRef, useCallback, useState, useEffect } from 'react';\nimport { useDrop, useDrag } from 'react-dnd';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport { toast } from 'react-toastify';\nimport Guidelines from './Guidelines';\nimport Rulers from './Rulers';\nimport SelectionOverlay from './SelectionOverlay';\nimport { throttle } from 'lodash';\nimport '../../styles/Canvas.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ItemTypes = {\n  ELEMENT: 'element',\n  EXISTING_ELEMENT: 'existingElement'\n};\n\n// Tính toán vị trí chính xác trên canvas\nconst getCanvasPosition = (clientX, clientY, canvasRef, zoomLevel) => {\n  if (!canvasRef.current) return {\n    x: 0,\n    y: 0\n  };\n  const canvasRect = canvasRef.current.getBoundingClientRect();\n  const scale = zoomLevel / 100;\n\n  // Tính toán vị trí thực tế trên canvas (không bao gồm scroll)\n  const x = (clientX - canvasRect.left) / scale;\n  const y = (clientY - canvasRect.top) / scale;\n  return {\n    x: Math.round(x),\n    y: Math.round(y)\n  };\n};\n\n// Snap to grid và elements khác\nconst snapToGrid = (x, y, gridSize, snapPoints = [], canvasBounds, snapEnabled = true, snapThreshold = 8) => {\n  if (!snapEnabled) {\n    return {\n      x: Math.max(0, Math.min(x, canvasBounds.width)),\n      y: Math.max(0, Math.min(y, canvasBounds.height)),\n      snapGuideLines: []\n    };\n  }\n  let snappedX = gridSize > 0 ? Math.round(x / gridSize) * gridSize : x;\n  let snappedY = gridSize > 0 ? Math.round(y / gridSize) * gridSize : y;\n  let snapGuideLines = [];\n\n  // Snap to other elements\n  snapPoints.forEach(point => {\n    if (Math.abs(x - point.x) <= snapThreshold) {\n      snappedX = point.x;\n      snapGuideLines.push({\n        vertical: true,\n        position: point.x\n      });\n    }\n    if (Math.abs(y - point.y) <= snapThreshold) {\n      snappedY = point.y;\n      snapGuideLines.push({\n        vertical: false,\n        position: point.y\n      });\n    }\n  });\n\n  // Clamp within canvas bounds\n  snappedX = Math.max(0, Math.min(snappedX, canvasBounds.width));\n  snappedY = Math.max(0, Math.min(snappedY, canvasBounds.height));\n  return {\n    x: snappedX,\n    y: snappedY,\n    snapGuideLines\n  };\n};\nconst getElementBounds = element => {\n  var _element$position$des, _element$position$des2, _element$position$des3, _element$size, _element$position$des4, _element$size2, _element$position$des5, _element$size3, _element$position$des6, _element$size4;\n  return {\n    left: ((_element$position$des = element.position.desktop) === null || _element$position$des === void 0 ? void 0 : _element$position$des.x) || 0,\n    top: ((_element$position$des2 = element.position.desktop) === null || _element$position$des2 === void 0 ? void 0 : _element$position$des2.y) || 0,\n    right: (((_element$position$des3 = element.position.desktop) === null || _element$position$des3 === void 0 ? void 0 : _element$position$des3.x) || 0) + (((_element$size = element.size) === null || _element$size === void 0 ? void 0 : _element$size.width) || 200),\n    bottom: (((_element$position$des4 = element.position.desktop) === null || _element$position$des4 === void 0 ? void 0 : _element$position$des4.y) || 0) + (((_element$size2 = element.size) === null || _element$size2 === void 0 ? void 0 : _element$size2.height) || 50),\n    centerX: (((_element$position$des5 = element.position.desktop) === null || _element$position$des5 === void 0 ? void 0 : _element$position$des5.x) || 0) + (((_element$size3 = element.size) === null || _element$size3 === void 0 ? void 0 : _element$size3.width) || 200) / 2,\n    centerY: (((_element$position$des6 = element.position.desktop) === null || _element$position$des6 === void 0 ? void 0 : _element$position$des6.y) || 0) + (((_element$size4 = element.size) === null || _element$size4 === void 0 ? void 0 : _element$size4.height) || 50) / 2\n  };\n};\nconst Element = /*#__PURE__*/_s(/*#__PURE__*/React.memo(_c = _s(({\n  element,\n  isSelected,\n  onSelectElement,\n  onUpdatePosition,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  onContextMenu,\n  canvasRef,\n  snapPoints,\n  canvasBounds,\n  onUpdateGuidelines\n}) => {\n  _s();\n  const {\n    id,\n    type,\n    componentData = {},\n    position = {},\n    size = {\n      width: 200,\n      height: 50\n    },\n    styles = {}\n  } = element;\n  const elementRef = useRef(null);\n  const [tempPosition, setTempPosition] = useState(null);\n  const [{\n    isDragging\n  }, drag] = useDrag(() => ({\n    type: ItemTypes.EXISTING_ELEMENT,\n    item: () => {\n      // Tính toán offset chính xác khi bắt đầu drag\n      const currentPos = position[viewMode] || {\n        x: 0,\n        y: 0\n      };\n      return {\n        id,\n        elementId: id,\n        initialPosition: currentPos,\n        type: 'move'\n      };\n    },\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging()\n    })\n  }), [id, position, viewMode]);\n\n  // Reset temp position khi không drag\n  useEffect(() => {\n    if (!isDragging) {\n      setTempPosition(null);\n      onUpdateGuidelines([]);\n    }\n  }, [isDragging, onUpdateGuidelines]);\n  const handleMouseDown = e => {\n    e.stopPropagation();\n    onSelectElement(id, e.ctrlKey || e.metaKey);\n  };\n  const handleContextMenu = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    onContextMenu(id, {\n      x: e.clientX,\n      y: e.clientY\n    });\n  };\n  const currentPosition = tempPosition || position[viewMode] || {\n    x: 0,\n    y: 0\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: node => {\n      elementRef.current = node;\n      drag(node);\n    },\n    className: `lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`,\n    style: {\n      position: 'absolute',\n      left: currentPosition.x,\n      top: currentPosition.y,\n      width: size.width,\n      height: size.height,\n      zIndex: isDragging ? 1000 : position.z || 1,\n      cursor: isDragging ? 'grabbing' : isSelected ? 'move' : 'pointer',\n      opacity: isDragging ? 0.7 : 1,\n      transition: isDragging ? 'none' : 'all 0.1s ease',\n      boxShadow: isDragging ? '0 8px 24px rgba(0,0,0,0.3)' : isSelected ? '0 0 0 2px #3b82f6' : 'none',\n      transform: isDragging ? 'rotate(1deg)' : 'none',\n      ...styles\n    },\n    onMouseDown: handleMouseDown,\n    onContextMenu: handleContextMenu,\n    children: (() => {\n      switch (type) {\n        case 'heading':\n          return /*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              fontSize: componentData.fontSize || '1.5rem',\n              color: componentData.color || '#1f2937',\n              margin: 0,\n              userSelect: 'none',\n              pointerEvents: 'none',\n              padding: '4px'\n            },\n            children: componentData.content || 'Tiêu đề'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this);\n        case 'paragraph':\n          return /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: componentData.fontSize || '1rem',\n              color: componentData.color || '#1f2937',\n              margin: 0,\n              userSelect: 'none',\n              pointerEvents: 'none',\n              padding: '4px'\n            },\n            children: componentData.content || 'Đoạn văn'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 29\n          }, this);\n        case 'button':\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              padding: '8px 16px',\n              borderRadius: '6px',\n              background: componentData.background || '#3b82f6',\n              color: componentData.color || '#fff',\n              border: 'none',\n              cursor: 'pointer',\n              userSelect: 'none',\n              pointerEvents: 'none',\n              width: '100%',\n              height: '100%',\n              fontSize: '14px',\n              fontWeight: '500'\n            },\n            children: componentData.content || 'Button'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 29\n          }, this);\n        case 'image':\n          return /*#__PURE__*/_jsxDEV(\"img\", {\n            src: componentData.src || 'https://via.placeholder.com/200x150',\n            alt: \"Image\",\n            style: {\n              width: '100%',\n              height: '100%',\n              objectFit: 'cover',\n              userSelect: 'none',\n              pointerEvents: 'none',\n              borderRadius: '4px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 29\n          }, this);\n        case 'form':\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '8px',\n              userSelect: 'none',\n              pointerEvents: 'none',\n              height: '100%',\n              padding: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter text...\",\n              style: {\n                padding: '8px',\n                borderRadius: '4px',\n                border: '1px solid #d1d5db',\n                fontSize: '14px'\n              },\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              style: {\n                background: '#3b82f6',\n                color: '#fff',\n                padding: '8px 16px',\n                borderRadius: '4px',\n                border: 'none',\n                fontSize: '14px',\n                fontWeight: '500'\n              },\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 29\n          }, this);\n        default:\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              userSelect: 'none',\n              pointerEvents: 'none',\n              width: '100%',\n              height: '100%',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              background: '#f3f4f6',\n              borderRadius: '4px',\n              color: '#6b7280',\n              fontSize: '14px'\n            },\n            children: componentData.content || type || 'Element'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 29\n          }, this);\n      }\n    })()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 9\n  }, this);\n}, \"Hr81NKac/TCyeEoDk+msI59ggp0=\", false, function () {\n  return [useDrag];\n})), \"Hr81NKac/TCyeEoDk+msI59ggp0=\", false, function () {\n  return [useDrag];\n});\n_c2 = Element;\nconst Canvas = /*#__PURE__*/_s2(/*#__PURE__*/React.memo(_c3 = _s2(({\n  pageData,\n  selectedIds,\n  onSelectElement,\n  onUpdatePosition,\n  onUpdateSize,\n  onDeleteElement,\n  onAddElement,\n  onGroupElements,\n  viewMode,\n  zoomLevel,\n  gridSize,\n  showGrid\n}) => {\n  var _pageData$canvas, _pageData$canvas2, _pageData$canvas3, _pageData$elements6, _pageData$elements7;\n  _s2();\n  const canvasRef = useRef(null);\n  const [guidelines, setGuidelines] = useState([]);\n  const [contextMenu, setContextMenu] = useState(null);\n  const [dragPreview, setDragPreview] = useState(null);\n  const [isDraggingElement, setIsDraggingElement] = useState(false);\n  const canvasBounds = {\n    width: (pageData === null || pageData === void 0 ? void 0 : (_pageData$canvas = pageData.canvas) === null || _pageData$canvas === void 0 ? void 0 : _pageData$canvas.width) || 1200,\n    height: (pageData === null || pageData === void 0 ? void 0 : (_pageData$canvas2 = pageData.canvas) === null || _pageData$canvas2 === void 0 ? void 0 : _pageData$canvas2.height) || 1000\n  };\n\n  // Generate snap points\n  const snapPoints = React.useMemo(() => {\n    var _pageData$elements;\n    const points = (pageData === null || pageData === void 0 ? void 0 : (_pageData$elements = pageData.elements) === null || _pageData$elements === void 0 ? void 0 : _pageData$elements.flatMap(el => {\n      const bounds = getElementBounds(el);\n      return [{\n        x: bounds.left,\n        y: bounds.top,\n        elementId: el.id\n      }, {\n        x: bounds.right,\n        y: bounds.bottom,\n        elementId: el.id\n      }, {\n        x: bounds.centerX,\n        y: bounds.centerY,\n        elementId: el.id\n      }, {\n        x: bounds.left,\n        y: bounds.centerY,\n        elementId: el.id\n      }, {\n        x: bounds.right,\n        y: bounds.centerY,\n        elementId: el.id\n      }, {\n        x: bounds.centerX,\n        y: bounds.top,\n        elementId: el.id\n      }, {\n        x: bounds.centerX,\n        y: bounds.bottom,\n        elementId: el.id\n      }];\n    })) || [];\n\n    // Canvas edges\n    points.push({\n      x: 0,\n      y: 0\n    }, {\n      x: canvasBounds.width,\n      y: 0\n    }, {\n      x: 0,\n      y: canvasBounds.height\n    }, {\n      x: canvasBounds.width,\n      y: canvasBounds.height\n    }, {\n      x: canvasBounds.width / 2,\n      y: canvasBounds.height / 2\n    });\n    return points;\n  }, [pageData === null || pageData === void 0 ? void 0 : pageData.elements, canvasBounds]);\n  const [{\n    isOver\n  }, drop] = useDrop(() => ({\n    accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\n    hover: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      if (!clientOffset || !canvasRef.current) return;\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef, zoomLevel);\n      if (item.elementId) {\n        var _pageData$elements2;\n        // Di chuyển element hiện có\n        setIsDraggingElement(true);\n        const element = pageData === null || pageData === void 0 ? void 0 : (_pageData$elements2 = pageData.elements) === null || _pageData$elements2 === void 0 ? void 0 : _pageData$elements2.find(el => el.id === item.elementId);\n        if (element && element.position) {\n          var _pageData$elements3;\n          const elementRef = canvasRef.current.querySelector(`[data-element-id=\"${item.elementId}\"]`);\n          const currentElement = pageData === null || pageData === void 0 ? void 0 : (_pageData$elements3 = pageData.elements) === null || _pageData$elements3 === void 0 ? void 0 : _pageData$elements3.find(el => el.id === item.elementId);\n          if (currentElement) {\n            var _currentElement$size, _currentElement$size2, _currentElement$size3, _currentElement$size4, _pageData$elements4;\n            // Tính toán vị trí mới\n            const newPos = {\n              x: Math.max(0, Math.min(pos.x - (((_currentElement$size = currentElement.size) === null || _currentElement$size === void 0 ? void 0 : _currentElement$size.width) || 200) / 2, canvasBounds.width - (((_currentElement$size2 = currentElement.size) === null || _currentElement$size2 === void 0 ? void 0 : _currentElement$size2.width) || 200))),\n              y: Math.max(0, Math.min(pos.y - (((_currentElement$size3 = currentElement.size) === null || _currentElement$size3 === void 0 ? void 0 : _currentElement$size3.height) || 50) / 2, canvasBounds.height - (((_currentElement$size4 = currentElement.size) === null || _currentElement$size4 === void 0 ? void 0 : _currentElement$size4.height) || 50)))\n            };\n\n            // Snap nếu cần\n            const snapped = snapToGrid(newPos.x, newPos.y, showGrid ? gridSize : 0, snapPoints.filter(p => p.elementId !== item.elementId), canvasBounds, true);\n\n            // Cập nhật guidelines\n            setGuidelines(snapped.snapGuideLines || []);\n\n            // Cập nhật temp position cho element\n            const elementComponent = pageData === null || pageData === void 0 ? void 0 : (_pageData$elements4 = pageData.elements) === null || _pageData$elements4 === void 0 ? void 0 : _pageData$elements4.find(el => el.id === item.elementId);\n            if (elementComponent) {\n              // Trigger re-render với temp position\n              onUpdatePosition(item.elementId, {\n                [viewMode]: snapped\n              }, false);\n            }\n          }\n        }\n      } else if (item.json) {\n        // Preview element mới\n        const elementSize = item.json.size || {\n          width: 200,\n          height: 50\n        };\n        const previewPos = {\n          x: Math.max(0, Math.min(pos.x - elementSize.width / 2, canvasBounds.width - elementSize.width)),\n          y: Math.max(0, Math.min(pos.y - elementSize.height / 2, canvasBounds.height - elementSize.height))\n        };\n        const snapped = snapToGrid(previewPos.x, previewPos.y, showGrid ? gridSize : 0, snapPoints, canvasBounds);\n        setGuidelines(snapped.snapGuideLines || []);\n        setDragPreview({\n          ...item.json,\n          position: snapped,\n          size: elementSize\n        });\n      }\n    },\n    drop: (item, monitor) => {\n      const clientOffset = monitor.getClientOffset();\n      setIsDraggingElement(false);\n      if (!clientOffset || !canvasRef.current) {\n        toast.error('Không thể xác định vị trí thả!');\n        setDragPreview(null);\n        setGuidelines([]);\n        return;\n      }\n      const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef, zoomLevel);\n      if (item.elementId) {\n        // Di chuyển element hiện có - đã được cập nhật trong hover\n        setGuidelines([]);\n        toast.success('Đã di chuyển phần tử!');\n      } else if (item.json) {\n        // Thêm element mới\n        const elementSize = item.json.size || {\n          width: 200,\n          height: 50\n        };\n        const finalPos = {\n          x: Math.max(0, Math.min(pos.x - elementSize.width / 2, canvasBounds.width - elementSize.width)),\n          y: Math.max(0, Math.min(pos.y - elementSize.height / 2, canvasBounds.height - elementSize.height))\n        };\n        const snapped = snapToGrid(finalPos.x, finalPos.y, showGrid ? gridSize : 0, snapPoints, canvasBounds);\n        const newElement = {\n          id: `${item.type || item.json.type}-${Date.now()}`,\n          type: item.json.type,\n          componentData: item.json.componentData || {},\n          position: {\n            [viewMode]: snapped,\n            desktop: snapped,\n            tablet: snapped,\n            mobile: snapped\n          },\n          size: elementSize,\n          styles: item.json.styles || {}\n        };\n        onAddElement(newElement);\n        toast.success('Đã thêm phần tử mới!');\n      }\n      setDragPreview(null);\n      setGuidelines([]);\n    },\n    collect: monitor => ({\n      isOver: !!monitor.isOver()\n    })\n  }), [viewMode, zoomLevel, gridSize, showGrid, snapPoints, canvasBounds, onAddElement, onUpdatePosition, pageData === null || pageData === void 0 ? void 0 : pageData.elements]);\n  const handleCanvasClick = e => {\n    if (e.target === canvasRef.current || e.target.classList.contains('lpb-canvas')) {\n      onSelectElement([]);\n      setContextMenu(null);\n    }\n  };\n  const handleContextMenu = (id, position) => {\n    setContextMenu({\n      id,\n      position\n    });\n  };\n  const handleUpdateGuidelines = useCallback(newGuidelines => {\n    setGuidelines(newGuidelines);\n  }, []);\n\n  // Keyboard shortcuts\n  const handleKeyDown = useCallback(e => {\n    if (!selectedIds.length) return;\n    const nudgeDistance = e.shiftKey ? 10 : 1;\n    switch (e.key) {\n      case 'ArrowUp':\n        e.preventDefault();\n        selectedIds.forEach(id => {\n          const element = pageData.elements.find(el => el.id === id);\n          if (element) {\n            const currentPos = element.position[viewMode] || {\n              x: 0,\n              y: 0\n            };\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: currentPos.x,\n                y: Math.max(0, currentPos.y - nudgeDistance)\n              }\n            }, true);\n          }\n        });\n        break;\n      case 'ArrowDown':\n        e.preventDefault();\n        selectedIds.forEach(id => {\n          const element = pageData.elements.find(el => el.id === id);\n          if (element) {\n            var _element$size5;\n            const currentPos = element.position[viewMode] || {\n              x: 0,\n              y: 0\n            };\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: currentPos.x,\n                y: Math.min(canvasBounds.height - (((_element$size5 = element.size) === null || _element$size5 === void 0 ? void 0 : _element$size5.height) || 50), currentPos.y + nudgeDistance)\n              }\n            }, true);\n          }\n        });\n        break;\n      case 'ArrowLeft':\n        e.preventDefault();\n        selectedIds.forEach(id => {\n          const element = pageData.elements.find(el => el.id === id);\n          if (element) {\n            const currentPos = element.position[viewMode] || {\n              x: 0,\n              y: 0\n            };\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: Math.max(0, currentPos.x - nudgeDistance),\n                y: currentPos.y\n              }\n            }, true);\n          }\n        });\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        selectedIds.forEach(id => {\n          const element = pageData.elements.find(el => el.id === id);\n          if (element) {\n            var _element$size6;\n            const currentPos = element.position[viewMode] || {\n              x: 0,\n              y: 0\n            };\n            onUpdatePosition(id, {\n              [viewMode]: {\n                x: Math.min(canvasBounds.width - (((_element$size6 = element.size) === null || _element$size6 === void 0 ? void 0 : _element$size6.width) || 200), currentPos.x + nudgeDistance),\n                y: currentPos.y\n              }\n            }, true);\n          }\n        });\n        break;\n      case 'Delete':\n      case 'Backspace':\n        e.preventDefault();\n        selectedIds.forEach(id => onDeleteElement(id));\n        toast.success('Đã xóa phần tử!');\n        break;\n      case 'Escape':\n        e.preventDefault();\n        onSelectElement([]);\n        setContextMenu(null);\n        break;\n    }\n  }, [selectedIds, onUpdatePosition, onDeleteElement, onSelectElement, viewMode, pageData === null || pageData === void 0 ? void 0 : pageData.elements, canvasBounds]);\n  useHotkeys('ctrl+a, cmd+a', e => {\n    var _pageData$elements5;\n    e.preventDefault();\n    onSelectElement((pageData === null || pageData === void 0 ? void 0 : (_pageData$elements5 = pageData.elements) === null || _pageData$elements5 === void 0 ? void 0 : _pageData$elements5.map(el => el.id)) || []);\n  }, [pageData === null || pageData === void 0 ? void 0 : pageData.elements, onSelectElement]);\n  useHotkeys('ctrl+g, cmd+g', e => {\n    e.preventDefault();\n    if (selectedIds.length > 1) {\n      onGroupElements(selectedIds);\n    }\n  }, [selectedIds, onGroupElements]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"lpb-canvas-wrapper\",\n    onKeyDown: handleKeyDown,\n    tabIndex: 0,\n    style: {\n      outline: 'none',\n      height: '100%',\n      overflow: 'auto'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: node => {\n        canvasRef.current = node;\n        drop(node);\n      },\n      className: `lpb-canvas ${viewMode === 'mobile' ? 'lpb-canvas-mobile' : viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''}`,\n      style: {\n        position: 'relative',\n        width: canvasBounds.width,\n        height: Math.max(canvasBounds.height, 600),\n        background: (pageData === null || pageData === void 0 ? void 0 : (_pageData$canvas3 = pageData.canvas) === null || _pageData$canvas3 === void 0 ? void 0 : _pageData$canvas3.background) || '#ffffff',\n        transform: `scale(${zoomLevel / 100})`,\n        transformOrigin: 'top left',\n        cursor: isOver ? 'copy' : 'default',\n        overflow: 'visible',\n        border: '1px solid #e5e7eb'\n      },\n      onClick: handleCanvasClick,\n      onContextMenu: e => e.preventDefault(),\n      children: [showGrid && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-canvas-grid\",\n        style: {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          backgroundImage: `\n                                linear-gradient(to right, #f1f5f9 1px, transparent 1px),\n                                linear-gradient(to bottom, #f1f5f9 1px, transparent 1px)\n                            `,\n          backgroundSize: `${gridSize}px ${gridSize}px`,\n          pointerEvents: 'none',\n          opacity: 0.6\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 595,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Guidelines, {\n        guidelines: guidelines,\n        zoomLevel: zoomLevel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 615,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Rulers, {\n        canvasWidth: canvasBounds.width,\n        canvasHeight: canvasBounds.height,\n        zoomLevel: zoomLevel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 17\n      }, this), pageData === null || pageData === void 0 ? void 0 : (_pageData$elements6 = pageData.elements) === null || _pageData$elements6 === void 0 ? void 0 : _pageData$elements6.map(element => /*#__PURE__*/_jsxDEV(\"div\", {\n        \"data-element-id\": element.id,\n        children: /*#__PURE__*/_jsxDEV(Element, {\n          element: element,\n          isSelected: selectedIds.includes(element.id),\n          onSelectElement: onSelectElement,\n          onUpdatePosition: onUpdatePosition,\n          viewMode: viewMode,\n          zoomLevel: zoomLevel,\n          gridSize: showGrid ? gridSize : 0,\n          onContextMenu: handleContextMenu,\n          canvasRef: canvasRef,\n          snapPoints: snapPoints,\n          canvasBounds: canvasBounds,\n          onUpdateGuidelines: handleUpdateGuidelines\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 25\n        }, this)\n      }, element.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 21\n      }, this)), dragPreview && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: 'absolute',\n          left: dragPreview.position.x,\n          top: dragPreview.position.y,\n          width: dragPreview.size.width,\n          height: dragPreview.size.height,\n          border: '2px dashed #3b82f6',\n          backgroundColor: 'rgba(59, 130, 246, 0.1)',\n          pointerEvents: 'none',\n          zIndex: 999,\n          borderRadius: '4px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 646,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(SelectionOverlay, {\n        selectedElements: (pageData === null || pageData === void 0 ? void 0 : (_pageData$elements7 = pageData.elements) === null || _pageData$elements7 === void 0 ? void 0 : _pageData$elements7.filter(el => selectedIds.includes(el.id))) || [],\n        onResize: onUpdateSize,\n        zoomLevel: zoomLevel,\n        viewMode: viewMode\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 17\n      }, this), contextMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lpb-context-menu\",\n        style: {\n          position: 'fixed',\n          left: contextMenu.position.x,\n          top: contextMenu.position.y,\n          background: 'white',\n          border: '1px solid #e5e7eb',\n          borderRadius: '8px',\n          boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\n          zIndex: 10000,\n          minWidth: '160px',\n          overflow: 'hidden'\n        },\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-context-menu-item\",\n          style: {\n            padding: '12px 16px',\n            cursor: 'pointer',\n            borderBottom: '1px solid #f3f4f6',\n            fontSize: '14px',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          onMouseEnter: e => e.target.style.backgroundColor = '#f8fafc',\n          onMouseLeave: e => e.target.style.backgroundColor = 'transparent',\n          onClick: () => {\n            var _pageData$elements8;\n            const element = pageData === null || pageData === void 0 ? void 0 : (_pageData$elements8 = pageData.elements) === null || _pageData$elements8 === void 0 ? void 0 : _pageData$elements8.find(el => el.id === contextMenu.id);\n            if (element) {\n              var _element$position$vie, _element$position$vie2;\n              const newElement = {\n                ...element,\n                id: `${element.type}-copy-${Date.now()}`,\n                position: {\n                  ...element.position,\n                  [viewMode]: {\n                    x: (((_element$position$vie = element.position[viewMode]) === null || _element$position$vie === void 0 ? void 0 : _element$position$vie.x) || 0) + 20,\n                    y: (((_element$position$vie2 = element.position[viewMode]) === null || _element$position$vie2 === void 0 ? void 0 : _element$position$vie2.y) || 0) + 20\n                  }\n                }\n              };\n              onAddElement(newElement);\n              toast.success('Đã nhân bản phần tử!');\n            }\n            setContextMenu(null);\n          },\n          children: \"\\uD83D\\uDCCB Duplicate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lpb-context-menu-item\",\n          style: {\n            padding: '12px 16px',\n            cursor: 'pointer',\n            fontSize: '14px',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px',\n            color: '#ef4444'\n          },\n          onMouseEnter: e => {\n            e.target.style.backgroundColor = '#fef2f2';\n            e.target.style.color = '#dc2626';\n          },\n          onMouseLeave: e => {\n            e.target.style.backgroundColor = 'transparent';\n            e.target.style.color = '#ef4444';\n          },\n          onClick: () => {\n            onDeleteElement(contextMenu.id);\n            setContextMenu(null);\n            toast.success('Đã xóa phần tử!');\n          },\n          children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 564,\n    columnNumber: 9\n  }, this);\n}, \"eiYC4C6bnmZcAiFkiLSteX0RkUY=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys];\n})), \"eiYC4C6bnmZcAiFkiLSteX0RkUY=\", false, function () {\n  return [useDrop, useHotkeys, useHotkeys];\n});\n_c4 = Canvas;\nexport default Canvas;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Element$React.memo\");\n$RefreshReg$(_c2, \"Element\");\n$RefreshReg$(_c3, \"Canvas$React.memo\");\n$RefreshReg$(_c4, \"Canvas\");","map":{"version":3,"names":["React","useRef","useCallback","useState","useEffect","useDrop","useDrag","useHotkeys","toast","Guidelines","Rulers","SelectionOverlay","throttle","jsxDEV","_jsxDEV","ItemTypes","ELEMENT","EXISTING_ELEMENT","getCanvasPosition","clientX","clientY","canvasRef","zoomLevel","current","x","y","canvasRect","getBoundingClientRect","scale","left","top","Math","round","snapToGrid","gridSize","snapPoints","canvasBounds","snapEnabled","snapThreshold","max","min","width","height","snapGuideLines","snappedX","snappedY","forEach","point","abs","push","vertical","position","getElementBounds","element","_element$position$des","_element$position$des2","_element$position$des3","_element$size","_element$position$des4","_element$size2","_element$position$des5","_element$size3","_element$position$des6","_element$size4","desktop","right","size","bottom","centerX","centerY","Element","_s","memo","_c","isSelected","onSelectElement","onUpdatePosition","viewMode","onContextMenu","onUpdateGuidelines","id","type","componentData","styles","elementRef","tempPosition","setTempPosition","isDragging","drag","item","currentPos","elementId","initialPosition","collect","monitor","handleMouseDown","e","stopPropagation","ctrlKey","metaKey","handleContextMenu","preventDefault","currentPosition","ref","node","className","style","zIndex","z","cursor","opacity","transition","boxShadow","transform","onMouseDown","children","fontSize","color","margin","userSelect","pointerEvents","padding","content","fileName","_jsxFileName","lineNumber","columnNumber","borderRadius","background","border","fontWeight","src","alt","objectFit","display","flexDirection","gap","placeholder","readOnly","alignItems","justifyContent","_c2","Canvas","_s2","_c3","pageData","selectedIds","onUpdateSize","onDeleteElement","onAddElement","onGroupElements","showGrid","_pageData$canvas","_pageData$canvas2","_pageData$canvas3","_pageData$elements6","_pageData$elements7","guidelines","setGuidelines","contextMenu","setContextMenu","dragPreview","setDragPreview","isDraggingElement","setIsDraggingElement","canvas","useMemo","_pageData$elements","points","elements","flatMap","el","bounds","isOver","drop","accept","hover","clientOffset","getClientOffset","pos","_pageData$elements2","find","_pageData$elements3","querySelector","currentElement","_currentElement$size","_currentElement$size2","_currentElement$size3","_currentElement$size4","_pageData$elements4","newPos","snapped","filter","p","elementComponent","json","elementSize","previewPos","error","success","finalPos","newElement","Date","now","tablet","mobile","handleCanvasClick","target","classList","contains","handleUpdateGuidelines","newGuidelines","handleKeyDown","length","nudgeDistance","shiftKey","key","_element$size5","_element$size6","_pageData$elements5","map","onKeyDown","tabIndex","outline","overflow","transformOrigin","onClick","backgroundImage","backgroundSize","canvasWidth","canvasHeight","includes","backgroundColor","selectedElements","onResize","minWidth","borderBottom","onMouseEnter","onMouseLeave","_pageData$elements8","_element$position$vie","_element$position$vie2","_c4","$RefreshReg$"],"sources":["F:/landinghub-iconic/apps/web/src/components/create-page/Canvas.js"],"sourcesContent":["import React, { useRef, useCallback, useState, useEffect } from 'react';\r\nimport { useDrop, useDrag } from 'react-dnd';\r\nimport { useHotkeys } from 'react-hotkeys-hook';\r\nimport { toast } from 'react-toastify';\r\nimport Guidelines from './Guidelines';\r\nimport Rulers from './Rulers';\r\nimport SelectionOverlay from './SelectionOverlay';\r\nimport { throttle } from 'lodash';\r\nimport '../../styles/Canvas.css';\r\n\r\nconst ItemTypes = {\r\n    ELEMENT: 'element',\r\n    EXISTING_ELEMENT: 'existingElement',\r\n};\r\n\r\n// Tính toán vị trí chính xác trên canvas\r\nconst getCanvasPosition = (clientX, clientY, canvasRef, zoomLevel) => {\r\n    if (!canvasRef.current) return { x: 0, y: 0 };\r\n\r\n    const canvasRect = canvasRef.current.getBoundingClientRect();\r\n    const scale = zoomLevel / 100;\r\n\r\n    // Tính toán vị trí thực tế trên canvas (không bao gồm scroll)\r\n    const x = (clientX - canvasRect.left) / scale;\r\n    const y = (clientY - canvasRect.top) / scale;\r\n\r\n    return { x: Math.round(x), y: Math.round(y) };\r\n};\r\n\r\n// Snap to grid và elements khác\r\nconst snapToGrid = (x, y, gridSize, snapPoints = [], canvasBounds, snapEnabled = true, snapThreshold = 8) => {\r\n    if (!snapEnabled) {\r\n        return {\r\n            x: Math.max(0, Math.min(x, canvasBounds.width)),\r\n            y: Math.max(0, Math.min(y, canvasBounds.height)),\r\n            snapGuideLines: []\r\n        };\r\n    }\r\n\r\n    let snappedX = gridSize > 0 ? Math.round(x / gridSize) * gridSize : x;\r\n    let snappedY = gridSize > 0 ? Math.round(y / gridSize) * gridSize : y;\r\n    let snapGuideLines = [];\r\n\r\n    // Snap to other elements\r\n    snapPoints.forEach((point) => {\r\n        if (Math.abs(x - point.x) <= snapThreshold) {\r\n            snappedX = point.x;\r\n            snapGuideLines.push({ vertical: true, position: point.x });\r\n        }\r\n        if (Math.abs(y - point.y) <= snapThreshold) {\r\n            snappedY = point.y;\r\n            snapGuideLines.push({ vertical: false, position: point.y });\r\n        }\r\n    });\r\n\r\n    // Clamp within canvas bounds\r\n    snappedX = Math.max(0, Math.min(snappedX, canvasBounds.width));\r\n    snappedY = Math.max(0, Math.min(snappedY, canvasBounds.height));\r\n\r\n    return { x: snappedX, y: snappedY, snapGuideLines };\r\n};\r\n\r\nconst getElementBounds = (element) => ({\r\n    left: element.position.desktop?.x || 0,\r\n    top: element.position.desktop?.y || 0,\r\n    right: (element.position.desktop?.x || 0) + (element.size?.width || 200),\r\n    bottom: (element.position.desktop?.y || 0) + (element.size?.height || 50),\r\n    centerX: (element.position.desktop?.x || 0) + (element.size?.width || 200) / 2,\r\n    centerY: (element.position.desktop?.y || 0) + (element.size?.height || 50) / 2,\r\n});\r\n\r\nconst Element = React.memo(({\r\n                                element,\r\n                                isSelected,\r\n                                onSelectElement,\r\n                                onUpdatePosition,\r\n                                viewMode,\r\n                                zoomLevel,\r\n                                gridSize,\r\n                                onContextMenu,\r\n                                canvasRef,\r\n                                snapPoints,\r\n                                canvasBounds,\r\n                                onUpdateGuidelines\r\n                            }) => {\r\n    const { id, type, componentData = {}, position = {}, size = { width: 200, height: 50 }, styles = {} } = element;\r\n    const elementRef = useRef(null);\r\n    const [tempPosition, setTempPosition] = useState(null);\r\n\r\n    const [{ isDragging }, drag] = useDrag(() => ({\r\n        type: ItemTypes.EXISTING_ELEMENT,\r\n        item: () => {\r\n            // Tính toán offset chính xác khi bắt đầu drag\r\n            const currentPos = position[viewMode] || { x: 0, y: 0 };\r\n            return {\r\n                id,\r\n                elementId: id,\r\n                initialPosition: currentPos,\r\n                type: 'move'\r\n            };\r\n        },\r\n        collect: (monitor) => ({\r\n            isDragging: !!monitor.isDragging(),\r\n        }),\r\n    }), [id, position, viewMode]);\r\n\r\n    // Reset temp position khi không drag\r\n    useEffect(() => {\r\n        if (!isDragging) {\r\n            setTempPosition(null);\r\n            onUpdateGuidelines([]);\r\n        }\r\n    }, [isDragging, onUpdateGuidelines]);\r\n\r\n    const handleMouseDown = (e) => {\r\n        e.stopPropagation();\r\n        onSelectElement(id, e.ctrlKey || e.metaKey);\r\n    };\r\n\r\n    const handleContextMenu = (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        onContextMenu(id, { x: e.clientX, y: e.clientY });\r\n    };\r\n\r\n    const currentPosition = tempPosition || position[viewMode] || { x: 0, y: 0 };\r\n\r\n    return (\r\n        <div\r\n            ref={(node) => {\r\n                elementRef.current = node;\r\n                drag(node);\r\n            }}\r\n            className={`lpb-canvas-element ${isSelected ? 'lpb-canvas-element-selected' : ''} ${isDragging ? 'lpb-canvas-element-dragging' : ''}`}\r\n            style={{\r\n                position: 'absolute',\r\n                left: currentPosition.x,\r\n                top: currentPosition.y,\r\n                width: size.width,\r\n                height: size.height,\r\n                zIndex: isDragging ? 1000 : (position.z || 1),\r\n                cursor: isDragging ? 'grabbing' : isSelected ? 'move' : 'pointer',\r\n                opacity: isDragging ? 0.7 : 1,\r\n                transition: isDragging ? 'none' : 'all 0.1s ease',\r\n                boxShadow: isDragging ? '0 8px 24px rgba(0,0,0,0.3)' : isSelected ? '0 0 0 2px #3b82f6' : 'none',\r\n                transform: isDragging ? 'rotate(1deg)' : 'none',\r\n                ...styles,\r\n            }}\r\n            onMouseDown={handleMouseDown}\r\n            onContextMenu={handleContextMenu}\r\n        >\r\n            {(() => {\r\n                switch (type) {\r\n                    case 'heading':\r\n                        return (\r\n                            <h2 style={{\r\n                                fontSize: componentData.fontSize || '1.5rem',\r\n                                color: componentData.color || '#1f2937',\r\n                                margin: 0,\r\n                                userSelect: 'none',\r\n                                pointerEvents: 'none',\r\n                                padding: '4px'\r\n                            }}>\r\n                                {componentData.content || 'Tiêu đề'}\r\n                            </h2>\r\n                        );\r\n                    case 'paragraph':\r\n                        return (\r\n                            <p style={{\r\n                                fontSize: componentData.fontSize || '1rem',\r\n                                color: componentData.color || '#1f2937',\r\n                                margin: 0,\r\n                                userSelect: 'none',\r\n                                pointerEvents: 'none',\r\n                                padding: '4px'\r\n                            }}>\r\n                                {componentData.content || 'Đoạn văn'}\r\n                            </p>\r\n                        );\r\n                    case 'button':\r\n                        return (\r\n                            <button style={{\r\n                                padding: '8px 16px',\r\n                                borderRadius: '6px',\r\n                                background: componentData.background || '#3b82f6',\r\n                                color: componentData.color || '#fff',\r\n                                border: 'none',\r\n                                cursor: 'pointer',\r\n                                userSelect: 'none',\r\n                                pointerEvents: 'none',\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                fontSize: '14px',\r\n                                fontWeight: '500'\r\n                            }}>\r\n                                {componentData.content || 'Button'}\r\n                            </button>\r\n                        );\r\n                    case 'image':\r\n                        return (\r\n                            <img\r\n                                src={componentData.src || 'https://via.placeholder.com/200x150'}\r\n                                alt=\"Image\"\r\n                                style={{\r\n                                    width: '100%',\r\n                                    height: '100%',\r\n                                    objectFit: 'cover',\r\n                                    userSelect: 'none',\r\n                                    pointerEvents: 'none',\r\n                                    borderRadius: '4px'\r\n                                }}\r\n                            />\r\n                        );\r\n                    case 'form':\r\n                        return (\r\n                            <div style={{\r\n                                display: 'flex',\r\n                                flexDirection: 'column',\r\n                                gap: '8px',\r\n                                userSelect: 'none',\r\n                                pointerEvents: 'none',\r\n                                height: '100%',\r\n                                padding: '8px'\r\n                            }}>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter text...\"\r\n                                    style={{\r\n                                        padding: '8px',\r\n                                        borderRadius: '4px',\r\n                                        border: '1px solid #d1d5db',\r\n                                        fontSize: '14px'\r\n                                    }}\r\n                                    readOnly\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    style={{\r\n                                        background: '#3b82f6',\r\n                                        color: '#fff',\r\n                                        padding: '8px 16px',\r\n                                        borderRadius: '4px',\r\n                                        border: 'none',\r\n                                        fontSize: '14px',\r\n                                        fontWeight: '500'\r\n                                    }}\r\n                                >\r\n                                    Submit\r\n                                </button>\r\n                            </div>\r\n                        );\r\n                    default:\r\n                        return (\r\n                            <div style={{\r\n                                userSelect: 'none',\r\n                                pointerEvents: 'none',\r\n                                width: '100%',\r\n                                height: '100%',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                justifyContent: 'center',\r\n                                background: '#f3f4f6',\r\n                                borderRadius: '4px',\r\n                                color: '#6b7280',\r\n                                fontSize: '14px'\r\n                            }}>\r\n                                {componentData.content || type || 'Element'}\r\n                            </div>\r\n                        );\r\n                }\r\n            })()}\r\n        </div>\r\n    );\r\n});\r\n\r\nconst Canvas = React.memo(({\r\n                               pageData,\r\n                               selectedIds,\r\n                               onSelectElement,\r\n                               onUpdatePosition,\r\n                               onUpdateSize,\r\n                               onDeleteElement,\r\n                               onAddElement,\r\n                               onGroupElements,\r\n                               viewMode,\r\n                               zoomLevel,\r\n                               gridSize,\r\n                               showGrid,\r\n                           }) => {\r\n    const canvasRef = useRef(null);\r\n    const [guidelines, setGuidelines] = useState([]);\r\n    const [contextMenu, setContextMenu] = useState(null);\r\n    const [dragPreview, setDragPreview] = useState(null);\r\n    const [isDraggingElement, setIsDraggingElement] = useState(false);\r\n\r\n    const canvasBounds = {\r\n        width: pageData?.canvas?.width || 1200,\r\n        height: pageData?.canvas?.height || 1000,\r\n    };\r\n\r\n    // Generate snap points\r\n    const snapPoints = React.useMemo(() => {\r\n        const points = pageData?.elements?.flatMap((el) => {\r\n            const bounds = getElementBounds(el);\r\n            return [\r\n                { x: bounds.left, y: bounds.top, elementId: el.id },\r\n                { x: bounds.right, y: bounds.bottom, elementId: el.id },\r\n                { x: bounds.centerX, y: bounds.centerY, elementId: el.id },\r\n                { x: bounds.left, y: bounds.centerY, elementId: el.id },\r\n                { x: bounds.right, y: bounds.centerY, elementId: el.id },\r\n                { x: bounds.centerX, y: bounds.top, elementId: el.id },\r\n                { x: bounds.centerX, y: bounds.bottom, elementId: el.id },\r\n            ];\r\n        }) || [];\r\n\r\n        // Canvas edges\r\n        points.push(\r\n            { x: 0, y: 0 },\r\n            { x: canvasBounds.width, y: 0 },\r\n            { x: 0, y: canvasBounds.height },\r\n            { x: canvasBounds.width, y: canvasBounds.height },\r\n            { x: canvasBounds.width / 2, y: canvasBounds.height / 2 }\r\n        );\r\n\r\n        return points;\r\n    }, [pageData?.elements, canvasBounds]);\r\n\r\n    const [{ isOver }, drop] = useDrop(() => ({\r\n        accept: [ItemTypes.ELEMENT, ItemTypes.EXISTING_ELEMENT],\r\n        hover: (item, monitor) => {\r\n            const clientOffset = monitor.getClientOffset();\r\n            if (!clientOffset || !canvasRef.current) return;\r\n\r\n            const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef, zoomLevel);\r\n\r\n            if (item.elementId) {\r\n                // Di chuyển element hiện có\r\n                setIsDraggingElement(true);\r\n                const element = pageData?.elements?.find(el => el.id === item.elementId);\r\n                if (element && element.position) {\r\n                    const elementRef = canvasRef.current.querySelector(`[data-element-id=\"${item.elementId}\"]`);\r\n                    const currentElement = pageData?.elements?.find(el => el.id === item.elementId);\r\n\r\n                    if (currentElement) {\r\n                        // Tính toán vị trí mới\r\n                        const newPos = {\r\n                            x: Math.max(0, Math.min(pos.x - (currentElement.size?.width || 200) / 2, canvasBounds.width - (currentElement.size?.width || 200))),\r\n                            y: Math.max(0, Math.min(pos.y - (currentElement.size?.height || 50) / 2, canvasBounds.height - (currentElement.size?.height || 50)))\r\n                        };\r\n\r\n                        // Snap nếu cần\r\n                        const snapped = snapToGrid(\r\n                            newPos.x,\r\n                            newPos.y,\r\n                            showGrid ? gridSize : 0,\r\n                            snapPoints.filter(p => p.elementId !== item.elementId),\r\n                            canvasBounds,\r\n                            true\r\n                        );\r\n\r\n                        // Cập nhật guidelines\r\n                        setGuidelines(snapped.snapGuideLines || []);\r\n\r\n                        // Cập nhật temp position cho element\r\n                        const elementComponent = pageData?.elements?.find(el => el.id === item.elementId);\r\n                        if (elementComponent) {\r\n                            // Trigger re-render với temp position\r\n                            onUpdatePosition(item.elementId, { [viewMode]: snapped }, false);\r\n                        }\r\n                    }\r\n                }\r\n            } else if (item.json) {\r\n                // Preview element mới\r\n                const elementSize = item.json.size || { width: 200, height: 50 };\r\n                const previewPos = {\r\n                    x: Math.max(0, Math.min(pos.x - elementSize.width / 2, canvasBounds.width - elementSize.width)),\r\n                    y: Math.max(0, Math.min(pos.y - elementSize.height / 2, canvasBounds.height - elementSize.height))\r\n                };\r\n\r\n                const snapped = snapToGrid(\r\n                    previewPos.x,\r\n                    previewPos.y,\r\n                    showGrid ? gridSize : 0,\r\n                    snapPoints,\r\n                    canvasBounds\r\n                );\r\n\r\n                setGuidelines(snapped.snapGuideLines || []);\r\n                setDragPreview({\r\n                    ...item.json,\r\n                    position: snapped,\r\n                    size: elementSize\r\n                });\r\n            }\r\n        },\r\n        drop: (item, monitor) => {\r\n            const clientOffset = monitor.getClientOffset();\r\n            setIsDraggingElement(false);\r\n\r\n            if (!clientOffset || !canvasRef.current) {\r\n                toast.error('Không thể xác định vị trí thả!');\r\n                setDragPreview(null);\r\n                setGuidelines([]);\r\n                return;\r\n            }\r\n\r\n            const pos = getCanvasPosition(clientOffset.x, clientOffset.y, canvasRef, zoomLevel);\r\n\r\n            if (item.elementId) {\r\n                // Di chuyển element hiện có - đã được cập nhật trong hover\r\n                setGuidelines([]);\r\n                toast.success('Đã di chuyển phần tử!');\r\n            } else if (item.json) {\r\n                // Thêm element mới\r\n                const elementSize = item.json.size || { width: 200, height: 50 };\r\n                const finalPos = {\r\n                    x: Math.max(0, Math.min(pos.x - elementSize.width / 2, canvasBounds.width - elementSize.width)),\r\n                    y: Math.max(0, Math.min(pos.y - elementSize.height / 2, canvasBounds.height - elementSize.height))\r\n                };\r\n\r\n                const snapped = snapToGrid(\r\n                    finalPos.x,\r\n                    finalPos.y,\r\n                    showGrid ? gridSize : 0,\r\n                    snapPoints,\r\n                    canvasBounds\r\n                );\r\n\r\n                const newElement = {\r\n                    id: `${item.type || item.json.type}-${Date.now()}`,\r\n                    type: item.json.type,\r\n                    componentData: item.json.componentData || {},\r\n                    position: {\r\n                        [viewMode]: snapped,\r\n                        desktop: snapped,\r\n                        tablet: snapped,\r\n                        mobile: snapped\r\n                    },\r\n                    size: elementSize,\r\n                    styles: item.json.styles || {},\r\n                };\r\n\r\n                onAddElement(newElement);\r\n                toast.success('Đã thêm phần tử mới!');\r\n            }\r\n\r\n            setDragPreview(null);\r\n            setGuidelines([]);\r\n        },\r\n        collect: (monitor) => ({\r\n            isOver: !!monitor.isOver(),\r\n        }),\r\n    }), [viewMode, zoomLevel, gridSize, showGrid, snapPoints, canvasBounds, onAddElement, onUpdatePosition, pageData?.elements]);\r\n\r\n    const handleCanvasClick = (e) => {\r\n        if (e.target === canvasRef.current || e.target.classList.contains('lpb-canvas')) {\r\n            onSelectElement([]);\r\n            setContextMenu(null);\r\n        }\r\n    };\r\n\r\n    const handleContextMenu = (id, position) => {\r\n        setContextMenu({ id, position });\r\n    };\r\n\r\n    const handleUpdateGuidelines = useCallback((newGuidelines) => {\r\n        setGuidelines(newGuidelines);\r\n    }, []);\r\n\r\n    // Keyboard shortcuts\r\n    const handleKeyDown = useCallback((e) => {\r\n        if (!selectedIds.length) return;\r\n\r\n        const nudgeDistance = e.shiftKey ? 10 : 1;\r\n\r\n        switch (e.key) {\r\n            case 'ArrowUp':\r\n                e.preventDefault();\r\n                selectedIds.forEach((id) => {\r\n                    const element = pageData.elements.find((el) => el.id === id);\r\n                    if (element) {\r\n                        const currentPos = element.position[viewMode] || { x: 0, y: 0 };\r\n                        onUpdatePosition(id, {\r\n                            [viewMode]: {\r\n                                x: currentPos.x,\r\n                                y: Math.max(0, currentPos.y - nudgeDistance)\r\n                            }\r\n                        }, true);\r\n                    }\r\n                });\r\n                break;\r\n            case 'ArrowDown':\r\n                e.preventDefault();\r\n                selectedIds.forEach((id) => {\r\n                    const element = pageData.elements.find((el) => el.id === id);\r\n                    if (element) {\r\n                        const currentPos = element.position[viewMode] || { x: 0, y: 0 };\r\n                        onUpdatePosition(id, {\r\n                            [viewMode]: {\r\n                                x: currentPos.x,\r\n                                y: Math.min(canvasBounds.height - (element.size?.height || 50), currentPos.y + nudgeDistance)\r\n                            }\r\n                        }, true);\r\n                    }\r\n                });\r\n                break;\r\n            case 'ArrowLeft':\r\n                e.preventDefault();\r\n                selectedIds.forEach((id) => {\r\n                    const element = pageData.elements.find((el) => el.id === id);\r\n                    if (element) {\r\n                        const currentPos = element.position[viewMode] || { x: 0, y: 0 };\r\n                        onUpdatePosition(id, {\r\n                            [viewMode]: {\r\n                                x: Math.max(0, currentPos.x - nudgeDistance),\r\n                                y: currentPos.y\r\n                            }\r\n                        }, true);\r\n                    }\r\n                });\r\n                break;\r\n            case 'ArrowRight':\r\n                e.preventDefault();\r\n                selectedIds.forEach((id) => {\r\n                    const element = pageData.elements.find((el) => el.id === id);\r\n                    if (element) {\r\n                        const currentPos = element.position[viewMode] || { x: 0, y: 0 };\r\n                        onUpdatePosition(id, {\r\n                            [viewMode]: {\r\n                                x: Math.min(canvasBounds.width - (element.size?.width || 200), currentPos.x + nudgeDistance),\r\n                                y: currentPos.y\r\n                            }\r\n                        }, true);\r\n                    }\r\n                });\r\n                break;\r\n            case 'Delete':\r\n            case 'Backspace':\r\n                e.preventDefault();\r\n                selectedIds.forEach((id) => onDeleteElement(id));\r\n                toast.success('Đã xóa phần tử!');\r\n                break;\r\n            case 'Escape':\r\n                e.preventDefault();\r\n                onSelectElement([]);\r\n                setContextMenu(null);\r\n                break;\r\n        }\r\n    }, [selectedIds, onUpdatePosition, onDeleteElement, onSelectElement, viewMode, pageData?.elements, canvasBounds]);\r\n\r\n    useHotkeys('ctrl+a, cmd+a', (e) => {\r\n        e.preventDefault();\r\n        onSelectElement(pageData?.elements?.map((el) => el.id) || []);\r\n    }, [pageData?.elements, onSelectElement]);\r\n\r\n    useHotkeys('ctrl+g, cmd+g', (e) => {\r\n        e.preventDefault();\r\n        if (selectedIds.length > 1) {\r\n            onGroupElements(selectedIds);\r\n        }\r\n    }, [selectedIds, onGroupElements]);\r\n\r\n    return (\r\n        <div\r\n            className=\"lpb-canvas-wrapper\"\r\n            onKeyDown={handleKeyDown}\r\n            tabIndex={0}\r\n            style={{ outline: 'none', height: '100%', overflow: 'auto' }}\r\n        >\r\n            <div\r\n                ref={(node) => {\r\n                    canvasRef.current = node;\r\n                    drop(node);\r\n                }}\r\n                className={`lpb-canvas ${\r\n                    viewMode === 'mobile' ? 'lpb-canvas-mobile' :\r\n                        viewMode === 'tablet' ? 'lpb-canvas-tablet' : ''\r\n                }`}\r\n                style={{\r\n                    position: 'relative',\r\n                    width: canvasBounds.width,\r\n                    height: Math.max(canvasBounds.height, 600),\r\n                    background: pageData?.canvas?.background || '#ffffff',\r\n                    transform: `scale(${zoomLevel / 100})`,\r\n                    transformOrigin: 'top left',\r\n                    cursor: isOver ? 'copy' : 'default',\r\n                    overflow: 'visible',\r\n                    border: '1px solid #e5e7eb'\r\n                }}\r\n                onClick={handleCanvasClick}\r\n                onContextMenu={(e) => e.preventDefault()}\r\n            >\r\n                {/* Grid overlay */}\r\n                {showGrid && (\r\n                    <div\r\n                        className=\"lpb-canvas-grid\"\r\n                        style={{\r\n                            position: 'absolute',\r\n                            top: 0,\r\n                            left: 0,\r\n                            width: '100%',\r\n                            height: '100%',\r\n                            backgroundImage: `\r\n                                linear-gradient(to right, #f1f5f9 1px, transparent 1px),\r\n                                linear-gradient(to bottom, #f1f5f9 1px, transparent 1px)\r\n                            `,\r\n                            backgroundSize: `${gridSize}px ${gridSize}px`,\r\n                            pointerEvents: 'none',\r\n                            opacity: 0.6,\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n                {/* Guidelines */}\r\n                <Guidelines guidelines={guidelines} zoomLevel={zoomLevel} />\r\n\r\n                {/* Rulers */}\r\n                <Rulers\r\n                    canvasWidth={canvasBounds.width}\r\n                    canvasHeight={canvasBounds.height}\r\n                    zoomLevel={zoomLevel}\r\n                />\r\n\r\n                {/* Elements */}\r\n                {pageData?.elements?.map((element) => (\r\n                    <div key={element.id} data-element-id={element.id}>\r\n                        <Element\r\n                            element={element}\r\n                            isSelected={selectedIds.includes(element.id)}\r\n                            onSelectElement={onSelectElement}\r\n                            onUpdatePosition={onUpdatePosition}\r\n                            viewMode={viewMode}\r\n                            zoomLevel={zoomLevel}\r\n                            gridSize={showGrid ? gridSize : 0}\r\n                            onContextMenu={handleContextMenu}\r\n                            canvasRef={canvasRef}\r\n                            snapPoints={snapPoints}\r\n                            canvasBounds={canvasBounds}\r\n                            onUpdateGuidelines={handleUpdateGuidelines}\r\n                        />\r\n                    </div>\r\n                ))}\r\n\r\n                {/* Drag preview */}\r\n                {dragPreview && (\r\n                    <div\r\n                        style={{\r\n                            position: 'absolute',\r\n                            left: dragPreview.position.x,\r\n                            top: dragPreview.position.y,\r\n                            width: dragPreview.size.width,\r\n                            height: dragPreview.size.height,\r\n                            border: '2px dashed #3b82f6',\r\n                            backgroundColor: 'rgba(59, 130, 246, 0.1)',\r\n                            pointerEvents: 'none',\r\n                            zIndex: 999,\r\n                            borderRadius: '4px'\r\n                        }}\r\n                    />\r\n                )}\r\n\r\n                {/* Selection overlay */}\r\n                <SelectionOverlay\r\n                    selectedElements={pageData?.elements?.filter((el) => selectedIds.includes(el.id)) || []}\r\n                    onResize={onUpdateSize}\r\n                    zoomLevel={zoomLevel}\r\n                    viewMode={viewMode}\r\n                />\r\n\r\n                {/* Context menu */}\r\n                {contextMenu && (\r\n                    <div\r\n                        className=\"lpb-context-menu\"\r\n                        style={{\r\n                            position: 'fixed',\r\n                            left: contextMenu.position.x,\r\n                            top: contextMenu.position.y,\r\n                            background: 'white',\r\n                            border: '1px solid #e5e7eb',\r\n                            borderRadius: '8px',\r\n                            boxShadow: '0 4px 16px rgba(0,0,0,0.15)',\r\n                            zIndex: 10000,\r\n                            minWidth: '160px',\r\n                            overflow: 'hidden'\r\n                        }}\r\n                        onClick={(e) => e.stopPropagation()}\r\n                    >\r\n                        <div\r\n                            className=\"lpb-context-menu-item\"\r\n                            style={{\r\n                                padding: '12px 16px',\r\n                                cursor: 'pointer',\r\n                                borderBottom: '1px solid #f3f4f6',\r\n                                fontSize: '14px',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '8px'\r\n                            }}\r\n                            onMouseEnter={(e) => e.target.style.backgroundColor = '#f8fafc'}\r\n                            onMouseLeave={(e) => e.target.style.backgroundColor = 'transparent'}\r\n                            onClick={() => {\r\n                                const element = pageData?.elements?.find(el => el.id === contextMenu.id);\r\n                                if (element) {\r\n                                    const newElement = {\r\n                                        ...element,\r\n                                        id: `${element.type}-copy-${Date.now()}`,\r\n                                        position: {\r\n                                            ...element.position,\r\n                                            [viewMode]: {\r\n                                                x: (element.position[viewMode]?.x || 0) + 20,\r\n                                                y: (element.position[viewMode]?.y || 0) + 20\r\n                                            }\r\n                                        }\r\n                                    };\r\n                                    onAddElement(newElement);\r\n                                    toast.success('Đã nhân bản phần tử!');\r\n                                }\r\n                                setContextMenu(null);\r\n                            }}\r\n                        >\r\n                            📋 Duplicate\r\n                        </div>\r\n                        <div\r\n                            className=\"lpb-context-menu-item\"\r\n                            style={{\r\n                                padding: '12px 16px',\r\n                                cursor: 'pointer',\r\n                                fontSize: '14px',\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '8px',\r\n                                color: '#ef4444'\r\n                            }}\r\n                            onMouseEnter={(e) => {\r\n                                e.target.style.backgroundColor = '#fef2f2';\r\n                                e.target.style.color = '#dc2626';\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                                e.target.style.backgroundColor = 'transparent';\r\n                                e.target.style.color = '#ef4444';\r\n                            }}\r\n                            onClick={() => {\r\n                                onDeleteElement(contextMenu.id);\r\n                                setContextMenu(null);\r\n                                toast.success('Đã xóa phần tử!');\r\n                            }}\r\n                        >\r\n                            🗑️ Delete\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default Canvas;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}